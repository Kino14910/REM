var app=function(){"use strict";function t(){}const e=t=>t;function n(t,e){for(const n in e)t[n]=e[n];return t}function s(t){return t()}function o(){return Object.create(null)}function i(t){t.forEach(s)}function r(t){return"function"==typeof t}function l(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}let a;function c(t,e){return a||(a=document.createElement("a")),a.href=e,t===a.href}function u(t,e,n,s){if(t){const o=d(t,e,n,s);return t[0](o)}}function d(t,e,s,o){return t[1]&&o?n(s.ctx.slice(),t[1](o(e))):s.ctx}function f(t,e,n,s){if(t[2]&&s){const o=t[2](s(n));if(void 0===e.dirty)return o;if("object"==typeof o){const t=[],n=Math.max(e.dirty.length,o.length);for(let s=0;s<n;s+=1)t[s]=e.dirty[s]|o[s];return t}return e.dirty|o}return e.dirty}function h(t,e,n,s,o,i){if(o){const r=d(e,n,s,i);t.p(r,o)}}function p(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let t=0;t<n;t++)e[t]=-1;return e}return-1}function m(t){const e={};for(const n in t)"$"!==n[0]&&(e[n]=t[n]);return e}function g(t){return null==t?"":t}function v(e){return e&&r(e.destroy)?e.destroy:t}const $="undefined"!=typeof window;let w=$?()=>window.performance.now():()=>Date.now(),y=$?t=>requestAnimationFrame(t):t;const x=new Set;function b(t){x.forEach((e=>{e.c(t)||(x.delete(e),e.f())})),0!==x.size&&y(b)}function k(t){let e;return 0===x.size&&y(b),{promise:new Promise((n=>{x.add(e={c:t,f:n})})),abort(){x.delete(e)}}}function _(t,e){t.appendChild(e)}function C(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function L(t){const e=D("style");return function(t,e){_(t.head||t,e)}(C(t),e),e.sheet}function A(t,e,n){t.insertBefore(e,n||null)}function E(t){t.parentNode.removeChild(t)}function P(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function D(t){return document.createElement(t)}function U(t){return document.createTextNode(t)}function S(){return U(" ")}function N(){return U("")}function z(t,e,n,s){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n,s)}function q(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function M(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function B(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function R(t,e){t.value=null==e?"":e}function T(t,e,n,s){null===n?t.style.removeProperty(e):t.style.setProperty(e,n,s?"important":"")}function O(t,e,{bubbles:n=!1,cancelable:s=!1}={}){const o=document.createEvent("CustomEvent");return o.initCustomEvent(t,n,s,e),o}const j=new Map;let I,H=0;function W(t,e,n,s,o,i,r,l=0){const a=16.666/s;let c="{\n";for(let t=0;t<=1;t+=a){const s=e+(n-e)*i(t);c+=100*t+`%{${r(s,1-s)}}\n`}const u=c+`100% {${r(n,1-n)}}\n}`,d=`__svelte_${function(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}(u)}_${l}`,f=C(t),{stylesheet:h,rules:p}=j.get(f)||function(t,e){const n={stylesheet:L(e),rules:{}};return j.set(t,n),n}(f,t);p[d]||(p[d]=!0,h.insertRule(`@keyframes ${d} ${u}`,h.cssRules.length));const m=t.style.animation||"";return t.style.animation=`${m?`${m}, `:""}${d} ${s}ms linear ${o}ms 1 both`,H+=1,d}function V(t,e){const n=(t.style.animation||"").split(", "),s=n.filter(e?t=>t.indexOf(e)<0:t=>-1===t.indexOf("__svelte")),o=n.length-s.length;o&&(t.style.animation=s.join(", "),H-=o,H||y((()=>{H||(j.forEach((t=>{const{stylesheet:e}=t;let n=e.cssRules.length;for(;n--;)e.deleteRule(n);t.rules={}})),j.clear())})))}function F(t){I=t}function Y(){if(!I)throw new Error("Function called outside component initialization");return I}function X(t){Y().$$.on_mount.push(t)}function K(t){Y().$$.on_destroy.push(t)}function J(){const t=Y();return(e,n,{cancelable:s=!1}={})=>{const o=t.$$.callbacks[e];if(o){const i=O(e,n,{cancelable:s});return o.slice().forEach((e=>{e.call(t,i)})),!i.defaultPrevented}return!0}}function G(t,e){return Y().$$.context.set(t,e),e}function Q(t){return Y().$$.context.get(t)}function Z(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach((t=>t.call(this,e)))}const tt=[],et=[],nt=[],st=[],ot=Promise.resolve();let it=!1;function rt(t){nt.push(t)}function lt(t){st.push(t)}const at=new Set;let ct,ut=0;function dt(){const t=I;do{for(;ut<tt.length;){const t=tt[ut];ut++,F(t),ft(t.$$)}for(F(null),tt.length=0,ut=0;et.length;)et.pop()();for(let t=0;t<nt.length;t+=1){const e=nt[t];at.has(e)||(at.add(e),e())}nt.length=0}while(tt.length);for(;st.length;)st.pop()();it=!1,at.clear(),F(t)}function ft(t){if(null!==t.fragment){t.update(),i(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(rt)}}function ht(){return ct||(ct=Promise.resolve(),ct.then((()=>{ct=null}))),ct}function pt(t,e,n){t.dispatchEvent(O(`${e?"intro":"outro"}${n}`))}const mt=new Set;let gt;function vt(){gt={r:0,c:[],p:gt}}function $t(){gt.r||i(gt.c),gt=gt.p}function wt(t,e){t&&t.i&&(mt.delete(t),t.i(e))}function yt(t,e,n,s){if(t&&t.o){if(mt.has(t))return;mt.add(t),gt.c.push((()=>{mt.delete(t),s&&(n&&t.d(1),s())})),t.o(e)}}const xt={duration:0};function bt(n,s,o){let l,a=s(n,o),c=!0;const u=gt;function d(){const{delay:s=0,duration:o=300,easing:r=e,tick:d=t,css:f}=a||xt;f&&(l=W(n,1,0,o,s,r,f));const h=w()+s,p=h+o;rt((()=>pt(n,!1,"start"))),k((t=>{if(c){if(t>=p)return d(0,1),pt(n,!1,"end"),--u.r||i(u.c),!1;if(t>=h){const e=r((t-h)/o);d(1-e,e)}}return c}))}return u.r+=1,r(a)?ht().then((()=>{a=a(),d()})):d(),{end(t){t&&a.tick&&a.tick(1,0),c&&(l&&V(n,l),c=!1)}}}function kt(t,e){const n={},s={},o={$$scope:1};let i=t.length;for(;i--;){const r=t[i],l=e[i];if(l){for(const t in r)t in l||(s[t]=1);for(const t in l)o[t]||(n[t]=l[t],o[t]=1);t[i]=l}else for(const t in r)o[t]=1}for(const t in s)t in n||(n[t]=void 0);return n}function _t(t){return"object"==typeof t&&null!==t?t:{}}function Ct(t,e,n){const s=t.$$.props[e];void 0!==s&&(t.$$.bound[s]=n,n(t.$$.ctx[s]))}function Lt(t){t&&t.c()}function At(t,e,n,o){const{fragment:l,on_mount:a,on_destroy:c,after_update:u}=t.$$;l&&l.m(e,n),o||rt((()=>{const e=a.map(s).filter(r);c?c.push(...e):i(e),t.$$.on_mount=[]})),u.forEach(rt)}function Et(t,e){const n=t.$$;null!==n.fragment&&(i(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Pt(t,e){-1===t.$$.dirty[0]&&(tt.push(t),it||(it=!0,ot.then(dt)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Dt(e,n,s,r,l,a,c,u=[-1]){const d=I;F(e);const f=e.$$={fragment:null,ctx:null,props:a,update:t,not_equal:l,bound:o(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(d?d.$$.context:[])),callbacks:o(),dirty:u,skip_bound:!1,root:n.target||d.$$.root};c&&c(f.root);let h=!1;if(f.ctx=s?s(e,n.props||{},((t,n,...s)=>{const o=s.length?s[0]:n;return f.ctx&&l(f.ctx[t],f.ctx[t]=o)&&(!f.skip_bound&&f.bound[t]&&f.bound[t](o),h&&Pt(e,t)),n})):[],f.update(),h=!0,i(f.before_update),f.fragment=!!r&&r(f.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);f.fragment&&f.fragment.l(t),t.forEach(E)}else f.fragment&&f.fragment.c();n.intro&&wt(e.$$.fragment),At(e,n.target,n.anchor,n.customElement),dt()}F(d)}class Ut{$destroy(){Et(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function St(t,e,n){const s=t.slice();return s[6]=e[n],s[8]=n,s}function Nt(t){let e,n,s,o,i=t[6]+"";function r(){return t[5](t[8])}return{c(){e=D("div"),n=U(i),M(e,"class","tab tab-text svelte-1fjb39z")},m(t,i){A(t,e,i),_(e,n),s||(o=z(e,"click",r),s=!0)},p(e,s){t=e,1&s&&i!==(i=t[6]+"")&&B(n,i)},d(t){t&&E(e),s=!1,o()}}}function zt(t){let e;function n(t,e){return"我的"===t[6]||"发现"===t[6]?Mt:qt}let s=n(t),o=s(t);return{c(){o.c(),e=N()},m(t,n){o.m(t,n),A(t,e,n)},p(t,i){s===(s=n(t))&&o?o.p(t,i):(o.d(1),o=s(t),o&&(o.c(),o.m(e.parentNode,e)))},d(t){o.d(t),t&&E(e)}}}function qt(t){let e,n,s,o,r,l,a,c,u=t[6]+"";function d(){return t[4](t[8])}return{c(){e=D("div"),n=D("span"),s=U(u),o=S(),r=D("div"),r.textContent="⨯",l=S(),M(n,"class","tab-text svelte-1fjb39z"),M(r,"class","column cross svelte-1fjb39z"),M(e,"class","tab selected column svelte-1fjb39z"),T(e,"padding-right","2px")},m(i,u){A(i,e,u),_(e,n),_(n,s),_(e,o),_(e,r),_(e,l),a||(c=[z(r,"click",t[2]),z(e,"click",d)],a=!0)},p(e,n){t=e,1&n&&u!==(u=t[6]+"")&&B(s,u)},d(t){t&&E(e),a=!1,i(c)}}}function Mt(t){let e,n,s,o,i=t[6]+"";function r(){return t[3](t[8])}return{c(){e=D("div"),n=U(i),M(e,"class","tab selected tab-text svelte-1fjb39z")},m(t,i){A(t,e,i),_(e,n),s||(o=z(e,"click",r),s=!0)},p(e,s){t=e,1&s&&i!==(i=t[6]+"")&&B(n,i)},d(t){t&&E(e),s=!1,o()}}}function Bt(t){let e;function n(t,e){return t[8]===t[1]?zt:Nt}let s=n(t),o=s(t);return{c(){o.c(),e=N()},m(t,n){o.m(t,n),A(t,e,n)},p(t,i){s===(s=n(t))&&o?o.p(t,i):(o.d(1),o=s(t),o&&(o.c(),o.m(e.parentNode,e)))},d(t){o.d(t),t&&E(e)}}}function Rt(e){let n,s=e[0],o=[];for(let t=0;t<s.length;t+=1)o[t]=Bt(St(e,s,t));return{c(){n=D("div");for(let t=0;t<o.length;t+=1)o[t].c();M(n,"class","column c svelte-1fjb39z")},m(t,e){A(t,n,e);for(let t=0;t<o.length;t+=1)o[t].m(n,null)},p(t,[e]){if(7&e){let i;for(s=t[0],i=0;i<s.length;i+=1){const r=St(t,s,i);o[i]?o[i].p(r,e):(o[i]=Bt(r),o[i].c(),o[i].m(n,null))}for(;i<o.length;i+=1)o[i].d(1);o.length=s.length}},i:t,o:t,d(t){t&&E(n),P(o,t)}}}function Tt(t){Pager.select(t)}function Ot(t,e,n){let{tabs:s=["我的","发现"]}=e,{selected:o=0}=e;return t.$$set=t=>{"tabs"in t&&n(0,s=t.tabs),"selected"in t&&n(1,o=t.selected)},[s,o,function(){Pager.remove(o)},t=>Tt(t),t=>Tt(t),t=>Tt(t)]}class jt extends Ut{constructor(t){super(),Dt(this,t,Ot,Rt,l,{tabs:0,selected:1})}}function It(t){let e,n,s;return{c(){e=D("span"),n=U(t[2]),M(e,"class",s="avatar iconfont size-"+(t[3]?t[3]:"normal")+" svelte-m9oihy")},m(t,s){A(t,e,s),_(e,n)},p(t,o){4&o&&B(n,t[2]),8&o&&s!==(s="avatar iconfont size-"+(t[3]?t[3]:"normal")+" svelte-m9oihy")&&M(e,"class",s)},d(t){t&&E(e)}}}function Ht(t){let e,n,s,o,i;return{c(){e=D("img"),c(e.src,n=t[2])||M(e,"src",n),M(e,"class","avatar svelte-m9oihy"),M(e,"alt",s="avatar size-"+(t[3]?t[3]:"normal")),M(e,"draggable","false"),M(e,"width",t[4]),M(e,"height",t[5])},m(n,s){A(n,e,s),t[11](e),o||(i=z(e,"load",t[10]),o=!0)},p(t,o){4&o&&!c(e.src,n=t[2])&&M(e,"src",n),8&o&&s!==(s="avatar size-"+(t[3]?t[3]:"normal"))&&M(e,"alt",s),16&o&&M(e,"width",t[4]),32&o&&M(e,"height",t[5])},d(n){n&&E(e),t[11](null),o=!1,i()}}}function Wt(e){let n,s,o,i,r;function l(t,e){return t[1]?Ht:It}let a=l(e),c=a(e);return{c(){n=D("div"),c.c(),M(n,"class",s="column"+(e[7]?" clkable":"")+" svelte-m9oihy"),M(n,"style",o="width: fit-content; heigth: fit-content; overflow: hidden; border-radius: "+e[6]+";"+e[8])},m(t,s){A(t,n,s),c.m(n,null),i||(r=z(n,"click",e[9]),i=!0)},p(t,[e]){a===(a=l(t))&&c?c.p(t,e):(c.d(1),c=a(t),c&&(c.c(),c.m(n,null))),128&e&&s!==(s="column"+(t[7]?" clkable":"")+" svelte-m9oihy")&&M(n,"class",s),320&e&&o!==(o="width: fit-content; heigth: fit-content; overflow: hidden; border-radius: "+t[6]+";"+t[8])&&M(n,"style",o)},i:t,o:t,d(t){t&&E(n),c.d(),i=!1,r()}}}function Vt(t,e,n){const s=J();let{isUrl:o=!0}=e,{avatar:i=""}=e,{size:r=""}=e,{width:l}=e,{height:a}=e,{radius:c="50%"}=e,{clickable:u=!0}=e,{ctx:d=this}=e,{cssText:f=""}=e;return t.$$set=t=>{"isUrl"in t&&n(1,o=t.isUrl),"avatar"in t&&n(2,i=t.avatar),"size"in t&&n(3,r=t.size),"width"in t&&n(4,l=t.width),"height"in t&&n(5,a=t.height),"radius"in t&&n(6,c=t.radius),"clickable"in t&&n(7,u=t.clickable),"ctx"in t&&n(0,d=t.ctx),"cssText"in t&&n(8,f=t.cssText)},[d,o,i,r,l,a,c,u,f,function(t){s("click",t)},function(){s("loaded")},function(t){et[t?"unshift":"push"]((()=>{d=t,n(0,d)}))}]}class Ft extends Ut{constructor(t){super(),Dt(this,t,Vt,Wt,l,{isUrl:1,avatar:2,size:3,width:4,height:5,radius:6,clickable:7,ctx:0,cssText:8})}}class Yt{constructor(t){this.data=t}urls={};async getPlayUrlAsync(t="high"){let e;try{e="low"===t?this.data.l.br:"medium"===t?this.data.m.br:this.data.h.br}catch(n){switch(t){case"low":if(e=!!this.data.h&&this.data.h.br,e)break;case"high":if(e=!!this.data.m&&this.data.m.br,e)break;case"medium":if(e=!!this.data.l&&this.data.l.br,e)break}}let n=(this.urls[t]=await NeteaseApi.getSongUrl(this.data.id,store.get("cookie"),e)).body.data[0].url;const s=await server.getMedia(`ne${this.data.id}`);return s?URL.createObjectURL(new Blob([s])):(server.saveToCache(n,`ne${this.data.id}`),n)}async url(t="high"){return this.urls[t]?this.urls[t]:this.getPlayUrlAsync(t)}title(){return this.data.name}album(){return this.data.al}artist(){return this.data.ar}uri(){return this.data.id}}function Xt(e){let n,s,o,r;return{c(){n=D("input"),M(n,"type","range"),M(n,"style",s=e[1]+";--progress: "+e[0]+"%"),M(n,"step","0.001"),M(n,"class","svelte-1k44m6r")},m(t,s){A(t,n,s),R(n,e[0]),e[6](n),o||(r=[z(n,"change",e[5]),z(n,"input",e[5]),z(n,"mousedown",e[3]),z(n,"mousemove",e[4])],o=!0)},p(t,[e]){3&e&&s!==(s=t[1]+";--progress: "+t[0]+"%")&&M(n,"style",s),1&e&&R(n,t[0])},i:t,o:t,d(t){t&&E(n),e[6](null),o=!1,i(r)}}}function Kt(t,e,n){let s,{value:o}=e,{cssStyle:i=""}=e,r=J(),l=!1;return document.addEventListener("mouseup",(()=>{l&&(l=!1,r("mouseup",s.value))})),t.$$set=t=>{"value"in t&&n(0,o=t.value),"cssStyle"in t&&n(1,i=t.cssStyle)},[o,i,s,function(t){l=!0;let e=t.offsetX/s.offsetWidth*100;n(2,s.value=e,s),r("mousedown",e)},function(){l&&r("mousemove",s.value)},function(){o=function(t){return""===t?null:+t}(this.value),n(0,o)},function(t){et[t?"unshift":"push"]((()=>{s=t,n(2,s)}))}]}class Jt extends Ut{constructor(t){super(),Dt(this,t,Kt,Xt,l,{value:0,cssStyle:1})}}const Gt=Symbol("[[Observers]]");class Qt{[Gt]=new Set;addObserver(t){("function"==typeof t||"object"==typeof t&&t&&"function"==typeof t.update)&&this[Gt].add(t)}removeObserver(t){if(!t)return this.removeAllObservers();this[Gt].delete(t)}removeAllObservers(){this[Gt]=new Set}notifyObservers(...t){for(const e of this[Gt])"function"==typeof e?e.call(this,...t):e.update(this,...t)}}const Zt=new class extends Qt{_metadata={};constructor(t={}){super(),this.setMetadata(t)}setMetadata(t={}){this._metadata.title=t.title||this._metadata.title,this._metadata.album=t.album||this._metadata.album,this._metadata.artist=t.artist||this._metadata.artist,this._metadata.artwork=t.artwork||this._metadata.artwork}getMetadataConfig(){return this._metadata}title(t){return void 0!==t?(this._metadata.title=t,this):this._metadata.title}album(t){return void 0===t?this._metadata.album:(this._metadata.album=t,this)}artist(t){return void 0===t?this._metadata.artist:(this._metadata.artist=t,this)}artwork(t,e){return void 0===t?this._metadata.artwork||[]:(this._metadata.artwork||(this._metadata.artwork=[]),void 0===e?this._metadata.artwork[t]:(this._metadata.artwork[t]=e,this))}setArtwork(t){return this._metadata.artwork=t,this}apply(){navigator.mediaSession.metadata=new MediaMetadata(this._metadata),hooks.send("win:title",`${this._metadata.title} - ${this._metadata.artist}`)}};class te{static map=new Map;HEAD={prev:null,next:null};END=this.HEAD;count=0;append(t,e){const n=this.END,s={prev:n,listener:t,rawListener:e,next:null};return s.prev=n,s.listener=t,s.rawListener=e,s.next=null,n.next=s,this.END=s,te.map.set(e||t,s),this.count++,this}prepend(t,e){const n=this.HEAD,s=n.next,o={prev:n,listener:t,rawListener:e,next:s};return n.next=o,s&&(s.prev=o),te.map.set(e||t,o),this.count++,this}delete(t){let e=te.map,n=e.get(t);if(!n)return;let s=n.prev;return s.next=n.next,n.next&&(n.next.prev=s),e.delete(t),this.count--,requestIdleCallback((()=>{n.prev=null,n.next=null})),this}deleteAll(){let t=this.HEAD;for(;t=t.next;)t.prev=null,t.next=null,te.map.delete(t.rawListener||t.listener);return this.HEAD.next=null,this.count=0,this}[Symbol.iterator](){let t=this.HEAD;return{next:()=>t.next?(t=t.next,{value:t,done:!1}):{value:t,done:!0}}}}class ee{_events={};maxListeners=-1;thisArg=void 0;captureRejections=!1;setMaxListeners(t){return this.maxListeners=t,this}getMaxListeners(){return this.maxListeners}_addListener(t,e,n=!1){let s;if(!~this.maxListeners&&this.listenerCount(t)===this.maxListeners){const t=RangeError(`Exceeded maximum capacity(${this.maxListeners}).`);if(!this.listenerCount("error"))throw t;this._emitError(t)}this._events[t]||(this._events[t]=new te),s=this._events[t],n?s.prepend(e):s.append(e)}addListener(t,e){return this._addListener(t,e),this}on(t,e){return this._addListener(t,e),this}prependListener(t,e){return this._addListener(t,e,!0),this}_removeListener(t,e){let n;(n=this._events[t])&&(n.delete(e),n.count||delete this._events[t])}removeListener(t,e){return this._removeListener(t,e),this}off(t,e){return this._removeListener(t,e),this}removeAllListeners(t){let e;(e=this._events[t])&&(e.deleteAll(),delete this._events[t])}_emit(t,e,n){let s;if(s=this._events[t],s)try{let t=this.captureRejections,o=s.HEAD;for(;o=o.next;){const s=o.listener.apply(e,n);t&&s instanceof Promise&&s.catch((t=>{if(!this.listenerCount("error"))throw t;this._emitError(t)}))}}catch(t){if(!this.listenerCount("error"))throw t;this._emitError(t)}}_emitError(t){this._emit("error",void 0,[t])}emit(t,...e){this._emit(t,this.thisArg,e)}emitNone(t,...e){this._emit(t,void 0,e)}bind(t){return this.thisArg=t,this}_onceWrapper(t,e){return(...n)=>{this._removeListener(t,e);return e.apply(this.thisArg,n)}}_once(t,e,n=!1){if(!~this.maxListeners&&this.listenerCount(t)===this.maxListeners){const t=RangeError(`Exceeded maximum capacity(${this.maxListeners}).`);if(!this.listenerCount("error"))throw t;this._emitError(t)}const s=this._onceWrapper(t,e);let o;this._events[t]||(this._events[t]=new te),o=this._events[t],n?o.prepend(s,e):o.append(s,e)}once(t,e){return this._once(t,e),this}prependOnceListener(t,e){return this._once(t,e,!0),this}listenerCount(t){let e;return e=this._events[t],e?e.count:0}listeners(t){let e,n=[];if(e=this._events[t],!e)return n;let s=e.HEAD;for(;s=s.next;)n.push(s.listener);return n}rawListeners(t){let e,n=[];if(e=this._events[t],!e)return n;let s=e.HEAD;for(;s=s.next;)s.rawListener&&n.push(s.rawListener);return n}eventNames(){return Object.getOwnPropertyNames(this._events)}constructor(t){if(t){const{thisArg:e,captureRejections:n}=t;void 0!==e&&(this.thisArg=e),n&&(this.captureRejections=!0)}}}class ne{static audioElement=document.createElement("audio");static em=new ee;static on(t,e){this.em.on(t,e)}on(t,e){ne.on(t,e)}static play(){return this.em.emit("play"),hooks.send("thumbar:pause"),this.audioElement.play()}play(){return ne.play()}static pause(){this.audioElement.pause(),hooks.send("thumbar:play"),this.em.emit("pause")}pause(){ne.pause()}static seek(t){if("number"!=typeof t)return this.audioElement.currentTime;this.audioElement.currentTime=t,this.em.emit("seek")}seek(t){return ne.seek(t)}static load(t){return t&&(this.audioElement.src=t),this.audioElement.src}load(t){return ne.load(t)}async loadData(t){this.audioData=t,this.load(await t.url()),this.onDataLoaded()}onDataLoaded(){}static volume(t){if(!t)return this.audioElement.volume;this.audioElement.volume=t}volume(t){return ne.volume(t)}static duration(){return this.audioElement.duration}duration(){return ne.duration()}static isPlaying(){return!this.audioElement.paused}isPlaying(){return ne.isPlaying()}}ne.audioElement.addEventListener("ended",(()=>{ne.em.emit("ended")}));const se=new ne;window.Player=se,navigator.mediaSession.setActionHandler("play",(()=>se.play())),navigator.mediaSession.setActionHandler("pause",(()=>se.pause())),hooks.on("player:play",(()=>se.play())),hooks.on("player:pause",(()=>se.pause()));class oe{static listData=[];static getAudioData(t=this.current){return new Yt(this.listData[t])}static current=0;static mode=0;static MODE=0;static MODE_SINGLE_LOOP=1;static MODE_RANDOM=2;static loadList(t=[]){this.listData=t.concat([]),this.current=0}static getCurrentData(){return this.listData[this.current]}static query(t){let e=[];return this.listData.forEach(((n,s)=>{t.name&&n.name.includes(t.name)&&e.push(s)})),e}static next(){let t=this.current,e=this.listData.length;switch(this.mode){case 0:t=t===e-1?0:t+1;break;case 2:t=~~(Math.random()*e-1)}return this.current=t,this.getAudioData(t)}static prev(){let t=this.current,e=this.listData.length;switch(this.mode){case 0:t=t?t-1:e;break;case 2:t=~~(Math.random()*e-1)}return this.current=t,this.getAudioData(t)}static playNext(){const t=oe.next();t&&this.playByAudioData(t)}static playPrev(){const t=oe.prev();t&&this.playByAudioData(t)}static play(t){this.current=t;const e=this.getAudioData(t);this.playByAudioData(e)}static playByAudioData(t){se.loadData(t).then((async()=>{await se.play(),rem.emit("loadedContent")})),rem.emit("setControlsContent",t)}}function ie(t){let e,n,s,o,r,l,a,c,u,d,f,h,p,m,g,v,$,w,y,x,b,k,C,L,P,N,q,R,O,j,I,H,W,V,F,Y,X,K,J,G,Q,Z,tt,nt,st,ot=(t[1].title||"暂未播放歌曲")+"",it=t[1].artist+"",rt=t[2]?"":"";function at(e){t[21](e)}let ct={isUrl:!!t[1].album,avatar:t[1].artwork?t[1].artwork[0].src:"R",width:56,height:56,radius:"10%"};function ut(e){t[25](e)}void 0!==t[3]&&(ct.ctx=t[3]),s=new Ft({props:ct}),et.push((()=>Ct(s,"ctx",at))),s.$on("loaded",t[11]);let dt={cssStyle:"width: 200px"};function ft(e){t[27](e)}void 0!==t[5]&&(dt.value=t[5]),F=new Jt({props:dt}),et.push((()=>Ct(F,"value",ut))),F.$on("mousedown",t[18]),F.$on("mousemove",t[20]),F.$on("mouseup",t[19]);let ht={};return void 0!==t[8]&&(ht.value=t[8]),Q=new Jt({props:ht}),et.push((()=>Ct(Q,"value",ft))),Q.$on("mousedown",t[16]),Q.$on("mousemove",t[16]),Q.$on("mouseup",t[17]),{c(){e=D("div"),n=D("div"),Lt(s.$$.fragment),r=S(),l=D("div"),a=D("div"),c=U(ot),u=S(),d=D("div"),f=U(it),h=S(),p=D("div"),m=D("div"),g=D("div"),v=U(""),w=S(),y=D("div"),x=U(""),k=S(),C=D("div"),L=U(rt),P=S(),N=D("div"),N.textContent="",q=S(),R=D("div"),O=U(""),I=S(),H=D("div"),W=D("span"),W.textContent="0:00",V=S(),Lt(F.$$.fragment),X=S(),K=D("span"),K.textContent="0:00",J=S(),G=D("div"),Lt(Q.$$.fragment),M(a,"class","title svelte-qkwg0g"),M(d,"class","subtitle svelte-qkwg0g"),M(l,"class","row txt svelte-qkwg0g"),M(n,"class","column header edge svelte-qkwg0g"),M(g,"class",$="btn big btn-nb"+(t[7]?" active":"")+" svelte-qkwg0g"),M(y,"class",b="btn big btn-nb"+(t[0].mode?" disable":"")+" svelte-qkwg0g"),M(C,"class","btn big btn-big svelte-qkwg0g"),M(N,"class","btn big btn-nb svelte-qkwg0g"),M(R,"class",j="btn big btn-nb"+(t[6]?" active":"")+" svelte-qkwg0g"),M(m,"class","column"),T(m,"margin","4px 0px"),M(W,"class","time svelte-qkwg0g"),M(K,"class","time svelte-qkwg0g"),M(H,"class","column"),T(H,"width","100%"),M(p,"class","row center svelte-qkwg0g"),M(G,"class","column edge svelte-qkwg0g"),T(G,"flex-direction","row-reverse"),M(e,"class","column c svelte-qkwg0g")},m(o,i){A(o,e,i),_(e,n),At(s,n,null),_(n,r),_(n,l),_(l,a),_(a,c),_(l,u),_(l,d),_(d,f),_(e,h),_(e,p),_(p,m),_(m,g),_(g,v),_(m,w),_(m,y),_(y,x),_(m,k),_(m,C),_(C,L),_(m,P),_(m,N),_(m,q),_(m,R),_(R,O),_(p,I),_(p,H),_(H,W),t[24](W),_(H,V),At(F,H,null),_(H,X),_(H,K),t[26](K),_(e,J),_(e,G),At(Q,G,null),t[28](e),tt=!0,nt||(st=[z(g,"click",t[22]),z(y,"click",t[13]),z(C,"click",t[12]),z(N,"click",t[14]),z(R,"click",t[23])],nt=!0)},p(t,e){const n={};2&e[0]&&(n.isUrl=!!t[1].album),2&e[0]&&(n.avatar=t[1].artwork?t[1].artwork[0].src:"R"),!o&&8&e[0]&&(o=!0,n.ctx=t[3],lt((()=>o=!1))),s.$set(n),(!tt||2&e[0])&&ot!==(ot=(t[1].title||"暂未播放歌曲")+"")&&B(c,ot),(!tt||2&e[0])&&it!==(it=t[1].artist+"")&&B(f,it),(!tt||128&e[0]&&$!==($="btn big btn-nb"+(t[7]?" active":"")+" svelte-qkwg0g"))&&M(g,"class",$),(!tt||1&e[0]&&b!==(b="btn big btn-nb"+(t[0].mode?" disable":"")+" svelte-qkwg0g"))&&M(y,"class",b),(!tt||4&e[0])&&rt!==(rt=t[2]?"":"")&&B(L,rt),(!tt||64&e[0]&&j!==(j="btn big btn-nb"+(t[6]?" active":"")+" svelte-qkwg0g"))&&M(R,"class",j);const i={};!Y&&32&e[0]&&(Y=!0,i.value=t[5],lt((()=>Y=!1))),F.$set(i);const r={};!Z&&256&e[0]&&(Z=!0,r.value=t[8],lt((()=>Z=!1))),Q.$set(r)},i(t){tt||(wt(s.$$.fragment,t),wt(F.$$.fragment,t),wt(Q.$$.fragment,t),tt=!0)},o(t){yt(s.$$.fragment,t),yt(F.$$.fragment,t),yt(Q.$$.fragment,t),tt=!1},d(n){n&&E(e),Et(s),t[24](null),Et(F),t[26](null),Et(Q),t[28](null),nt=!1,i(st)}}}function re(t){let e=~~(t%60);return e<10&&(e="0"+e),`${~~(t/60)}:${e}`}function le(t,e,n){let s,o,i,r={},l=!1,a=1;async function c(t){Zt.title(t.title()),Zt.album(t.album().name),Zt.artist(t.artist().reduce(((t,e)=>[...t,e.name]),[]).join(" · ")),Zt.artwork(0,{src:t.album().picUrl}),Zt.notifyObservers(Zt.getMetadataConfig()),store.set("loadedContent",t.data)}Zt.addObserver((function(t){this.apply(),n(1,r=t)})),window.__getColorInfo=function(t,e,n,s){let o=4*(e*(s-1)+n);return(t=t.data).slice(o,o+4)},window.__setColor=function(t,e,n=.7){if(!e)return;let s=CanvasCtx;const o=e.width,i=e.height;Canvas.width=o,Canvas.height=i,s.drawImage(e,0,0);const r=s.getImageData(0,0,o,i),l=o/2,a=i/2,c=o/4,u=l+c,d=i/4,f=a+d;let h=__getColorInfo(r,o,c,d),p=__getColorInfo(r,o,u,d),m=__getColorInfo(r,o,l,a),g=__getColorInfo(r,o,c,f),v=__getColorInfo(r,o,u,f),$=[];for(let t=0;t<4;t++){let e=(h[t]+p[t]+m[t]+g[t]+v[t])/5,n=7e-4*e+.5;$[t]=~~(n*e)}const w=`rgba(${$[0]},${$[1]},${$[2]}, ${n})`;return t.style.setProperty("--color",w),w};let u=0;function d(){if(se.load())return l?se.pause():se.play()}rem.on("setControlsContent",c),rem.on("loadedContent",(()=>{a=se.duration(),n(10,v.innerText=re(a),v),s&&(n(5,u=0),clearInterval(s)),s=setInterval((()=>{if($)return;let t=se.seek();n(5,u=t/a*100),n(9,g.innerText=re(t),g)}),500)})),rem.on("playerReady",(async t=>{t.on("play",(()=>{n(2,l=!0)})),t.on("pause",(()=>n(2,l=!1))),t.on("ended",(()=>oe.playNext()));let e=store.get("loadedContent");e&&(e=new Yt(e),c(e),se.loadData(e))})),window.addEventListener("keypress",(t=>{" "===t.key&&d()}));let f,h=!1,p=!1;function m(){return h?n(0,oe.mode=1,oe):p?n(0,oe.mode=2,oe):void n(0,oe.mode=0,oe)}(f=store.get("volume")||50)&&rem.once("playerReady",(()=>{se.volume(f/100)}));var g,v,$=!1;new Array(5);return[oe,r,l,o,i,u,h,p,f,g,v,function(){__setColor(i,o)},d,function(){oe.playPrev()},function(){oe.playNext()},m,function(t){se.volume(t.detail/100)},function(){store.set("volume",f)},function(){$=!0},function(t){$=!1;try{se.seek(t.detail/100*a)}catch(t){}},function(t){$&&n(9,g.innerText=re(t.detail/100*a),g)},function(t){o=t,n(3,o)},()=>{n(7,p=!p),m()},()=>{n(6,h=!h),m()},function(t){et[t?"unshift":"push"]((()=>{n(9,g=t)}))},function(t){u=t,n(5,u)},function(t){et[t?"unshift":"push"]((()=>{n(10,v=t)}))},function(t){f=t,n(8,f)},function(t){et[t?"unshift":"push"]((()=>{i=t,n(4,i)}))}]}navigator.mediaSession.setActionHandler("nexttrack",(()=>oe.playNext())),navigator.mediaSession.setActionHandler("previoustrack",(()=>oe.playPrev())),hooks.on("player:previous",(()=>oe.playPrev())),hooks.on("player:next",(()=>oe.playNext()));class ae extends Ut{constructor(t){super(),Dt(this,t,le,ie,l,{},null,[-1,-1])}}function ce(e){let n;return{c(){n=D("div")},m(t,e){A(t,n,e)},p:t,i:t,o:t,d(t){t&&E(n)}}}class ue extends Ut{constructor(t){super(),Dt(this,t,null,ce,l,{})}}function de(t,e,n){return new Promise(((s,o)=>{let i=t.animate(e,n);i.onfinish=()=>s(i),i.onremove=()=>o(i)}))}function fe(t){let e,s,o,i;const r=[t[1]];var l=t[0];function a(t){let e={};for(let t=0;t<r.length;t+=1)e=n(e,r[t]);return{props:e}}return l&&(o=new l(a())),{c(){e=D("div"),s=D("div"),o&&Lt(o.$$.fragment),M(s,"class","innerWindow row svelte-1go0tal"),M(e,"class","container row svelte-1go0tal")},m(n,r){A(n,e,r),_(e,s),o&&At(o,s,null),t[4](s),i=!0},p(t,[e]){const n=2&e?kt(r,[_t(t[1])]):{};if(l!==(l=t[0])){if(o){vt();const t=o;yt(t.$$.fragment,1,0,(()=>{Et(t,1)})),$t()}l?(o=new l(a()),Lt(o.$$.fragment),wt(o.$$.fragment,1),At(o,s,null)):o=null}else l&&o.$set(n)},i(t){i||(o&&wt(o.$$.fragment,t),i=!0)},o(t){o&&yt(o.$$.fragment,t),i=!1},d(n){n&&E(e),o&&Et(o),t[4](null)}}}function he(t,e,n){let s,o=ue,i={};return[o,i,s,async function(t,e){await de(s,[{opacity:1,transform:"scale(1)"},{opacity:0,transform:"scale(1.06)"}],{duration:60,ease:"cubic-bezier(0.95, 0.05, 0.795, 0.035)",fill:"forwards"}),function(t,e){if(o===t)return n(0,o=ue),n(1,i=e),void setTimeout((()=>{n(0,o=t)}));n(1,i=e),n(0,o=t)}(t,e),requestIdleCallback((async()=>{await de(s,[{opacity:0,transform:"scale(0.96)"},{opacity:1,transform:"scale(1)"}],{duration:80,ease:"cubic-bezier(0.19, 1, 0.22, 1)",fill:"forwards"}),rem.emit("pageSwipeAnimFinish")}))},function(t){et[t?"unshift":"push"]((()=>{s=t,n(2,s)}))}]}class pe extends Ut{constructor(t){super(),Dt(this,t,he,fe,l,{display:3})}get display(){return this.$$.ctx[3]}}function me(t){let e,n;const s=t[5].default,o=u(s,t,t[4],null);return{c(){e=D("div"),o&&o.c(),M(e,"class","container svelte-1mqptgy"),M(e,"style",t[0])},m(s,i){A(s,e,i),o&&o.m(e,null),t[6](e),n=!0},p(t,[i]){o&&o.p&&(!n||16&i)&&h(o,s,t,t[4],n?f(s,t[4],i,null):p(t[4]),null),(!n||1&i)&&M(e,"style",t[0])},i(t){n||(wt(o,t),n=!0)},o(t){yt(o,t),n=!1},d(n){n&&E(e),o&&o.d(n),t[6](null)}}}function ge(t,e,n){let s,{$$slots:o={},$$scope:i}=e,{cssStyle:r}=e;return t.$$set=t=>{"cssStyle"in t&&n(0,r=t.cssStyle),"$$scope"in t&&n(4,i=t.$$scope)},[r,s,function(t){s.offsetHeight&&s.offsetWidth&&t({width:s.offsetWidth,height:s.offsetHeight}),new MutationObserver(((e,n)=>{n.disconnect();try{t({width:s.offsetWidth,height:s.offsetHeight})}catch(t){}})).observe(s,{childList:!0,subtree:!0,attributes:!0})},function(){s.setAttribute("__force-update__",""),s.removeAttribute("__force-update__")},i,o,function(t){et[t?"unshift":"push"]((()=>{s=t,n(1,s)}))}]}class ve extends Ut{constructor(t){super(),Dt(this,t,ge,me,l,{cssStyle:0,measure:2,forceUpdate:3})}get measure(){return this.$$.ctx[2]}get forceUpdate(){return this.$$.ctx[3]}}function $e(t){let e;const n=t[12].default,s=u(n,t,t[17],null);return{c(){s&&s.c()},m(t,n){s&&s.m(t,n),e=!0},p(t,o){s&&s.p&&(!e||131072&o[0])&&h(s,n,t,t[17],e?f(n,t[17],o,null):p(t[17]),null)},i(t){e||(wt(s,t),e=!0)},o(t){yt(s,t),e=!1},d(t){s&&s.d(t)}}}function we(t){let e,n,s,o,r,l,a,c,u,d,f,h,p,m;return r=new ve({props:{cssStyle:"width: 100%",$$slots:{default:[$e]},$$scope:{ctx:t}}}),t[13](r),{c(){e=D("div"),n=D("div"),s=D("div"),o=S(),Lt(r.$$.fragment),l=S(),a=D("div"),c=S(),u=D("div"),d=D("div"),T(s,"height","89px"),T(a,"height","72px"),M(n,"class","container svelte-846hvm"),M(d,"class","thumb svelte-846hvm"),M(u,"class",f="bar"+(t[4]?" active":"")+(t[3]?"":" hide")+" svelte-846hvm"),M(e,"class","c svelte-846hvm")},m(i,f){A(i,e,f),_(e,n),_(n,s),_(n,o),At(r,n,null),_(n,l),_(n,a),t[14](n),_(e,c),_(e,u),_(u,d),t[15](d),t[16](e),h=!0,p||(m=[z(d,"mousedown",q(t[6])),z(u,"mousedown",t[7])],p=!0)},p(t,e){const n={};131072&e[0]&&(n.$$scope={dirty:e,ctx:t}),r.$set(n),(!h||24&e[0]&&f!==(f="bar"+(t[4]?" active":"")+(t[3]?"":" hide")+" svelte-846hvm"))&&M(u,"class",f)},i(t){h||(wt(r.$$.fragment,t),h=!0)},o(t){yt(r.$$.fragment,t),h=!1},d(n){n&&E(e),t[13](null),Et(r),t[14](null),t[15](null),t[16](null),p=!1,i(m)}}}function ye(t,e,n){let s,o,i,r,l,a,c,u,d,f,{$$slots:h={},$$scope:p}=e,m=!1,g=!1,v=!1,$=0,w=!0,y=null;function x(t){if(i=visualViewport.height-72-89,r=t,i>=r)return $=0,E(0),n(3,m=!1);n(3,m=!0),l=(r-i)*i/r,c=i/r;try{o&&o.style.setProperty("--thumb-height",i*c+"px");const{save:t}=Pager.getContext();w&&E($=t.pageOffsetY)}catch(t){}}function b(t){g=!0,u=t.screenY,d=o.offsetTop}function k(){w=!1}function _(t){g&&(n(4,v=!0),f=t.screenY-u,$=d+f,E($))}function C(){n(4,v=!1),g=!1}X((()=>{a.addEventListener("mousemove",_),document.addEventListener("mouseup",C),document.addEventListener("wheel",(t=>{m&&(isNaN($)&&($=0),~t.path.indexOf(a)&&($+=~~t.deltaY*c,$<0&&($=0),$>l&&($=l),E($)))})),y=setTimeout((()=>{k()}),2e3)}));let L,A=!1;function E(t){try{if(isNaN(t))return;t<=0&&(A=!0,rem.emit("__pageUnfold"),t=0),t>l&&(t=l),A?A=!1:rem.emit("__pageFold"),o&&o.style.setProperty("--progress",t+"px"),$=t,s.scrollTo({left:0,top:t*r/i,behavior:"auto"})}catch(t){}}function P(t){m&&(isNaN($)&&($=0),$+=~~t*i/r,$<0&&($=0),$>l&&($=l),E($))}function D(){return new Promise((t=>{L.measure((({height:e})=>{x(e),t()}))}))}return X(D),K((()=>rem.emit("__pageUnfold"))),Pager.beforeSwitch((()=>{const{save:t}=Pager.getContext();t.pageOffsetY=$})),X((()=>{window.addEventListener("resize",D),rem.on("scroll",E),rem.on("scroll-up",P)})),K((()=>{window.removeEventListener("resize",D),rem.off("scroll",E),rem.off("scroll-up",P)})),t.$$set=t=>{"$$scope"in t&&n(17,p=t.$$scope)},[s,o,a,m,v,L,b,function(t){E(t.offsetY-i*c/2),b({screenY:t.screenY})},k,function(t){clearTimeout(y),t(k)},D,async function(){D(),L.forceUpdate()},h,function(t){et[t?"unshift":"push"]((()=>{L=t,n(5,L)}))},function(t){et[t?"unshift":"push"]((()=>{s=t,n(0,s)}))},function(t){et[t?"unshift":"push"]((()=>{o=t,n(1,o)}))},function(t){et[t?"unshift":"push"]((()=>{a=t,n(2,a)}))},p]}class xe extends Ut{constructor(t){super(),Dt(this,t,ye,we,l,{disableAutoRestore:8,keepWaiting:9,measure:10,recalc:11},null,[-1,-1])}get disableAutoRestore(){return this.$$.ctx[8]}get keepWaiting(){return this.$$.ctx[9]}get measure(){return this.$$.ctx[10]}get recalc(){return this.$$.ctx[11]}}function be(t,{delay:n=0,duration:s=400,easing:o=e}={}){const i=+getComputedStyle(t).opacity;return{delay:n,duration:s,easing:o,css:t=>"opacity: "+t*i}}function ke(t,e,n){const s=t.slice();return s[8]=e[n],s[10]=n,s}function _e(t){let e,n,s=t[1][t[10]]+"";return{c(){e=D("div"),n=U(s),M(e,"class","t txt svelte-4n21oe"),T(e,"width",t[8]+"%")},m(t,s){A(t,e,s),_(e,n)},p(t,e){2&e&&s!==(s=t[1][t[10]]+"")&&B(n,s)},d(t){t&&E(e)}}}function Ce(e){let n,s,o,r,l=e[6],a=[];for(let t=0;t<l.length;t+=1)a[t]=_e(ke(e,l,t));return{c(){n=D("div");for(let t=0;t<a.length;t+=1)a[t].c();M(n,"class",s="column tile"+(e[2]?" selected":"")+(e[3]?" focus":"")+" svelte-4n21oe"),T(n,"padding-left",e[0][0]+"%")},m(t,s){A(t,n,s);for(let t=0;t<a.length;t+=1)a[t].m(n,null);o||(r=[z(n,"click",e[4]),z(n,"dblclick",e[5])],o=!0)},p(t,[e]){if(66&e){let s;for(l=t[6],s=0;s<l.length;s+=1){const o=ke(t,l,s);a[s]?a[s].p(o,e):(a[s]=_e(o),a[s].c(),a[s].m(n,null))}for(;s<a.length;s+=1)a[s].d(1);a.length=l.length}12&e&&s!==(s="column tile"+(t[2]?" selected":"")+(t[3]?" focus":"")+" svelte-4n21oe")&&M(n,"class",s),1&e&&T(n,"padding-left",t[0][0]+"%")},i:t,o:t,d(t){t&&E(n),P(a,t),o=!1,i(r)}}}function Le(t,e,n){let s=J();let{location:o=[]}=e,{data:i=[]}=e,{selected:r=!1}=e,{focus:l=!1}=e,a=function(t){let e=new Array(t.length).fill(0);return(t=[...t]).push(100),e.forEach(((e,n,s)=>{s[n]=t[n+1]-t[n]})),e}(o);return t.$$set=t=>{"location"in t&&n(0,o=t.location),"data"in t&&n(1,i=t.data),"selected"in t&&n(2,r=t.selected),"focus"in t&&n(3,l=t.focus)},[o,i,r,l,function(t){s("click",t)},function(t){s("dbclick",t)},a]}class Ae extends Ut{constructor(t){super(),Dt(this,t,Le,Ce,l,{location:0,data:1,selected:2,focus:3})}}function Ee(t,e,n){const s=t.slice();return s[10]=e[n],s[12]=n,s}function Pe(t){let e,n,s;function o(e){t[6](e)}let i={data:[t[12]+1,t[10].name,t[10].ar.reduce(Ue,[]).join(" / "),t[10].al.name],selected:t[2].has(t[12]),focus:~t[3]&&t[3]};return void 0!==t[0]&&(i.location=t[0]),e=new Ae({props:i}),et.push((()=>Ct(e,"location",o))),e.$on("click",(function(){return t[7](t[12])})),e.$on("dbclick",(function(){return t[8](t[12])})),{c(){Lt(e.$$.fragment)},m(t,n){At(e,t,n),s=!0},p(s,o){t=s;const i={};2&o&&(i.data=[t[12]+1,t[10].name,t[10].ar.reduce(Ue,[]).join(" / "),t[10].al.name]),4&o&&(i.selected=t[2].has(t[12])),8&o&&(i.focus=~t[3]&&t[3]),!n&&1&o&&(n=!0,i.location=t[0],lt((()=>n=!1))),e.$set(i)},i(t){s||(wt(e.$$.fragment,t),s=!0)},o(t){yt(e.$$.fragment,t),s=!1},d(t){Et(e,t)}}}function De(t){let e,n,s=t[1],o=[];for(let e=0;e<s.length;e+=1)o[e]=Pe(Ee(t,s,e));const i=t=>yt(o[t],1,1,(()=>{o[t]=null}));return{c(){for(let t=0;t<o.length;t+=1)o[t].c();e=N()},m(t,s){for(let e=0;e<o.length;e+=1)o[e].m(t,s);A(t,e,s),n=!0},p(t,[n]){if(63&n){let r;for(s=t[1],r=0;r<s.length;r+=1){const i=Ee(t,s,r);o[r]?(o[r].p(i,n),wt(o[r],1)):(o[r]=Pe(i),o[r].c(),wt(o[r],1),o[r].m(e.parentNode,e))}for(vt(),r=s.length;r<o.length;r+=1)i(r);$t()}},i(t){if(!n){for(let t=0;t<s.length;t+=1)wt(o[t]);n=!0}},o(t){o=o.filter(Boolean);for(let t=0;t<o.length;t+=1)yt(o[t]);n=!1},d(t){P(o,t),t&&E(e)}}}const Ue=(t,e)=>[...t,e.name];function Se(t,e,n){let s=J(),{listData:o=[]}=e,{location:i=[]}=e,{selections:r=new Set}=e,{focus:l=-1}=e;function a(t){s("click",{listData:o,i:t})}function c(t){s("dbclick",{listData:o,i:t})}X((()=>{s("mount")}));return t.$$set=t=>{"listData"in t&&n(1,o=t.listData),"location"in t&&n(0,i=t.location),"selections"in t&&n(2,r=t.selections),"focus"in t&&n(3,l=t.focus)},[i,o,r,l,a,c,function(t){i=t,n(0,i)},t=>a(t),t=>c(t)]}class Ne extends Ut{constructor(t){super(),Dt(this,t,Se,De,l,{listData:1,location:0,selections:2,focus:3})}}function ze(t){let e,n,s;return{c(){e=D("textarea"),M(e,"type",t[0]),M(e,"id",t[1]),e.value=t[2],M(e,"maxlength",t[4]),M(e,"style",t[5]),M(e,"placeholder",t[7]),M(e,"class","svelte-188f7of")},m(o,i){A(o,e,i),n||(s=[z(e,"focus",t[9]),z(e,"change",t[11]),z(e,"input",t[12]),z(e,"blur",t[10])],n=!0)},p(t,n){1&n&&M(e,"type",t[0]),2&n&&M(e,"id",t[1]),4&n&&(e.value=t[2]),16&n&&M(e,"maxlength",t[4]),32&n&&M(e,"style",t[5]),128&n&&M(e,"placeholder",t[7])},d(t){t&&E(e),n=!1,i(s)}}}function qe(t){let e,n,s;return{c(){e=D("input"),M(e,"type",t[0]),M(e,"id",t[1]),e.value=t[2],M(e,"style",t[5]),M(e,"placeholder",t[7]),M(e,"class","svelte-188f7of")},m(o,i){A(o,e,i),n||(s=[z(e,"focus",t[9]),z(e,"change",t[11]),z(e,"input",t[12]),z(e,"blur",t[10])],n=!0)},p(t,n){1&n&&M(e,"type",t[0]),2&n&&M(e,"id",t[1]),4&n&&e.value!==t[2]&&(e.value=t[2]),32&n&&M(e,"style",t[5]),128&n&&M(e,"placeholder",t[7])},d(t){t&&E(e),n=!1,i(s)}}}function Me(e){let n,s;function o(t,e){return t[3]?qe:ze}let i=o(e),r=i(e);return{c(){n=D("div"),r.c(),M(n,"class",s=(e[6]?"full-border":"input")+(e[8]?" focus":"")+" svelte-188f7of")},m(t,e){A(t,n,e),r.m(n,null)},p(t,[e]){i===(i=o(t))&&r?r.p(t,e):(r.d(1),r=i(t),r&&(r.c(),r.m(n,null))),320&e&&s!==(s=(t[6]?"full-border":"input")+(t[8]?" focus":"")+" svelte-188f7of")&&M(n,"class",s)},i:t,o:t,d(t){t&&E(n),r.d()}}}function Be(t,e,n){let{type:s="text"}=e,{id:o="default-id"}=e,{value:i=""}=e,{singleLine:r=!0}=e,{maxLength:l=999999}=e,{cssText:a=""}=e,{fullBorder:c=!1}=e,{placeholder:u=""}=e,d=J(),f=!1;return t.$$set=t=>{"type"in t&&n(0,s=t.type),"id"in t&&n(1,o=t.id),"value"in t&&n(2,i=t.value),"singleLine"in t&&n(3,r=t.singleLine),"maxLength"in t&&n(4,l=t.maxLength),"cssText"in t&&n(5,a=t.cssText),"fullBorder"in t&&n(6,c=t.fullBorder),"placeholder"in t&&n(7,u=t.placeholder)},[s,o,i,r,l,a,c,u,f,function(){n(8,f=!0),d("focus")},function(){n(8,f=!1),d("blur")},function(){d("change")},function(){d("input")}]}class Re extends Ut{constructor(t){super(),Dt(this,t,Be,Me,l,{type:0,id:1,value:2,singleLine:3,maxLength:4,cssText:5,fullBorder:6,placeholder:7})}}function Te(t,e,n){const s=t.slice();return s[40]=e[n],s[42]=n,s}function Oe(t){let e,n,s,o,r,l,a,c,u,d,f,h,p,m,g,v,$,w,y,x,b,k=t[3].title+"",C=t[3].trackCount+"",L=t[3].subtitle+"";return n=new Ft({props:{width:200,height:200,radius:"8%",avatar:t[3].imgUrl}}),{c(){e=D("div"),Lt(n.$$.fragment),s=S(),o=D("div"),r=D("div"),l=D("h1"),a=U(k),c=D("span"),u=U(C),d=U("首"),f=S(),h=D("div"),p=U(L),m=S(),g=D("div"),v=D("div"),v.textContent=" 播放",$=S(),w=D("div"),w.textContent=" 随机",M(c,"class","bread-crumb svelte-toz3d5"),M(l,"class","title svelte-toz3d5"),M(h,"class","subtitle svelte-toz3d5"),M(v,"class","btn big accent svelte-toz3d5"),M(w,"class","btn big bright svelte-toz3d5"),M(g,"class","column"),M(o,"class","row rowl svelte-toz3d5"),M(e,"class","header column svelte-toz3d5")},m(i,k){A(i,e,k),At(n,e,null),_(e,s),_(e,o),_(o,r),_(r,l),_(l,a),_(l,c),_(c,u),_(c,d),_(r,f),_(r,h),_(h,p),_(o,m),_(o,g),_(g,v),_(g,$),_(g,w),y=!0,x||(b=[z(v,"click",t[16]),z(w,"click",t[17])],x=!0)},p(t,e){const s={};8&e[0]&&(s.avatar=t[3].imgUrl),n.$set(s),(!y||8&e[0])&&k!==(k=t[3].title+"")&&B(a,k),(!y||8&e[0])&&C!==(C=t[3].trackCount+"")&&B(u,C),(!y||8&e[0])&&L!==(L=t[3].subtitle+"")&&B(p,L)},i(t){y||(wt(n.$$.fragment,t),y=!0)},o(t){yt(n.$$.fragment,t),y=!1},d(t){t&&E(e),Et(n),x=!1,i(b)}}}function je(t){let e,n,s,o,i,r=t[40]+"";function l(){return t[19](t[42])}return{c(){e=D("div"),n=U(r),M(e,"class",s="splitterTab"+(t[1]===t[42]?t[2]?" backwards":" forwards":"")+" svelte-toz3d5"),T(e,"width",t[6][t[42]]+"%")},m(t,s){A(t,e,s),_(e,n),o||(i=z(e,"click",l),o=!0)},p(o,i){t=o,1&i[0]&&r!==(r=t[40]+"")&&B(n,r),6&i[0]&&s!==(s="splitterTab"+(t[1]===t[42]?t[2]?" backwards":" forwards":"")+" svelte-toz3d5")&&M(e,"class",s),64&i[0]&&T(e,"width",t[6][t[42]]+"%")},d(t){t&&E(e),o=!1,i()}}}function Ie(t){let e,n,s,o,i,r,l,a,c,u,d,f,h,p,m,g,v,$=t[3]&&Oe(t);o=new Re({props:{type:"text",placeholder:"  搜索列表",fullBorder:!0}});let w=t[0].names,y=[];for(let e=0;e<w.length;e+=1)y[e]=je(Te(t,w,e));function x(e){t[21](e)}function b(e){t[22](e)}function k(e){t[23](e)}let C={};return void 0!==t[4]&&(C.listData=t[4]),void 0!==t[7]&&(C.location=t[7]),void 0!==t[8]&&(C.selections=t[8]),d=new Ne({props:C}),et.push((()=>Ct(d,"listData",x))),et.push((()=>Ct(d,"location",b))),et.push((()=>Ct(d,"selections",k))),d.$on("mount",t[15]),d.$on("click",t[13]),d.$on("dbclick",t[14]),{c(){e=D("div"),$&&$.c(),n=S(),s=D("div"),Lt(o.$$.fragment),i=S(),r=D("div"),l=S(),a=D("div");for(let t=0;t<y.length;t+=1)y[t].c();c=S(),u=D("div"),Lt(d.$$.fragment),M(r,"class","column"),M(s,"class","nav column svelte-toz3d5"),M(a,"class","column splitter svelte-toz3d5"),T(a,"padding-left",t[7][0]+"%"),M(u,"class","row list svelte-toz3d5"),M(e,"class","row c svelte-toz3d5")},m(f,h){A(f,e,h),$&&$.m(e,null),_(e,n),_(e,s),At(o,s,null),_(s,i),_(s,r),_(e,l),_(e,a);for(let t=0;t<y.length;t+=1)y[t].m(a,null);t[20](a),_(e,c),_(e,u),At(d,u,null),t[24](e),m=!0,g||(v=z(a,"mousedown",t[12]),g=!0)},p(t,s){if(t[3]?$?($.p(t,s),8&s[0]&&wt($,1)):($=Oe(t),$.c(),wt($,1),$.m(e,n)):$&&(vt(),yt($,1,1,(()=>{$=null})),$t()),2119&s[0]){let e;for(w=t[0].names,e=0;e<w.length;e+=1){const n=Te(t,w,e);y[e]?y[e].p(n,s):(y[e]=je(n),y[e].c(),y[e].m(a,null))}for(;e<y.length;e+=1)y[e].d(1);y.length=w.length}(!m||128&s[0])&&T(a,"padding-left",t[7][0]+"%");const o={};!f&&16&s[0]&&(f=!0,o.listData=t[4],lt((()=>f=!1))),!h&&128&s[0]&&(h=!0,o.location=t[7],lt((()=>h=!1))),!p&&256&s[0]&&(p=!0,o.selections=t[8],lt((()=>p=!1))),d.$set(o)},i(t){m||(wt($),wt(o.$$.fragment,t),wt(d.$$.fragment,t),m=!0)},o(t){yt($),yt(o.$$.fragment,t),yt(d.$$.fragment,t),m=!1},d(n){n&&E(e),$&&$.d(),Et(o),P(y,n),t[20](null),Et(d),t[24](null),g=!1,v()}}}function He(t){let e,n;return e=new xe({props:{$$slots:{default:[Ie]},$$scope:{ctx:t}}}),t[25](e),{c(){Lt(e.$$.fragment)},m(t,s){At(e,t,s),n=!0},p(t,n){const s={};1535&n[0]|4096&n[1]&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){n||(wt(e.$$.fragment,t),n=!0)},o(t){yt(e.$$.fragment,t),n=!1},d(n){t[25](null),Et(e,n)}}}function We(t){let e=[...t],n=new Array(t.length).fill(0);return e.push(100),n.forEach(((t,n,s)=>{s[n]=e[n+1]-e[n]})),n}function Ve(t,e,n){let{header:s=null}=e;const o=()=>1;let{listSplitter:i=store.get("splitter")||{location:[2,8,30,70],names:["功能","歌曲名","艺术家","专辑"]}}=e;i.sortFunc=[o,(t,e)=>e.name>t.name||-1,(t,e)=>e.ar[0].name>t.ar[0].name||-1,(t,e)=>e.al.name>t.al.name||-1];let r,l,{listData:a=[]}=e,{sortBy:c=0}=e,{forwards:u=!0}=e,d=[];function f(t){l=[...t],t.sort(i.sortFunc[c]),!u&&t.reverse(),n(4,d=t)}X((()=>{a instanceof Promise?rem.once("pageSwipeAnimFinish",(()=>a.then((t=>f(t))))):f(a)}));let h=!1;function p(t){if(!h)return!1;let e;"number"!=typeof t&&(t=i.names.indexOf(t)),t===c&&n(2,u=!u),e=i.sortFunc[t]||o,n(1,c=t),store.set("sortBy",c),store.set("forwards",u);let s=[...l];s.sort(e),u||(s=s.reverse()),setTimeout((()=>{n(4,d=s),A()}))}p(c);let m,g,v=We(i.location),$=i.location,w=!1,y=0,x=0,b=0;document.addEventListener("mousemove",(function(t){w&&(h=!1,b=t.screenX-x,g.style.transform=`translateX(${b}px)`)})),document.addEventListener("mouseup",(function(){if(w){w=!1,g.style.transform="";let t=b/y*100;n(7,$[m]+=t,$),n(6,v=We($));const e=d;n(4,d=[]),setTimeout((()=>{n(4,d=e)})),x=b=m=0,g=null,store.set("splitter",{location:$,names:i.names})}}));let k=!1;document.addEventListener("keydown",(t=>{t.ctrlKey&&(k=!0)})),document.addEventListener("keyup",(t=>{t.ctrlKey&&(k=!1)}));let _,C,L=new Set;function A(){_.measure()}X((()=>{contextMap.set(C,{"刷新":()=>{const{name:t,props:e}=Pager.getContext(),n=Pager.getContext().class;Pager.openNew(t,n,e,!0)}})})),K((()=>{contextMap.delete(C)}));return t.$$set=t=>{"header"in t&&n(3,s=t.header),"listSplitter"in t&&n(0,i=t.listSplitter),"listData"in t&&n(18,a=t.listData),"sortBy"in t&&n(1,c=t.sortBy),"forwards"in t&&n(2,u=t.forwards)},[i,c,u,s,d,r,v,$,L,_,C,p,function(t){h=!0,g=t.target,g!==r&&(m=[...g.parentNode.children].indexOf(g),y=t.path[1].offsetWidth,w=!0,t.target.offsetLeft,x=t.screenX)},function(t){const e=t.detail.i;k?(L.add(e),n(8,L)):n(8,L=(new Set).add(e))},async function(t){const{listData:e,i:n}=t.detail,s=oe.query({name:e[n].name});if(!s.length)return oe.loadList(e),void oe.play(n);oe.play(s[0])},A,async function(){let t=(await a).slice(0);oe.loadList(t),oe.play(0)},async function(){let t=(await a).slice(0);oe.loadList(t.sort((()=>Math.random()-.5))),oe.play(0)},a,t=>p(t),function(t){et[t?"unshift":"push"]((()=>{r=t,n(5,r)}))},function(t){d=t,n(4,d)},function(t){$=t,n(7,$)},function(t){L=t,n(8,L)},function(t){et[t?"unshift":"push"]((()=>{C=t,n(10,C)}))},function(t){et[t?"unshift":"push"]((()=>{_=t,n(9,_)}))}]}class Fe extends Ut{constructor(t){super(),Dt(this,t,Ve,He,l,{header:3,listSplitter:0,listData:18,sortBy:1,forwards:2},null,[-1,-1])}}function Ye(t,e,n){const s=t.slice();return s[30]=e[n],s[32]=n,s}function Xe(t,e,n){const s=t.slice();return s[33]=e[n],s[32]=n,s}function Ke(t,e,n){const s=t.slice();return s[35]=e[n],s[32]=n,s}function Je(t){let e,n,s,o,r,l,a,c,u,d,f,h,p=t[35].name+"";function m(){return t[17](t[35])}function g(){return t[18](t[35])}return{c(){e=D("div"),n=D("div"),s=S(),o=D("div"),o.textContent="",r=S(),l=D("div"),a=D("div"),c=U(p),u=S(),M(n,"class","avatar svelte-phqldw"),T(n,"background-image","url("+t[35].coverImgUrl+")"),M(o,"class","btn light FAB svelte-phqldw"),M(l,"class","row title svelte-phqldw"),M(e,"class","card row active svelte-phqldw"),M(e,"title",d=t[35].name)},m(t,i){A(t,e,i),_(e,n),_(e,s),_(e,o),_(e,r),_(e,l),_(l,a),_(a,c),_(e,u),f||(h=[z(o,"click",q(m)),z(o,"mouseenter",q(rn)),z(o,"mouseleave",q(ln)),z(e,"click",g)],f=!0)},p(s,o){t=s,1&o[0]&&T(n,"background-image","url("+t[35].coverImgUrl+")"),1&o[0]&&p!==(p=t[35].name+"")&&B(c,p),1&o[0]&&d!==(d=t[35].name)&&M(e,"title",d)},d(t){t&&E(e),f=!1,i(h)}}}function Ge(t){let e,n=t[0],s=[];for(let e=0;e<n.length;e+=1)s[e]=Je(Ke(t,n,e));return{c(){e=D("div");for(let t=0;t<s.length;t+=1)s[t].c();M(e,"class","column card-container svelte-phqldw")},m(t,n){A(t,e,n);for(let t=0;t<s.length;t+=1)s[t].m(e,null)},p(t,o){if(34819&o[0]){let i;for(n=t[0],i=0;i<n.length;i+=1){const r=Ke(t,n,i);s[i]?s[i].p(r,o):(s[i]=Je(r),s[i].c(),s[i].m(e,null))}for(;i<s.length;i+=1)s[i].d(1);s.length=n.length}},d(t){t&&E(e),P(s,t)}}}function Qe(t){let e,n,s,o,i,r,l,a,c,u=t[6].showAllArtists?"收起":"查看",d=t[9].count+"",f=t[9],h=[];for(let e=0;e<f.length;e+=1)h[e]=Ze(Xe(t,f,e));return{c(){e=D("div"),n=D("div"),s=U(u),o=U("全部 "),i=U(d),r=U(" 位艺术家"),l=S();for(let t=0;t<h.length;t+=1)h[t].c();M(n,"class","btn light"),T(n,"position","absolute"),T(n,"left","200px"),T(n,"top","0px"),T(n,"border-radius","6px"),M(e,"class","Row"),M(e,"row-title","收藏的艺术家"),T(e,"--item-height","200px"),T(e,"--item-width","200px")},m(u,d){A(u,e,d),_(e,n),_(n,s),_(n,o),_(n,i),_(n,r),_(e,l);for(let t=0;t<h.length;t+=1)h[t].m(e,null);a||(c=z(n,"click",t[21]),a=!0)},p(t,n){if(64&n[0]&&u!==(u=t[6].showAllArtists?"收起":"查看")&&B(s,u),512&n[0]&&d!==(d=t[9].count+"")&&B(i,d),512&n[0]){let s;for(f=t[9],s=0;s<f.length;s+=1){const o=Xe(t,f,s);h[s]?h[s].p(o,n):(h[s]=Ze(o),h[s].c(),h[s].m(e,null))}for(;s<h.length;s+=1)h[s].d(1);h.length=f.length}},d(t){t&&E(e),P(h,t),a=!1,c()}}}function Ze(t){let e,n,s,o,r,l,a,u,d,f,h,p,m,g,v,$=t[33].name+"",w=(t[33].alias.length?t[33].alias[0]:"")+"";return{c(){e=D("div"),n=D("div"),n.textContent="",s=S(),o=D("img"),a=S(),u=D("div"),d=U($),f=S(),h=D("div"),p=U(w),m=S(),M(n,"class","btn light FAB svelte-phqldw"),M(o,"class","artist svelte-phqldw"),M(o,"draggable","false"),c(o.src,r=t[33].picUrl)||M(o,"src",r),M(o,"alt",l=t[33].name),M(o,"decoding","async"),M(u,"class","name title svelte-phqldw"),M(h,"class","name svelte-phqldw"),M(e,"class","Column artist-c active svelte-phqldw")},m(t,i){A(t,e,i),_(e,n),_(e,s),_(e,o),_(e,a),_(e,u),_(u,d),_(e,f),_(e,h),_(h,p),_(e,m),g||(v=[z(n,"click",q(cn)),z(n,"mouseenter",q(rn)),z(n,"mouseleave",q(ln))],g=!0)},p(t,e){512&e[0]&&!c(o.src,r=t[33].picUrl)&&M(o,"src",r),512&e[0]&&l!==(l=t[33].name)&&M(o,"alt",l),512&e[0]&&$!==($=t[33].name+"")&&B(d,$),512&e[0]&&w!==(w=(t[33].alias.length?t[33].alias[0]:"")+"")&&B(p,w)},d(t){t&&E(e),g=!1,i(v)}}}function tn(t){let e,n,s,o,i,r,l,a,c,u=t[6].showAllAlbums?"收起":"查看",d=t[10].count+"",f=t[10],h=[];for(let e=0;e<f.length;e+=1)h[e]=en(Ye(t,f,e));return{c(){e=D("div"),n=D("div"),s=U(u),o=U("全部 "),i=U(d),r=U(" 张专辑"),l=S();for(let t=0;t<h.length;t+=1)h[t].c();M(n,"class","btn light"),T(n,"position","absolute"),T(n,"left","180px"),T(n,"top","0px"),T(n,"border-radius","6px"),M(e,"class","Row"),M(e,"row-title","收藏的专辑"),T(e,"--item-height","200px"),T(e,"--item-width","200px")},m(u,d){A(u,e,d),_(e,n),_(n,s),_(n,o),_(n,i),_(n,r),_(e,l);for(let t=0;t<h.length;t+=1)h[t].m(e,null);a||(c=z(n,"click",t[22]),a=!0)},p(t,n){if(64&n[0]&&u!==(u=t[6].showAllAlbums?"收起":"查看")&&B(s,u),1024&n[0]&&d!==(d=t[10].count+"")&&B(i,d),35840&n[0]){let s;for(f=t[10],s=0;s<f.length;s+=1){const o=Ye(t,f,s);h[s]?h[s].p(o,n):(h[s]=en(o),h[s].c(),h[s].m(e,null))}for(;s<h.length;s+=1)h[s].d(1);h.length=f.length}},d(t){t&&E(e),P(h,t),a=!1,c()}}}function en(t){let e,n,s,o,r,l,a,u,d,f,h,p,m=t[30].name+"";function g(){return t[23](t[30])}function v(){return t[24](t[30])}return{c(){e=D("div"),n=D("div"),n.textContent="",s=S(),o=D("img"),a=S(),u=D("div"),d=U(m),f=S(),M(n,"class","btn light FAB svelte-phqldw"),M(o,"class","album svelte-phqldw"),M(o,"draggable","false"),c(o.src,r=t[30].picUrl)||M(o,"src",r),M(o,"alt",l=t[30].name),M(o,"decoding","async"),M(u,"class","name title svelte-phqldw"),T(u,"width","calc(100% - 16px)"),M(e,"class","Column artist-c al active svelte-phqldw")},m(t,i){A(t,e,i),_(e,n),_(e,s),_(e,o),_(e,a),_(e,u),_(u,d),_(e,f),h||(p=[z(n,"click",q(g)),z(n,"mouseenter",q(rn)),z(n,"mouseleave",q(ln)),z(e,"click",v)],h=!0)},p(e,n){t=e,1024&n[0]&&!c(o.src,r=t[30].picUrl)&&M(o,"src",r),1024&n[0]&&l!==(l=t[30].name)&&M(o,"alt",l),1024&n[0]&&m!==(m=t[30].name+"")&&B(d,m)},d(t){t&&E(e),h=!1,i(p)}}}function nn(t){let e,n,s,o,i,r,l,a,u,d,f,h,p,m,g,v;d=new ve({props:{cssStyle:"width: 100%",$$slots:{default:[Ge]},$$scope:{ctx:t}}}),t[19](d);let $=t[9].length&&Qe(t),w=t[10].length&&tn(t);return{c(){e=D("div"),n=D("div"),s=D("img"),i=S(),r=D("div"),l=U("▼"),u=S(),Lt(d.$$.fragment),h=S(),$&&$.c(),p=S(),w&&w.c(),M(s,"class","collection-bgc svelte-phqldw"),c(s.src,o=t[4])||M(s,"src",o),M(s,"alt",""),M(r,"title","展开"),M(r,"class",a="toggle"+(t[8]?"":" unfold")+" svelte-phqldw"),M(n,"class",f="collection"+(t[8]?"":" unfold")+" svelte-phqldw"),M(n,"data-title","我的歌单"),M(e,"class","row")},m(o,a){A(o,e,a),_(e,n),_(n,s),t[16](s),_(n,i),_(n,r),_(r,l),_(n,u),At(d,n,null),t[20](n),_(e,h),$&&$.m(e,null),_(e,p),w&&w.m(e,null),m=!0,g||(v=z(r,"click",t[12]),g=!0)},p(t,i){(!m||16&i[0]&&!c(s.src,o=t[4]))&&M(s,"src",o),(!m||256&i[0]&&a!==(a="toggle"+(t[8]?"":" unfold")+" svelte-phqldw"))&&M(r,"class",a);const l={};1&i[0]|64&i[1]&&(l.$$scope={dirty:i,ctx:t}),d.$set(l),(!m||256&i[0]&&f!==(f="collection"+(t[8]?"":" unfold")+" svelte-phqldw"))&&M(n,"class",f),t[9].length?$?$.p(t,i):($=Qe(t),$.c(),$.m(e,p)):$&&($.d(1),$=null),t[10].length?w?w.p(t,i):(w=tn(t),w.c(),w.m(e,null)):w&&(w.d(1),w=null)},i(t){m||(wt(d.$$.fragment,t),m=!0)},o(t){yt(d.$$.fragment,t),m=!1},d(n){n&&E(e),t[16](null),t[19](null),Et(d),t[20](null),$&&$.d(),w&&w.d(),g=!1,v()}}}function sn(t){let e,n;return e=new xe({props:{$$slots:{default:[nn]},$$scope:{ctx:t}}}),t[25](e),{c(){Lt(e.$$.fragment)},m(t,s){At(e,t,s),n=!0},p(t,n){const s={};2013&n[0]|64&n[1]&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){n||(wt(e.$$.fragment,t),n=!0)},o(t){yt(e.$$.fragment,t),n=!1},d(n){t[25](null),Et(e,n)}}}function on(t){let e=store.get("playlist"+t);return e||async function(t){let e=store.get("cookie"),n=store.get("playlist"+t);let s=(await NeteaseApi.getPlaylistDetail(t,e)).body.playlist.trackIds.reduce(((t,e)=>[...t,e.id]),[]);return n=(await NeteaseApi.getSongDetail(s,e)).body.songs,store.setCache("playlist"+t,n),n}(t)}function rn(){this.parentNode.classList.remove("active")}function ln(){this.parentNode.classList.add("active")}function an(t){let e=store.get("al"+t);return e||new Promise((async n=>{e=(await NeteaseApi.getAlbumDetail(t,store.get("cookie"))).body.songs,store.set("al"+t,e),n(e)}))}const cn=()=>{};function un(t,e,n){let s,o,i,r,{playlists:l=[]}=e;X((async function(){let t=store.get("dailyDesktop");if(n(3,o.onload=()=>{__setColor(s,o,1),s.style.setProperty("--start","220px"),r.recalc()},o),t&&(new Date).getTime()-t.timeStamp<576e5)return n(4,i=t.url);t=await server.fetchJson("https://cn.bing.com/HPImageArchive.aspx?format=js&idx=0&n=1");const e="https://www.bing.com"+t.images[0].url;n(4,i=e),store.set("dailyDesktop",{timeStamp:(new Date).getTime(),url:e})}));let a=Pager.getContext().save;function c(t,e){Pager.openNew(t,Fe,e)}!async function(){if(a.__playlists)return n(0,l=a.__playlists);const t=store.get("cookie"),e=store.get("profile").userId,s=await NeteaseApi.getUserPlaylist(e,t);200==s.status&&n(6,a.__playlists=n(0,l=s.body.playlist),a)}();let u,d=!0;function f(){n(8,d=!d),u.measure((({height:t})=>{s.style.setProperty("--height",t+160+"px"),r.recalc()}))}Pager.beforeSwitch((()=>{const{save:t}=Pager.getContext();t&&(t.collectionFolded=d)})),X((()=>{contextMap.set(s,{"复制图片链接":"","图片另存为":""});const{save:t}=Pager.getContext();t&&void 0!==t.collectionFolded&&(t.collectionFolded||f())})),K((()=>{contextMap.delete(s)}));let h=[];async function p(){let t=await async function(){let t=a.__artistSublist;if(!t){let t=await NeteaseApi.getArtistSublist(store.get("cookie"),1);return t=await NeteaseApi.getArtistSublist(store.get("cookie"),t.body.count),t.body.data.count=t.body.count,n(6,a.__artistSublist=t.body.data,a)}return t}();n(9,h=a.showAllArtists?t:t.slice(0,12)),n(9,h.count=t.count,h),r.recalc()}p();let m=[];async function g(t){const e=await async function(){let t=a.__alSublist;if(!t){let t=await NeteaseApi.getAlbumSublist(store.get("cookie"),1);return t=await NeteaseApi.getAlbumSublist(store.get("cookie"),t.body.count),t.body.data.count=t.body.count,n(6,a.__alSublist=t.body.data,a)}return t}();n(10,m=e.slice(0,t||e.count)),n(10,m.count=e.count,m),r.recalc()}async function v(t,e=0){let n=0===e?await on(t):await an(t);const s=oe.getCurrentData();if(oe.loadList(n),s){let t=oe.query({name:s.name});if(t.length)return oe.play(t[0])}oe.play(0)}a.showAllAlbums?g():g(12);return t.$$set=t=>{"playlists"in t&&n(0,l=t.playlists)},[l,on,s,o,i,r,a,u,d,h,m,c,f,p,g,v,function(t){et[t?"unshift":"push"]((()=>{o=t,n(3,o)}))},t=>{v(t.id)},t=>{let e=t.id;c(t.name,(()=>({header:{imgUrl:t.coverImgUrl,title:t.name,subtitle:`由${t.creator.nickname}创建`,playCount:t.playCount,trackCount:t.trackCount},listData:on(e),sortBy:window.store.get("sortBy"),forwards:window.store.get("forwards"),onTabDestroy(){!function(t){store.rm("playlist"+t)}(e)}})))},function(t){et[t?"unshift":"push"]((()=>{u=t,n(7,u)}))},function(t){et[t?"unshift":"push"]((()=>{s=t,n(2,s)}))},()=>{a.showAllArtists?(n(6,a.showAllArtists=!1,a),p()):(n(6,a.showAllArtists=!0,a),p())},()=>{a.showAllAlbums?(g(12),n(6,a.showAllAlbums=!1,a)):(g(),n(6,a.showAllAlbums=!0,a))},t=>{v(t.id,1)},t=>{let e=t.id;c(t.name,(()=>({header:{imgUrl:t.picUrl,title:t.name,subtitle:`${t.artists.reduce(((t,e)=>[...t,e.name]),[]).join(" ")}`,playCount:t.playCount,trackCount:t.size},listData:an(e),sortBy:window.store.get("sortBy"),forwards:window.store.get("forwards"),onTabDestroy(){!function(t){store.rm("al"+t)}(e)}})))},function(t){et[t?"unshift":"push"]((()=>{r=t,n(5,r)}))}]}class dn extends Ut{constructor(t){super(),Dt(this,t,un,sn,l,{playlists:0,getDetailX:1},null,[-1,-1])}get getDetailX(){return on}}function fn(e){let n;return{c(){n=D("div"),n.innerHTML="<h1>发现</h1>",M(n,"class","row")},m(t,e){A(t,n,e)},p:t,i:t,o:t,d(t){t&&E(n)}}}class hn extends Ut{constructor(t){super(),Dt(this,t,null,fn,l,{})}}function pn(t){let e,n,s,o,r,l,a;const c=t[9].default,d=u(c,t,t[8],null);return{c(){e=D("div"),n=D("div"),d&&d.c(),M(n,"class","container svelte-1e79ph6"),M(n,"style",t[1]),M(e,"class","layer row svelte-1e79ph6")},m(o,i){A(o,e,i),_(e,n),d&&d.m(n,null),r=!0,l||(a=[v(s=t[4].call(null,n)),z(n,"click",q(t[10])),z(e,"click",t[3])],l=!0)},p(t,e){d&&d.p&&(!r||256&e)&&h(d,c,t,t[8],r?f(c,t[8],e,null):p(t[8]),null),(!r||2&e)&&M(n,"style",t[1])},i(t){r||(wt(d,t),o&&o.end(1),r=!0)},o(t){yt(d,t),o=bt(e,be,{duration:100}),r=!1},d(t){t&&E(e),d&&d.d(t),t&&o&&o.end(),l=!1,i(a)}}}function mn(n){let s,o,l,a,c,d,m,g;const $=n[9].default,y=u($,n,n[8],null);return{c(){s=D("div"),y&&y.c(),M(s,"class","container svelte-1e79ph6"),M(s,"style",o="z-index:99999;"+n[1])},m(t,e){A(t,s,e),y&&y.m(s,null),d=!0,m||(g=[v(l=n[4].call(null,s)),z(s,"click",n[3])],m=!0)},p(t,e){y&&y.p&&(!d||256&e)&&h(y,$,t,t[8],d?f($,t[8],e,null):p(t[8]),null),(!d||2&e&&o!==(o="z-index:99999;"+t[1]))&&M(s,"style",o)},i(n){d||(wt(y,n),rt((()=>{c&&c.end(1),a=function(n,s,o){let i,l,a=s(n,o),c=!1,u=0;function d(){i&&V(n,i)}function f(){const{delay:s=0,duration:o=300,easing:r=e,tick:f=t,css:h}=a||xt;h&&(i=W(n,0,1,o,s,r,h,u++)),f(0,1);const p=w()+s,m=p+o;l&&l.abort(),c=!0,rt((()=>pt(n,!0,"start"))),l=k((t=>{if(c){if(t>=m)return f(1,0),pt(n,!0,"end"),d(),c=!1;if(t>=p){const e=r((t-p)/o);f(e,1-e)}}return c}))}let h=!1;return{start(){h||(h=!0,V(n),r(a)?(a=a(),ht().then(f)):f())},invalidate(){h=!1},end(){c&&(d(),c=!1)}}}(s,be,{duration:120}),a.start()})),d=!0)},o(t){yt(y,t),a&&a.invalidate(),c=bt(s,be,{duration:80}),d=!1},d(t){t&&E(s),y&&y.d(t),t&&c&&c.end(),m=!1,i(g)}}}function gn(t){let e,n,s,o=t[0]&&!t[2]&&pn(t),i=t[0]&&t[2]&&mn(t);return{c(){o&&o.c(),e=S(),i&&i.c(),n=N()},m(t,r){o&&o.m(t,r),A(t,e,r),i&&i.m(t,r),A(t,n,r),s=!0},p(t,[s]){t[0]&&!t[2]?o?(o.p(t,s),5&s&&wt(o,1)):(o=pn(t),o.c(),wt(o,1),o.m(e.parentNode,e)):o&&(vt(),yt(o,1,1,(()=>{o=null})),$t()),t[0]&&t[2]?i?(i.p(t,s),5&s&&wt(i,1)):(i=mn(t),i.c(),wt(i,1),i.m(n.parentNode,n)):i&&(vt(),yt(i,1,1,(()=>{i=null})),$t())},i(t){s||(wt(o),wt(i),s=!0)},o(t){yt(o),yt(i),s=!1},d(t){o&&o.d(t),t&&E(e),i&&i.d(t),t&&E(n)}}}function vn(t,e,n){let{$$slots:s={},$$scope:o}=e;const i=J();function r(){i("layerClick")}G("close",r);let{showPopupWindow:l=!1}=e,{cssText:a=""}=e,{noLayer:c=!1}=e;return t.$$set=t=>{"showPopupWindow"in t&&n(0,l=t.showPopupWindow),"cssText"in t&&n(1,a=t.cssText),"noLayer"in t&&n(2,c=t.noLayer),"$$scope"in t&&n(8,o=t.$$scope)},[l,a,c,r,function(t){return i("animIn",t),{destroy(){i("animOut",t)}}},function(t,e={}){return undefined.animate(t,e)},function(){n(0,l=!0)},function(){n(0,l=!1)},o,s,function(e){Z.call(this,t,e)}]}class $n extends Ut{constructor(t){super(),Dt(this,t,vn,gn,l,{showPopupWindow:0,cssText:1,noLayer:2,animate:5,destroy:6,pop:7})}get animate(){return this.$$.ctx[5]}get destroy(){return this.$$.ctx[6]}get pop(){return this.$$.ctx[7]}}const wn=t=>({}),yn=t=>({...t[4]});function xn(t){let e;const n=t[7].default,s=u(n,t,t[6],yn);return{c(){s&&s.c()},m(t,n){s&&s.m(t,n),e=!0},p(t,o){s&&s.p&&(!e||80&o)&&h(s,n,t,t[6],(t=>16&t)(o)||!e?p(t[6]):f(n,t[6],o,wn),yn)},i(t){e||(wt(s,t),e=!0)},o(t){yt(s,t),e=!1},d(t){s&&s.d(t)}}}function bn(t){let e,s,o;const i=[t[4]];var r=t[0];function l(t){let e={};for(let t=0;t<i.length;t+=1)e=n(e,i[t]);return{props:e}}return r&&(e=new r(l())),{c(){e&&Lt(e.$$.fragment),s=N()},m(t,n){e&&At(e,t,n),A(t,s,n),o=!0},p(t,n){const o=16&n?kt(i,[_t(t[4])]):{};if(r!==(r=t[0])){if(e){vt();const t=e;yt(t.$$.fragment,1,0,(()=>{Et(t,1)})),$t()}r?(e=new r(l()),Lt(e.$$.fragment),wt(e.$$.fragment,1),At(e,s.parentNode,s)):e=null}else r&&e.$set(o)},i(t){o||(e&&wt(e.$$.fragment,t),o=!0)},o(t){e&&yt(e.$$.fragment,t),o=!1},d(t){t&&E(s),e&&Et(e,t)}}}function kn(t){let e,n,s,o,i,r;const l=[bn,xn],a=[];function c(t,e){return t[0]?0:1}return n=c(t),s=a[n]=l[n](t),{c(){e=D("div"),s.c(),M(e,"class","container svelte-1mv98ub"),M(e,"style",t[1])},m(s,l){A(s,e,l),a[n].m(e,null),t[8](e),o=!0,i||(r=z(e,"mousedown",t[3]),i=!0)},p(t,[i]){let r=n;n=c(t),n===r?a[n].p(t,i):(vt(),yt(a[r],1,1,(()=>{a[r]=null})),$t(),s=a[n],s?s.p(t,i):(s=a[n]=l[n](t),s.c()),wt(s,1),s.m(e,null)),(!o||2&i)&&M(e,"style",t[1])},i(t){o||(wt(s),o=!0)},o(t){yt(s),o=!1},d(s){s&&E(e),a[n].d(),t[8](null),i=!1,r()}}}function _n(t){t.animate({opacity:["0.4","0"]},200).onfinish=()=>{t.remove()}}function Cn(t,e,s){let{$$slots:o={},$$scope:i}=e,{rippleColor:r=""}=e,{component:l=null}=e,{cssStyle:a=""}=e,c=null;return t.$$set=t=>{s(4,e=n(n({},e),m(t))),"rippleColor"in t&&s(5,r=t.rippleColor),"component"in t&&s(0,l=t.component),"cssStyle"in t&&s(1,a=t.cssStyle),"$$scope"in t&&s(6,i=t.$$scope)},e=m(e),[l,a,c,function(t){!function(t,e,n,s){const{left:o,top:i}=t.getBoundingClientRect(),{pageX:r,pageY:l}=e,{offsetWidth:a,offsetHeight:c}=t,u=Math.sqrt(c**2+a**2)/2,d=document.createElement("div");d.style.position="absolute",d.style.borderRadius="50%",d.style.opacity="0.4",d.style.pointerEvents="none",t.appendChild(d),d.animate([{top:l-i+"px",left:r-o+"px",width:"0px",height:"0px",backgroundColor:`${s||"var(--controlColor)"}`},{top:c/2-u+"px",left:a/2-u+"px",width:2*u+"px",height:2*u+"px",backgroundColor:`${s||"var(--controlColor)"}`}],{duration:320,fill:"forwards",easing:"cubic-bezier(0.05, 0.7, 0.2, 1)"}).onfinish=()=>{"function"==typeof n&&n.call(d,d)}}(c,t,_n,r)},e,r,i,o,function(t){et[t?"unshift":"push"]((()=>{c=t,s(2,c)}))}]}class Ln extends Ut{constructor(t){super(),Dt(this,t,Cn,kn,l,{rippleColor:5,component:0,cssStyle:1})}}function An(e){let n;return{c(){n=D("div"),T(n,"width","14px")},m(t,e){A(t,n,e)},p:t,i:t,o:t,d(t){t&&E(n)}}}function En(t){let e,n,s;return n=new Ft({props:{size:t[1],isUrl:t[0],avatar:t[2],width:t[6],height:t[7]}}),{c(){e=D("div"),Lt(n.$$.fragment),M(e,"class","column leading svelte-emkyx5")},m(t,o){A(t,e,o),At(n,e,null),s=!0},p(t,e){const s={};2&e&&(s.size=t[1]),1&e&&(s.isUrl=t[0]),4&e&&(s.avatar=t[2]),64&e&&(s.width=t[6]),128&e&&(s.height=t[7]),n.$set(s)},i(t){s||(wt(n.$$.fragment,t),s=!0)},o(t){yt(n.$$.fragment,t),s=!1},d(t){t&&E(e),Et(n)}}}function Pn(t){let e,n,s,o;function i(t,e){return t[4]?Sn:Un}let r=i(t),l=r(t);const a=t[13].default,c=u(a,t,t[14],null);return{c(){e=D("div"),n=D("div"),l.c(),s=S(),c&&c.c(),M(n,"class","row align svelte-emkyx5"),M(n,"style",t[5]),M(e,"class","column"),T(e,"justify-content","space-between"),T(e,"width",t[9]?"calc(100% - 84px)":"calc(100% - 28px)")},m(t,i){A(t,e,i),_(e,n),l.m(n,null),_(e,s),c&&c.m(e,null),o=!0},p(t,s){r===(r=i(t))&&l?l.p(t,s):(l.d(1),l=r(t),l&&(l.c(),l.m(n,null))),(!o||32&s)&&M(n,"style",t[5]),c&&c.p&&(!o||16384&s)&&h(c,a,t,t[14],o?f(a,t[14],s,null):p(t[14]),null),(!o||512&s)&&T(e,"width",t[9]?"calc(100% - 84px)":"calc(100% - 28px)")},i(t){o||(wt(c,t),o=!0)},o(t){yt(c,t),o=!1},d(t){t&&E(e),l.d(),c&&c.d(t)}}}function Dn(t){let e,n,s;function o(t,e){return t[4]?zn:Nn}let i=o(t),r=i(t);const l=t[13].default,a=u(l,t,t[14],null);return{c(){e=D("div"),r.c(),n=S(),a&&a.c(),M(e,"class","row align svelte-emkyx5"),M(e,"style",t[5])},m(t,o){A(t,e,o),r.m(e,null),_(e,n),a&&a.m(e,null),s=!0},p(t,c){i===(i=o(t))&&r?r.p(t,c):(r.d(1),r=i(t),r&&(r.c(),r.m(e,n))),a&&a.p&&(!s||16384&c)&&h(a,l,t,t[14],s?f(l,t[14],c,null):p(t[14]),null),(!s||32&c)&&M(e,"style",t[5])},i(t){s||(wt(a,t),s=!0)},o(t){yt(a,t),s=!1},d(t){t&&E(e),r.d(),a&&a.d(t)}}}function Un(t){let e,n;return{c(){e=D("span"),n=U(t[3])},m(t,s){A(t,e,s),_(e,n)},p(t,e){8&e&&B(n,t[3])},d(t){t&&E(e)}}}function Sn(t){let e,n,s,o,i;return{c(){e=D("span"),n=U(t[3]),s=S(),o=D("span"),i=U(t[4]),T(o,"font-size","small"),T(o,"color","#888")},m(t,r){A(t,e,r),_(e,n),A(t,s,r),A(t,o,r),_(o,i)},p(t,e){8&e&&B(n,t[3]),16&e&&B(i,t[4])},d(t){t&&E(e),t&&E(s),t&&E(o)}}}function Nn(t){let e,n;return{c(){e=D("span"),n=U(t[3])},m(t,s){A(t,e,s),_(e,n)},p(t,e){8&e&&B(n,t[3])},d(t){t&&E(e)}}}function zn(t){let e,n,s,o,i;return{c(){e=D("span"),n=U(t[3]),s=S(),o=D("span"),i=U(t[4]),T(o,"font-size","small"),T(o,"color","#888")},m(t,r){A(t,e,r),_(e,n),A(t,s,r),A(t,o,r),_(o,i)},p(t,e){8&e&&B(n,t[3]),16&e&&B(i,t[4])},d(t){t&&E(e),t&&E(s),t&&E(o)}}}function qn(t){let e,n,s,o,r,l,a,c,u,d;const f=[En,An],h=[];function p(t,e){return t[9]?0:1}n=p(t),s=h[n]=f[n](t);const m=[Dn,Pn],g=[];function v(t,e){return t[10]?0:1}return r=v(t),l=g[r]=m[r](t),{c(){e=D("div"),s.c(),o=S(),l.c(),M(e,"class",a="column c"+(t[8]?" cl":"")+" svelte-emkyx5")},m(s,i){A(s,e,i),h[n].m(e,null),_(e,o),g[r].m(e,null),c=!0,u||(d=[z(e,"click",t[11]),z(e,"mousedown",t[12])],u=!0)},p(t,i){let u=n;n=p(t),n===u?h[n].p(t,i):(vt(),yt(h[u],1,1,(()=>{h[u]=null})),$t(),s=h[n],s?s.p(t,i):(s=h[n]=f[n](t),s.c()),wt(s,1),s.m(e,o));let d=r;r=v(t),r===d?g[r].p(t,i):(vt(),yt(g[d],1,1,(()=>{g[d]=null})),$t(),l=g[r],l?l.p(t,i):(l=g[r]=m[r](t),l.c()),wt(l,1),l.m(e,null)),(!c||256&i&&a!==(a="column c"+(t[8]?" cl":"")+" svelte-emkyx5"))&&M(e,"class",a)},i(t){c||(wt(s),wt(l),c=!0)},o(t){yt(s),yt(l),c=!1},d(t){t&&E(e),h[n].d(),g[r].d(),u=!1,i(d)}}}function Mn(t){let e,n;return e=new Ln({props:{cssStyle:"width: 100%",rippleColor:t[8]?"gray":"transparent",$$slots:{default:[qn]},$$scope:{ctx:t}}}),{c(){Lt(e.$$.fragment)},m(t,s){At(e,t,s),n=!0},p(t,[n]){const s={};256&n&&(s.rippleColor=t[8]?"gray":"transparent"),18431&n&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){n||(wt(e.$$.fragment,t),n=!0)},o(t){yt(e.$$.fragment,t),n=!1},d(t){Et(e,t)}}}function Bn(t,e,n){let{$$slots:s={},$$scope:o}=e;const i=J();let{isUrl:r=!0}=e,{size:l="normal"}=e,{avatar:a=""}=e,{data:c=""}=e,{extra:u=""}=e,{style:d=""}=e,{width:f}=e,{height:h}=e,{clickable:p=!0}=e,{useAvatar:m=!0}=e,{breakLine:g=!1}=e;return t.$$set=t=>{"isUrl"in t&&n(0,r=t.isUrl),"size"in t&&n(1,l=t.size),"avatar"in t&&n(2,a=t.avatar),"data"in t&&n(3,c=t.data),"extra"in t&&n(4,u=t.extra),"style"in t&&n(5,d=t.style),"width"in t&&n(6,f=t.width),"height"in t&&n(7,h=t.height),"clickable"in t&&n(8,p=t.clickable),"useAvatar"in t&&n(9,m=t.useAvatar),"breakLine"in t&&n(10,g=t.breakLine),"$$scope"in t&&n(14,o=t.$$scope)},[r,l,a,c,u,d,f,h,p,m,g,function(t){i("click",t)},function(t){i("mousedown",t)},s,o]}class Rn extends Ut{constructor(t){super(),Dt(this,t,Bn,Mn,l,{isUrl:0,size:1,avatar:2,data:3,extra:4,style:5,width:6,height:7,clickable:8,useAvatar:9,breakLine:10})}}function Tn(e){let n,s,o,i,r;return{c(){n=D("img"),o=S(),i=D("h5"),r=U(e[6]),c(n.src,s=e[5])||M(n,"src",s),M(n,"width",228),M(n,"height",228),M(n,"draggable","false"),M(n,"alt"," "),T(n,"border-radius","24px")},m(t,s){A(t,n,s),e[13](n),A(t,o,s),A(t,i,s),_(i,r)},p(t,e){32&e&&!c(n.src,s=t[5])&&M(n,"src",s),64&e&&B(r,t[6])},i:t,o:t,d(t){t&&E(n),e[13](null),t&&E(o),t&&E(i)}}}function On(t){let e,n,s,o,r,l,a,c,u,d,f;return c=new Ln({props:{rippleColor:"#000",cssStyle:"border-radius: 8px;",$$slots:{default:[jn]},$$scope:{ctx:t}}}),{c(){e=D("input"),s=S(),o=D("input"),l=S(),a=D("div"),Lt(c.$$.fragment),M(e,"type","text"),M(e,"class",n=g(t[2]&&"error")+" svelte-12m1k1q"),M(e,"placeholder","电话"),M(o,"type","password"),M(o,"class",r=g(t[2]&&"error")+" svelte-12m1k1q"),M(o,"placeholder","密码"),T(a,"padding","24px 0px 12px 0px")},m(n,i){A(n,e,i),R(e,t[0]),A(n,s,i),A(n,o,i),R(o,t[1]),A(n,l,i),A(n,a,i),At(c,a,null),u=!0,d||(f=[z(e,"input",t[11]),z(o,"input",t[12])],d=!0)},p(t,s){(!u||4&s&&n!==(n=g(t[2]&&"error")+" svelte-12m1k1q"))&&M(e,"class",n),1&s&&e.value!==t[0]&&R(e,t[0]),(!u||4&s&&r!==(r=g(t[2]&&"error")+" svelte-12m1k1q"))&&M(o,"class",r),2&s&&o.value!==t[1]&&R(o,t[1]);const i={};65536&s&&(i.$$scope={dirty:s,ctx:t}),c.$set(i)},i(t){u||(wt(c.$$.fragment,t),u=!0)},o(t){yt(c.$$.fragment,t),u=!1},d(t){t&&E(e),t&&E(s),t&&E(o),t&&E(l),t&&E(a),Et(c),d=!1,i(f)}}}function jn(e){let n,s,o;return{c(){n=D("div"),n.textContent="登陆",M(n,"class","column submit svelte-12m1k1q")},m(t,i){A(t,n,i),s||(o=z(n,"click",e[7]),s=!0)},p:t,d(t){t&&E(n),s=!1,o()}}}function In(t){let e,n,s,o,i,r,l,a,c,u,d,f,h,p=t[8][t[3]]+"",m=t[8][t[3]?0:1]+"";const g=[On,Tn],v=[];function $(t,e){return t[3]?t[5]?1:-1:0}return~(c=$(t))&&(u=v[c]=g[c](t)),{c(){e=D("div"),n=D("h3"),s=U(p),o=U("登录 "),i=D("span"),r=U("使用"),l=U(m),a=S(),u&&u.c(),M(i,"class","span svelte-12m1k1q"),M(e,"class","row c svelte-12m1k1q")},m(u,p){A(u,e,p),_(e,n),_(n,s),_(n,o),_(n,i),_(i,r),_(i,l),_(e,a),~c&&v[c].m(e,null),d=!0,f||(h=z(i,"click",t[10]),f=!0)},p(t,[n]){(!d||8&n)&&p!==(p=t[8][t[3]]+"")&&B(s,p),(!d||8&n)&&m!==(m=t[8][t[3]?0:1]+"")&&B(l,m);let o=c;c=$(t),c===o?~c&&v[c].p(t,n):(u&&(vt(),yt(v[o],1,1,(()=>{v[o]=null})),$t()),~c?(u=v[c],u?u.p(t,n):(u=v[c]=g[c](t),u.c()),wt(u,1),u.m(e,null)):u=null)},i(t){d||(wt(u),d=!0)},o(t){yt(u),d=!1},d(t){t&&E(e),~c&&v[c].d(),f=!1,h()}}}function Hn(t,e,n){const s=Q("close")||(()=>{rem.emit("__openMinePage"),rem.emit("__updateLoginAvatar")});let o,i,r=!1;let l,a=0,c="",u="等待扫描";async function d(){const t=await NeteaseApi.loginViaQRCode(),e=t[0];n(5,c=t[1].body.data.qrimg);let o=async()=>{const t=await NeteaseApi.validQRLogin(e);if(1!==a)return;let i=()=>setTimeout((async()=>{await o()}),500);switch(n(6,u=t.body.message),t.body.code){case 801:i();break;case 800:d();break;case 802:n(4,l.style.opacity=.32,l),i();break;case 803:store.set("cookie",t.body.cookie),async function(){const t=await NeteaseApi.getUserAccount(store.get("cookie"));store.set("profile",t.body.data.profile),s()}()}};o()}return[o,i,r,a,l,c,u,async function(){const t=await NeteaseApi.login(o,i);if(200!==t.body.code)return n(1,i=""),void n(2,r=!0);localStorage.setItem("profile",JSON.stringify(t.body.profile)),localStorage.setItem("token",JSON.stringify(t.body.token)),store.set("cookie",t.cookie.join("")),s()},["手机","二维码"],d,()=>{n(3,a=a?0:1),a&&d()},function(){o=this.value,n(0,o)},function(){i=this.value,n(1,i)},function(t){et[t?"unshift":"push"]((()=>{l=t,n(4,l)}))}]}class Wn extends Ut{constructor(t){super(),Dt(this,t,Hn,In,l,{})}}function Vn(e){let n,s,o,i,r,l,a,c,u,d,f,h,p,m,g,v,$,w,y,x;return o=new Ft({props:{avatar:e[0].avatarUrl,width:120,height:120}}),o.$on("click",Fn),h=new Re({props:{id:"profileName",value:e[0].nickname}}),$=new Re({props:{id:"profileDesc",maxlength:300,value:e[0].description,singleLine:!1,cssText:"height: 60px"}}),{c(){n=D("div"),s=D("div"),Lt(o.$$.fragment),i=S(),r=D("div"),r.textContent=`${e[0].nickname}`,l=S(),a=D("div"),c=D("div"),u=D("div"),d=D("span"),d.textContent="昵称",f=S(),Lt(h.$$.fragment),p=S(),m=D("div"),g=D("span"),g.textContent="介绍",v=S(),Lt($.$$.fragment),w=S(),y=D("div"),y.innerHTML='<div class="btn big accent">保存修改</div>',M(r,"class","nickname svelte-q51esc"),M(s,"class","avatar row svelte-q51esc"),M(d,"class","svelte-q51esc"),M(u,"class","row input svelte-q51esc"),M(g,"class","svelte-q51esc"),M(m,"class","row input svelte-q51esc"),M(y,"class","column"),T(y,"justify-content","flex-end"),T(y,"width","100%"),T(y,"margin-top","12px"),M(c,"class","row"),T(c,"width","max-content"),M(a,"class","row"),T(a,"width","calc(100% - 200px)"),M(n,"class","profile-card column svelte-q51esc")},m(t,e){A(t,n,e),_(n,s),At(o,s,null),_(s,i),_(s,r),_(n,l),_(n,a),_(a,c),_(c,u),_(u,d),_(u,f),At(h,u,null),_(c,p),_(c,m),_(m,g),_(m,v),At($,m,null),_(c,w),_(c,y),x=!0},p:t,i(t){x||(wt(o.$$.fragment,t),wt(h.$$.fragment,t),wt($.$$.fragment,t),x=!0)},o(t){yt(o.$$.fragment,t),yt(h.$$.fragment,t),yt($.$$.fragment,t),x=!1},d(t){t&&E(n),Et(o),Et(h),Et($)}}}function Fn(){}function Yn(t){return[store.get("profile")]}class Xn extends Ut{constructor(t){super(),Dt(this,t,Yn,Vn,l,{})}}function Kn(t){let e,n;return{c(){e=D("div"),n=U(t[5]),T(e,"color","var(--controlDark)"),T(e,"font-weight","bold"),T(e,"margin-bottom","12px"),T(e,"margin-left","calc(14px + "+t[0]+")")},m(t,s){A(t,e,s),_(e,n)},p(t,s){32&s&&B(n,t[5]),1&s&&T(e,"margin-left","calc(14px + "+t[0]+")")},d(t){t&&E(e)}}}function Jn(t){let e,n,s,o,i=t[5]&&Kn(t);const r=t[7].default,l=u(r,t,t[6],null);return{c(){e=D("div"),i&&i.c(),n=S(),s=D("div"),l&&l.c(),M(s,"class","tile svelte-16idlr3"),T(s,"border-radius",t[2]),T(s,"background-color",t[3]),T(s,"width","calc(100% - "+t[0]+" * 2)"),T(s,"box-shadow","0px 0px 2px "+t[4]),T(s,"overflow","hidden"),T(s,"margin",t[1]+" "+t[0]),M(e,"class","container svelte-16idlr3")},m(t,r){A(t,e,r),i&&i.m(e,null),_(e,n),_(e,s),l&&l.m(s,null),o=!0},p(t,[a]){t[5]?i?i.p(t,a):(i=Kn(t),i.c(),i.m(e,n)):i&&(i.d(1),i=null),l&&l.p&&(!o||64&a)&&h(l,r,t,t[6],o?f(r,t[6],a,null):p(t[6]),null),(!o||4&a)&&T(s,"border-radius",t[2]),(!o||8&a)&&T(s,"background-color",t[3]),(!o||1&a)&&T(s,"width","calc(100% - "+t[0]+" * 2)"),(!o||16&a)&&T(s,"box-shadow","0px 0px 2px "+t[4]),(!o||3&a)&&T(s,"margin",t[1]+" "+t[0])},i(t){o||(wt(l,t),o=!0)},o(t){yt(l,t),o=!1},d(t){t&&E(e),i&&i.d(),l&&l.d(t)}}}function Gn(t,e,n){let{$$slots:s={},$$scope:o}=e,{marginHorizon:i="10px"}=e,{marginVertical:r="0px"}=e,{radius:l="8px"}=e,{color:a="rgba(255,255,255,0.4)"}=e,{shadowColor:c="rgba(0,0,0,0.2)"}=e,{title:u=""}=e;return t.$$set=t=>{"marginHorizon"in t&&n(0,i=t.marginHorizon),"marginVertical"in t&&n(1,r=t.marginVertical),"radius"in t&&n(2,l=t.radius),"color"in t&&n(3,a=t.color),"shadowColor"in t&&n(4,c=t.shadowColor),"title"in t&&n(5,u=t.title),"$$scope"in t&&n(6,o=t.$$scope)},[i,r,l,a,c,u,o,s]}class Qn extends Ut{constructor(t){super(),Dt(this,t,Gn,Jn,l,{marginHorizon:0,marginVertical:1,radius:2,color:3,shadowColor:4,title:5})}}function Zn(t,e,n){const s=t.slice();return s[6]=e[n],s[8]=n,s}function ts(t){let e,n,s,o,r,l=t[6]+"";function a(...e){return t[4](t[8],...e)}return{c(){e=D("div"),n=U(l),M(e,"class",s="btn outlined"+(t[0]===t[8]?" selected":"")+" svelte-mvb7d9")},m(t,s){A(t,e,s),_(e,n),o||(r=[z(e,"click",a),z(e,"mousedown",ss)],o=!0)},p(o,i){t=o,2&i&&l!==(l=t[6]+"")&&B(n,l),1&i&&s!==(s="btn outlined"+(t[0]===t[8]?" selected":"")+" svelte-mvb7d9")&&M(e,"class",s)},d(t){t&&E(e),o=!1,i(r)}}}function es(t){let e,n=t[1],s=[];for(let e=0;e<n.length;e+=1)s[e]=ts(Zn(t,n,e));return{c(){e=D("div");for(let t=0;t<s.length;t+=1)s[t].c();M(e,"class","column"),T(e,"padding-top","8px")},m(t,n){A(t,e,n);for(let t=0;t<s.length;t+=1)s[t].m(e,null)},p(t,o){if(7&o){let i;for(n=t[1],i=0;i<n.length;i+=1){const r=Zn(t,n,i);s[i]?s[i].p(r,o):(s[i]=ts(r),s[i].c(),s[i].m(e,null))}for(;i<s.length;i+=1)s[i].d(1);s.length=n.length}},d(t){t&&E(e),P(s,t)}}}function ns(t){let e,s;const o=[t[3],{breakLine:!0}];let i={$$slots:{default:[es]},$$scope:{ctx:t}};for(let t=0;t<o.length;t+=1)i=n(i,o[t]);return e=new Rn({props:i}),{c(){Lt(e.$$.fragment)},m(t,n){At(e,t,n),s=!0},p(t,[n]){const s=8&n?kt(o,[_t(t[3]),o[1]]):{};515&n&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){s||(wt(e.$$.fragment,t),s=!0)},o(t){yt(e.$$.fragment,t),s=!1},d(t){Et(e,t)}}}const ss=t=>t.stopPropagation();function os(t,e,s){let{dataList:o=[]}=e,{selected:i=0}=e;const r=J();function l(t,e){r("selected",e),s(0,i=e)}return t.$$set=t=>{s(3,e=n(n({},e),m(t))),"dataList"in t&&s(1,o=t.dataList),"selected"in t&&s(0,i=t.selected)},e=m(e),[i,o,l,e,(t,e)=>l(0,t)]}class is extends Ut{constructor(t){super(),Dt(this,t,os,ns,l,{dataList:1,selected:0})}}function rs(e){let n,s,o,r,l,a;return{c(){n=D("div"),s=D("div"),M(s,"class",o="switchThumb"+(e[0]?" thumb-active":"")+" svelte-9mloa7"),M(n,"class",r="switch"+(e[0]?" active":"")+" svelte-9mloa7")},m(t,o){A(t,n,o),_(n,s),l||(a=[z(n,"mousedown",q(ls)),z(n,"click",q(e[1]))],l=!0)},p(t,[e]){1&e&&o!==(o="switchThumb"+(t[0]?" thumb-active":"")+" svelte-9mloa7")&&M(s,"class",o),1&e&&r!==(r="switch"+(t[0]?" active":"")+" svelte-9mloa7")&&M(n,"class",r)},i:t,o:t,d(t){t&&E(n),l=!1,i(a)}}}const ls=()=>{};function as(t,e,n){let{checked:s=!1}=e;const o=J();function i(){n(0,s=!s),o("toggle",s)}return t.$$set=t=>{"checked"in t&&n(0,s=t.checked)},[s,i,function(){i()}]}class cs extends Ut{constructor(t){super(),Dt(this,t,as,rs,l,{checked:0,toggle:2})}get toggle(){return this.$$.ctx[2]}}function us(t){let e,n,s;function o(e){t[4](e)}let i={};return void 0!==t[0]&&(i.checked=t[0]),e=new cs({props:i}),et.push((()=>Ct(e,"checked",o))),t[5](e),e.$on("toggle",t[2]),{c(){Lt(e.$$.fragment)},m(t,n){At(e,t,n),s=!0},p(t,s){const o={};!n&&1&s&&(n=!0,o.checked=t[0],lt((()=>n=!1))),e.$set(o)},i(t){s||(wt(e.$$.fragment,t),s=!0)},o(t){yt(e.$$.fragment,t),s=!1},d(n){t[5](null),Et(e,n)}}}function ds(t){let e,s;const o=[t[3]];let i={$$slots:{default:[us]},$$scope:{ctx:t}};for(let t=0;t<o.length;t+=1)i=n(i,o[t]);return e=new Rn({props:i}),e.$on("click",t[6]),{c(){Lt(e.$$.fragment)},m(t,n){At(e,t,n),s=!0},p(t,[n]){const s=8&n?kt(o,[_t(t[3])]):{};259&n&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){s||(wt(e.$$.fragment,t),s=!0)},o(t){yt(e.$$.fragment,t),s=!1},d(t){Et(e,t)}}}function fs(t,e,s){let o,i=J(),{checked:r=!1}=e;return t.$$set=t=>{s(3,e=n(n({},e),m(t))),"checked"in t&&s(0,r=t.checked)},e=m(e),[r,o,function(t){let e=t.detail;i("toggle",e)},e,function(t){r=t,s(0,r)},function(t){et[t?"unshift":"push"]((()=>{o=t,s(1,o)}))},()=>o.toggle()]}class hs extends Ut{constructor(t){super(),Dt(this,t,fs,ds,l,{checked:0})}}function ps(t){let e,n,s;function o(e){t[6](e)}let i={data:"开发者工具",extra:"开启或关闭 DevTools",useAvatar:!1,isUrl:!1};return void 0!==t[3]&&(i.checked=t[3]),e=new hs({props:i}),et.push((()=>Ct(e,"checked",o))),e.$on("toggle",ws),{c(){Lt(e.$$.fragment)},m(t,n){At(e,t,n),s=!0},p(t,s){const o={};!n&&8&s&&(n=!0,o.checked=t[3],lt((()=>n=!1))),e.$set(o)},i(t){s||(wt(e.$$.fragment,t),s=!0)},o(t){yt(e.$$.fragment,t),s=!1},d(t){Et(e,t)}}}function ms(t){let e,n,s,o,i,r,l;function a(e){t[7](e)}function c(e){t[8](e)}let u={data:"主题色 (色相)",useAvatar:!1,isUrl:!1};function d(e){t[9](e)}void 0!==t[0]&&(u.dataList=t[0]),void 0!==t[1]&&(u.selected=t[1]),e=new is({props:u}),et.push((()=>Ct(e,"dataList",a))),et.push((()=>Ct(e,"selected",c))),e.$on("selected",t[4]);let f={data:'使用 "Acrylic" ',extra:"性能较低的设备关闭此选项以获得更好的体验",useAvatar:!1,isUrl:!1};return void 0!==t[2]&&(f.checked=t[2]),i=new hs({props:f}),et.push((()=>Ct(i,"checked",d))),i.$on("toggle",t[5]),{c(){Lt(e.$$.fragment),o=S(),Lt(i.$$.fragment)},m(t,n){At(e,t,n),A(t,o,n),At(i,t,n),l=!0},p(t,o){const l={};!n&&1&o&&(n=!0,l.dataList=t[0],lt((()=>n=!1))),!s&&2&o&&(s=!0,l.selected=t[1],lt((()=>s=!1))),e.$set(l);const a={};!r&&4&o&&(r=!0,a.checked=t[2],lt((()=>r=!1))),i.$set(a)},i(t){l||(wt(e.$$.fragment,t),wt(i.$$.fragment,t),l=!0)},o(t){yt(e.$$.fragment,t),yt(i.$$.fragment,t),l=!1},d(t){Et(e,t),t&&E(o),Et(i,t)}}}function gs(e){let n,s;return n=new Rn({props:{useAvatar:!1,data:"清除所有缓存",extra:"需手动重启应用"}}),n.$on("click",ys),{c(){Lt(n.$$.fragment)},m(t,e){At(n,t,e),s=!0},p:t,i(t){s||(wt(n.$$.fragment,t),s=!0)},o(t){yt(n.$$.fragment,t),s=!1},d(t){Et(n,t)}}}function vs(t){let e,n,s,o,i,r,l,a,c,u,d;i=new Re({props:{placeholder:"  搜索设置",fullBorder:!0}});let f=window.rem.isBeta&&function(t){let e,n;return e=new Qn({props:{title:"测试功能",$$slots:{default:[ps]},$$scope:{ctx:t}}}),{c(){Lt(e.$$.fragment)},m(t,s){At(e,t,s),n=!0},p(t,n){const s={};2056&n&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){n||(wt(e.$$.fragment,t),n=!0)},o(t){yt(e.$$.fragment,t),n=!1},d(t){Et(e,t)}}}(t);return a=new Qn({props:{title:"主题",$$slots:{default:[ms]},$$scope:{ctx:t}}}),u=new Qn({props:{title:"缓存",$$slots:{default:[gs]},$$scope:{ctx:t}}}),{c(){e=D("div"),n=D("div"),s=D("h1"),s.textContent="设置",o=S(),Lt(i.$$.fragment),r=S(),f&&f.c(),l=S(),Lt(a.$$.fragment),c=S(),Lt(u.$$.fragment),M(s,"class","svelte-cndn71"),M(n,"class","column grid-margin svelte-cndn71"),T(n,"justify-content","space-between"),T(n,"width","calc(100% - 48px)"),M(e,"class","row c svelte-cndn71")},m(t,h){A(t,e,h),_(e,n),_(n,s),_(n,o),At(i,n,null),_(e,r),f&&f.m(e,null),_(e,l),At(a,e,null),_(e,c),At(u,e,null),d=!0},p(t,e){window.rem.isBeta&&f.p(t,e);const n={};2055&e&&(n.$$scope={dirty:e,ctx:t}),a.$set(n);const s={};2048&e&&(s.$$scope={dirty:e,ctx:t}),u.$set(s)},i(t){d||(wt(i.$$.fragment,t),wt(f),wt(a.$$.fragment,t),wt(u.$$.fragment,t),d=!0)},o(t){yt(i.$$.fragment,t),yt(f),yt(a.$$.fragment,t),yt(u.$$.fragment,t),d=!1},d(t){t&&E(e),Et(i),f&&f.d(),Et(a),Et(u)}}}function $s(t){let e,n;return e=new xe({props:{$$slots:{default:[vs]},$$scope:{ctx:t}}}),{c(){Lt(e.$$.fragment)},m(t,s){At(e,t,s),n=!0},p(t,[n]){const s={};2063&n&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){n||(wt(e.$$.fragment,t),n=!0)},o(t){yt(e.$$.fragment,t),n=!1},d(t){Et(e,t)}}}function ws(t){const e=t.detail?"open":"close";hooks.send(`devtools:${e}`)}function ys(){store.clear()}function xs(t,e,n){let s=store.get("sys-settings"),o=s.theme.controlColor.slice(1),i=s.theme.controlColor[0],r=s.theme.useAcrylic,l=s.beta.showDevTools;return[o,i,r,l,function(t){const e=t.detail;n(1,i=s.theme.controlColor[0]=e),rem.emit("changeControlColor",o[i]),store.set("sys-settings",s)},function(t){const e=t.detail;s.theme.useAcrylic=e,rem.emit("useAcrylic",e)},function(t){l=t,n(3,l)},function(t){o=t,n(0,o)},function(t){i=t,n(1,i)},function(t){r=t,n(2,r)}]}class bs extends Ut{constructor(t){super(),Dt(this,t,xs,$s,l,{})}}function ks(t){let e,n;return e=new Wn({}),{c(){Lt(e.$$.fragment)},m(t,s){At(e,t,s),n=!0},i(t){n||(wt(e.$$.fragment,t),n=!0)},o(t){yt(e.$$.fragment,t),n=!1},d(t){Et(e,t)}}}function _s(e){let n,s,o,i;return{c(){n=D("div"),s=D("div"),s.textContent="  修改个人信息",M(s,"class","btn outlined"),T(n,"padding-left","56px"),T(n,"margin","8px 0px")},m(t,r){A(t,n,r),_(n,s),o||(i=z(s,"click",e[6]),o=!0)},p:t,d(t){t&&E(n),o=!1,i()}}}function Cs(e){let n,s;return n=new Rn({props:{isUrl:!1,style:"font-size: small",size:"small",avatar:"",data:"登陆"}}),n.$on("click",e[4]),{c(){Lt(n.$$.fragment)},m(t,e){At(n,t,e),s=!0},p:t,i(t){s||(wt(n.$$.fragment,t),s=!0)},o(t){yt(n.$$.fragment,t),s=!1},d(t){Et(n,t)}}}function Ls(e){let n,s;return n=new Rn({props:{style:"font-size: small",isUrl:!1,size:"small",avatar:"",data:"注销"}}),n.$on("click",e[5]),{c(){Lt(n.$$.fragment)},m(t,e){At(n,t,e),s=!0},p:t,i(t){s||(wt(n.$$.fragment,t),s=!0)},o(t){yt(n.$$.fragment,t),s=!1},d(t){Et(n,t)}}}function As(t){let e,n,s,o,i,r,l,a,c,u,d,f,h,p,m,g,v,$;function w(e){t[8](e)}let y={$$slots:{default:[ks]},$$scope:{ctx:t}};void 0!==t[2]&&(y.showPopupWindow=t[2]),s=new $n({props:y}),et.push((()=>Ct(s,"showPopupWindow",w))),s.$on("layerClick",t[3]),r=new Rn({props:{isUrl:t[0].avatarUrl,avatar:t[0].avatarUrl||"",data:t[0].name,width:28,height:28,clickable:!1}});let x=t[1]&&_s(t);const b=[Ls,Cs],k=[];function C(t,e){return t[1]?0:1}return c=C(t),u=k[c]=b[c](t),h=new Rn({props:{isUrl:!1,style:"font-size: small",size:"small",avatar:"",data:"设置"}}),h.$on("click",t[7]),m=new Rn({props:{isUrl:!1,style:"font-size: small",size:"small",avatar:"",data:"下载管理"}}),{c(){e=D("div"),n=D("header"),Lt(s.$$.fragment),i=S(),Lt(r.$$.fragment),l=S(),x&&x.c(),a=S(),u.c(),d=S(),f=D("div"),Lt(h.$$.fragment),p=S(),Lt(m.$$.fragment),g=S(),v=D("footer"),v.textContent="REM",M(n,"class","row svelte-hqlcci"),M(f,"class","article row svelte-hqlcci"),M(v,"class","column svelte-hqlcci"),M(e,"class","row c svelte-hqlcci")},m(t,o){A(t,e,o),_(e,n),At(s,n,null),_(n,i),At(r,n,null),_(n,l),x&&x.m(n,null),_(n,a),k[c].m(n,null),_(e,d),_(e,f),At(h,f,null),_(f,p),At(m,f,null),_(e,g),_(e,v),$=!0},p(t,[e]){const i={};1024&e&&(i.$$scope={dirty:e,ctx:t}),!o&&4&e&&(o=!0,i.showPopupWindow=t[2],lt((()=>o=!1))),s.$set(i);const l={};1&e&&(l.isUrl=t[0].avatarUrl),1&e&&(l.avatar=t[0].avatarUrl||""),1&e&&(l.data=t[0].name),r.$set(l),t[1]?x?x.p(t,e):(x=_s(t),x.c(),x.m(n,a)):x&&(x.d(1),x=null);let d=c;c=C(t),c===d?k[c].p(t,e):(vt(),yt(k[d],1,1,(()=>{k[d]=null})),$t(),u=k[c],u?u.p(t,e):(u=k[c]=b[c](t),u.c()),wt(u,1),u.m(n,null))},i(t){$||(wt(s.$$.fragment,t),wt(r.$$.fragment,t),wt(u),wt(h.$$.fragment,t),wt(m.$$.fragment,t),$=!0)},o(t){yt(s.$$.fragment,t),yt(r.$$.fragment,t),yt(u),yt(h.$$.fragment,t),yt(m.$$.fragment,t),$=!1},d(t){t&&E(e),Et(s),Et(r),x&&x.d(),k[c].d(),Et(h),Et(m)}}}function Es(t,e,n){let s=Q("close"),{user:o}=e,i=!!o.avatarUrl,r=!1;return t.$$set=t=>{"user"in t&&n(0,o=t.user)},[o,i,r,()=>{n(2,r=!1);const t=store.get("profile");t&&(n(0,o={avatarUrl:t.avatarUrl,name:t.nickname}),n(1,i=!!o.avatarUrl))},()=>{n(2,r=!0)},function(){NeteaseApi.logout(),store.rm("profile"),store.rm("token"),n(0,o={avatarUrl:"",name:"未登录"}),n(1,i=!!o.avatarUrl)},()=>{s(),Pager.openNew("个人信息",Xn,{})},function(){s(),Pager.openNew("设置",bs,{})},function(t){r=t,n(2,r)}]}class Ps extends Ut{constructor(t){super(),Dt(this,t,Es,As,l,{user:0})}}function Ds(t,e,n){const s=t.slice();return s[23]=e[n],s[33]=n,s}function Us(t,e,n){const s=t.slice();return s[23]=e[n],s}function Ss(t,e,n){const s=t.slice();return s[23]=e[n],s}function Ns(t,e,n){const s=t.slice();return s[23]=e[n],s}function zs(t,e,n){const s=t.slice();return s[23]=e[n],s}function qs(t){let e,n,s;function o(e){t[14](e)}let i={};return void 0!==t[2]&&(i.user=t[2]),e=new Ps({props:i}),et.push((()=>Ct(e,"user",o))),{c(){Lt(e.$$.fragment)},m(t,n){At(e,t,n),s=!0},p(t,s){const o={};!n&&4&s[0]&&(n=!0,o.user=t[2],lt((()=>n=!1))),e.$set(o)},i(t){s||(wt(e.$$.fragment,t),s=!0)},o(t){yt(e.$$.fragment,t),s=!1},d(t){Et(e,t)}}}function Ms(t){let e,n,s=t[5],o=[];for(let e=0;e<s.length;e+=1)o[e]=Rs(Ds(t,s,e));const i=t=>yt(o[t],1,1,(()=>{o[t]=null}));return{c(){for(let t=0;t<o.length;t+=1)o[t].c();e=N()},m(t,s){for(let e=0;e<o.length;e+=1)o[e].m(t,s);A(t,e,s),n=!0},p(t,n){if(552&n[0]){let r;for(s=t[5],r=0;r<s.length;r+=1){const i=Ds(t,s,r);o[r]?(o[r].p(i,n),wt(o[r],1)):(o[r]=Rs(i),o[r].c(),wt(o[r],1),o[r].m(e.parentNode,e))}for(vt(),r=s.length;r<o.length;r+=1)i(r);$t()}},i(t){if(!n){for(let t=0;t<s.length;t+=1)wt(o[t]);n=!0}},o(t){o=o.filter(Boolean);for(let t=0;t<o.length;t+=1)yt(o[t]);n=!1},d(t){P(o,t),t&&E(e)}}}function Bs(t){let e,n,s,o,i,r=t[6].songs&&Ts(t),l=t[6].artists&&js(t),a=t[6].albums&&Hs(t),c=t[6].playlists&&Vs(t);return{c(){r&&r.c(),e=S(),l&&l.c(),n=S(),a&&a.c(),s=S(),c&&c.c(),o=N()},m(t,u){r&&r.m(t,u),A(t,e,u),l&&l.m(t,u),A(t,n,u),a&&a.m(t,u),A(t,s,u),c&&c.m(t,u),A(t,o,u),i=!0},p(t,i){t[6].songs?r?(r.p(t,i),64&i[0]&&wt(r,1)):(r=Ts(t),r.c(),wt(r,1),r.m(e.parentNode,e)):r&&(vt(),yt(r,1,1,(()=>{r=null})),$t()),t[6].artists?l?(l.p(t,i),64&i[0]&&wt(l,1)):(l=js(t),l.c(),wt(l,1),l.m(n.parentNode,n)):l&&(vt(),yt(l,1,1,(()=>{l=null})),$t()),t[6].albums?a?(a.p(t,i),64&i[0]&&wt(a,1)):(a=Hs(t),a.c(),wt(a,1),a.m(s.parentNode,s)):a&&(vt(),yt(a,1,1,(()=>{a=null})),$t()),t[6].playlists?c?(c.p(t,i),64&i[0]&&wt(c,1)):(c=Vs(t),c.c(),wt(c,1),c.m(o.parentNode,o)):c&&(vt(),yt(c,1,1,(()=>{c=null})),$t())},i(t){i||(wt(r),wt(l),wt(a),wt(c),i=!0)},o(t){yt(r),yt(l),yt(a),yt(c),i=!1},d(t){r&&r.d(t),t&&E(e),l&&l.d(t),t&&E(n),a&&a.d(t),t&&E(s),c&&c.d(t),t&&E(o)}}}function Rs(t){let e,n;return e=new Rn({props:{size:"small",data:t[23],isUrl:!1,avatar:t[33]+1}}),e.$on("mousedown",(function(){return t[19](t[23])})),{c(){Lt(e.$$.fragment)},m(t,s){At(e,t,s),n=!0},p(n,s){t=n;const o={};32&s[0]&&(o.data=t[23]),e.$set(o)},i(t){n||(wt(e.$$.fragment,t),n=!0)},o(t){yt(e.$$.fragment,t),n=!1},d(t){Et(e,t)}}}function Ts(t){let e,n,s,o,i=t[6].songs,r=[];for(let e=0;e<i.length;e+=1)r[e]=Os(zs(t,i,e));const l=t=>yt(r[t],1,1,(()=>{r[t]=null}));return{c(){e=D("div"),e.textContent="歌曲",n=S();for(let t=0;t<r.length;t+=1)r[t].c();s=N(),M(e,"class","title svelte-1ewfxbv")},m(t,i){A(t,e,i),A(t,n,i);for(let e=0;e<r.length;e+=1)r[e].m(t,i);A(t,s,i),o=!0},p(t,e){if(584&e[0]){let n;for(i=t[6].songs,n=0;n<i.length;n+=1){const o=zs(t,i,n);r[n]?(r[n].p(o,e),wt(r[n],1)):(r[n]=Os(o),r[n].c(),wt(r[n],1),r[n].m(s.parentNode,s))}for(vt(),n=i.length;n<r.length;n+=1)l(n);$t()}},i(t){if(!o){for(let t=0;t<i.length;t+=1)wt(r[t]);o=!0}},o(t){r=r.filter(Boolean);for(let t=0;t<r.length;t+=1)yt(r[t]);o=!1},d(t){t&&E(e),t&&E(n),P(r,t),t&&E(s)}}}function Os(t){let e,n;return e=new Rn({props:{size:"small",data:t[23].name,isUrl:!1,avatar:""}}),e.$on("mousedown",(function(){return t[15](t[23])})),{c(){Lt(e.$$.fragment)},m(t,s){At(e,t,s),n=!0},p(n,s){t=n;const o={};64&s[0]&&(o.data=t[23].name),e.$set(o)},i(t){n||(wt(e.$$.fragment,t),n=!0)},o(t){yt(e.$$.fragment,t),n=!1},d(t){Et(e,t)}}}function js(t){let e,n,s,o,i,r,l=t[6].artists,a=[];for(let e=0;e<l.length;e+=1)a[e]=Is(Ns(t,l,e));const c=t=>yt(a[t],1,1,(()=>{a[t]=null}));return{c(){e=D("div"),n=S(),s=D("div"),s.textContent="艺术家",o=S();for(let t=0;t<a.length;t+=1)a[t].c();i=N(),M(e,"class","divider"),M(s,"class","title svelte-1ewfxbv")},m(t,l){A(t,e,l),A(t,n,l),A(t,s,l),A(t,o,l);for(let e=0;e<a.length;e+=1)a[e].m(t,l);A(t,i,l),r=!0},p(t,e){if(584&e[0]){let n;for(l=t[6].artists,n=0;n<l.length;n+=1){const s=Ns(t,l,n);a[n]?(a[n].p(s,e),wt(a[n],1)):(a[n]=Is(s),a[n].c(),wt(a[n],1),a[n].m(i.parentNode,i))}for(vt(),n=l.length;n<a.length;n+=1)c(n);$t()}},i(t){if(!r){for(let t=0;t<l.length;t+=1)wt(a[t]);r=!0}},o(t){a=a.filter(Boolean);for(let t=0;t<a.length;t+=1)yt(a[t]);r=!1},d(t){t&&E(e),t&&E(n),t&&E(s),t&&E(o),P(a,t),t&&E(i)}}}function Is(t){let e,n;return e=new Rn({props:{size:"small",data:t[23].name,isUrl:!0,avatar:t[23].img1v1Url,width:24,height:24}}),e.$on("mousedown",(function(){return t[16](t[23])})),{c(){Lt(e.$$.fragment)},m(t,s){At(e,t,s),n=!0},p(n,s){t=n;const o={};64&s[0]&&(o.data=t[23].name),64&s[0]&&(o.avatar=t[23].img1v1Url),e.$set(o)},i(t){n||(wt(e.$$.fragment,t),n=!0)},o(t){yt(e.$$.fragment,t),n=!1},d(t){Et(e,t)}}}function Hs(t){let e,n,s,o,i,r,l=t[6].albums,a=[];for(let e=0;e<l.length;e+=1)a[e]=Ws(Ss(t,l,e));const c=t=>yt(a[t],1,1,(()=>{a[t]=null}));return{c(){e=D("div"),n=S(),s=D("div"),s.textContent="专辑",o=S();for(let t=0;t<a.length;t+=1)a[t].c();i=N(),M(e,"class","divider"),M(s,"class","title svelte-1ewfxbv")},m(t,l){A(t,e,l),A(t,n,l),A(t,s,l),A(t,o,l);for(let e=0;e<a.length;e+=1)a[e].m(t,l);A(t,i,l),r=!0},p(t,e){if(584&e[0]){let n;for(l=t[6].albums,n=0;n<l.length;n+=1){const s=Ss(t,l,n);a[n]?(a[n].p(s,e),wt(a[n],1)):(a[n]=Ws(s),a[n].c(),wt(a[n],1),a[n].m(i.parentNode,i))}for(vt(),n=l.length;n<a.length;n+=1)c(n);$t()}},i(t){if(!r){for(let t=0;t<l.length;t+=1)wt(a[t]);r=!0}},o(t){a=a.filter(Boolean);for(let t=0;t<a.length;t+=1)yt(a[t]);r=!1},d(t){t&&E(e),t&&E(n),t&&E(s),t&&E(o),P(a,t),t&&E(i)}}}function Ws(t){let e,n;return e=new Rn({props:{size:"small",data:t[23].name,isUrl:!1,avatar:" "}}),e.$on("mousedown",(function(){return t[17](t[23])})),{c(){Lt(e.$$.fragment)},m(t,s){At(e,t,s),n=!0},p(n,s){t=n;const o={};64&s[0]&&(o.data=t[23].name),e.$set(o)},i(t){n||(wt(e.$$.fragment,t),n=!0)},o(t){yt(e.$$.fragment,t),n=!1},d(t){Et(e,t)}}}function Vs(t){let e,n,s,o,i,r,l=t[6].playlists,a=[];for(let e=0;e<l.length;e+=1)a[e]=Fs(Us(t,l,e));const c=t=>yt(a[t],1,1,(()=>{a[t]=null}));return{c(){e=D("div"),n=S(),s=D("div"),s.textContent="歌单",o=S();for(let t=0;t<a.length;t+=1)a[t].c();i=N(),M(e,"class","divider"),M(s,"class","title svelte-1ewfxbv")},m(t,l){A(t,e,l),A(t,n,l),A(t,s,l),A(t,o,l);for(let e=0;e<a.length;e+=1)a[e].m(t,l);A(t,i,l),r=!0},p(t,e){if(584&e[0]){let n;for(l=t[6].playlists,n=0;n<l.length;n+=1){const s=Us(t,l,n);a[n]?(a[n].p(s,e),wt(a[n],1)):(a[n]=Fs(s),a[n].c(),wt(a[n],1),a[n].m(i.parentNode,i))}for(vt(),n=l.length;n<a.length;n+=1)c(n);$t()}},i(t){if(!r){for(let t=0;t<l.length;t+=1)wt(a[t]);r=!0}},o(t){a=a.filter(Boolean);for(let t=0;t<a.length;t+=1)yt(a[t]);r=!1},d(t){t&&E(e),t&&E(n),t&&E(s),t&&E(o),P(a,t),t&&E(i)}}}function Fs(t){let e,n;return e=new Rn({props:{size:"small",data:t[23].name,isUrl:!0,avatar:t[23].coverImgUrl,width:24,height:24}}),e.$on("mousedown",(function(){return t[18](t[23])})),{c(){Lt(e.$$.fragment)},m(t,s){At(e,t,s),n=!0},p(n,s){t=n;const o={};64&s[0]&&(o.data=t[23].name),64&s[0]&&(o.avatar=t[23].coverImgUrl),e.$set(o)},i(t){n||(wt(e.$$.fragment,t),n=!0)},o(t){yt(e.$$.fragment,t),n=!1},d(t){Et(e,t)}}}function Ys(t){let e,n,s,o;const i=[Bs,Ms],r=[];function l(t,e){return t[6]?0:1}return e=l(t),n=r[e]=i[e](t),{c(){n.c(),s=N()},m(t,n){r[e].m(t,n),A(t,s,n),o=!0},p(t,o){let a=e;e=l(t),e===a?r[e].p(t,o):(vt(),yt(r[a],1,1,(()=>{r[a]=null})),$t(),n=r[e],n?n.p(t,o):(n=r[e]=i[e](t),n.c()),wt(n,1),n.m(s.parentNode,s))},i(t){o||(wt(n),o=!0)},o(t){yt(n),o=!1},d(t){r[e].d(t),t&&E(s)}}}function Xs(t){let e,n,s,o,r,l,a,c,u,d,f,h,p,m,g;return c=new Ft({props:{size:"big",isUrl:t[0],avatar:t[0]||"",width:32,height:32}}),c.$on("click",t[7]),d=new $n({props:{showPopupWindow:t[1],cssText:"position: absolute; top: 64px; overflow: hidden;",$$slots:{default:[qs]},$$scope:{ctx:t}}}),d.$on("layerClick",t[8]),d.$on("animIn",Ks),h=new $n({props:{noLayer:!0,showPopupWindow:t[4],cssText:"position: fixed; top: 56px; width: 360px; overflow: hidden; max-height: calc(100vh - 148px); min-height: 0",$$slots:{default:[Ys]},$$scope:{ctx:t}}}),h.$on("layerClick",t[20]),{c(){e=D("div"),n=D("div"),s=D("span"),o=S(),r=D("input"),l=S(),a=D("div"),Lt(c.$$.fragment),u=S(),Lt(d.$$.fragment),f=S(),Lt(h.$$.fragment),M(s,"class","iconfont icon-search avatar menu svelte-1ewfxbv"),M(r,"type","text"),M(r,"class","input svelte-1ewfxbv"),M(r,"placeholder","搜索歌曲和歌手"),M(a,"class","avatar-container svelte-1ewfxbv"),M(n,"class","column search svelte-1ewfxbv"),M(e,"class","column svelte-1ewfxbv"),T(e,"margin-left","48px")},m(i,v){A(i,e,v),_(e,n),_(n,s),_(n,o),_(n,r),R(r,t[3]),_(n,l),_(n,a),At(c,a,null),_(e,u),At(d,e,null),_(e,f),At(h,e,null),p=!0,m||(g=[z(s,"click",t[9]),z(r,"input",t[12]),z(r,"change",t[9]),z(r,"focus",t[10]),z(r,"blur",t[13]),z(r,"input",t[11])],m=!0)},p(t,e){8&e[0]&&r.value!==t[3]&&R(r,t[3]);const n={};1&e[0]&&(n.isUrl=t[0]),1&e[0]&&(n.avatar=t[0]||""),c.$set(n);const s={};2&e[0]&&(s.showPopupWindow=t[1]),4&e[0]|8&e[1]&&(s.$$scope={dirty:e,ctx:t}),d.$set(s);const o={};16&e[0]&&(o.showPopupWindow=t[4]),104&e[0]|8&e[1]&&(o.$$scope={dirty:e,ctx:t}),h.$set(o)},i(t){p||(wt(c.$$.fragment,t),wt(d.$$.fragment,t),wt(h.$$.fragment,t),p=!0)},o(t){yt(c.$$.fragment,t),yt(d.$$.fragment,t),yt(h.$$.fragment,t),p=!1},d(t){t&&E(e),Et(c),Et(d),Et(h),m=!1,i(g)}}}function Ks(t){t.detail.animate({transform:["translate(-20px, -32px) scale(0.9)","translate(0px, 0px) scale(1)"],opacity:[0,1]},100)}function Js(t,e,n){let s=!1;let o=store.get("profile"),i={avatarUrl:"",name:"未登录"},{avatarUrl:r=(o?o.avatarUrl:"")}=e;function l(){o&&n(2,i={avatarUrl:o.avatarUrl,name:o.nickname}),n(0,r=o?o.avatarUrl:"")}l(),rem.on("__updateLoginAvatar",(()=>{o=store.get("profile"),l()}));let a,c,u=!1,d=[];async function f(){await NeteaseApi.search(a)}return t.$$set=t=>{"avatarUrl"in t&&n(0,r=t.avatarUrl)},[r,s,i,a,u,d,c,()=>n(1,s=!0),()=>{n(1,s=!1);const t=store.get("profile");t&&n(2,i={avatarUrl:t.avatarUrl,name:t.nickname}),n(0,r=t?t.avatarUrl:"")},f,async function(){n(5,d=(await NeteaseApi.search()).body.result.hots.reduce(((t,e)=>[...t,e.first]),[])),n(4,u=!0)},async function(){if(!a)return n(6,c=null);const t=(await NeteaseApi.suggest(a)).body.result;console.log(t),Object.keys(t).length&&n(6,c=t)},function(){a=this.value,n(3,a)},()=>setTimeout((()=>n(4,u=!1))),function(t){i=t,n(2,i)},t=>{n(3,a=`${t.name}`),f()},t=>{n(3,a=`${t.name}`),f()},t=>{n(3,a=`${t.name}`),f()},t=>{n(3,a=`${t.name}`),f()},t=>{n(3,a=t),f()},()=>n(4,u=!1)]}class Gs extends Ut{constructor(t){super(),Dt(this,t,Js,Xs,l,{avatarUrl:0},null,[-1,-1])}}function Qs(t){let e,n,s,o,r,l,a,c,u,d,f,h,p,m,g,v,$,w=t[0]?"":"";return l=new Gs({}),{c(){e=D("div"),n=D("div"),s=U("REM"),o=S(),r=D("div"),Lt(l.$$.fragment),a=S(),c=D("div"),u=D("div"),u.textContent="",d=S(),f=D("div"),h=U(w),p=S(),m=D("div"),m.textContent="⨉",M(n,"class","title"+(window.rem.isBeta?" debug":"")+" svelte-v5h8ms"),T(r,"align-self","flex-start"),T(r,"margin-top","16px"),M(u,"class","column clk svelte-v5h8ms"),M(f,"class","column clk svelte-v5h8ms"),M(m,"class","column clk red svelte-v5h8ms"),M(c,"class","column btn-group svelte-v5h8ms"),M(e,"class","column container svelte-v5h8ms")},m(i,w){A(i,e,w),_(e,n),_(n,s),_(e,o),_(e,r),At(l,r,null),_(e,a),_(e,c),_(c,u),_(c,d),_(c,f),_(f,h),_(c,p),_(c,m),g=!0,v||($=[z(u,"click",Zs),z(f,"click",t[1]),z(m,"click",to)],v=!0)},p(t,[e]){(!g||1&e)&&w!==(w=t[0]?"":"")&&B(h,w)},i(t){g||(wt(l.$$.fragment,t),g=!0)},o(t){yt(l.$$.fragment,t),g=!1},d(t){t&&E(e),Et(l),v=!1,i($)}}}function Zs(){hooks.send("win:min")}function to(){hooks.send("win:close")}function eo(t,e,n){let s=!1;return hooks.on("win:max",(()=>{n(0,s=!0)})),hooks.on("win:unmax",(()=>{n(0,s=!1)})),[s,function(){s?hooks.send("win:unmax"):hooks.send("win:max")}]}class no extends Ut{constructor(t){super(),Dt(this,t,eo,Qs,l,{})}}function so(t,e,n){const s=t.slice();return s[6]=e[n],s}function oo(t,e,n){const s=t.slice();return s[9]=e[n],s}function io(t){let e,n;return e=new Rn({props:{useAvatar:!1,size:"small",isUrl:!1,data:t[9]}}),e.$on("click",(function(){r(t[4](t[6][t[9]]))&&t[4](t[6][t[9]]).apply(this,arguments)})),{c(){Lt(e.$$.fragment)},m(t,s){At(e,t,s),n=!0},p(n,s){t=n;const o={};8&s&&(o.data=t[9]),e.$set(o)},i(t){n||(wt(e.$$.fragment,t),n=!0)},o(t){yt(e.$$.fragment,t),n=!1},d(t){Et(e,t)}}}function ro(t){let e,n,s,o,i=Object.keys(t[6]),r=[];for(let e=0;e<i.length;e+=1)r[e]=io(oo(t,i,e));const l=t=>yt(r[t],1,1,(()=>{r[t]=null}));return{c(){e=D("div"),n=S();for(let t=0;t<r.length;t+=1)r[t].c();s=N(),M(e,"class","divider svelte-14ron6b")},m(t,i){A(t,e,i),A(t,n,i);for(let e=0;e<r.length;e+=1)r[e].m(t,i);A(t,s,i),o=!0},p(t,e){if(24&e){let n;for(i=Object.keys(t[6]),n=0;n<i.length;n+=1){const o=oo(t,i,n);r[n]?(r[n].p(o,e),wt(r[n],1)):(r[n]=io(o),r[n].c(),wt(r[n],1),r[n].m(s.parentNode,s))}for(vt(),n=i.length;n<r.length;n+=1)l(n);$t()}},i(t){if(!o){for(let t=0;t<i.length;t+=1)wt(r[t]);o=!0}},o(t){r=r.filter(Boolean);for(let t=0;t<r.length;t+=1)yt(r[t]);o=!1},d(t){t&&E(e),t&&E(n),P(r,t),t&&E(s)}}}function lo(t){let e,n,s,o,i,r=t[3],l=[];for(let e=0;e<r.length;e+=1)l[e]=ro(so(t,r,e));const a=t=>yt(l[t],1,1,(()=>{l[t]=null}));return{c(){e=D("div");for(let t=0;t<l.length;t+=1)l[t].c();M(e,"class",n="container "+(t[0]?"display":"")+" svelte-14ron6b"),T(e,"--x",t[1]+"px"),T(e,"--y",t[2]+"px")},m(t,n){A(t,e,n);for(let t=0;t<l.length;t+=1)l[t].m(e,null);s=!0,o||(i=z(e,"click",ao),o=!0)},p(t,[o]){if(24&o){let n;for(r=t[3],n=0;n<r.length;n+=1){const s=so(t,r,n);l[n]?(l[n].p(s,o),wt(l[n],1)):(l[n]=ro(s),l[n].c(),wt(l[n],1),l[n].m(e,null))}for(vt(),n=r.length;n<l.length;n+=1)a(n);$t()}(!s||1&o&&n!==(n="container "+(t[0]?"display":"")+" svelte-14ron6b"))&&M(e,"class",n),(!s||2&o)&&T(e,"--x",t[1]+"px"),(!s||4&o)&&T(e,"--y",t[2]+"px")},i(t){if(!s){for(let t=0;t<r.length;t+=1)wt(l[t]);s=!0}},o(t){l=l.filter(Boolean);for(let t=0;t<l.length;t+=1)yt(l[t]);s=!1},d(t){t&&E(e),P(l,t),o=!1,i()}}}const ao=t=>t.stopPropagation();function co(t,e,n){let{display:s=!1}=e,{x:o=0}=e,{y:i=0}=e,{data:r=[{}]}=e;return Q("layerEvents").on("disable",(()=>{n(0,s=!1)})),t.$$set=t=>{"display"in t&&n(0,s=t.display),"x"in t&&n(1,o=t.x),"y"in t&&n(2,i=t.y),"data"in t&&n(3,r=t.data)},[s,o,i,r,function(t){return"function"==typeof t?()=>{t.call(null),n(0,s=!1)}:()=>n(0,s=!1)}]}class uo extends Ut{constructor(t){super(),Dt(this,t,co,lo,l,{display:0,x:1,y:2,data:3})}}function fo(e){let n,s;return{c(){n=D("div"),M(n,"class",s="virt-cursor"+(e[1]?" active":"")+(e[2]?" enable":"")+" svelte-1biibe")},m(t,s){A(t,n,s),e[3](n)},p(t,[e]){6&e&&s!==(s="virt-cursor"+(t[1]?" active":"")+(t[2]?" enable":"")+" svelte-1biibe")&&M(n,"class",s)},i:t,o:t,d(t){t&&E(n),e[3](null)}}}function ho(t,e,n){let{active:s=!1}=e,{enable:o=!1}=e,{htmlElement:i}=e;return t.$$set=t=>{"active"in t&&n(1,s=t.active),"enable"in t&&n(2,o=t.enable),"htmlElement"in t&&n(0,i=t.htmlElement)},[i,s,o,function(t){et[t?"unshift":"push"]((()=>{i=t,n(0,i)}))}]}class po extends Ut{constructor(t){super(),Dt(this,t,ho,fo,l,{active:1,enable:2,htmlElement:0})}}const mo=0,go=1,vo=4,$o=5,wo=0,yo=1,xo=3;class bo{static map=new Map;HEAD={prev:null,next:null};END=this.HEAD;count=0;append(t,e){const n=this.END,s={prev:n,listener:t,rawListener:e,next:null};return s.prev=n,s.listener=t,s.rawListener=e,s.next=null,n.next=s,this.END=s,bo.map.set(e||t,s),this.count++,this}prepend(t,e){const n=this.HEAD,s=n.next,o={prev:n,listener:t,rawListener:e,next:s};return n.next=o,s&&(s.prev=o),bo.map.set(e||t,o),this.count++,this}delete(t){let e=bo.map,n=e.get(t);if(!n)return;let s=n.prev;return s.next=n.next,n.next&&(n.next.prev=s),e.delete(t),this.count--,requestIdleCallback((()=>{n.prev=null,n.next=null})),this}deleteAll(){let t=this.HEAD;for(;t=t.next;)t.prev=null,t.next=null,bo.map.delete(t.rawListener||t.listener);return this.HEAD.next=null,this.count=0,this}[Symbol.iterator](){let t=this.HEAD;return{next:()=>t.next?(t=t.next,{value:t,done:!1}):{value:t,done:!0}}}}class ko{_events={};maxListeners=-1;thisArg=void 0;captureRejections=!1;setMaxListeners(t){return this.maxListeners=t,this}getMaxListeners(){return this.maxListeners}_addListener(t,e,n=!1){let s;if(!~this.maxListeners&&this.listenerCount(t)===this.maxListeners){const t=RangeError(`Exceeded maximum capacity(${this.maxListeners}).`);if(!this.listenerCount("error"))throw t;this._emitError(t)}this._events[t]||(this._events[t]=new bo),s=this._events[t],n?s.prepend(e):s.append(e)}addListener(t,e){return this._addListener(t,e),this}on(t,e){return this._addListener(t,e),this}prependListener(t,e){return this._addListener(t,e,!0),this}_removeListener(t,e){let n;(n=this._events[t])&&(n.delete(e),n.count||delete this._events[t])}removeListener(t,e){return this._removeListener(t,e),this}off(t,e){return this._removeListener(t,e),this}removeAllListeners(t){let e;(e=this._events[t])&&(e.deleteAll(),delete this._events[t])}_emit(t,e,n){let s;if(s=this._events[t],s)try{let t=this.captureRejections,o=s.HEAD;for(;o=o.next;){const s=o.listener.apply(e,n);t&&s instanceof Promise&&s.catch((t=>{if(!this.listenerCount("error"))throw t;this._emitError(t)}))}}catch(t){if(!this.listenerCount("error"))throw t;this._emitError(t)}}_emitError(t){this._emit("error",void 0,[t])}emit(t,...e){this._emit(t,this.thisArg,e)}emitNone(t,...e){this._emit(t,void 0,e)}bind(t){return this.thisArg=t,this}_onceWrapper(t,e){return(...n)=>{this._removeListener(t,e);return e.apply(this.thisArg,n)}}_once(t,e,n=!1){if(!~this.maxListeners&&this.listenerCount(t)===this.maxListeners){const t=RangeError(`Exceeded maximum capacity(${this.maxListeners}).`);if(!this.listenerCount("error"))throw t;this._emitError(t)}const s=this._onceWrapper(t,e);let o;this._events[t]||(this._events[t]=new bo),o=this._events[t],n?o.prepend(s,e):o.append(s,e)}once(t,e){return this._once(t,e),this}prependOnceListener(t,e){return this._once(t,e,!0),this}listenerCount(t){let e;return e=this._events[t],e?e.count:0}listeners(t){let e,n=[];if(e=this._events[t],!e)return n;let s=e.HEAD;for(;s=s.next;)n.push(s.listener);return n}rawListeners(t){let e,n=[];if(e=this._events[t],!e)return n;let s=e.HEAD;for(;s=s.next;)s.rawListener&&n.push(s.rawListener);return n}eventNames(){return Object.getOwnPropertyNames(this._events)}constructor(t){if(t){const{thisArg:e,captureRejections:n}=t;void 0!==e&&(this.thisArg=e),n&&(this.captureRejections=!0)}}}const _o=new ko({captureRejections:!0});const Co={onConnect:function(t){_o.on("--connect",t)},onDisconnect:function(t){_o.on("--disconnect",t)}};class Lo extends ko{static controllers=[];gamepad=null;get id(){return this.gamepad.id}get mapping(){return this.gamepad.mapping}constructor(t){super({captureRejections:!0}),this.gamepad=t,Lo.controllers[t.index]=this,this.on("press",(t=>this.emit(`press-${t}`))),this.on("release",(t=>this.emit(`release-${t}`))),this.on("value",((t,e)=>this.emit(`value-${t}`,e))),this.on("axel",((t,e)=>this.emit(`axel-${t}`,e)))}vibrate(t,e=0,n=0){let s=null;(s=this.gamepad.vibrationActuator)&&s.playEffect(s.type,{duration:t,strongMagnitude:e,weakMagnitude:n})}addPressListener(t,e){this.on(`press-${t}`,e)}removePressListener(t,e){this.off(`press-${t}`,e)}addReleaseListener(t,e){this.on(`release-${t}`,e)}removeReleaseListener(t,e){this.off(`release-${t}`,e)}addValueChangeListener(t,e){this.on(`value-${t}`,e)}removeValueChangeListener(t,e){this.off(`value-${t}`,e)}addAxelChangeListener(t,e){this.on(`axel-${t}`,e)}removeAxelChangeListener(t,e){this.off(`axel-${t}`,e)}}function Ao(t,e,n,s){if(t.length!==e.length)return;const o=t.length;for(let i=0;i<o;i++){let o=t[i],r=e[i];n(o,r)||s.call(null,o,r,i)}}if("function"!=typeof navigator.getGamepads)throw"Your browser does not support the Gamepad API, please consider updating your browser";!function(){window.addEventListener("gamepadconnected",(t=>{_o.emit("--connect",new Lo(t.gamepad))})),window.addEventListener("gamepaddisconnected",(t=>{_o.emit("--disconnect",new Lo(t.gamepad))}));let t=[],e=[];!function t(e){requestAnimationFrame((()=>{e.apply(null),t(e)}))}((()=>{let n=0;for(const s of navigator.getGamepads())s?(t[n]&&Ao(t[n],s.buttons,((t,e)=>{if(t.pressed===e.pressed&&t.touched===e.touched&&t.value===e.value)return!0}),((t,e,s)=>{_o.emit("button-change",t,e,s,n)})),t[n]=s.buttons,e[n]&&Ao(e[n],s.axes,((t,e)=>t===e),((t,e,s)=>{_o.emit("axes-change",t,e,s,n)})),e[n]=s.axes,n++):n++})),_o.on("button-change",((t,e,n,s)=>{const o=Lo.controllers[s];o.emit("button-change",n,e,t),e.pressed!==t.pressed?e.pressed?o.emit("press",n):(o.emit("release",n),o.emit("value",n,0)):o.emit("value",n,e.value,t.value)})),_o.on("axes-change",((t,e,n,s)=>{Lo.controllers[s].emit("axel",n,e,t)}))}();const Eo=new class{target=null;click(t,e,n=0){let s=new PointerEvent("click",{clientX:t,clientY:e,button:n,bubbles:!0,composed:!0});const o=document.elementFromPoint(t,e);o.dispatchEvent(s),o.focus()}move(t,e){let n=document.elementFromPoint(t,e);this.target||(this.target=n),n!==this.target&&(this._enter(n,t,e),this._leave(this.target,t,e),this.target=n);let s=new MouseEvent("mousemove",{clientX:t,clientY:e,bubbles:!0,composed:!0});n.dispatchEvent(s)}_enter=(t,e,n)=>{let s=new MouseEvent("mouseenter",{clientX:e,clientY:n,composed:!0}),o=new MouseEvent("mouseover",{clientX:e,clientY:n,bubbles:!0,composed:!0});t.dispatchEvent(s),t.dispatchEvent(o)};_leave=(t,e,n)=>{let s=new MouseEvent("mouseleave",{clientX:e,clientY:n,composed:!0}),o=new MouseEvent("mouseout",{clientX:e,clientY:n,bubbles:!0,composed:!0});t.dispatchEvent(s),t.dispatchEvent(o)};down(t,e,n=0){let s=new PointerEvent("mousedown",{clientX:t,clientY:e,button:n,bubbles:!0,composed:!0});document.elementFromPoint(t,e).dispatchEvent(s)}up(t,e,n=0){let s=new PointerEvent("mouseup",{clientX:t,clientY:e,button:n,bubbles:!0,composed:!0});document.elementFromPoint(t,e).dispatchEvent(s)}setCursorVisible(t=!0){const e=document.body.style,n="boolean"==typeof t?t?"auto":"none":document.body.style;e.cursor=n}};const Po=new class{scrollSpeed=30;cursorSpeed=8;stickDeadzone=.1;virtCursor=null;transformSpeed={x:0,y:0,scroll:0};instance=!1;_isLooping=!1;_receiveMouseEvent=t=>{t.isTrusted&&this._setVirtCursorEnable(!1)};_receiveControllerEvent=(t,e)=>{Math.abs(e)>.1&&(this._setVirtCursorEnable(!0),this._isLooping||this._eachRenderTick())};_setVirtCursorEnable(t=!0){t?(this.virtCursor.enable=!0,Eo.setCursorVisible(!1)):(this.virtCursor.enable=!1,Eo.setCursorVisible(!0))}init(t){t&&(this.virtCursor=t,Co.onConnect((t=>{this.instance||(t.id.startsWith("Xbox")?(this._setVirtCursorEnable(!0),this.instance=t,this._configController(t),window.addEventListener("mousemove",this._receiveMouseEvent),t.on("axel",this._receiveControllerEvent)):this._setVirtCursorEnable(!1))})),Co.onDisconnect((t=>{this._setVirtCursorEnable(!1),this.instance=null,this._distroyInstance(t),window.removeEventListener("mousemove",this._receiveMouseEvent),t.off("axel",this._receiveControllerEvent)})))}_configController=t=>{t.vibrate(200,1,1),t.on("release",this._onKeyUp),t.addReleaseListener(mo,this.onEnsure),t.addReleaseListener(go,this.onBack),t.addPressListener(vo,this.onLeftButton),t.addPressListener($o,this.onRightButton),t.addAxelChangeListener(xo,this.onScroll),t.addAxelChangeListener(wo,this.onCursorMoveHorizontal),t.addAxelChangeListener(yo,this.onCursorMoveVertical),this._eachRenderTick()};_distroyInstance(t){t.off("release",this._onKeyUp),t.removeReleaseListener(mo,this.onEnsure),t.removeReleaseListener(go,this.onBack),t.removePressListener(vo,this.onLeftButton),t.removePressListener($o,this.onRightButton),t.removeAxelChangeListener(xo,this.onScroll),t.removeAxelChangeListener(xo,this.onCursorMoveHorizontal),t.removeAxelChangeListener(xo,this.onCursorMoveVertical)}_onKeyDown=(t,e)=>{this.virtCursor.click=!0,Eo.down(t,e)};_onKeyUp=()=>{this.virtCursor.click=!1;const{x:t,y:e}=this.virtCursor;Eo.up(t,e)};onEnsure=()=>{const{x:t,y:e}=this.virtCursor;this.virtCursor.click=!0,Eo.click(t,e)};onBack=()=>{Pager.removeByIndex(Pager.index())};onLeftButton=()=>{let t=Pager.index();t?Pager.select(t-1):Pager.select(Pager.size()-1)};onRightButton=()=>{let t=Pager.index();t===Pager.size()-1?Pager.select(0):Pager.select(t+1)};onScroll=t=>{Math.abs(t)>this.stickDeadzone?this.transformSpeed.scroll=this.scrollSpeed*t:this.transformSpeed.scroll=0};onCursorMoveHorizontal=t=>{Math.abs(t)>this.stickDeadzone?this.transformSpeed.x=this.cursorSpeed*t:this.transformSpeed.x=0};onCursorMoveVertical=t=>{Math.abs(t)>this.stickDeadzone?this.transformSpeed.y=this.cursorSpeed*t:this.transformSpeed.y=0};_eachRenderTick=()=>{const{x:t,y:e}=this.virtCursor,n=this.virtCursor,{x:s,y:o,scroll:i}=this.transformSpeed,{width:r,height:l}=visualViewport;let a=!1;const c=t+s,u=e+o;s&&c>16&&c<r-6&&(n.x=c,a=!0),o&&u>16&&u<l-6&&(n.y=u,a=!0),a&&Eo.move(c,u),i&&rem.emit("scroll-up",i),this.instance&&this.virtCursor.enable?(this._isLooping=!0,requestAnimationFrame((()=>{this._eachRenderTick()}))):this._isLooping=!1}};let Do=0;function Uo(){return Do++}const So=Symbol();class No extends HTMLElement{static[So]={};inject(t){t instanceof Node&&t.appendChild(this)}}const zo=new class{_store=new Map;add(t){if(t[So]){const e=Uo();this._store.set(t,e),customElements.define(`uid-${e}`,t)}}getInstance(t,...e){return this._store.has(t)||this.add(t),Reflect.construct(t,e)}inject(t,e,...n){if(e instanceof Node){const s=this.getInstance(t,...n);return e.appendChild(s),s}return null}};const qo=function(){const t=document.createElement("div");return t.style.cssText="z-index: 3; display: none;position: fixed; width: 100vw; height: 100vh; top: 0px; left: 0px;",document.body.appendChild(t),t}();class Mo extends No{showLayer(t=!0){const e=t?"var(--fade)":"transparent";qo.style.display="block",qo.animate([{opacity:0,backgroundColor:e},{opacity:1,backgroundColor:e}],{duration:100,fill:"forwards"})}disableLayer(){qo.animate([{opacity:1},{opacity:0}],100).onfinish=()=>qo.style.display="none"}getLayer(){return qo}}function Bo(t){return"function"==typeof t}class Ro extends Mo{isPoped=!1;constructor(){super(),this.getLayer().addEventListener("click",(()=>this.hide())),this.addEventListener("click",(t=>t.stopPropagation()))}hide(){this.isPoped&&(this.disableLayer(),this.animate([{opacity:1,transform:"translate(-50%, -50%) scale(1)"},{opacity:0,transform:"translate(-50%, -50%) scale(0.94)"}],100).onfinish=()=>{this.style.display="none",this.isPoped=!1,Bo(this.onhide)&&this.onhide.call(this)})}display(t){this.isPoped||(t&&this.showLayer(),this.style.display="block",this.style.pointerEvents="none",this.animate([{opacity:0,transform:"translate(-50%, calc(-50% + 12px))"},{opacity:1,transform:"translate(-50%, -50%)"}],100).onfinish=()=>{this.style.pointerEvents="all",this.isPoped=!0,Bo(this.ondisplay)&&this.ondisplay.call(this)})}}function To(t){const e=document.createElement("div");return e.innerText=t,e.classList.add("btn","radius","px4","margin"),e.style.display="none",e}const Oo=zo.getInstance(class extends Ro{constructor(){super(),this.style.cssText="width: 420px;pointer-events: all;display: none;height: 560px;max-height: 88%;border-radius: 12px;box-shadow: 0px 8px 12px rgba(0,0,0,0.32);overflow: hidden;background-color: var(--controlBackground);position: absolute;top: 50%; left: 50%; transform: translate(-50%, -50%);";const t=document.createElement("progress"),e=document.createElement("div"),n=document.createElement("div"),s=document.createElement("div"),o=To("下一步"),i=To("上一步"),r=To("取消");this.progress=t,this.content=e,this.next=o,this.prev=i,this.cancel=r,t.value=0,t.classList.add("horizontal"),e.style.cssText="width: 100%; height: fit-content; min-height: 488px;",i.classList.add("bright"),o.classList.add("accent"),r.classList.add("light"),s.appendChild(i),s.appendChild(o),n.appendChild(r),n.appendChild(s),n.classList.add("Row"),s.classList.add("Row"),n.style.justifyContent="space-between",n.style.backgroundColor="var(--controlBrighter)",n.style.padding="12px",this.appendChild(t),this.appendChild(e),this.appendChild(n),r.addEventListener("click",(()=>this.hide()))}addContent(...t){for(const e of t)this.content.appendChild(e)}setButtonsDisplay(t){const e=!!(1&t),n=!!(2&t),s=!!(4&t);this.next.style.display=e?"":"none",this.prev.style.display=n?"":"none",this.cancel.style.display=s?"":"none"}setProgress(t){this.progress.value=t}});function jo(t){let e,n,s,o,i,r,l,a,c,d,m,g,v,$,w,y;function x(e){t[14](e)}function b(e){t[15](e)}function k(e){t[16](e)}function C(e){t[17](e)}let L={};function P(e){t[18](e)}function U(e){t[19](e)}function N(e){t[20](e)}void 0!==t[1]&&(L.display=t[1]),void 0!==t[2]&&(L.x=t[2]),void 0!==t[3]&&(L.y=t[3]),void 0!==t[4]&&(L.data=t[4]),n=new uo({props:L}),et.push((()=>Ct(n,"display",x))),et.push((()=>Ct(n,"x",b))),et.push((()=>Ct(n,"y",k))),et.push((()=>Ct(n,"data",C)));let q={};void 0!==t[7]&&(q.enable=t[7]),void 0!==t[8]&&(q.active=t[8]),void 0!==t[6]&&(q.htmlElement=t[6]),a=new po({props:q}),et.push((()=>Ct(a,"enable",P))),et.push((()=>Ct(a,"active",U))),et.push((()=>Ct(a,"htmlElement",N)));const B=t[13].default,R=u(B,t,t[12],null);return{c(){e=D("div"),Lt(n.$$.fragment),l=S(),Lt(a.$$.fragment),g=S(),R&&R.c(),M(e,"class",v="container "+(t[0]?"layer":"")+" svelte-mc7e4s")},m(s,o){A(s,e,o),At(n,e,null),_(e,l),At(a,e,null),_(e,g),R&&R.m(e,null),t[22](e),$=!0,w||(y=z(e,"click",t[21]),w=!0)},p(t,[l]){const u={};!s&&2&l&&(s=!0,u.display=t[1],lt((()=>s=!1))),!o&&4&l&&(o=!0,u.x=t[2],lt((()=>o=!1))),!i&&8&l&&(i=!0,u.y=t[3],lt((()=>i=!1))),!r&&16&l&&(r=!0,u.data=t[4],lt((()=>r=!1))),n.$set(u);const g={};!c&&128&l&&(c=!0,g.enable=t[7],lt((()=>c=!1))),!d&&256&l&&(d=!0,g.active=t[8],lt((()=>d=!1))),!m&&64&l&&(m=!0,g.htmlElement=t[6],lt((()=>m=!1))),a.$set(g),R&&R.p&&(!$||4096&l)&&h(R,B,t,t[12],$?f(B,t[12],l,null):p(t[12]),null),(!$||1&l&&v!==(v="container "+(t[0]?"layer":"")+" svelte-mc7e4s"))&&M(e,"class",v)},i(t){$||(wt(n.$$.fragment,t),wt(a.$$.fragment,t),wt(R,t),$=!0)},o(t){yt(n.$$.fragment,t),yt(a.$$.fragment,t),yt(R,t),$=!1},d(s){s&&E(e),Et(n),Et(a),R&&R.d(s),t[22](null),w=!1,y()}}}function Io(t,e,n){let{$$slots:s={},$$scope:o}=e,i=!1;const r=new ee;function l(){n(0,i=!0)}function a(){n(0,i=!1),n(1,c=!1)}let c,u,d,f,h;function p(t,e,s){n(2,u=visualViewport.width-t>200?t:t-200),n(3,d=e);let o=[];for(const t of contextMap.keys())s.includes(t)&&o.push(contextMap.get(t));o.length&&(l(),n(4,f=o),n(1,c=!0))}r.on("active",l),r.on("disable",a),window.addEventListener("mousedown",(t=>{if(2===t.button){const{pageX:e,pageY:n,path:s}=t;if(c)return r.emit("disable"),requestIdleCallback((()=>p(e,n,s)));t.preventDefault(),p(e,n,s)}})),G("layerEvents",r);let m,g,v,$=new Proxy({click:!1,scroll:0,x:visualViewport.width/2,y:visualViewport.height/2,enable:g},{get:(t,e)=>t[e],set(t,e,s){switch(e){case"click":n(8,v=s),t[e]=s;break;case"enable":n(7,g=s),t[e]=s;break;case"x":n(6,m.style.left=s+"px",m),t[e]=s;break;case"y":n(6,m.style.top=s+"px",m),t[e]=s}return!0}});X((()=>{Po.init($),Oo.inject(h),Oo.setButtonsDisplay(7),window.addEventListener("mousedown",(t=>{console.log(t),1===t.button&&Oo.display(!0)}))}));return t.$$set=t=>{"$$scope"in t&&n(12,o=t.$$scope)},[i,c,u,d,f,h,m,g,v,r,l,a,o,s,function(t){c=t,n(1,c)},function(t){u=t,n(2,u)},function(t){d=t,n(3,d)},function(t){f=t,n(4,f)},function(t){g=t,n(7,g)},function(t){v=t,n(8,v)},function(t){m=t,n(6,m)},()=>r.emit("disable"),function(t){et[t?"unshift":"push"]((()=>{h=t,n(5,h)}))}]}class Ho extends Ut{constructor(t){super(),Dt(this,t,Io,jo,l,{activeLayer:10,disableLayer:11})}get activeLayer(){return this.$$.ctx[10]}get disableLayer(){return this.$$.ctx[11]}}function Wo(t){let e,n,s,o,i,r,l,a,u,d,f,h,p,m,g,v,$,w,y;function x(e){t[9](e)}function b(e){t[10](e)}l=new no({});let k={};void 0!==t[0]&&(k.selected=t[0]),void 0!==t[1]&&(k.tabs=t[1]),u=new jt({props:k}),et.push((()=>Ct(u,"selected",x))),et.push((()=>Ct(u,"tabs",b)));return m=new pe({props:{}}),t[11](m),v=new ae({}),w=new Ho({}),{c(){e=D("div"),n=D("img"),o=S(),i=D("div"),r=D("div"),Lt(l.$$.fragment),a=S(),Lt(u.$$.fragment),p=S(),Lt(m.$$.fragment),g=S(),Lt(v.$$.fragment),$=S(),Lt(w.$$.fragment),M(n,"class","wallpaper svelte-gt8dlw"),c(n.src,s=t[3])||M(n,"src",s),M(n,"alt",""),M(n,"width",t[5]),M(r,"class",h="row head"+(t[7]?" color":"")+(t[4]?"":" noneAcrylic")+" svelte-gt8dlw"),M(i,"class","row window svelte-gt8dlw"),T(e,"transition","background-color 0.2s"),T(e,"background-color","var("+(t[4]?"--acrylicBackgroundColor":"--noneAcrylicBackgroundColor")+")")},m(s,c){A(s,e,c),_(e,n),t[8](n),_(e,o),_(e,i),_(i,r),At(l,r,null),_(r,a),At(u,r,null),_(i,p),At(m,i,null),_(i,g),At(v,i,null),_(e,$),At(w,e,null),y=!0},p(t,[o]){(!y||8&o&&!c(n.src,s=t[3]))&&M(n,"src",s),(!y||32&o)&&M(n,"width",t[5]);const i={};!d&&1&o&&(d=!0,i.selected=t[0],lt((()=>d=!1))),!f&&2&o&&(f=!0,i.tabs=t[1],lt((()=>f=!1))),u.$set(i),(!y||144&o&&h!==(h="row head"+(t[7]?" color":"")+(t[4]?"":" noneAcrylic")+" svelte-gt8dlw"))&&M(r,"class",h);m.$set({}),(!y||16&o)&&T(e,"background-color","var("+(t[4]?"--acrylicBackgroundColor":"--noneAcrylicBackgroundColor")+")")},i(t){y||(wt(l.$$.fragment,t),wt(u.$$.fragment,t),wt(m.$$.fragment,t),wt(v.$$.fragment,t),wt(w.$$.fragment,t),y=!0)},o(t){yt(l.$$.fragment,t),yt(u.$$.fragment,t),yt(m.$$.fragment,t),yt(v.$$.fragment,t),yt(w.$$.fragment,t),y=!1},d(n){n&&E(e),t[8](null),Et(l),Et(u),t[11](null),Et(m),Et(v),Et(w)}}}function Vo(){return new Promise((t=>{hooks.once("win:bounds",((e,n)=>{t(n)})),hooks.send("winquery:bounds")}))}function Fo(t,e,n){let s=dn;store.get("profile")?NeteaseApi.checkIn(store.get("cookie")):s=Wn;let o,i=-1,r=[s,hn],l=["我的","发现"];window.Pager=(()=>{let t=[{},{}],e=[0],s=(new Map).set("我的",{}).set("发现",{}),a=[];function c(e,o,i={},a=!1){if(h(e)){if(a){const n=l.indexOf(e);return r[n]=o,t[n]=i,!1}return!0}return r.push(o),l.push(e),n(1,l),t.push(i),s.set(e,{}),!0}function u(s,c=!1){(s<0||s>=l.length)&&(s=0);let u=t[s];"function"==typeof u&&(u=u()),(i!==s||c)&&(a.forEach((t=>t.call(null))),a=[],e[s]=l[i],o.display(r[s],u),n(0,i=s))}function d(t,e=!1){"number"!=typeof t&&(t=l.indexOf(t)),u(t,e)}function f(o){(o<0||o>=l.length)&&(o=0),s.delete(l[i]),a=[],r=r.slice(0,o).concat(r.slice(o+1)),n(1,l=l.slice(0,o).concat(l.slice(o+1)));let c="function"==typeof t[o]?t[o]().onTabDestroy:t[o].onTabDestroy;t=t.slice(0,o).concat(t.slice(o+1)),"function"==typeof c&&c(o),function(){let t=l.indexOf(e[i]);!~t&&(t=0),u(t,!0)}()}function h(t){return"string"==typeof t?~l.indexOf(t):~r.indexOf(t)}return{add:c,select:d,remove:function(t){"number"!=typeof t&&(t=l.indexOf(t)),f(t)},has:h,openNew:function(t,e,n,s=!1){if(c(t,e,n,s))return d(t);d(t,!0)},getContext:function(){const e=r[i],n=l[i];return{name:n,class:e,props:t[i],save:s.get(n)}},beforeSwitch:function(t){a.push(t)},size:function(){return l.length},index:function(){return i},removeByIndex:t=>{t>1&&f(t)}}})();let a,c=store.get("sys-settings"),u=!1;!async function(){n(3,a=await async function(){let t=await wallpaper.getWallpaper(),e="";return e="string"==typeof t?t:URL.createObjectURL(new Blob([t])),e}())}(),rem.on("__openMinePage",(()=>{window.Pager.openNew("我的",dn,{},!0)})),window.__changeBgPos=h,hooks.on("win:screen-move",((t,e,n)=>{d&&(d.style.setProperty("--top",n),d.style.setProperty("--left",e))})),hooks.on("win:max",(()=>h(0,0))),hooks.on("win:unmax",((t,e)=>{h(e[0],e[1])})),hooks.send("winbind:move");let d,f=1080;function h(t,e){u&&d&&(d.style.setProperty("--top",e),d.style.setProperty("--left",t))}(async()=>{let t=await Vo(),e=await new Promise((t=>{hooks.once("win:screenSize",((e,n)=>{t(n)})),hooks.send("winquery:screenSize")}));window.Pager.select(0),n(5,f=e.width),h(t.x,t.y)})(),rem.on("playerReady",(()=>{__setColor(document.body,d,1),requestIdleCallback((()=>{hooks.send("win:show-main")}))})),rem.on("changeControlColor",(t=>{document.body.style.setProperty("--controlHue",t)})),rem.on("useAcrylic",(async t=>{if(c.theme.useAcrylic=n(4,u=t),t){let t=await Vo();h(t.x,t.y)}store.set("sys-settings",c)})),c||(c={theme:{controlColor:[2,39,148,210,270,292,322],useAcrylic:!0},beta:{showDevTools:!1}},store.set("sys-settings",c));let p=c.theme.controlColor.slice(1),m=c.theme.controlColor[0];rem.emit("changeControlColor",p[m]),rem.emit("useAcrylic",c.theme.useAcrylic);let g=!1;return rem.on("__pageFold",(()=>{n(7,g=!0)})),rem.on("__pageUnfold",(()=>{n(7,g=!1)})),[i,l,o,a,u,f,d,g,function(t){et[t?"unshift":"push"]((()=>{d=t,n(6,d)}))},function(t){i=t,n(0,i)},function(t){l=t,n(1,l)},function(t){et[t?"unshift":"push"]((()=>{o=t,n(2,o)}))}]}let Yo={};const Xo={get(t){if(Yo[t])return Yo[t];let e=null,n=localStorage.getItem(t);try{e=JSON.parse(n)}catch(t){e=n}return null!=e?Yo[t]=e:void 0},set(t,e){Yo[t]=e,localStorage.setItem(t,"string"==typeof e?e:JSON.stringify(e))},setCache(t,e){Yo[t]=e},rm(t){Yo[t]&&(Yo[t]=null),localStorage.removeItem(t)},has(t){return!!Yo[t]||!!this.get(t)},clear(){for(const t of Object.keys(Yo))this.rm(t)}};return window.store=Xo,window.rem=new ee({captureRejections:!0}),window.contextMap=new Map,rem.isBeta=!0,console.log(hooks),new class extends Ut{constructor(t){super(),Dt(this,t,Fo,Wo,l,{})}}({target:document.body})}();
