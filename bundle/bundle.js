var app=function(){"use strict";function e(){}const t=e=>e;function n(e,t){for(const n in t)e[n]=t[n];return e}function s(e){return e()}function i(){return Object.create(null)}function o(e){e.forEach(s)}function a(e){return"function"==typeof e}function l(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}let r;function c(e,t){return r||(r=document.createElement("a")),r.href=t,e===r.href}function u(e,t,n,s){if(e){const i=d(e,t,n,s);return e[0](i)}}function d(e,t,s,i){return e[1]&&i?n(s.ctx.slice(),e[1](i(t))):s.ctx}function f(e,t,n,s){if(e[2]&&s){const i=e[2](s(n));if(void 0===t.dirty)return i;if("object"==typeof i){const e=[],n=Math.max(t.dirty.length,i.length);for(let s=0;s<n;s+=1)e[s]=t.dirty[s]|i[s];return e}return t.dirty|i}return t.dirty}function p(e,t,n,s,i,o){if(i){const a=d(t,n,s,o);e.p(a,i)}}function h(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let e=0;e<n;e++)t[e]=-1;return t}return-1}function m(e){const t={};for(const n in e)"$"!==n[0]&&(t[n]=e[n]);return t}function g(e){return null==e?"":e}function v(t){return t&&a(t.destroy)?t.destroy:e}const $="undefined"!=typeof window;let y=$?()=>window.performance.now():()=>Date.now(),w=$?e=>requestAnimationFrame(e):e;const b=new Set;function x(e){b.forEach((t=>{t.c(e)||(b.delete(t),t.f())})),0!==b.size&&w(x)}function k(e){let t;return 0===b.size&&w(x),{promise:new Promise((n=>{b.add(t={c:e,f:n})})),abort(){b.delete(t)}}}function C(e,t){e.appendChild(t)}function _(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function L(e){const t=z("style");return function(e,t){C(e.head||e,t)}(_(e),t),t.sheet}function E(e,t,n){e.insertBefore(t,n||null)}function A(e){e.parentNode.removeChild(e)}function P(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function z(e){return document.createElement(e)}function T(e){return document.createTextNode(e)}function S(){return T(" ")}function D(){return T("")}function M(e,t,n,s){return e.addEventListener(t,n,s),()=>e.removeEventListener(t,n,s)}function R(e){return function(t){return t.stopPropagation(),e.call(this,t)}}function U(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function N(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function B(e,t){e.value=null==t?"":t}function O(e,t,n,s){null===n?e.style.removeProperty(t):e.style.setProperty(t,n,s?"important":"")}function V(e,t,{bubbles:n=!1,cancelable:s=!1}={}){const i=document.createEvent("CustomEvent");return i.initCustomEvent(e,n,s,t),i}const q=new Map;let I,F=0;function j(e,t,n,s,i,o,a,l=0){const r=16.666/s;let c="{\n";for(let e=0;e<=1;e+=r){const s=t+(n-t)*o(e);c+=100*e+`%{${a(s,1-s)}}\n`}const u=c+`100% {${a(n,1-n)}}\n}`,d=`__svelte_${function(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}(u)}_${l}`,f=_(e),{stylesheet:p,rules:h}=q.get(f)||function(e,t){const n={stylesheet:L(t),rules:{}};return q.set(e,n),n}(f,e);h[d]||(h[d]=!0,p.insertRule(`@keyframes ${d} ${u}`,p.cssRules.length));const m=e.style.animation||"";return e.style.animation=`${m?`${m}, `:""}${d} ${s}ms linear ${i}ms 1 both`,F+=1,d}function H(e,t){const n=(e.style.animation||"").split(", "),s=n.filter(t?e=>e.indexOf(t)<0:e=>-1===e.indexOf("__svelte")),i=n.length-s.length;i&&(e.style.animation=s.join(", "),F-=i,F||w((()=>{F||(q.forEach((e=>{const{stylesheet:t}=e;let n=t.cssRules.length;for(;n--;)t.deleteRule(n);e.rules={}})),q.clear())})))}function W(e){I=e}function X(){if(!I)throw new Error("Function called outside component initialization");return I}function Y(e){X().$$.on_mount.push(e)}function G(e){X().$$.on_destroy.push(e)}function J(){const e=X();return(t,n,{cancelable:s=!1}={})=>{const i=e.$$.callbacks[t];if(i){const o=V(t,n,{cancelable:s});return i.slice().forEach((t=>{t.call(e,o)})),!o.defaultPrevented}return!0}}function K(e,t){return X().$$.context.set(e,t),t}function Q(e){return X().$$.context.get(e)}function Z(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach((e=>e.call(this,t)))}const ee=[],te=[],ne=[],se=[],ie=Promise.resolve();let oe=!1;function ae(){oe||(oe=!0,ie.then(pe))}function le(){return ae(),ie}function re(e){ne.push(e)}function ce(e){se.push(e)}const ue=new Set;let de,fe=0;function pe(){const e=I;do{for(;fe<ee.length;){const e=ee[fe];fe++,W(e),he(e.$$)}for(W(null),ee.length=0,fe=0;te.length;)te.pop()();for(let e=0;e<ne.length;e+=1){const t=ne[e];ue.has(t)||(ue.add(t),t())}ne.length=0}while(ee.length);for(;se.length;)se.pop()();oe=!1,ue.clear(),W(e)}function he(e){if(null!==e.fragment){e.update(),o(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(re)}}function me(){return de||(de=Promise.resolve(),de.then((()=>{de=null}))),de}function ge(e,t,n){e.dispatchEvent(V(`${t?"intro":"outro"}${n}`))}const ve=new Set;let $e;function ye(){$e={r:0,c:[],p:$e}}function we(){$e.r||o($e.c),$e=$e.p}function be(e,t){e&&e.i&&(ve.delete(e),e.i(t))}function xe(e,t,n,s){if(e&&e.o){if(ve.has(e))return;ve.add(e),$e.c.push((()=>{ve.delete(e),s&&(n&&e.d(1),s())})),e.o(t)}}const ke={duration:0};function Ce(n,s,i){let l,r=s(n,i),c=!0;const u=$e;function d(){const{delay:s=0,duration:i=300,easing:a=t,tick:d=e,css:f}=r||ke;f&&(l=j(n,1,0,i,s,a,f));const p=y()+s,h=p+i;re((()=>ge(n,!1,"start"))),k((e=>{if(c){if(e>=h)return d(0,1),ge(n,!1,"end"),--u.r||o(u.c),!1;if(e>=p){const t=a((e-p)/i);d(1-t,t)}}return c}))}return u.r+=1,a(r)?me().then((()=>{r=r(),d()})):d(),{end(e){e&&r.tick&&r.tick(1,0),c&&(l&&H(n,l),c=!1)}}}function _e(e,t){const n={},s={},i={$$scope:1};let o=e.length;for(;o--;){const a=e[o],l=t[o];if(l){for(const e in a)e in l||(s[e]=1);for(const e in l)i[e]||(n[e]=l[e],i[e]=1);e[o]=l}else for(const e in a)i[e]=1}for(const e in s)e in n||(n[e]=void 0);return n}function Le(e){return"object"==typeof e&&null!==e?e:{}}function Ee(e,t,n){const s=e.$$.props[t];void 0!==s&&(e.$$.bound[s]=n,n(e.$$.ctx[s]))}function Ae(e){e&&e.c()}function Pe(e,t,n,i){const{fragment:l,on_mount:r,on_destroy:c,after_update:u}=e.$$;l&&l.m(t,n),i||re((()=>{const t=r.map(s).filter(a);c?c.push(...t):o(t),e.$$.on_mount=[]})),u.forEach(re)}function ze(e,t){const n=e.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Te(t,n,s,a,l,r,c,u=[-1]){const d=I;W(t);const f=t.$$={fragment:null,ctx:null,props:r,update:e,not_equal:l,bound:i(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(d?d.$$.context:[])),callbacks:i(),dirty:u,skip_bound:!1,root:n.target||d.$$.root};c&&c(f.root);let p=!1;if(f.ctx=s?s(t,n.props||{},((e,n,...s)=>{const i=s.length?s[0]:n;return f.ctx&&l(f.ctx[e],f.ctx[e]=i)&&(!f.skip_bound&&f.bound[e]&&f.bound[e](i),p&&function(e,t){-1===e.$$.dirty[0]&&(ee.push(e),ae(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}(t,e)),n})):[],f.update(),p=!0,o(f.before_update),f.fragment=!!a&&a(f.ctx),n.target){if(n.hydrate){const e=function(e){return Array.from(e.childNodes)}(n.target);f.fragment&&f.fragment.l(e),e.forEach(A)}else f.fragment&&f.fragment.c();n.intro&&be(t.$$.fragment),Pe(t,n.target,n.anchor,n.customElement),pe()}W(d)}class Se{$destroy(){ze(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function De(e,t,n){const s=e.slice();return s[6]=t[n],s[8]=n,s}function Me(e){let t,n,s,i,o=e[6]+"";function a(){return e[5](e[8])}return{c(){t=z("div"),n=T(o),U(t,"class","tab tab-text svelte-1fjb39z")},m(e,o){E(e,t,o),C(t,n),s||(i=M(t,"click",a),s=!0)},p(t,s){e=t,1&s&&o!==(o=e[6]+"")&&N(n,o)},d(e){e&&A(t),s=!1,i()}}}function Re(e){let t;function n(e,t){return"我的"===e[6]||"发现"===e[6]?Ne:Ue}let s=n(e),i=s(e);return{c(){i.c(),t=D()},m(e,n){i.m(e,n),E(e,t,n)},p(e,o){s===(s=n(e))&&i?i.p(e,o):(i.d(1),i=s(e),i&&(i.c(),i.m(t.parentNode,t)))},d(e){i.d(e),e&&A(t)}}}function Ue(e){let t,n,s,i,a,l,r,c,u=e[6]+"";function d(){return e[4](e[8])}return{c(){t=z("div"),n=z("span"),s=T(u),i=S(),a=z("div"),a.textContent="⨯",l=S(),U(n,"class","tab-text svelte-1fjb39z"),U(a,"class","column cross svelte-1fjb39z"),U(t,"class","tab selected column svelte-1fjb39z"),O(t,"padding-right","2px")},m(o,u){E(o,t,u),C(t,n),C(n,s),C(t,i),C(t,a),C(t,l),r||(c=[M(a,"click",e[2]),M(t,"click",d)],r=!0)},p(t,n){e=t,1&n&&u!==(u=e[6]+"")&&N(s,u)},d(e){e&&A(t),r=!1,o(c)}}}function Ne(e){let t,n,s,i,o=e[6]+"";function a(){return e[3](e[8])}return{c(){t=z("div"),n=T(o),U(t,"class","tab selected tab-text svelte-1fjb39z")},m(e,o){E(e,t,o),C(t,n),s||(i=M(t,"click",a),s=!0)},p(t,s){e=t,1&s&&o!==(o=e[6]+"")&&N(n,o)},d(e){e&&A(t),s=!1,i()}}}function Be(e){let t;function n(e,t){return e[8]===e[1]?Re:Me}let s=n(e),i=s(e);return{c(){i.c(),t=D()},m(e,n){i.m(e,n),E(e,t,n)},p(e,o){s===(s=n(e))&&i?i.p(e,o):(i.d(1),i=s(e),i&&(i.c(),i.m(t.parentNode,t)))},d(e){i.d(e),e&&A(t)}}}function Oe(t){let n,s=t[0],i=[];for(let e=0;e<s.length;e+=1)i[e]=Be(De(t,s,e));return{c(){n=z("div");for(let e=0;e<i.length;e+=1)i[e].c();U(n,"class","column c svelte-1fjb39z")},m(e,t){E(e,n,t);for(let e=0;e<i.length;e+=1)i[e].m(n,null)},p(e,[t]){if(7&t){let o;for(s=e[0],o=0;o<s.length;o+=1){const a=De(e,s,o);i[o]?i[o].p(a,t):(i[o]=Be(a),i[o].c(),i[o].m(n,null))}for(;o<i.length;o+=1)i[o].d(1);i.length=s.length}},i:e,o:e,d(e){e&&A(n),P(i,e)}}}function Ve(e){Pager.select(e)}function qe(e,t,n){let{tabs:s=["我的","发现"]}=t,{selected:i=0}=t;return e.$$set=e=>{"tabs"in e&&n(0,s=e.tabs),"selected"in e&&n(1,i=e.selected)},[s,i,function(){Pager.remove(i)},e=>Ve(e),e=>Ve(e),e=>Ve(e)]}class Ie extends Se{constructor(e){super(),Te(this,e,qe,Oe,l,{tabs:0,selected:1})}}function Fe(e){let t,n,s;return{c(){t=z("span"),n=T(e[2]),U(t,"class",s="avatar iconfont size-"+(e[3]?e[3]:"normal")+" svelte-m9oihy")},m(e,s){E(e,t,s),C(t,n)},p(e,i){4&i&&N(n,e[2]),8&i&&s!==(s="avatar iconfont size-"+(e[3]?e[3]:"normal")+" svelte-m9oihy")&&U(t,"class",s)},d(e){e&&A(t)}}}function je(e){let t,n,s,i,o;return{c(){t=z("img"),c(t.src,n=e[2])||U(t,"src",n),U(t,"class","avatar svelte-m9oihy"),U(t,"alt",s="avatar size-"+(e[3]?e[3]:"normal")),U(t,"draggable","false"),U(t,"width",e[4]),U(t,"height",e[5])},m(n,s){E(n,t,s),e[11](t),i||(o=M(t,"load",e[10]),i=!0)},p(e,i){4&i&&!c(t.src,n=e[2])&&U(t,"src",n),8&i&&s!==(s="avatar size-"+(e[3]?e[3]:"normal"))&&U(t,"alt",s),16&i&&U(t,"width",e[4]),32&i&&U(t,"height",e[5])},d(n){n&&A(t),e[11](null),i=!1,o()}}}function He(t){let n,s,i,o,a;function l(e,t){return e[1]?je:Fe}let r=l(t),c=r(t);return{c(){n=z("div"),c.c(),U(n,"class",s="column"+(t[7]?" clkable":"")+" svelte-m9oihy"),U(n,"style",i="width: fit-content; heigth: fit-content; overflow: hidden; border-radius: "+t[6]+";"+t[8])},m(e,s){E(e,n,s),c.m(n,null),o||(a=M(n,"click",t[9]),o=!0)},p(e,[t]){r===(r=l(e))&&c?c.p(e,t):(c.d(1),c=r(e),c&&(c.c(),c.m(n,null))),128&t&&s!==(s="column"+(e[7]?" clkable":"")+" svelte-m9oihy")&&U(n,"class",s),320&t&&i!==(i="width: fit-content; heigth: fit-content; overflow: hidden; border-radius: "+e[6]+";"+e[8])&&U(n,"style",i)},i:e,o:e,d(e){e&&A(n),c.d(),o=!1,a()}}}function We(e,t,n){const s=J();let{isUrl:i=!0}=t,{avatar:o=""}=t,{size:a=""}=t,{width:l}=t,{height:r}=t,{radius:c="50%"}=t,{clickable:u=!0}=t,{ctx:d=this}=t,{cssText:f=""}=t;return e.$$set=e=>{"isUrl"in e&&n(1,i=e.isUrl),"avatar"in e&&n(2,o=e.avatar),"size"in e&&n(3,a=e.size),"width"in e&&n(4,l=e.width),"height"in e&&n(5,r=e.height),"radius"in e&&n(6,c=e.radius),"clickable"in e&&n(7,u=e.clickable),"ctx"in e&&n(0,d=e.ctx),"cssText"in e&&n(8,f=e.cssText)},[d,i,o,a,l,r,c,u,f,function(e){s("click",e)},function(){s("loaded")},function(e){te[e?"unshift":"push"]((()=>{d=e,n(0,d)}))}]}class Xe extends Se{constructor(e){super(),Te(this,e,We,He,l,{isUrl:1,avatar:2,size:3,width:4,height:5,radius:6,clickable:7,ctx:0,cssText:8})}}class Ye{constructor(e){this.data=e}urls={};getPlayUrlAsync=async(e="high")=>{let t;try{t="low"===e?this.data.l.br:"medium"===e?this.data.m.br:this.data.h.br}catch(n){switch(e){case"low":if(t=!!this.data.h&&this.data.h.br,t)break;case"high":if(t=!!this.data.m&&this.data.m.br,t)break;case"medium":if(t=!!this.data.l&&this.data.l.br,t)break}}const n=this.urls[e]=await NeteaseApi.getSongUrlX(this.data.id,await store.get("cookie"));let s=n.body.data[0].url;const i=this.type=n.body.data[0].type,o=await server.getMedia(`ne${this.data.id}.${i}`,this.onLoadMetadata);return o?URL.createObjectURL(new Blob([o])):(server.saveToCache(s,`ne${this.data.id}.${i}`,this.onLoadMetadata),s)};onLoadMetadata(){}async url(e="high"){return this.urls[e]?this.urls[e]:await this.getPlayUrlAsync(e)}title(){return this.data.name}album(){return this.data.al}artist(){return this.data.ar}uri(){return this.data.id}}function Ge(t){let n,s,i,a;return{c(){n=z("input"),U(n,"type","range"),U(n,"style",s=t[1]+"; --progress: "+t[0]+"%; --rail-width: "+t[2]+"px; --thumb-width: "+t[3]+"px; --display-progress: "+t[5]+"px"),U(n,"step","0.001"),U(n,"class","svelte-1ipceau")},m(e,s){E(e,n,s),B(n,t[0]),t[9](n),i||(a=[M(n,"change",t[8]),M(n,"input",t[8]),M(n,"mousedown",t[6]),M(n,"mousemove",t[7])],i=!0)},p(e,[t]){47&t&&s!==(s=e[1]+"; --progress: "+e[0]+"%; --rail-width: "+e[2]+"px; --thumb-width: "+e[3]+"px; --display-progress: "+e[5]+"px")&&U(n,"style",s),1&t&&B(n,e[0])},i:e,o:e,d(e){e&&A(n),t[9](null),i=!1,o(a)}}}function Je(e,t,n){let s,i,{value:o}=t,{cssStyle:a=""}=t,{width:l=100}=t,{thumbWidth:r=12}=t,c=J(),u=!1;return document.addEventListener("mouseup",(()=>{u&&(u=!1,c("mouseup",i.value))})),e.$$set=e=>{"value"in e&&n(0,o=e.value),"cssStyle"in e&&n(1,a=e.cssStyle),"width"in e&&n(2,l=e.width),"thumbWidth"in e&&n(3,r=e.thumbWidth)},e.$$.update=()=>{13&e.$$.dirty&&n(5,s=(l-r)*o/(100*l)*l+r/2)},[o,a,l,r,i,s,function(e){u=!0;let t=e.offsetX/i.offsetWidth*100;n(4,i.value=t,i),n(0,o=t),c("mousedown",t)},function(){u&&c("mousemove",i.value)},function(){o=function(e){return""===e?null:+e}(this.value),n(0,o)},function(e){te[e?"unshift":"push"]((()=>{i=e,n(4,i)}))}]}class Ke extends Se{constructor(e){super(),Te(this,e,Je,Ge,l,{value:0,cssStyle:1,width:2,thumbWidth:3})}}const Qe=Symbol("[[Observers]]");class Ze{[Qe]=new Set;addObserver(e){("function"==typeof e||"object"==typeof e&&e&&"function"==typeof e.update)&&this[Qe].add(e)}removeObserver(e){if(!e)return this.removeAllObservers();this[Qe].delete(e)}removeAllObservers(){this[Qe]=new Set}notifyObservers(...e){for(const t of this[Qe])"function"==typeof t?t.call(this,...e):t.update(this,...e)}}const et=new class extends Ze{_metadata={};constructor(e={}){super(),this.setMetadata(e)}setMetadata(e={}){this._metadata.title=e.title||this._metadata.title,this._metadata.album=e.album||this._metadata.album,this._metadata.artist=e.artist||this._metadata.artist,this._metadata.artwork=e.artwork||this._metadata.artwork}getMetadataConfig(){return this._metadata}title(e){return void 0!==e?(this._metadata.title=e,this):this._metadata.title}album(e){return void 0===e?this._metadata.album:(this._metadata.album=e,this)}artist(e){return void 0===e?this._metadata.artist:(this._metadata.artist=e,this)}artwork(e,t){return void 0===e?this._metadata.artwork||[]:(this._metadata.artwork||(this._metadata.artwork=[]),void 0===t?this._metadata.artwork[e]:(this._metadata.artwork[e]=t,this))}setArtwork(e){return this._metadata.artwork=e,this}apply(){navigator.mediaSession.metadata=new MediaMetadata(this._metadata),hooks.send("win:title",`${this._metadata.title} - ${this._metadata.artist}`)}};class tt{static listData=[];static getAudioData(e=this.current){return store.set("listElementPlaying",e),new Ye(this.listData[e])}static current=0;static mode=0;static MODE=0;static MODE_SINGLE_LOOP=1;static MODE_RANDOM=2;static loadList(e=[]){this.listData=e.slice(),store.set("listPlaying",this.listData),this.current=0}static getCurrentData(){return this.listData[this.current]}static query(e){let t=[];return this.listData.forEach(((n,s)=>{e.name&&n.name.includes(e.name)&&t.push(s)})),t}static next(){let e=this.current,t=this.listData.length;switch(this.mode){case 0:e=e===t-1?0:e+1;break;case 2:e=~~(Math.random()*t-1)}return this.current=e,this.getAudioData(e)}static prev(){let e=this.current,t=this.listData.length;switch(this.mode){case 0:e=e?e-1:t;break;case 2:e=~~(Math.random()*t-1)}return this.current=e,this.getAudioData(e)}static playNext(){const e=tt.next();e&&this.playByAudioData(e)}static playPrev(){const e=tt.prev();e&&this.playByAudioData(e)}static play(e=this.current){this.current=e;const t=this.getAudioData(e);this.playByAudioData(t)}static async load(e){this.current=e;const t=this.getAudioData(e);await globalPlayer.loadData(t),rem.emit("loadedContent"),rem.emit("setControlsContent",t)}static playByAudioData(e){globalPlayer.loadData(e).then((async()=>{await globalPlayer.play(),rem.emit("loadedContent")})),rem.emit("setControlsContent",e)}}function nt(e){let t,n,s,i,a,l,r,c,u,d,f,p,h,m,g,v,$,y,w,b,x,k,_,L,P,D,R,B,V,q,I,F,j,H,W,X,Y,G,J,K,Q,Z,ee,ne,se,ie,oe,ae,le=(e[1].title||"暂未播放歌曲")+"",re=(e[1].artist||"")+"",ue=e[2]?"":"";function de(t){e[20](t)}let fe={isUrl:!!e[1].album,avatar:e[1].artwork?e[1].artwork[0].src:"R",width:56,height:56,radius:"4px"};function pe(t){e[24](t)}void 0!==e[3]&&(fe.ctx=e[3]),i=new Xe({props:fe}),te.push((()=>Ee(i,"ctx",de))),i.$on("loaded",e[11]);let he={width:200};function me(t){e[26](t)}void 0!==e[5]&&(he.value=e[5]),X=new Ke({props:he}),te.push((()=>Ee(X,"value",pe))),X.$on("mousedown",e[17]),X.$on("mousemove",e[19]),X.$on("mouseup",e[18]);let ge={cssStyle:"margin-right: 8px;"};return void 0!==e[8]&&(ge.value=e[8]),Z=new Ke({props:ge}),te.push((()=>Ee(Z,"value",me))),Z.$on("mousedown",it),Z.$on("mousemove",it),Z.$on("mouseup",e[16]),{c(){t=z("div"),n=z("div"),s=z("div"),Ae(i.$$.fragment),l=S(),r=z("div"),c=z("div"),u=T(le),d=S(),f=z("div"),p=T(re),h=S(),m=z("div"),g=z("div"),v=z("div"),$=T(""),w=S(),b=z("div"),x=T(""),_=S(),L=z("div"),P=T(ue),D=S(),R=z("div"),R.textContent="",B=S(),V=z("div"),q=T(""),F=S(),j=z("div"),H=z("span"),H.textContent="0:00",W=S(),Ae(X.$$.fragment),G=S(),J=z("span"),J.textContent="0:00",K=S(),Q=z("div"),Ae(Z.$$.fragment),ne=S(),se=z("div"),se.textContent="",U(s,"class","avatar-container svelte-1nalff2"),U(c,"class","title svelte-1nalff2"),U(f,"class","subtitle svelte-1nalff2"),U(r,"class","row txt svelte-1nalff2"),U(n,"class","column header edge svelte-1nalff2"),U(v,"class",y="btn big btn-nb"+(e[7]?" active":"")+" svelte-1nalff2"),U(b,"class",k="btn big btn-nb"+(e[0].mode?" disable":"")+" svelte-1nalff2"),U(L,"class","btn big btn-big svelte-1nalff2"),U(R,"class","btn big btn-nb svelte-1nalff2"),U(V,"class",I="btn big btn-nb"+(e[6]?" active":"")+" svelte-1nalff2"),U(g,"class","column"),O(g,"margin","4px 0px"),U(H,"class","time svelte-1nalff2"),U(J,"class","time svelte-1nalff2"),U(j,"class","column"),O(j,"width","100%"),U(m,"class","row center svelte-1nalff2"),U(se,"class","btn big btn-nb svelte-1nalff2"),U(Q,"class","column edge svelte-1nalff2"),O(Q,"flex-direction","row-reverse"),U(t,"class","column c svelte-1nalff2")},m(o,a){E(o,t,a),C(t,n),C(n,s),Pe(i,s,null),C(n,l),C(n,r),C(r,c),C(c,u),C(r,d),C(r,f),C(f,p),C(t,h),C(t,m),C(m,g),C(g,v),C(v,$),C(g,w),C(g,b),C(b,x),C(g,_),C(g,L),C(L,P),C(g,D),C(g,R),C(g,B),C(g,V),C(V,q),C(m,F),C(m,j),C(j,H),e[23](H),C(j,W),Pe(X,j,null),C(j,G),C(j,J),e[25](J),C(t,K),C(t,Q),Pe(Z,Q,null),C(Q,ne),C(Q,se),e[28](t),ie=!0,oe||(ae=[M(v,"click",e[21]),M(b,"click",e[13]),M(L,"click",e[12]),M(R,"click",e[14]),M(V,"click",e[22]),M(se,"click",e[27])],oe=!0)},p(e,t){const n={};2&t[0]&&(n.isUrl=!!e[1].album),2&t[0]&&(n.avatar=e[1].artwork?e[1].artwork[0].src:"R"),!a&&8&t[0]&&(a=!0,n.ctx=e[3],ce((()=>a=!1))),i.$set(n),(!ie||2&t[0])&&le!==(le=(e[1].title||"暂未播放歌曲")+"")&&N(u,le),(!ie||2&t[0])&&re!==(re=(e[1].artist||"")+"")&&N(p,re),(!ie||128&t[0]&&y!==(y="btn big btn-nb"+(e[7]?" active":"")+" svelte-1nalff2"))&&U(v,"class",y),(!ie||1&t[0]&&k!==(k="btn big btn-nb"+(e[0].mode?" disable":"")+" svelte-1nalff2"))&&U(b,"class",k),(!ie||4&t[0])&&ue!==(ue=e[2]?"":"")&&N(P,ue),(!ie||64&t[0]&&I!==(I="btn big btn-nb"+(e[6]?" active":"")+" svelte-1nalff2"))&&U(V,"class",I);const s={};!Y&&32&t[0]&&(Y=!0,s.value=e[5],ce((()=>Y=!1))),X.$set(s);const o={};!ee&&256&t[0]&&(ee=!0,o.value=e[8],ce((()=>ee=!1))),Z.$set(o)},i(e){ie||(be(i.$$.fragment,e),be(X.$$.fragment,e),be(Z.$$.fragment,e),ie=!0)},o(e){xe(i.$$.fragment,e),xe(X.$$.fragment,e),xe(Z.$$.fragment,e),ie=!1},d(n){n&&A(t),ze(i),e[23](null),ze(X),e[25](null),ze(Z),e[28](null),oe=!1,o(ae)}}}function st(e){let t=~~(e%60);return t<10&&(t="0"+t),`${~~(e/60)}:${t}`}function it(e){const t=+e.detail;globalPlayer.volume(t/100)}function ot(e,t,n){let s,i,o,a={},l=!1,r=1;et.addObserver((function(e){this.apply(),n(1,a=e)})),window.__getColorInfo=function(e,t,n,s){let i=4*(t*(s-1)+n);return(e=e.data).slice(i,i+4)},window.__setColor=function(e,t,n=1){if(!t)return;let s=CanvasCtx;const i=t.width,o=t.height;Canvas.width=i,Canvas.height=o,s.drawImage(t,0,0);const a=s.getImageData(0,0,i,o),l=i/2,r=o/2,c=i/4,u=l+c,d=o/4,f=r+d;let p=__getColorInfo(a,i,c,d),h=__getColorInfo(a,i,u,d),m=__getColorInfo(a,i,l,r),g=__getColorInfo(a,i,c,f),v=__getColorInfo(a,i,u,f),$=[];for(let e=0;e<4;e++){let t=(p[e]+h[e]+m[e]+g[e]+v[e])/5;$[e]=~~t}$=function(e,t,n){e/=255,t/=255,n/=255;var s,i,o=Math.min(e,t,n),a=Math.max(e,t,n),l=(o+a)/2,r=a-o;if(a==o)s=0,i=0;else{switch(i=l>.5?r/(2-a-o):r/(a+o),a){case e:s=(t-n)/r+(t<n?6:0);break;case t:s=2+(n-e)/r;break;case n:s=4+(e-t)/r}s=Math.round(60*s)}return[s,i=Math.round(100*i),l=Math.round(100*l)]}(...$);const y=`hsla(${$[0]},${$[1]>40?40:$[1]}%,${$[2]>50?50:$[2]}%, ${n})`;return e.style.setProperty("--color",y),y};let c=0;function u(){if(globalPlayer.load())return l?globalPlayer.pause():globalPlayer.play()}rem.on("setControlsContent",(async function(e){et.title(e.title()),et.album(e.album().name),et.artist(e.artist().reduce(((e,t)=>[...e,t.name]),[]).join("; ")),et.artwork(0,{src:e.album().picUrl}),et.notifyObservers(et.getMetadataConfig())})),rem.on("loadedContent",(()=>{r=globalPlayer.duration(),n(10,v.innerText=st(r),v),s&&(n(5,c=0),clearInterval(s)),s=setInterval((()=>{if(m)return;let e=globalPlayer.seek();n(5,c=e/r*100),n(9,g.innerText=st(e),g)}),500)})),rem.on("playerReady",(async e=>{e.on("play",(()=>n(2,l=!0))),e.on("pause",(()=>n(2,l=!1))),e.on("ended",(()=>tt.playNext()));let t=await store.get("listPlaying"),s=await store.get("listElementPlaying");t&&"number"==typeof s&&(tt.loadList(t),tt.load(s))})),window.addEventListener("keypress",(e=>{" "===e.key&&u()}));let d,f=!1,p=!1;function h(){return f?n(0,tt.mode=1,tt):p?n(0,tt.mode=2,tt):void n(0,tt.mode=0,tt)}(async()=>{n(8,d=await store.get("volume")||50)&&rem.once("playerReady",(()=>{globalPlayer.volume(d/100)}))})();var m=!1;let g,v;new Array(5);return[tt,a,l,i,o,c,f,p,d,g,v,function(){__setColor(o,i)},u,function(){tt.playPrev()},function(){tt.playNext()},h,function(){store.set("volume",d)},function(){m=!0},function(e){m=!1;try{globalPlayer.seek(e.detail/100*r)}catch(e){}},function(e){m&&n(9,g.innerText=st(e.detail/100*r),g)},function(e){i=e,n(3,i)},()=>{n(7,p=!p),h()},()=>{n(6,f=!f),h()},function(e){te[e?"unshift":"push"]((()=>{g=e,n(9,g)}))},function(e){c=e,n(5,c)},function(e){te[e?"unshift":"push"]((()=>{v=e,n(10,v)}))},function(e){d=e,n(8,d)},()=>{window.rem.emit("tunnerOpen")},function(e){te[e?"unshift":"push"]((()=>{o=e,n(4,o)}))}]}navigator.mediaSession.setActionHandler("nexttrack",(()=>tt.playNext())),navigator.mediaSession.setActionHandler("previoustrack",(()=>tt.playPrev())),hooks.on("player:previous",(()=>tt.playPrev())),hooks.on("player:next",(()=>tt.playNext()));class at extends Se{constructor(e){super(),Te(this,e,ot,nt,l,{},null,[-1,-1])}}function lt(t){let n;return{c(){n=z("div")},m(e,t){E(e,n,t)},p:e,i:e,o:e,d(e){e&&A(n)}}}class rt extends Se{constructor(e){super(),Te(this,e,null,lt,l,{})}}function ct(e,t,n){return new Promise(((s,i)=>{let o=e.animate(t,n);o.onfinish=()=>s(o),o.onremove=()=>i(o)}))}function ut(e){let t,s,i,o;const a=[e[1]];var l=e[0];function r(e){let t={};for(let e=0;e<a.length;e+=1)t=n(t,a[e]);return{props:t}}return l&&(i=new l(r())),{c(){t=z("div"),s=z("div"),i&&Ae(i.$$.fragment),U(s,"class","innerWindow row svelte-uddjc1"),U(t,"class","container row svelte-uddjc1")},m(n,a){E(n,t,a),C(t,s),i&&Pe(i,s,null),e[4](s),o=!0},p(e,[t]){const n=2&t?_e(a,[Le(e[1])]):{};if(l!==(l=e[0])){if(i){ye();const e=i;xe(e.$$.fragment,1,0,(()=>{ze(e,1)})),we()}l?(i=new l(r()),Ae(i.$$.fragment),be(i.$$.fragment,1),Pe(i,s,null)):i=null}else l&&i.$set(n)},i(e){o||(i&&be(i.$$.fragment,e),o=!0)},o(e){i&&xe(i.$$.fragment,e),o=!1},d(n){n&&A(t),i&&ze(i),e[4](null)}}}function dt(e,t,n){let s,i=rt,o={};return Y((()=>{new MutationObserver((()=>{rem.emit("pageContentChange")})).observe(s,{childList:!0,subtree:!0,attributes:!1})})),[i,o,s,async function(e,t){await ct(s,[{opacity:1,transform:"scale(1)"},{opacity:0,transform:"scale(1.06)"}],{duration:60,ease:"cubic-bezier(0.95, 0.05, 0.795, 0.035)",fill:"forwards"}),function(e,t){if(i===e)return n(0,i=rt),n(1,o=t),void setTimeout((()=>{n(0,i=e)}));n(1,o=t),n(0,i=e)}(e,t),requestIdleCallback((async()=>{await ct(s,[{opacity:0,transform:"scale(0.96)"},{opacity:1,transform:"scale(1)"}],{duration:80,ease:"cubic-bezier(0.19, 1, 0.22, 1)",fill:"forwards"}),rem.emit("pageSwipeAnimFinish")}))},function(e){te[e?"unshift":"push"]((()=>{s=e,n(2,s)}))}]}class ft extends Se{constructor(e){super(),Te(this,e,dt,ut,l,{display:3})}get display(){return this.$$.ctx[3]}}function pt(e){let t,n;const s=e[6].default,i=u(s,e,e[5],null);return{c(){t=z("div"),i&&i.c(),U(t,"class","container svelte-1mqptgy"),U(t,"style",e[1])},m(s,o){E(s,t,o),i&&i.m(t,null),e[7](t),n=!0},p(e,[o]){i&&i.p&&(!n||32&o)&&p(i,s,e,e[5],n?f(s,e[5],o,null):h(e[5]),null),(!n||2&o)&&U(t,"style",e[1])},i(e){n||(be(i,e),n=!0)},o(e){xe(i,e),n=!1},d(n){n&&A(t),i&&i.d(n),e[7](null)}}}function ht(e,t,n){let{$$slots:s={},$$scope:i}=t,{measureMeter:o}=t,{cssStyle:a}=t;return e.$$set=e=>{"measureMeter"in e&&n(0,o=e.measureMeter),"cssStyle"in e&&n(1,a=e.cssStyle),"$$scope"in e&&n(5,i=e.$$scope)},[o,a,function(e){o.offsetHeight&&o.offsetWidth&&e({width:o.offsetWidth,height:o.offsetHeight}),new MutationObserver(((t,n)=>{n.disconnect();try{e({width:o.offsetWidth,height:o.offsetHeight})}catch(e){}})).observe(o,{childList:!0,subtree:!0,attributes:!0})},function(){o.setAttribute("__force-update__",""),o.removeAttribute("__force-update__")},function(){return{width:o.offsetWidth,height:o.offsetHeight}},i,s,function(e){te[e?"unshift":"push"]((()=>{o=e,n(0,o)}))}]}class mt extends Se{constructor(e){super(),Te(this,e,ht,pt,l,{measureMeter:0,cssStyle:1,measure:2,forceUpdate:3,currentSize:4})}get measure(){return this.$$.ctx[2]}get forceUpdate(){return this.$$.ctx[3]}get currentSize(){return this.$$.ctx[4]}}function gt(e){let t,n,s,i,o,a,l,r;const c=e[16].default,d=u(c,e,e[15],null);return{c(){t=z("div"),n=z("div"),s=z("div"),d&&d.c(),i=S(),o=z("div"),a=z("div"),U(s,"class","meter svelte-e9pqw3"),O(s,"width","100%"),U(n,"class","restrict-container svelte-e9pqw3"),U(a,"class","thumb svelte-e9pqw3"),O(a,"--height",e[6]+"px"),O(a,"--top",e[9]+"px"),O(a,"min-height",e[0]+"px"),U(o,"class",l="track "+(e[8]?"hover":"")+" "+(e[7]?"hide":"")+" svelte-e9pqw3"),U(t,"class","out-container svelte-e9pqw3")},m(l,c){E(l,t,c),C(t,n),C(n,s),d&&d.m(s,null),e[17](s),e[18](n),C(t,i),C(t,o),C(o,a),e[19](a),e[20](o),e[21](t),r=!0},p(e,t){d&&d.p&&(!r||32768&t[0])&&p(d,c,e,e[15],r?f(c,e[15],t,null):h(e[15]),null),(!r||64&t[0])&&O(a,"--height",e[6]+"px"),(!r||512&t[0])&&O(a,"--top",e[9]+"px"),(!r||1&t[0])&&O(a,"min-height",e[0]+"px"),(!r||384&t[0]&&l!==(l="track "+(e[8]?"hover":"")+" "+(e[7]?"hide":"")+" svelte-e9pqw3"))&&U(o,"class",l)},i(e){r||(be(d,e),r=!0)},o(e){xe(d,e),r=!1},d(n){n&&A(t),d&&d.d(n),e[17](null),e[18](null),e[19](null),e[20](null),e[21](null)}}}function vt(e,t,n){let s,i,o,a,l,r,c,u,d,f,{$$slots:p={},$$scope:h}=t,{minThumbHeight:m=12}=t,g=0,v=!1;function $(){n(9,x=g!==m?a.scrollTop/c*d:(d-g)/(c-r)*a.scrollTop)}function y(){r=s.offsetHeight,d=o.offsetHeight,c=i.offsetHeight,u=c?Math.min(r/c,1):1,n(6,g=u*d),g<m&&(n(6,g=m),u=d?Math.min(g/d,1):1),n(7,v=u>=1),f=o&&o.getBoundingClientRect().top,$(),S("afterUpdated")}let w=!1;function b(e){e=Math.min(Math.max(g/2,e),d-g/2),$(),C((e-g/2)/(d-g))}Y((async()=>{o.addEventListener("mouseenter",(()=>{n(8,w=!0)})),o.addEventListener("mouseleave",(()=>{L||n(8,w=!1)})),rem.on("pageContentChange",y),rem.on("scroll",b),rem.on("scroll-up",k)})),G((()=>{rem.off("pageContentChange",y),rem.off("scroll-up",k),rem.off("scroll",b)}));let x=0;async function k(e){if(!s)return;const t=await store.get("stickScrollSpeedRatio");let n=t?t[t[0]+1].value:.6;C((a.scrollTop+e*n)/c),$()}function C(e){e=Math.min(Math.max(0,e),1),a.scrollTo({top:e*(c||0)}),$()}let _=0,L=!1;function E(e){L=!0;let t=e.offsetY;t=e.pageY-f,C((t-g/2)/d),_=e.offsetY-x}function A(e){e.stopPropagation(),n(8,w=!0),_=e.offsetY,L=!0}function P(e){_=0,L=!1,e.path.includes(o)||n(8,w=!1)}function z(e){if(!L)return;C((e.pageY-f-_)/d)}function T(e){e.stopPropagation();C(Math.max(Math.min(a.scrollTop+e.deltaY,c),0)/c)}const S=J();return Y((()=>{window.addEventListener("resize",y),o.addEventListener("mousedown",E),l.addEventListener("mousedown",A),document.addEventListener("mouseup",P),document.addEventListener("mousemove",z),s.addEventListener("wheel",T,{passive:!0})})),G((()=>{window.removeEventListener("resize",y),o.removeEventListener("mousedown",E),l.removeEventListener("mousedown",A),document.removeEventListener("mouseup",P),document.removeEventListener("mousemove",z),s.removeEventListener("wheel",T)})),e.$$set=e=>{"minThumbHeight"in e&&n(0,m=e.minThumbHeight),"$$scope"in e&&n(15,h=e.$$scope)},[m,s,i,o,a,l,g,v,w,x,y,function(){return!!a},function(){return(a?.scrollTop||0)/(c||1)},function(e){C(e)},function(e){a&&n(4,a.scrollTop=e,a)},h,p,function(e){te[e?"unshift":"push"]((()=>{i=e,n(2,i)}))},function(e){te[e?"unshift":"push"]((()=>{a=e,n(4,a)}))},function(e){te[e?"unshift":"push"]((()=>{l=e,n(5,l)}))},function(e){te[e?"unshift":"push"]((()=>{o=e,n(3,o)}))},function(e){te[e?"unshift":"push"]((()=>{s=e,n(1,s)}))}]}class $t extends Se{constructor(e){super(),Te(this,e,vt,gt,l,{minThumbHeight:0,update:10,prepared:11,getOffsetRatio:12,setOffsetRatio:13,scrollTo:14},null,[-1,-1])}get update(){return this.$$.ctx[10]}get prepared(){return this.$$.ctx[11]}get getOffsetRatio(){return this.$$.ctx[12]}get setOffsetRatio(){return this.$$.ctx[13]}get scrollTo(){return this.$$.ctx[14]}}function yt(e,{delay:n=0,duration:s=400,easing:i=t}={}){const o=+getComputedStyle(e).opacity;return{delay:n,duration:s,easing:i,css:e=>"opacity: "+e*o}}function wt(e,t,n){const s=e.slice();return s[8]=t[n],s[10]=n,s}function bt(e){let t,n,s=e[0][e[10]]+"";return{c(){t=z("div"),n=T(s),U(t,"class","t txt svelte-17bu6no"),O(t,"width",e[8]+"%")},m(e,s){E(e,t,s),C(t,n)},p(e,t){1&t&&s!==(s=e[0][e[10]]+"")&&N(n,s)},d(e){e&&A(t)}}}function xt(t){let n,s,i,a,l=t[5],r=[];for(let e=0;e<l.length;e+=1)r[e]=bt(wt(t,l,e));return{c(){n=z("div");for(let e=0;e<r.length;e+=1)r[e].c();U(n,"class",s="column tile"+(t[1]?" selected":"")+(t[2]?" focus":"")+" svelte-17bu6no")},m(e,s){E(e,n,s);for(let e=0;e<r.length;e+=1)r[e].m(n,null);i||(a=[M(n,"click",t[3]),M(n,"dblclick",t[4])],i=!0)},p(e,[t]){if(33&t){let s;for(l=e[5],s=0;s<l.length;s+=1){const i=wt(e,l,s);r[s]?r[s].p(i,t):(r[s]=bt(i),r[s].c(),r[s].m(n,null))}for(;s<r.length;s+=1)r[s].d(1);r.length=l.length}6&t&&s!==(s="column tile"+(e[1]?" selected":"")+(e[2]?" focus":"")+" svelte-17bu6no")&&U(n,"class",s)},i:e,o:e,d(e){e&&A(n),P(r,e),i=!1,o(a)}}}function kt(e,t,n){let s=J();let{location:i=[]}=t,{data:o=[]}=t,{selected:a=!1}=t,{focus:l=!1}=t,r=function(e){let t=new Array(e.length).fill(0);return(e=[...e]).push(100),t.forEach(((t,n,s)=>{s[n]=e[n+1]-e[n]})),t}(i);return e.$$set=e=>{"location"in e&&n(6,i=e.location),"data"in e&&n(0,o=e.data),"selected"in e&&n(1,a=e.selected),"focus"in e&&n(2,l=e.focus)},[o,a,l,function(e){s("click",e)},function(e){s("dbclick",e)},r,i]}class Ct extends Se{constructor(e){super(),Te(this,e,kt,xt,l,{location:6,data:0,selected:1,focus:2})}}function _t(e,t,n){const s=e.slice();return s[10]=t[n],s[12]=n,s}function Lt(e){let t,n,s;function i(t){e[6](t)}let o={data:[e[12]+1,e[10].name,e[10].ar.reduce(At,[]).join(" / "),e[10].al.name],selected:e[2].has(e[12]),focus:~e[3]&&e[3]};return void 0!==e[0]&&(o.location=e[0]),t=new Ct({props:o}),te.push((()=>Ee(t,"location",i))),t.$on("click",(function(){return e[7](e[12])})),t.$on("dbclick",(function(){return e[8](e[12])})),{c(){Ae(t.$$.fragment)},m(e,n){Pe(t,e,n),s=!0},p(s,i){e=s;const o={};2&i&&(o.data=[e[12]+1,e[10].name,e[10].ar.reduce(At,[]).join(" / "),e[10].al.name]),4&i&&(o.selected=e[2].has(e[12])),8&i&&(o.focus=~e[3]&&e[3]),!n&&1&i&&(n=!0,o.location=e[0],ce((()=>n=!1))),t.$set(o)},i(e){s||(be(t.$$.fragment,e),s=!0)},o(e){xe(t.$$.fragment,e),s=!1},d(e){ze(t,e)}}}function Et(e){let t,n,s=e[1],i=[];for(let t=0;t<s.length;t+=1)i[t]=Lt(_t(e,s,t));const o=e=>xe(i[e],1,1,(()=>{i[e]=null}));return{c(){for(let e=0;e<i.length;e+=1)i[e].c();t=D()},m(e,s){for(let t=0;t<i.length;t+=1)i[t].m(e,s);E(e,t,s),n=!0},p(e,[n]){if(63&n){let a;for(s=e[1],a=0;a<s.length;a+=1){const o=_t(e,s,a);i[a]?(i[a].p(o,n),be(i[a],1)):(i[a]=Lt(o),i[a].c(),be(i[a],1),i[a].m(t.parentNode,t))}for(ye(),a=s.length;a<i.length;a+=1)o(a);we()}},i(e){if(!n){for(let e=0;e<s.length;e+=1)be(i[e]);n=!0}},o(e){i=i.filter(Boolean);for(let e=0;e<i.length;e+=1)xe(i[e]);n=!1},d(e){P(i,e),e&&A(t)}}}const At=(e,t)=>[...e,t.name];function Pt(e,t,n){let s=J(),{listData:i=[]}=t,{location:o=[]}=t,{selections:a=new Set}=t,{focus:l=-1}=t;function r(e){s("click",{listData:i,i:e})}function c(e){s("dbclick",{listData:i,i:e})}var u;Y((()=>{s("mount")})),u=()=>{i.length>0&&s("update")},X().$$.after_update.push(u);return e.$$set=e=>{"listData"in e&&n(1,i=e.listData),"location"in e&&n(0,o=e.location),"selections"in e&&n(2,a=e.selections),"focus"in e&&n(3,l=e.focus)},[o,i,a,l,r,c,function(e){o=e,n(0,o)},e=>r(e),e=>c(e)]}class zt extends Se{constructor(e){super(),Te(this,e,Pt,Et,l,{listData:1,location:0,selections:2,focus:3})}}function Tt(e){let t,n,s;return{c(){t=z("textarea"),U(t,"type",e[0]),U(t,"id",e[1]),U(t,"spellcheck",e[8]),t.value=e[2],U(t,"maxlength",e[4]),U(t,"style",e[5]),U(t,"placeholder",e[7]),U(t,"class","svelte-188f7of")},m(i,o){E(i,t,o),e[17](t),n||(s=[M(t,"focus",e[12]),M(t,"change",e[14]),M(t,"input",e[15]),M(t,"blur",e[13])],n=!0)},p(e,n){1&n&&U(t,"type",e[0]),2&n&&U(t,"id",e[1]),256&n&&U(t,"spellcheck",e[8]),4&n&&(t.value=e[2]),16&n&&U(t,"maxlength",e[4]),32&n&&U(t,"style",e[5]),128&n&&U(t,"placeholder",e[7])},d(i){i&&A(t),e[17](null),n=!1,o(s)}}}function St(e){let t,n,s;return{c(){t=z("input"),U(t,"type",e[0]),U(t,"id",e[1]),U(t,"spellcheck",e[8]),t.value=e[2],U(t,"style",e[5]),U(t,"placeholder",e[7]),U(t,"class","svelte-188f7of")},m(i,o){E(i,t,o),e[16](t),n||(s=[M(t,"focus",e[12]),M(t,"change",e[14]),M(t,"input",e[15]),M(t,"blur",e[13])],n=!0)},p(e,n){1&n&&U(t,"type",e[0]),2&n&&U(t,"id",e[1]),256&n&&U(t,"spellcheck",e[8]),4&n&&t.value!==e[2]&&(t.value=e[2]),32&n&&U(t,"style",e[5]),128&n&&U(t,"placeholder",e[7])},d(i){i&&A(t),e[16](null),n=!1,o(s)}}}function Dt(t){let n,s;function i(e,t){return e[3]?St:Tt}let o=i(t),a=o(t);return{c(){n=z("div"),a.c(),U(n,"class",s=(t[6]?"full-border":"input")+(t[11]?" focus":"")+" svelte-188f7of"),U(n,"style",t[9])},m(e,t){E(e,n,t),a.m(n,null)},p(e,[t]){o===(o=i(e))&&a?a.p(e,t):(a.d(1),a=o(e),a&&(a.c(),a.m(n,null))),2112&t&&s!==(s=(e[6]?"full-border":"input")+(e[11]?" focus":"")+" svelte-188f7of")&&U(n,"class",s),512&t&&U(n,"style",e[9])},i:e,o:e,d(e){e&&A(n),a.d()}}}function Mt(e,t,n){let s,{type:i="text"}=t,{id:o="default-id"}=t,{value:a=""}=t,{singleLine:l=!0}=t,{maxLength:r=999999}=t,{cssText:c=""}=t,{fullBorder:u=!1}=t,{placeholder:d=""}=t,{spellcheck:f=!1}=t,{containerStyle:p=""}=t,h=J(),m=!1;return e.$$set=e=>{"type"in e&&n(0,i=e.type),"id"in e&&n(1,o=e.id),"value"in e&&n(2,a=e.value),"singleLine"in e&&n(3,l=e.singleLine),"maxLength"in e&&n(4,r=e.maxLength),"cssText"in e&&n(5,c=e.cssText),"fullBorder"in e&&n(6,u=e.fullBorder),"placeholder"in e&&n(7,d=e.placeholder),"spellcheck"in e&&n(8,f=e.spellcheck),"containerStyle"in e&&n(9,p=e.containerStyle)},[i,o,a,l,r,c,u,d,f,p,s,m,function(){n(11,m=!0),h("focus")},function(){n(11,m=!1),h("blur")},function(){h("change",s.value)},function(){h("input",s.value)},function(e){te[e?"unshift":"push"]((()=>{s=e,n(10,s)}))},function(e){te[e?"unshift":"push"]((()=>{s=e,n(10,s)}))}]}class Rt extends Se{constructor(e){super(),Te(this,e,Mt,Dt,l,{type:0,id:1,value:2,singleLine:3,maxLength:4,cssText:5,fullBorder:6,placeholder:7,spellcheck:8,containerStyle:9})}}function Ut(e,t,n){const s=e.slice();return s[48]=t[n],s[50]=n,s}function Nt(e,t,n){const s=e.slice();return s[51]=t[n],s[50]=n,s}function Bt(e){let t,n,s,i,o=e[51]+"";return{c(){t=z("div"),n=T(o),U(t,"index",s=e[50]),U(t,"class",i=g(e[4]===e[50]?"selected":"")+" svelte-lznlow")},m(e,s){E(e,t,s),C(t,n)},p(e,n){16&n[0]&&i!==(i=g(e[4]===e[50]?"selected":"")+" svelte-lznlow")&&U(t,"class",i)},d(e){e&&A(t)}}}function Ot(e){let t,n,s,i,o,a,l,r,c,u,d,f=e[0].names,p=[];for(let t=0;t<f.length;t+=1)p[t]=Vt(Ut(e,f,t));function h(t){e[26](t)}function m(t){e[27](t)}function g(t){e[28](t)}let v={};return void 0!==e[5]&&(v.listData=e[5]),void 0!==e[8]&&(v.location=e[8]),void 0!==e[9]&&(v.selections=e[9]),o=new zt({props:v}),te.push((()=>Ee(o,"listData",h))),te.push((()=>Ee(o,"location",m))),te.push((()=>Ee(o,"selections",g))),o.$on("update",e[20]),o.$on("click",e[15]),o.$on("dbclick",e[16]),{c(){t=z("div"),n=z("div");for(let e=0;e<p.length;e+=1)p[e].c();s=S(),i=z("div"),Ae(o.$$.fragment),U(n,"class","Row splitter svelte-lznlow"),O(n,"width","calc(100% - 44px)"),O(n,"margin","0px 24px"),U(i,"class","Column list svelte-lznlow"),U(t,"class","Column c svelte-lznlow")},m(a,l){E(a,t,l),C(t,n);for(let e=0;e<p.length;e+=1)p[e].m(n,null);e[25](n),C(t,s),C(t,i),Pe(o,i,null),e[29](t),c=!0,u||(d=M(n,"mousedown",e[14]),u=!0)},p(e,t){if(8327&t[0]){let s;for(f=e[0].names,s=0;s<f.length;s+=1){const i=Ut(e,f,s);p[s]?p[s].p(i,t):(p[s]=Vt(i),p[s].c(),p[s].m(n,null))}for(;s<p.length;s+=1)p[s].d(1);p.length=f.length}const s={};!a&&32&t[0]&&(a=!0,s.listData=e[5],ce((()=>a=!1))),!l&&256&t[0]&&(l=!0,s.location=e[8],ce((()=>l=!1))),!r&&512&t[0]&&(r=!0,s.selections=e[9],ce((()=>r=!1))),o.$set(s)},i(e){c||(be(o.$$.fragment,e),c=!0)},o(e){xe(o.$$.fragment,e),c=!1},d(n){n&&A(t),P(p,n),e[25](null),ze(o),e[29](null),u=!1,d()}}}function Vt(e){let t,n,s,i,o,a=e[48]+"";function l(){return e[24](e[50])}return{c(){t=z("div"),n=T(a),U(t,"class",s="splitterTab"+(e[1]===e[50]?e[2]?" backwards":" forwards":"")+" svelte-lznlow"),O(t,"width",e[7][e[50]]+"%")},m(e,s){E(e,t,s),C(t,n),i||(o=M(t,"click",l),i=!0)},p(i,o){e=i,1&o[0]&&a!==(a=e[48]+"")&&N(n,a),6&o[0]&&s!==(s="splitterTab"+(e[1]===e[50]?e[2]?" backwards":" forwards":"")+" svelte-lznlow")&&U(t,"class",s),128&o[0]&&O(t,"width",e[7][e[50]]+"%")},d(e){e&&A(t),i=!1,o()}}}function qt(e){let t,n,s=0===e[4]&&Ot(e);return{c(){s&&s.c(),t=D()},m(e,i){s&&s.m(e,i),E(e,t,i),n=!0},p(e,n){0===e[4]?s?(s.p(e,n),16&n[0]&&be(s,1)):(s=Ot(e),s.c(),be(s,1),s.m(t.parentNode,t)):s&&(ye(),xe(s,1,1,(()=>{s=null})),we())},i(e){n||(be(s),n=!0)},o(e){xe(s),n=!1},d(e){s&&s.d(e),e&&A(t)}}}function It(e){let t,n,s,i,a,l,r,c,u,d,f,p,h,m,g,v,$,y,w,b,x,k,_,L,D,R,B,V,q,I,F,j,H,W=e[3].trackCount+"",X=e[3].title+"",Y=e[3].subtitle+"";i=new Xe({props:{width:292,height:292,radius:"0",avatar:e[3].imgUrl}}),D=new Rt({props:{type:"text",placeholder:"  搜索列表",fullBorder:!0}}),D.$on("input",e[22]);let G=e[12],J=[];for(let t=0;t<G.length;t+=1)J[t]=Bt(Nt(e,G,t));return I=new $t({props:{$$slots:{default:[qt]},$$scope:{ctx:e}}}),e[30](I),{c(){t=z("div"),n=z("div"),s=z("div"),Ae(i.$$.fragment),a=S(),l=z("div"),r=T(W),c=T(" 首"),u=S(),d=z("div"),f=z("div"),p=z("h3"),h=T(X),m=S(),g=z("div"),v=T(Y),$=S(),y=z("div"),w=z("div"),w.textContent=" 播放",b=S(),x=z("div"),x.textContent="",k=S(),_=z("div"),L=z("div"),Ae(D.$$.fragment),R=S(),B=z("div");for(let e=0;e<J.length;e+=1)J[e].c();V=S(),q=z("div"),Ae(I.$$.fragment),O(s,"z-index","-1"),O(s,"height","250px"),U(l,"class","bread-crumb svelte-lznlow"),U(p,"class","title svelte-lznlow"),U(g,"class","subtitle svelte-lznlow"),U(w,"class","btn big accent svelte-lznlow"),U(x,"class","btn big bright svelte-lznlow"),U(y,"class","Row"),U(d,"class","Column rowl svelte-lznlow"),U(n,"class","header Column svelte-lznlow"),O(n,"overflow","hidden"),O(n,"position","relative"),U(B,"class","Row view-display svelte-lznlow"),U(L,"class","nav Row svelte-lznlow"),O(q,"height","calc(100% - 60px)"),U(_,"class","playlistContent svelte-lznlow"),U(_,"style",""),U(t,"class","Row"),O(t,"width","100%"),O(t,"height","100%")},m(o,A){E(o,t,A),C(t,n),C(n,s),Pe(i,s,null),C(n,a),C(n,l),C(l,r),C(l,c),C(n,u),C(n,d),C(d,f),C(f,p),C(p,h),C(f,m),C(f,g),C(g,v),C(d,$),C(d,y),C(y,w),C(y,b),C(y,x),C(t,k),C(t,_),C(_,L),Pe(D,L,null),C(L,R),C(L,B);for(let e=0;e<J.length;e+=1)J[e].m(B,null);C(_,V),C(_,q),Pe(I,q,null),F=!0,j||(H=[M(w,"click",e[17]),M(x,"click",e[18]),M(B,"click",e[23])],j=!0)},p(e,t){const n={};if(8&t[0]&&(n.avatar=e[3].imgUrl),i.$set(n),(!F||8&t[0])&&W!==(W=e[3].trackCount+"")&&N(r,W),(!F||8&t[0])&&X!==(X=e[3].title+"")&&N(h,X),(!F||8&t[0])&&Y!==(Y=e[3].subtitle+"")&&N(v,Y),4112&t[0]){let n;for(G=e[12],n=0;n<G.length;n+=1){const s=Nt(e,G,n);J[n]?J[n].p(s,t):(J[n]=Bt(s),J[n].c(),J[n].m(B,null))}for(;n<J.length;n+=1)J[n].d(1);J.length=G.length}const s={};2039&t[0]|4194304&t[1]&&(s.$$scope={dirty:t,ctx:e}),I.$set(s)},i(e){F||(be(i.$$.fragment,e),be(D.$$.fragment,e),be(I.$$.fragment,e),F=!0)},o(e){xe(i.$$.fragment,e),xe(D.$$.fragment,e),xe(I.$$.fragment,e),F=!1},d(n){n&&A(t),ze(i),ze(D),P(J,n),e[30](null),ze(I),j=!1,o(H)}}}function Ft(e){let t=[...e],n=new Array(e.length).fill(0);return t.push(100),n.forEach(((e,n,s)=>{s[n]=t[n+1]-t[n]})),n}function jt(e,t){return e.toLowerCase().includes(t.toLowerCase())}function Ht(e,t,n){let{header:s=null}=t;const i=()=>1;let{listSplitter:o=store.getSync("playlist/splitter")||{location:[0,16,44,72],names:["功能","歌曲名","艺术家","专辑"]}}=t,a=store.getSync("playlist/displayType")||0;G((()=>{store.set("playlist/displayType",a)})),o.sortFunc=[i,(e,t)=>t.name>e.name||-1,(e,t)=>t.ar[0].name>e.ar[0].name||-1,(e,t)=>t.al.name>e.al.name||-1];let l,r,{listData:c=[]}=t,{sortBy:u=0}=t,{forwards:d=!0}=t,f=[];function p(e){r=[...e],e.sort(o.sortFunc[u]),!d&&e.reverse(),n(5,f=e)}Y((()=>{c instanceof Promise?rem.once("pageSwipeAnimFinish",(()=>c.then((e=>p(e))))):p(c)}));let h=!1;function m(e){if(!h)return!1;let t;"number"!=typeof e&&(e=o.names.indexOf(e)),e===u&&n(2,d=!d),t=o.sortFunc[e]||i,n(1,u=e),store.set("playlist/sortBy",u),store.set("playlist/forwards",d);let s=[...r];s.sort(t),d||(s=s.reverse()),setTimeout((()=>{n(5,f=s)}))}m(u);let g,v,$=Ft(o.location),y=o.location,w=!1,b=0,x=0,k=0;document.addEventListener("mousemove",(function(e){w&&(h=!1,k=e.screenX-x,v.style.transform=`translateX(${k}px)`)})),document.addEventListener("mouseup",(function(){if(w){w=!1,v.style.transform="";let e=k/b*100;n(8,y[g]+=e,y),n(7,$=Ft(y));const t=f;n(5,f=[]),setTimeout((()=>{n(5,f=t)})),x=k=g=0,v=null,store.set("playlist/splitter",{location:y,names:o.names})}}));let C=!1;document.addEventListener("keydown",(e=>{e.ctrlKey&&(C=!0)})),document.addEventListener("keyup",(e=>{e.ctrlKey&&(C=!1)}));let _,L=new Set;Y((()=>{contextMap.set(_,{"刷新":()=>{const{name:e,props:t}=Pager.getContext(),n=Pager.getContext().class;Pager.openNew(e,n,t,!0)}})})),G((()=>{contextMap.delete(_)}));const E=((e,t=600)=>{let n;return(...s)=>{n||(n=setTimeout((()=>{e(...s),n=null}),t))}})((async e=>{const t=await async function(e){if(!e)return[];const t=(await c).slice();let n=[];for(const s of t){const{name:t,al:i,ar:o}=s;if(jt(t,e))n.push(s);else if(jt(i.name||"",e))n.push(s);else for(const t of o)if(jt(t.name||"",e)){n.push(s);break}}return n}(e);t.length?p(t):p(await c)}));let A,P=!1;Pager.beforeSwitch((()=>{if(A?.prepared()){const{save:e}=Pager.getContext();e.offsetRatio=A.getOffsetRatio()}rem.emit("__pageUnfold")}));return e.$$set=e=>{"header"in e&&n(3,s=e.header),"listSplitter"in e&&n(0,o=e.listSplitter),"listData"in e&&n(21,c=e.listData),"sortBy"in e&&n(1,u=e.sortBy),"forwards"in e&&n(2,d=e.forwards)},[o,u,d,s,a,f,l,$,y,L,_,A,["",""],m,function(e){h=!0,v=e.target,v!==l&&(g=[...v.parentNode.children].indexOf(v),0!==g&&(b=e.path[1].offsetWidth,w=!0,e.target.offsetLeft,x=e.screenX))},function(e){const t=e.detail.i;C?(L.add(t),n(9,L)):n(9,L=(new Set).add(t))},async function(e){const{listData:t,i:n}=e.detail,s=tt.query({name:t[n].name});if(!s.length)return tt.loadList(t),void tt.play(n);tt.play(s[0])},async function(){let e=(await c).slice(0);tt.loadList(e),tt.play(0)},async function(){let e=(await c).slice(0);tt.loadList(e.sort((()=>Math.random()-.5))),tt.play(0)},E,async function(){P||(await le(),async function(){if(A?.prepared()){const{save:e}=Pager.getContext();A.setOffsetRatio(e.offsetRatio)}}(),P=!0)},c,e=>{E(e.detail)},e=>{n(4,a=+e.target.getAttribute("index")??a)},e=>m(e),function(e){te[e?"unshift":"push"]((()=>{l=e,n(6,l)}))},function(e){f=e,n(5,f)},function(e){y=e,n(8,y)},function(e){L=e,n(9,L)},function(e){te[e?"unshift":"push"]((()=>{_=e,n(10,_)}))},function(e){te[e?"unshift":"push"]((()=>{A=e,n(11,A)}))}]}class Wt extends Se{constructor(e){super(),Te(this,e,Ht,It,l,{header:3,listSplitter:0,listData:21,sortBy:1,forwards:2},null,[-1,-1])}}function Xt(e,t,n){const s=e.slice();return s[30]=t[n],s[32]=n,s}function Yt(e,t,n){const s=e.slice();return s[33]=t[n],s[32]=n,s}function Gt(e,t,n){const s=e.slice();return s[35]=t[n],s[32]=n,s}function Jt(e){let t,n,s,i,a,l,r,c,u,d,f,p,h=e[35].name+"";function m(){return e[17](e[35])}function g(){return e[18](e[35])}return{c(){t=z("div"),n=z("div"),s=S(),i=z("div"),i.textContent="",a=S(),l=z("div"),r=z("div"),c=T(h),u=S(),U(n,"class","avatar svelte-3wks3y"),O(n,"background-image","url("+e[35].coverImgUrl+")"),U(i,"class","btn light FAB svelte-3wks3y"),U(l,"class","row title svelte-3wks3y"),U(t,"class","card row active svelte-3wks3y"),U(t,"title",d=e[35].name)},m(e,o){E(e,t,o),C(t,n),C(t,s),C(t,i),C(t,a),C(t,l),C(l,r),C(r,c),C(t,u),f||(p=[M(i,"click",R(m)),M(i,"mouseenter",R(an)),M(i,"mouseleave",R(ln)),M(t,"click",g)],f=!0)},p(s,i){e=s,1&i[0]&&O(n,"background-image","url("+e[35].coverImgUrl+")"),1&i[0]&&h!==(h=e[35].name+"")&&N(c,h),1&i[0]&&d!==(d=e[35].name)&&U(t,"title",d)},d(e){e&&A(t),f=!1,o(p)}}}function Kt(e){let t,n=e[0],s=[];for(let t=0;t<n.length;t+=1)s[t]=Jt(Gt(e,n,t));return{c(){t=z("div");for(let e=0;e<s.length;e+=1)s[e].c();U(t,"class","column card-container svelte-3wks3y")},m(e,n){E(e,t,n);for(let e=0;e<s.length;e+=1)s[e].m(t,null)},p(e,i){if(34819&i[0]){let o;for(n=e[0],o=0;o<n.length;o+=1){const a=Gt(e,n,o);s[o]?s[o].p(a,i):(s[o]=Jt(a),s[o].c(),s[o].m(t,null))}for(;o<s.length;o+=1)s[o].d(1);s.length=n.length}},d(e){e&&A(t),P(s,e)}}}function Qt(e){let t,n,s,i,o,a,l,r,c,u=e[5].showAllArtists?"收起":"查看",d=e[8].count+"",f=e[8],p=[];for(let t=0;t<f.length;t+=1)p[t]=Zt(Yt(e,f,t));return{c(){t=z("div"),n=z("div"),s=T(u),i=T("全部 "),o=T(d),a=T(" 位艺术家"),l=S();for(let e=0;e<p.length;e+=1)p[e].c();U(n,"class","btn light dynamic"),O(n,"position","absolute"),O(n,"left","200px"),O(n,"top","0px"),O(n,"border-radius","6px"),U(t,"class","Row"),U(t,"row-title","收藏的艺术家"),O(t,"--item-height","200px"),O(t,"--item-width","200px"),O(t,"align-self","flex-start")},m(u,d){E(u,t,d),C(t,n),C(n,s),C(n,i),C(n,o),C(n,a),C(t,l);for(let e=0;e<p.length;e+=1)p[e].m(t,null);r||(c=M(n,"click",e[21]),r=!0)},p(e,n){if(32&n[0]&&u!==(u=e[5].showAllArtists?"收起":"查看")&&N(s,u),256&n[0]&&d!==(d=e[8].count+"")&&N(o,d),256&n[0]){let s;for(f=e[8],s=0;s<f.length;s+=1){const i=Yt(e,f,s);p[s]?p[s].p(i,n):(p[s]=Zt(i),p[s].c(),p[s].m(t,null))}for(;s<p.length;s+=1)p[s].d(1);p.length=f.length}},d(e){e&&A(t),P(p,e),r=!1,c()}}}function Zt(e){let t,n,s,i,a,l,r,u,d,f,p,h,m,g,v,$=e[33].name+"",y=(e[33].alias.length?e[33].alias[0]:"")+"";return{c(){t=z("div"),n=z("div"),n.textContent="",s=S(),i=z("img"),r=S(),u=z("div"),d=T($),f=S(),p=z("div"),h=T(y),m=S(),U(n,"class","btn light FAB svelte-3wks3y"),U(i,"class","artist svelte-3wks3y"),U(i,"draggable","false"),c(i.src,a=e[33].picUrl)||U(i,"src",a),U(i,"alt",l=e[33].name),U(i,"decoding","async"),U(u,"class","name title svelte-3wks3y"),U(p,"class","name svelte-3wks3y"),U(t,"class","Column artist-c active svelte-3wks3y")},m(e,o){E(e,t,o),C(t,n),C(t,s),C(t,i),C(t,r),C(t,u),C(u,d),C(t,f),C(t,p),C(p,h),C(t,m),g||(v=[M(n,"click",R(un)),M(n,"mouseenter",R(an)),M(n,"mouseleave",R(ln)),M(i,"load",cn)],g=!0)},p(e,t){256&t[0]&&!c(i.src,a=e[33].picUrl)&&U(i,"src",a),256&t[0]&&l!==(l=e[33].name)&&U(i,"alt",l),256&t[0]&&$!==($=e[33].name+"")&&N(d,$),256&t[0]&&y!==(y=(e[33].alias.length?e[33].alias[0]:"")+"")&&N(h,y)},d(e){e&&A(t),g=!1,o(v)}}}function en(e){let t,n,s,i,o,a,l,r,c,u=e[5].showAllAlbums?"收起":"查看",d=e[9].count+"",f=e[9],p=[];for(let t=0;t<f.length;t+=1)p[t]=tn(Xt(e,f,t));return{c(){t=z("div"),n=z("div"),s=T(u),i=T("全部 "),o=T(d),a=T(" 张专辑"),l=S();for(let e=0;e<p.length;e+=1)p[e].c();U(n,"class","btn light dynamic"),O(n,"position","absolute"),O(n,"left","180px"),O(n,"top","0px"),O(n,"border-radius","6px"),U(t,"class","Row"),U(t,"row-title","收藏的专辑"),O(t,"--item-height","200px"),O(t,"--item-width","200px"),O(t,"align-self","flex-start")},m(u,d){E(u,t,d),C(t,n),C(n,s),C(n,i),C(n,o),C(n,a),C(t,l);for(let e=0;e<p.length;e+=1)p[e].m(t,null);r||(c=M(n,"click",e[22]),r=!0)},p(e,n){if(32&n[0]&&u!==(u=e[5].showAllAlbums?"收起":"查看")&&N(s,u),512&n[0]&&d!==(d=e[9].count+"")&&N(o,d),35328&n[0]){let s;for(f=e[9],s=0;s<f.length;s+=1){const i=Xt(e,f,s);p[s]?p[s].p(i,n):(p[s]=tn(i),p[s].c(),p[s].m(t,null))}for(;s<p.length;s+=1)p[s].d(1);p.length=f.length}},d(e){e&&A(t),P(p,e),r=!1,c()}}}function tn(e){let t,n,s,i,a,l,r,u,d,f,p,h,m=e[30].name+"";function g(){return e[23](e[30])}function v(){return e[24](e[30])}return{c(){t=z("div"),n=z("div"),n.textContent="",s=S(),i=z("img"),r=S(),u=z("div"),d=T(m),f=S(),U(n,"class","btn light FAB svelte-3wks3y"),U(i,"class","album svelte-3wks3y"),O(i,"opacity","0"),O(i,"transition","opacity 1s"),U(i,"draggable","false"),c(i.src,a=e[30].picUrl)||U(i,"src",a),U(i,"alt",l=e[30].name),U(i,"decoding","async"),U(u,"class","name title svelte-3wks3y"),O(u,"width","calc(100% - 16px)"),U(t,"class","Column artist-c al active svelte-3wks3y")},m(e,o){E(e,t,o),C(t,n),C(t,s),C(t,i),C(t,r),C(t,u),C(u,d),C(t,f),p||(h=[M(n,"click",R(g)),M(n,"mouseenter",R(an)),M(n,"mouseleave",R(ln)),M(i,"load",cn),M(t,"click",v)],p=!0)},p(t,n){e=t,512&n[0]&&!c(i.src,a=e[30].picUrl)&&U(i,"src",a),512&n[0]&&l!==(l=e[30].name)&&U(i,"alt",l),512&n[0]&&m!==(m=e[30].name+"")&&N(d,m)},d(e){e&&A(t),p=!1,o(h)}}}function nn(e){let t,n,s,i,o,a,l,r,u,d,f,p,h,m,g,v;d=new mt({props:{cssStyle:"width: 100%",$$slots:{default:[Kt]},$$scope:{ctx:e}}}),e[19](d);let $=e[8].length&&Qt(e),y=e[9].length&&en(e);return{c(){t=z("div"),n=z("div"),s=z("img"),o=S(),a=z("div"),l=T("▼"),u=S(),Ae(d.$$.fragment),p=S(),$&&$.c(),h=S(),y&&y.c(),U(s,"class","collection-bgc svelte-3wks3y"),c(s.src,i=e[4])||U(s,"src",i),U(s,"alt",""),U(a,"title","展开"),U(a,"class",r="toggle"+(e[7]?"":" unfold")+" svelte-3wks3y"),U(n,"class",f="collection"+(e[7]?"":" unfold")+" svelte-3wks3y"),U(n,"data-title","我的歌单"),U(t,"class","row")},m(i,r){E(i,t,r),C(t,n),C(n,s),e[16](s),C(n,o),C(n,a),C(a,l),C(n,u),Pe(d,n,null),e[20](n),C(t,p),$&&$.m(t,null),C(t,h),y&&y.m(t,null),m=!0,g||(v=M(a,"click",e[12]),g=!0)},p(e,o){(!m||16&o[0]&&!c(s.src,i=e[4]))&&U(s,"src",i),(!m||128&o[0]&&r!==(r="toggle"+(e[7]?"":" unfold")+" svelte-3wks3y"))&&U(a,"class",r);const l={};1&o[0]|64&o[1]&&(l.$$scope={dirty:o,ctx:e}),d.$set(l),(!m||128&o[0]&&f!==(f="collection"+(e[7]?"":" unfold")+" svelte-3wks3y"))&&U(n,"class",f),e[8].length?$?$.p(e,o):($=Qt(e),$.c(),$.m(t,h)):$&&($.d(1),$=null),e[9].length?y?y.p(e,o):(y=en(e),y.c(),y.m(t,null)):y&&(y.d(1),y=null)},i(e){m||(be(d.$$.fragment,e),m=!0)},o(e){xe(d.$$.fragment,e),m=!1},d(n){n&&A(t),e[16](null),e[19](null),ze(d),e[20](null),$&&$.d(),y&&y.d(),g=!1,v()}}}function sn(e){let t,n;return t=new $t({props:{$$slots:{default:[nn]},$$scope:{ctx:e}}}),e[25](t),{c(){Ae(t.$$.fragment)},m(e,s){Pe(t,e,s),n=!0},p(e,n){const s={};1021&n[0]|64&n[1]&&(s.$$scope={dirty:n,ctx:e}),t.$set(s)},i(e){n||(be(t.$$.fragment,e),n=!0)},o(e){xe(t.$$.fragment,e),n=!1},d(n){e[25](null),ze(t,n)}}}function on(e){let t=store.getSync("playlist"+e);return t||async function(e){let t=await store.get("cookie"),n=await store.get("playlist"+e);let s=(await NeteaseApi.getPlaylistDetail(e,t)).body.playlist.trackIds.reduce(((e,t)=>[...e,t.id]),[]);return n=(await NeteaseApi.getSongDetail(s,t)).body.songs,store.setCache("playlist"+e,n),n}(e)}function an(){this.parentNode.classList.remove("active")}function ln(){this.parentNode.classList.add("active")}function rn(e){let t=store.getSync("al"+e);return t||new Promise((async n=>{t=(await NeteaseApi.getAlbumDetail(e,await store.get("cookie"))).body.songs,store.set("al"+e,t),n(t)}))}function cn(e){e.target.style.opacity=1}const un=()=>{};function dn(e,t,n){let s,i,o,{playlists:a=[]}=t;Y((async function(){let e=await store.get("dailyDesktop");if(n(3,i.onload=()=>{__setColor(s,i,1),s.style.setProperty("--start","220px")},i),e&&(new Date).getTime()-e.timeStamp<576e5)return n(4,o=e.url);e=await server.fetchJson("https://cn.bing.com/HPImageArchive.aspx?format=js&idx=0&n=1");const t="https://www.bing.com"+e.images[0].url;n(4,o=t),store.set("dailyDesktop",{timeStamp:(new Date).getTime(),url:t})}));let l=Pager.getContext().save;async function r(e,t){t=await t(),Pager.openNew(e,Wt,t)}!async function(){if(l.__playlists)return n(0,a=l.__playlists);const e=await store.get("cookie"),t=(await store.get("profile")).userId,s=await NeteaseApi.getUserPlaylist(t,e);200==s.status&&n(5,l.__playlists=n(0,a=s.body.playlist),l)}();let c,u=!0;function d(){n(7,u=!u),c.measure((({height:e})=>{s.style.setProperty("--height",e+160+"px"),requestAnimationFrame((()=>{h.update()}))}))}Pager.beforeSwitch((()=>{const{save:e}=Pager.getContext();e&&(e.collectionFolded=u)})),Y((()=>{contextMap.set(s,{"复制图片链接":"","图片另存为":""});const{save:e}=Pager.getContext();e&&void 0!==e.collectionFolded&&(e.collectionFolded||d())})),G((()=>{contextMap.delete(s)}));let f=[];async function p(){let e=await async function(){let e=l.__artistSublist;if(!e){let e=await NeteaseApi.getArtistSublist(await store.get("cookie"),1);return e=await NeteaseApi.getArtistSublist(await store.get("cookie"),e.body.count),e.body.data.count=e.body.count,n(5,l.__artistSublist=e.body.data,l)}return e}();n(8,f=l.showAllArtists?e:e.slice(0,12)),n(8,f.count=e.count,f)}p();let h,m=[];async function g(e){const t=await async function(){let e=l.__alSublist;if(!e){let e=await NeteaseApi.getAlbumSublist(await store.get("cookie"),1);return e=await NeteaseApi.getAlbumSublist(await store.get("cookie"),e.body.count),e.body.data.count=e.body.count,n(5,l.__alSublist=e.body.data,l)}return e}();n(9,m=t.slice(0,e||t.count)),n(9,m.count=t.count,m)}async function v(e,t=0){let n=0===t?await on(e):await rn(e);const s=tt.getCurrentData();if(tt.loadList(n),s){let e=tt.query({name:s.name});if(e.length)return tt.play(e[0])}tt.play(0)}l.showAllAlbums?g():g(12),Pager.beforeSwitch((()=>{if(h?.prepared()){const{save:e}=Pager.getContext();e.offsetRatio=h.getOffsetRatio()}})),Y((()=>{const{save:e}=Pager.getContext();requestIdleCallback((()=>h.setOffsetRatio(e.offsetRatio)))}));return e.$$set=e=>{"playlists"in e&&n(0,a=e.playlists)},[a,on,s,i,o,l,c,u,f,m,h,r,d,p,g,v,function(e){te[e?"unshift":"push"]((()=>{i=e,n(3,i)}))},e=>{v(e.id)},e=>{let t=e.id;r(e.name,(async()=>({header:{imgUrl:e.coverImgUrl,title:e.name,subtitle:`由${e.creator.nickname}创建`,playCount:e.playCount,trackCount:e.trackCount},listData:on(t),sortBy:await window.store.get("playlist/sortBy"),forwards:await window.store.get("playlist/forwards"),onTabDestroy(){!function(e){store.rm("playlist"+e)}(t)}})))},function(e){te[e?"unshift":"push"]((()=>{c=e,n(6,c)}))},function(e){te[e?"unshift":"push"]((()=>{s=e,n(2,s)}))},()=>{l.showAllArtists?(n(5,l.showAllArtists=!1,l),p()):(n(5,l.showAllArtists=!0,l),p())},()=>{l.showAllAlbums?(g(12),n(5,l.showAllAlbums=!1,l)):(g(),n(5,l.showAllAlbums=!0,l))},e=>{v(e.id,1)},e=>{let t=e.id;r(e.name,(async()=>({header:{imgUrl:e.picUrl,title:e.name,subtitle:`${e.artists.reduce(((e,t)=>[...e,t.name]),[]).join(" ")}`,playCount:e.playCount,trackCount:e.size},listData:rn(t),sortBy:await window.store.get("playlist/sortBy"),forwards:await window.store.get("playlist/forwards"),onTabDestroy(){!function(e){store.rm("al"+e)}(t)}})))},function(e){te[e?"unshift":"push"]((()=>{h=e,n(10,h)}))}]}class fn extends Se{constructor(e){super(),Te(this,e,dn,sn,l,{playlists:0,getDetailX:1},null,[-1,-1])}get getDetailX(){return on}}function pn(t){let n;return{c(){n=z("div"),n.innerHTML="<h1>发现</h1>",U(n,"class","row")},m(e,t){E(e,n,t)},p:e,i:e,o:e,d(e){e&&A(n)}}}class hn extends Se{constructor(e){super(),Te(this,e,null,pn,l,{})}}function mn(t){let n,s,i,a,l,r,c,u,d,f,p,h,m,g,v,$,y,w=t[0]?"":"";return{c(){n=z("div"),s=z("div"),i=z("div"),i.textContent="",a=S(),l=z("div"),r=T(w),c=S(),u=z("div"),u.textContent="⨉",p=S(),h=z("div"),m=z("div"),g=T("REM"),U(i,"class","column clk svelte-17abfmp"),U(l,"class","column clk small svelte-17abfmp"),O(l,"margin","0 4px"),U(u,"class","column clk red svelte-17abfmp"),U(s,"class",d="column btn-group appbtns"+(t[1]?" rev":"")+" svelte-17abfmp"),U(n,"class",f="column container "+(t[1]?"left":"right")+" svelte-17abfmp"),U(m,"class","title"+(window.rem.isBeta?" debug":"")+" svelte-17abfmp"),U(h,"class",v="column container "+(t[1]?"right":"left")+" svelte-17abfmp")},m(e,o){E(e,n,o),C(n,s),C(s,i),C(s,a),C(s,l),C(l,r),C(s,c),C(s,u),E(e,p,o),E(e,h,o),C(h,m),C(m,g),$||(y=[M(i,"click",gn),M(l,"click",t[2]),M(u,"click",vn)],$=!0)},p(e,[t]){1&t&&w!==(w=e[0]?"":"")&&N(r,w),2&t&&d!==(d="column btn-group appbtns"+(e[1]?" rev":"")+" svelte-17abfmp")&&U(s,"class",d),2&t&&f!==(f="column container "+(e[1]?"left":"right")+" svelte-17abfmp")&&U(n,"class",f),2&t&&v!==(v="column container "+(e[1]?"right":"left")+" svelte-17abfmp")&&U(h,"class",v)},i:e,o:e,d(e){e&&A(n),e&&A(p),e&&A(h),$=!1,o(y)}}}function gn(){hooks.send("win:min")}function vn(){hooks.send("win:close")}function $n(e,t,n){let s=!1;hooks.on("win:max",(()=>{n(0,s=!0)})),hooks.on("win:unmax",(()=>{n(0,s=!1)}));let i=!1;return hooks.invoke("isMac").then((e=>{e&&n(1,i=!0)})),[s,i,function(){s?hooks.send("win:unmax"):hooks.send("win:max")}]}class yn extends Se{constructor(e){super(),Te(this,e,$n,mn,l,{})}}const wn=e=>({}),bn=e=>({...e[4]});function xn(e){let t;const n=e[7].default,s=u(n,e,e[6],bn);return{c(){s&&s.c()},m(e,n){s&&s.m(e,n),t=!0},p(e,i){s&&s.p&&(!t||80&i)&&p(s,n,e,e[6],(e=>16&e)(i)||!t?h(e[6]):f(n,e[6],i,wn),bn)},i(e){t||(be(s,e),t=!0)},o(e){xe(s,e),t=!1},d(e){s&&s.d(e)}}}function kn(e){let t,s,i;const o=[e[4]];var a=e[0];function l(e){let t={};for(let e=0;e<o.length;e+=1)t=n(t,o[e]);return{props:t}}return a&&(t=new a(l())),{c(){t&&Ae(t.$$.fragment),s=D()},m(e,n){t&&Pe(t,e,n),E(e,s,n),i=!0},p(e,n){const i=16&n?_e(o,[Le(e[4])]):{};if(a!==(a=e[0])){if(t){ye();const e=t;xe(e.$$.fragment,1,0,(()=>{ze(e,1)})),we()}a?(t=new a(l()),Ae(t.$$.fragment),be(t.$$.fragment,1),Pe(t,s.parentNode,s)):t=null}else a&&t.$set(i)},i(e){i||(t&&be(t.$$.fragment,e),i=!0)},o(e){t&&xe(t.$$.fragment,e),i=!1},d(e){e&&A(s),t&&ze(t,e)}}}function Cn(e){let t,n,s,i,o,a;const l=[kn,xn],r=[];function c(e,t){return e[0]?0:1}return n=c(e),s=r[n]=l[n](e),{c(){t=z("div"),s.c(),U(t,"class","container svelte-1mv98ub"),U(t,"style",e[1])},m(s,l){E(s,t,l),r[n].m(t,null),e[8](t),i=!0,o||(a=M(t,"mousedown",e[3]),o=!0)},p(e,[o]){let a=n;n=c(e),n===a?r[n].p(e,o):(ye(),xe(r[a],1,1,(()=>{r[a]=null})),we(),s=r[n],s?s.p(e,o):(s=r[n]=l[n](e),s.c()),be(s,1),s.m(t,null)),(!i||2&o)&&U(t,"style",e[1])},i(e){i||(be(s),i=!0)},o(e){xe(s),i=!1},d(s){s&&A(t),r[n].d(),e[8](null),o=!1,a()}}}function _n(e){e.animate({opacity:["0.4","0"]},200).onfinish=()=>{e.remove()}}function Ln(e,t,s){let{$$slots:i={},$$scope:o}=t,{rippleColor:a=""}=t,{component:l=null}=t,{cssStyle:r=""}=t,c=null;return e.$$set=e=>{s(4,t=n(n({},t),m(e))),"rippleColor"in e&&s(5,a=e.rippleColor),"component"in e&&s(0,l=e.component),"cssStyle"in e&&s(1,r=e.cssStyle),"$$scope"in e&&s(6,o=e.$$scope)},t=m(t),[l,r,c,function(e){!function(e,t,n,s){const{left:i,top:o}=e.getBoundingClientRect(),{pageX:a,pageY:l}=t,{offsetWidth:r,offsetHeight:c}=e,u=Math.sqrt(c**2+r**2)/2,d=document.createElement("div");d.style.position="absolute",d.style.borderRadius="50%",d.style.opacity="0.4",d.style.pointerEvents="none",e.appendChild(d),d.animate([{top:l-o+"px",left:a-i+"px",width:"0px",height:"0px",backgroundColor:`${s||"var(--controlColor)"}`},{top:c/2-u+"px",left:r/2-u+"px",width:2*u+"px",height:2*u+"px",backgroundColor:`${s||"var(--controlColor)"}`}],{duration:320,fill:"forwards",easing:"cubic-bezier(0.05, 0.7, 0.2, 1)"}).onfinish=()=>{"function"==typeof n&&n.call(d,d)}}(c,e,_n,a)},t,a,o,i,function(e){te[e?"unshift":"push"]((()=>{c=e,s(2,c)}))}]}class En extends Se{constructor(e){super(),Te(this,e,Ln,Cn,l,{rippleColor:5,component:0,cssStyle:1})}}function An(t){let n,s,i,o,a;return{c(){n=z("img"),i=S(),o=z("h5"),a=T(t[6]),c(n.src,s=t[5])||U(n,"src",s),U(n,"width",228),U(n,"height",228),U(n,"draggable","false"),U(n,"alt"," "),O(n,"border-radius","24px")},m(e,s){E(e,n,s),t[13](n),E(e,i,s),E(e,o,s),C(o,a)},p(e,t){32&t&&!c(n.src,s=e[5])&&U(n,"src",s),64&t&&N(a,e[6])},i:e,o:e,d(e){e&&A(n),t[13](null),e&&A(i),e&&A(o)}}}function Pn(e){let t,n,s,i,a,l,r,c,u,d,f;return c=new En({props:{rippleColor:"#000",cssStyle:"border-radius: 8px;",$$slots:{default:[zn]},$$scope:{ctx:e}}}),{c(){t=z("input"),s=S(),i=z("input"),l=S(),r=z("div"),Ae(c.$$.fragment),U(t,"type","text"),U(t,"class",n=g(e[2]&&"error")+" svelte-12m1k1q"),U(t,"placeholder","电话"),U(i,"type","password"),U(i,"class",a=g(e[2]&&"error")+" svelte-12m1k1q"),U(i,"placeholder","密码"),O(r,"padding","24px 0px 12px 0px")},m(n,o){E(n,t,o),B(t,e[0]),E(n,s,o),E(n,i,o),B(i,e[1]),E(n,l,o),E(n,r,o),Pe(c,r,null),u=!0,d||(f=[M(t,"input",e[11]),M(i,"input",e[12])],d=!0)},p(e,s){(!u||4&s&&n!==(n=g(e[2]&&"error")+" svelte-12m1k1q"))&&U(t,"class",n),1&s&&t.value!==e[0]&&B(t,e[0]),(!u||4&s&&a!==(a=g(e[2]&&"error")+" svelte-12m1k1q"))&&U(i,"class",a),2&s&&i.value!==e[1]&&B(i,e[1]);const o={};65536&s&&(o.$$scope={dirty:s,ctx:e}),c.$set(o)},i(e){u||(be(c.$$.fragment,e),u=!0)},o(e){xe(c.$$.fragment,e),u=!1},d(e){e&&A(t),e&&A(s),e&&A(i),e&&A(l),e&&A(r),ze(c),d=!1,o(f)}}}function zn(t){let n,s,i;return{c(){n=z("div"),n.textContent="登陆",U(n,"class","column submit svelte-12m1k1q")},m(e,o){E(e,n,o),s||(i=M(n,"click",t[7]),s=!0)},p:e,d(e){e&&A(n),s=!1,i()}}}function Tn(e){let t,n,s,i,o,a,l,r,c,u,d,f,p,h=e[8][e[3]]+"",m=e[8][e[3]?0:1]+"";const g=[Pn,An],v=[];function $(e,t){return e[3]?e[5]?1:-1:0}return~(c=$(e))&&(u=v[c]=g[c](e)),{c(){t=z("div"),n=z("h3"),s=T(h),i=T("登录 "),o=z("span"),a=T("使用"),l=T(m),r=S(),u&&u.c(),U(o,"class","span svelte-12m1k1q"),U(t,"class","row c svelte-12m1k1q")},m(u,h){E(u,t,h),C(t,n),C(n,s),C(n,i),C(n,o),C(o,a),C(o,l),C(t,r),~c&&v[c].m(t,null),d=!0,f||(p=M(o,"click",e[10]),f=!0)},p(e,[n]){(!d||8&n)&&h!==(h=e[8][e[3]]+"")&&N(s,h),(!d||8&n)&&m!==(m=e[8][e[3]?0:1]+"")&&N(l,m);let i=c;c=$(e),c===i?~c&&v[c].p(e,n):(u&&(ye(),xe(v[i],1,1,(()=>{v[i]=null})),we()),~c?(u=v[c],u?u.p(e,n):(u=v[c]=g[c](e),u.c()),be(u,1),u.m(t,null)):u=null)},i(e){d||(be(u),d=!0)},o(e){xe(u),d=!1},d(e){e&&A(t),~c&&v[c].d(),f=!1,p()}}}function Sn(e,t,n){const s=Q("close")||(()=>{rem.emit("__openMinePage"),rem.emit("__updateLoginAvatar")});let i,o,a=!1;let l,r=0,c="",u="等待扫描";async function d(){const e=await NeteaseApi.loginViaQRCode(),t=e[0];n(5,c=e[1].body.data.qrimg);let s=async()=>{const e=await NeteaseApi.validQRLogin(t);if(1!==r)return;let i=()=>setTimeout((async()=>{await s()}),500);switch(n(6,u=e.body.message),e.body.code){case 801:i();break;case 800:d();break;case 802:n(4,l.style.opacity=.32,l),i();break;case 803:store.set("cookie",e.body.cookie),f()}};s()}async function f(){const e=(await NeteaseApi.getUserAccount(await store.get("cookie"))).body.data.profile;store.set("profile",e),rem.emit("logined",e),s()}return[i,o,a,r,l,c,u,async function(){const e=await NeteaseApi.login(i,o);if(200!==e.body.code)return n(1,o=""),void n(2,a=!0);await Promise.all([store.set("profile",JSON.stringify(e.body.profile)),store.set("token",JSON.stringify(e.body.token)),store.set("cookie",e.cookie.join(""))]),f()},["手机","二维码"],d,()=>{n(3,r=r?0:1),r&&d()},function(){i=this.value,n(0,i)},function(){o=this.value,n(1,o)},function(e){te[e?"unshift":"push"]((()=>{l=e,n(4,l)}))}]}class Dn extends Se{constructor(e){super(),Te(this,e,Sn,Tn,l,{})}}class Mn{static map=new Map;HEAD={prev:null,next:null};END=this.HEAD;count=0;append(e,t){const n=this.END,s={prev:n,listener:e,rawListener:t,next:null};return s.prev=n,s.listener=e,s.rawListener=t,s.next=null,n.next=s,this.END=s,Mn.map.set(t||e,s),this.count++,this}prepend(e,t){const n=this.HEAD,s=n.next,i={prev:n,listener:e,rawListener:t,next:s};return n.next=i,s&&(s.prev=i),Mn.map.set(t||e,i),this.count++,this}delete(e){let t=Mn.map,n=t.get(e);if(!n)return;let s=n.prev;return s.next=n.next,n.next&&(n.next.prev=s),t.delete(e),this.count--,requestIdleCallback((()=>{n.prev=null,n.next=null})),this}deleteAll(){let e=this.HEAD;for(;e=e.next;)e.prev=null,e.next=null,Mn.map.delete(e.rawListener||e.listener);return this.HEAD.next=null,this.count=0,this}[Symbol.iterator](){let e=this.HEAD;return{next:()=>e.next?(e=e.next,{value:e,done:!1}):{value:e,done:!0}}}}class Rn{_events={};maxListeners=-1;thisArg=void 0;captureRejections=!1;setMaxListeners(e){return this.maxListeners=e,this}getMaxListeners(){return this.maxListeners}_addListener(e,t,n=!1){let s;if(!~this.maxListeners&&this.listenerCount(e)===this.maxListeners){const e=RangeError(`Exceeded maximum capacity(${this.maxListeners}).`);if(!this.listenerCount("error"))throw e;this._emitError(e)}this._events[e]||(this._events[e]=new Mn),s=this._events[e],n?s.prepend(t):s.append(t)}addListener(e,t){return this._addListener(e,t),this}on(e,t){return this._addListener(e,t),this}prependListener(e,t){return this._addListener(e,t,!0),this}_removeListener(e,t){let n;(n=this._events[e])&&(n.delete(t),n.count||delete this._events[e])}removeListener(e,t){return this._removeListener(e,t),this}off(e,t){return this._removeListener(e,t),this}removeAllListeners(e){let t;(t=this._events[e])&&(t.deleteAll(),delete this._events[e])}_emit(e,t,n){let s;if(s=this._events[e],s)try{let e=this.captureRejections,i=s.HEAD;for(;i=i.next;){const s=i.listener.apply(t,n);e&&s instanceof Promise&&s.catch((e=>{if(!this.listenerCount("error"))throw e;this._emitError(e)}))}}catch(e){if(!this.listenerCount("error"))throw e;this._emitError(e)}}_emitError(e){this._emit("error",void 0,[e])}emit(e,...t){this._emit(e,this.thisArg,t)}emitNone(e,...t){this._emit(e,void 0,t)}bind(e){return this.thisArg=e,this}_onceWrapper(e,t){return(...n)=>{this._removeListener(e,t);return t.apply(this.thisArg,n)}}_once(e,t,n=!1){if(!~this.maxListeners&&this.listenerCount(e)===this.maxListeners){const e=RangeError(`Exceeded maximum capacity(${this.maxListeners}).`);if(!this.listenerCount("error"))throw e;this._emitError(e)}const s=this._onceWrapper(e,t);let i;this._events[e]||(this._events[e]=new Mn),i=this._events[e],n?i.prepend(s,t):i.append(s,t)}once(e,t){return this._once(e,t),this}prependOnceListener(e,t){return this._once(e,t,!0),this}listenerCount(e){let t;return t=this._events[e],t?t.count:0}listeners(e){let t,n=[];if(t=this._events[e],!t)return n;let s=t.HEAD;for(;s=s.next;)n.push(s.listener);return n}rawListeners(e){let t,n=[];if(t=this._events[e],!t)return n;let s=t.HEAD;for(;s=s.next;)s.rawListener&&n.push(s.rawListener);return n}eventNames(){return Object.getOwnPropertyNames(this._events)}constructor(e){if(e){const{thisArg:t,captureRejections:n}=e;void 0!==t&&(this.thisArg=t),n&&(this.captureRejections=!0)}}}function Un(e){let t,n,s,i,a,l,r,c;const d=e[11].default,m=u(d,e,e[10],null);return{c(){t=z("div"),n=z("div"),m&&m.c(),U(n,"class","container svelte-1p01wi3"),U(n,"style",s=e[1]+"; --blur-radius: "+e[3]+"px; --offset: "+e[4]+"px;"),U(t,"class","layer row svelte-1p01wi3")},m(s,o){E(s,t,o),C(t,n),m&&m.m(n,null),l=!0,r||(c=[v(i=e[6].call(null,n)),M(n,"click",R(e[12])),M(t,"click",R(e[5]))],r=!0)},p(e,t){m&&m.p&&(!l||1024&t)&&p(m,d,e,e[10],l?f(d,e[10],t,null):h(e[10]),null),(!l||26&t&&s!==(s=e[1]+"; --blur-radius: "+e[3]+"px; --offset: "+e[4]+"px;"))&&U(n,"style",s)},i(e){l||(be(m,e),a&&a.end(1),l=!0)},o(e){xe(m,e),a=Ce(t,yt,{duration:100}),l=!1},d(e){e&&A(t),m&&m.d(e),e&&a&&a.end(),r=!1,o(c)}}}function Nn(n){let s,i,l,r,c,d,m,g;const $=n[11].default,w=u($,n,n[10],null);return{c(){s=z("div"),w&&w.c(),U(s,"class","container svelte-1p01wi3"),U(s,"style",i="z-index:99999;"+n[1])},m(e,t){E(e,s,t),w&&w.m(s,null),d=!0,m||(g=[v(l=n[6].call(null,s)),M(s,"click",n[5])],m=!0)},p(e,t){w&&w.p&&(!d||1024&t)&&p(w,$,e,e[10],d?f($,e[10],t,null):h(e[10]),null),(!d||2&t&&i!==(i="z-index:99999;"+e[1]))&&U(s,"style",i)},i(n){d||(be(w,n),re((()=>{c&&c.end(1),r=function(n,s,i){let o,l,r=s(n,i),c=!1,u=0;function d(){o&&H(n,o)}function f(){const{delay:s=0,duration:i=300,easing:a=t,tick:f=e,css:p}=r||ke;p&&(o=j(n,0,1,i,s,a,p,u++)),f(0,1);const h=y()+s,m=h+i;l&&l.abort(),c=!0,re((()=>ge(n,!0,"start"))),l=k((e=>{if(c){if(e>=m)return f(1,0),ge(n,!0,"end"),d(),c=!1;if(e>=h){const t=a((e-h)/i);f(t,1-t)}}return c}))}let p=!1;return{start(){p||(p=!0,H(n),a(r)?(r=r(),me().then(f)):f())},invalidate(){p=!1},end(){c&&(d(),c=!1)}}}(s,yt,{duration:120}),r.start()})),d=!0)},o(e){xe(w,e),r&&r.invalidate(),c=Ce(s,yt,{duration:80}),d=!1},d(e){e&&A(s),w&&w.d(e),e&&c&&c.end(),m=!1,o(g)}}}function Bn(e){let t,n,s,i=e[0]&&!e[2]&&Un(e),o=e[0]&&e[2]&&Nn(e);return{c(){i&&i.c(),t=S(),o&&o.c(),n=D()},m(e,a){i&&i.m(e,a),E(e,t,a),o&&o.m(e,a),E(e,n,a),s=!0},p(e,[s]){e[0]&&!e[2]?i?(i.p(e,s),5&s&&be(i,1)):(i=Un(e),i.c(),be(i,1),i.m(t.parentNode,t)):i&&(ye(),xe(i,1,1,(()=>{i=null})),we()),e[0]&&e[2]?o?(o.p(e,s),5&s&&be(o,1)):(o=Nn(e),o.c(),be(o,1),o.m(n.parentNode,n)):o&&(ye(),xe(o,1,1,(()=>{o=null})),we())},i(e){s||(be(i),be(o),s=!0)},o(e){xe(i),xe(o),s=!1},d(e){i&&i.d(e),e&&A(t),o&&o.d(e),e&&A(n)}}}function On(e,t,n){let{$$slots:s={},$$scope:i}=t;const o=J();function a(){o("layerClick")}K("close",a);let{showPopupWindow:l=!1}=t,{cssText:r=""}=t,{noLayer:c=!1}=t,{shadowBlurRadius:u=8}=t,{shadowOffset:d=2}=t;return e.$$set=e=>{"showPopupWindow"in e&&n(0,l=e.showPopupWindow),"cssText"in e&&n(1,r=e.cssText),"noLayer"in e&&n(2,c=e.noLayer),"shadowBlurRadius"in e&&n(3,u=e.shadowBlurRadius),"shadowOffset"in e&&n(4,d=e.shadowOffset),"$$scope"in e&&n(10,i=e.$$scope)},[l,r,c,u,d,a,function(e){return o("animIn",e),{destroy(){o("animOut",e)}}},function(e,t={}){return undefined.animate(e,t)},function(){n(0,l=!0)},function(){n(0,l=!1)},i,s,function(t){Z.call(this,e,t)}]}class Vn extends Se{constructor(e){super(),Te(this,e,On,Bn,l,{showPopupWindow:0,cssText:1,noLayer:2,shadowBlurRadius:3,shadowOffset:4,animate:7,destroy:8,pop:9})}get animate(){return this.$$.ctx[7]}get destroy(){return this.$$.ctx[8]}get pop(){return this.$$.ctx[9]}}function qn(t){let n;return{c(){n=z("div"),O(n,"width","14px")},m(e,t){E(e,n,t)},p:e,i:e,o:e,d(e){e&&A(n)}}}function In(e){let t,n,s;return n=new Xe({props:{size:e[1],isUrl:e[0],avatar:e[2],width:e[6],height:e[7]}}),{c(){t=z("div"),Ae(n.$$.fragment),U(t,"class","column leading svelte-emkyx5")},m(e,i){E(e,t,i),Pe(n,t,null),s=!0},p(e,t){const s={};2&t&&(s.size=e[1]),1&t&&(s.isUrl=e[0]),4&t&&(s.avatar=e[2]),64&t&&(s.width=e[6]),128&t&&(s.height=e[7]),n.$set(s)},i(e){s||(be(n.$$.fragment,e),s=!0)},o(e){xe(n.$$.fragment,e),s=!1},d(e){e&&A(t),ze(n)}}}function Fn(e){let t,n,s,i;function o(e,t){return e[4]?Wn:Hn}let a=o(e),l=a(e);const r=e[13].default,c=u(r,e,e[14],null);return{c(){t=z("div"),n=z("div"),l.c(),s=S(),c&&c.c(),U(n,"class","row align svelte-emkyx5"),U(n,"style",e[5]),U(t,"class","column"),O(t,"justify-content","space-between"),O(t,"width",e[9]?"calc(100% - 84px)":"calc(100% - 28px)")},m(e,o){E(e,t,o),C(t,n),l.m(n,null),C(t,s),c&&c.m(t,null),i=!0},p(e,s){a===(a=o(e))&&l?l.p(e,s):(l.d(1),l=a(e),l&&(l.c(),l.m(n,null))),(!i||32&s)&&U(n,"style",e[5]),c&&c.p&&(!i||16384&s)&&p(c,r,e,e[14],i?f(r,e[14],s,null):h(e[14]),null),(!i||512&s)&&O(t,"width",e[9]?"calc(100% - 84px)":"calc(100% - 28px)")},i(e){i||(be(c,e),i=!0)},o(e){xe(c,e),i=!1},d(e){e&&A(t),l.d(),c&&c.d(e)}}}function jn(e){let t,n,s,i;function o(e,t){return e[4]?Yn:Xn}let a=o(e),l=a(e);const r=e[13].default,c=u(r,e,e[14],null);return{c(){t=z("div"),l.c(),n=S(),c&&c.c(),U(t,"class","row align svelte-emkyx5"),U(t,"style",s="width: "+(e[9]?"calc(100% - 84px)":"calc(100% - 28px)")+";"+e[5])},m(e,s){E(e,t,s),l.m(t,null),C(t,n),c&&c.m(t,null),i=!0},p(e,u){a===(a=o(e))&&l?l.p(e,u):(l.d(1),l=a(e),l&&(l.c(),l.m(t,n))),c&&c.p&&(!i||16384&u)&&p(c,r,e,e[14],i?f(r,e[14],u,null):h(e[14]),null),(!i||544&u&&s!==(s="width: "+(e[9]?"calc(100% - 84px)":"calc(100% - 28px)")+";"+e[5]))&&U(t,"style",s)},i(e){i||(be(c,e),i=!0)},o(e){xe(c,e),i=!1},d(e){e&&A(t),l.d(),c&&c.d(e)}}}function Hn(e){let t,n;return{c(){t=z("span"),n=T(e[3])},m(e,s){E(e,t,s),C(t,n)},p(e,t){8&t&&N(n,e[3])},d(e){e&&A(t)}}}function Wn(e){let t,n,s,i,o;return{c(){t=z("span"),n=T(e[3]),s=S(),i=z("span"),o=T(e[4]),O(i,"font-size","small"),O(i,"color","#888")},m(e,a){E(e,t,a),C(t,n),E(e,s,a),E(e,i,a),C(i,o)},p(e,t){8&t&&N(n,e[3]),16&t&&N(o,e[4])},d(e){e&&A(t),e&&A(s),e&&A(i)}}}function Xn(e){let t,n;return{c(){t=z("span"),n=T(e[3])},m(e,s){E(e,t,s),C(t,n)},p(e,t){8&t&&N(n,e[3])},d(e){e&&A(t)}}}function Yn(e){let t,n,s,i,o;return{c(){t=z("span"),n=T(e[3]),s=S(),i=z("span"),o=T(e[4]),O(i,"font-size","small"),O(i,"color","#888")},m(e,a){E(e,t,a),C(t,n),E(e,s,a),E(e,i,a),C(i,o)},p(e,t){8&t&&N(n,e[3]),16&t&&N(o,e[4])},d(e){e&&A(t),e&&A(s),e&&A(i)}}}function Gn(e){let t,n,s,i,a,l,r,c,u,d;const f=[In,qn],p=[];function h(e,t){return e[9]?0:1}n=h(e),s=p[n]=f[n](e);const m=[jn,Fn],g=[];function v(e,t){return e[10]?0:1}return a=v(e),l=g[a]=m[a](e),{c(){t=z("div"),s.c(),i=S(),l.c(),U(t,"class",r="column c"+(e[8]?" cl":"")+" svelte-emkyx5")},m(s,o){E(s,t,o),p[n].m(t,null),C(t,i),g[a].m(t,null),c=!0,u||(d=[M(t,"click",e[11]),M(t,"mousedown",e[12])],u=!0)},p(e,o){let u=n;n=h(e),n===u?p[n].p(e,o):(ye(),xe(p[u],1,1,(()=>{p[u]=null})),we(),s=p[n],s?s.p(e,o):(s=p[n]=f[n](e),s.c()),be(s,1),s.m(t,i));let d=a;a=v(e),a===d?g[a].p(e,o):(ye(),xe(g[d],1,1,(()=>{g[d]=null})),we(),l=g[a],l?l.p(e,o):(l=g[a]=m[a](e),l.c()),be(l,1),l.m(t,null)),(!c||256&o&&r!==(r="column c"+(e[8]?" cl":"")+" svelte-emkyx5"))&&U(t,"class",r)},i(e){c||(be(s),be(l),c=!0)},o(e){xe(s),xe(l),c=!1},d(e){e&&A(t),p[n].d(),g[a].d(),u=!1,o(d)}}}function Jn(e){let t,n;return t=new En({props:{cssStyle:"width: 100%",rippleColor:e[8]?"gray":"transparent",$$slots:{default:[Gn]},$$scope:{ctx:e}}}),{c(){Ae(t.$$.fragment)},m(e,s){Pe(t,e,s),n=!0},p(e,[n]){const s={};256&n&&(s.rippleColor=e[8]?"gray":"transparent"),18431&n&&(s.$$scope={dirty:n,ctx:e}),t.$set(s)},i(e){n||(be(t.$$.fragment,e),n=!0)},o(e){xe(t.$$.fragment,e),n=!1},d(e){ze(t,e)}}}function Kn(e,t,n){let{$$slots:s={},$$scope:i}=t;const o=J();let{isUrl:a=!0}=t,{size:l="normal"}=t,{avatar:r=""}=t,{data:c=""}=t,{extra:u=""}=t,{style:d=""}=t,{width:f}=t,{height:p}=t,{clickable:h=!0}=t,{useAvatar:m=!0}=t,{breakLine:g=!1}=t;return e.$$set=e=>{"isUrl"in e&&n(0,a=e.isUrl),"size"in e&&n(1,l=e.size),"avatar"in e&&n(2,r=e.avatar),"data"in e&&n(3,c=e.data),"extra"in e&&n(4,u=e.extra),"style"in e&&n(5,d=e.style),"width"in e&&n(6,f=e.width),"height"in e&&n(7,p=e.height),"clickable"in e&&n(8,h=e.clickable),"useAvatar"in e&&n(9,m=e.useAvatar),"breakLine"in e&&n(10,g=e.breakLine),"$$scope"in e&&n(14,i=e.$$scope)},[a,l,r,c,u,d,f,p,h,m,g,function(e){o("click",e)},function(e){o("mousedown",e)},s,i]}class Qn extends Se{constructor(e){super(),Te(this,e,Kn,Jn,l,{isUrl:0,size:1,avatar:2,data:3,extra:4,style:5,width:6,height:7,clickable:8,useAvatar:9,breakLine:10})}}function Zn(e,t,n){const s=e.slice();return s[6]=t[n],s}function es(e,t,n){const s=e.slice();return s[9]=t[n],s}function ts(e){let t,n;return t=new Qn({props:{useAvatar:!1,size:"small",isUrl:!1,data:e[9]}}),t.$on("click",(function(){a(e[4](e[6][e[9]]))&&e[4](e[6][e[9]]).apply(this,arguments)})),{c(){Ae(t.$$.fragment)},m(e,s){Pe(t,e,s),n=!0},p(n,s){e=n;const i={};8&s&&(i.data=e[9]),t.$set(i)},i(e){n||(be(t.$$.fragment,e),n=!0)},o(e){xe(t.$$.fragment,e),n=!1},d(e){ze(t,e)}}}function ns(e){let t,n,s,i,o=Object.keys(e[6]),a=[];for(let t=0;t<o.length;t+=1)a[t]=ts(es(e,o,t));const l=e=>xe(a[e],1,1,(()=>{a[e]=null}));return{c(){t=z("div"),n=S();for(let e=0;e<a.length;e+=1)a[e].c();s=D(),U(t,"class","divider svelte-14ron6b")},m(e,o){E(e,t,o),E(e,n,o);for(let t=0;t<a.length;t+=1)a[t].m(e,o);E(e,s,o),i=!0},p(e,t){if(24&t){let n;for(o=Object.keys(e[6]),n=0;n<o.length;n+=1){const i=es(e,o,n);a[n]?(a[n].p(i,t),be(a[n],1)):(a[n]=ts(i),a[n].c(),be(a[n],1),a[n].m(s.parentNode,s))}for(ye(),n=o.length;n<a.length;n+=1)l(n);we()}},i(e){if(!i){for(let e=0;e<o.length;e+=1)be(a[e]);i=!0}},o(e){a=a.filter(Boolean);for(let e=0;e<a.length;e+=1)xe(a[e]);i=!1},d(e){e&&A(t),e&&A(n),P(a,e),e&&A(s)}}}function ss(e){let t,n,s,i,o,a=e[3],l=[];for(let t=0;t<a.length;t+=1)l[t]=ns(Zn(e,a,t));const r=e=>xe(l[e],1,1,(()=>{l[e]=null}));return{c(){t=z("div");for(let e=0;e<l.length;e+=1)l[e].c();U(t,"class",n="container "+(e[0]?"display":"")+" svelte-14ron6b"),O(t,"--x",e[1]+"px"),O(t,"--y",e[2]+"px")},m(e,n){E(e,t,n);for(let e=0;e<l.length;e+=1)l[e].m(t,null);s=!0,i||(o=M(t,"click",is),i=!0)},p(e,[i]){if(24&i){let n;for(a=e[3],n=0;n<a.length;n+=1){const s=Zn(e,a,n);l[n]?(l[n].p(s,i),be(l[n],1)):(l[n]=ns(s),l[n].c(),be(l[n],1),l[n].m(t,null))}for(ye(),n=a.length;n<l.length;n+=1)r(n);we()}(!s||1&i&&n!==(n="container "+(e[0]?"display":"")+" svelte-14ron6b"))&&U(t,"class",n),(!s||2&i)&&O(t,"--x",e[1]+"px"),(!s||4&i)&&O(t,"--y",e[2]+"px")},i(e){if(!s){for(let e=0;e<a.length;e+=1)be(l[e]);s=!0}},o(e){l=l.filter(Boolean);for(let e=0;e<l.length;e+=1)xe(l[e]);s=!1},d(e){e&&A(t),P(l,e),i=!1,o()}}}const is=e=>e.stopPropagation();function os(e,t,n){let{display:s=!1}=t,{x:i=0}=t,{y:o=0}=t,{data:a=[{}]}=t;return Q("layerEvents").on("disable",(()=>{n(0,s=!1)})),e.$$set=e=>{"display"in e&&n(0,s=e.display),"x"in e&&n(1,i=e.x),"y"in e&&n(2,o=e.y),"data"in e&&n(3,a=e.data)},[s,i,o,a,function(e){return"function"==typeof e?()=>{e.call(null),n(0,s=!1)}:()=>n(0,s=!1)}]}class as extends Se{constructor(e){super(),Te(this,e,os,ss,l,{display:0,x:1,y:2,data:3})}}function ls(t){let n,s;return{c(){n=z("div"),U(n,"class",s="virt-cursor"+(t[1]?" active":"")+(t[2]?" enable":"")+" svelte-1biibe")},m(e,s){E(e,n,s),t[3](n)},p(e,[t]){6&t&&s!==(s="virt-cursor"+(e[1]?" active":"")+(e[2]?" enable":"")+" svelte-1biibe")&&U(n,"class",s)},i:e,o:e,d(e){e&&A(n),t[3](null)}}}function rs(e,t,n){let{active:s=!1}=t,{enable:i=!1}=t,{htmlElement:o}=t;return e.$$set=e=>{"active"in e&&n(1,s=e.active),"enable"in e&&n(2,i=e.enable),"htmlElement"in e&&n(0,o=e.htmlElement)},[o,s,i,function(e){te[e?"unshift":"push"]((()=>{o=e,n(0,o)}))}]}class cs extends Se{constructor(e){super(),Te(this,e,rs,ls,l,{active:1,enable:2,htmlElement:0})}}const us=0,ds=1,fs=4,ps=5,hs=0,ms=1,gs=3;class vs{static map=new Map;HEAD={prev:null,next:null};END=this.HEAD;count=0;append(e,t){const n=this.END,s={prev:n,listener:e,rawListener:t,next:null};return s.prev=n,s.listener=e,s.rawListener=t,s.next=null,n.next=s,this.END=s,vs.map.set(t||e,s),this.count++,this}prepend(e,t){const n=this.HEAD,s=n.next,i={prev:n,listener:e,rawListener:t,next:s};return n.next=i,s&&(s.prev=i),vs.map.set(t||e,i),this.count++,this}delete(e){let t=vs.map,n=t.get(e);if(!n)return;let s=n.prev;return s.next=n.next,n.next&&(n.next.prev=s),t.delete(e),this.count--,requestIdleCallback((()=>{n.prev=null,n.next=null})),this}deleteAll(){let e=this.HEAD;for(;e=e.next;)e.prev=null,e.next=null,vs.map.delete(e.rawListener||e.listener);return this.HEAD.next=null,this.count=0,this}[Symbol.iterator](){let e=this.HEAD;return{next:()=>e.next?(e=e.next,{value:e,done:!1}):{value:e,done:!0}}}}class $s{_events={};maxListeners=-1;thisArg=void 0;captureRejections=!1;setMaxListeners(e){return this.maxListeners=e,this}getMaxListeners(){return this.maxListeners}_addListener(e,t,n=!1){let s;if(!~this.maxListeners&&this.listenerCount(e)===this.maxListeners){const e=RangeError(`Exceeded maximum capacity(${this.maxListeners}).`);if(!this.listenerCount("error"))throw e;this._emitError(e)}this._events[e]||(this._events[e]=new vs),s=this._events[e],n?s.prepend(t):s.append(t)}addListener(e,t){return this._addListener(e,t),this}on(e,t){return this._addListener(e,t),this}prependListener(e,t){return this._addListener(e,t,!0),this}_removeListener(e,t){let n;(n=this._events[e])&&(n.delete(t),n.count||delete this._events[e])}removeListener(e,t){return this._removeListener(e,t),this}off(e,t){return this._removeListener(e,t),this}removeAllListeners(e){let t;(t=this._events[e])&&(t.deleteAll(),delete this._events[e])}_emit(e,t,n){let s;if(s=this._events[e],s)try{let e=this.captureRejections,i=s.HEAD;for(;i=i.next;){const s=i.listener.apply(t,n);e&&s instanceof Promise&&s.catch((e=>{if(!this.listenerCount("error"))throw e;this._emitError(e)}))}}catch(e){if(!this.listenerCount("error"))throw e;this._emitError(e)}}_emitError(e){this._emit("error",void 0,[e])}emit(e,...t){this._emit(e,this.thisArg,t)}emitNone(e,...t){this._emit(e,void 0,t)}bind(e){return this.thisArg=e,this}_onceWrapper(e,t){return(...n)=>{this._removeListener(e,t);return t.apply(this.thisArg,n)}}_once(e,t,n=!1){if(!~this.maxListeners&&this.listenerCount(e)===this.maxListeners){const e=RangeError(`Exceeded maximum capacity(${this.maxListeners}).`);if(!this.listenerCount("error"))throw e;this._emitError(e)}const s=this._onceWrapper(e,t);let i;this._events[e]||(this._events[e]=new vs),i=this._events[e],n?i.prepend(s,t):i.append(s,t)}once(e,t){return this._once(e,t),this}prependOnceListener(e,t){return this._once(e,t,!0),this}listenerCount(e){let t;return t=this._events[e],t?t.count:0}listeners(e){let t,n=[];if(t=this._events[e],!t)return n;let s=t.HEAD;for(;s=s.next;)n.push(s.listener);return n}rawListeners(e){let t,n=[];if(t=this._events[e],!t)return n;let s=t.HEAD;for(;s=s.next;)s.rawListener&&n.push(s.rawListener);return n}eventNames(){return Object.getOwnPropertyNames(this._events)}constructor(e){if(e){const{thisArg:t,captureRejections:n}=e;void 0!==t&&(this.thisArg=t),n&&(this.captureRejections=!0)}}}let ys=0;function ws(){return ys++}const bs=Symbol();class xs extends HTMLElement{static[bs]={};inject(e){e instanceof Node&&e.appendChild(this)}}const ks=new class{_store=new Map;add(e){if(e[bs]){const t=ws();this._store.set(e,t),customElements.define(`uid-${t}`,e)}}getInstance(e,...t){return this._store.has(e)||this.add(e),Reflect.construct(e,t)}inject(e,t,...n){if(t instanceof Node){const s=this.getInstance(e,...n);return t.appendChild(s),s}return null}};const Cs=new class{vertical="center";horizontal="center";verticalFrom="bottom";horizontalFrom="none"};class _s extends xs{isPoped=!1;constructor(){super(),this.style.position="absolute",this.style.display="none"}popup(e){const{vertical:t,verticalFrom:n,horizontal:s,horizontalFrom:i}=Object.assign(Cs,e),o="top"===n?-16:"bottom"===n?16:0,a="left"===i?-16:"right"===i?16:0,l=this.getBoundingClientRect();switch(s){case"left":this.style.left="8px";break;case"right":this.style.right="24px";break;default:this.style.left=(visualViewport.width-l.width)/2+"px"}switch(t){case"top":this.style.top="58px";break;case"bottom":this.style.bottom="78px";break;default:this.style.left=(visualViewport.height-l.height)/2+"px"}this.style.display="block",this.animate([{opacity:0,transform:`translate(${a}px, ${o}px)`},{opacity:1,transform:"translate(0, 0)"}],100).onfinish=()=>{this.isPoped=!0}}fade(){this.animate([{opacity:1,transform:"scale(1)"},{opacity:0,transform:"scale(0.94)"}],100).onfinish=()=>{this.style.display="none",this.isPoped=!1,this.onFaded.call(this)}}setContent(e){return this.appendChild(e),this}onPopup(){}onFaded(){}}ks.add(_s);const Ls=new Map,Es=new Map;async function As(e){let t;return Ls.has(e)?t=Ls.get(e):(t=await async function(e){let t;return Es.has(e)?t=Es.get(e):Es.set(e,t=fetch(e)),await(await t).clone().text()}(e),Ls.set(e,t),Es.delete(e)),t}class Ps extends HTMLElement{constructor(e){super(),this.style.display="none",this.init(e)}async init(e){const t=await As(e),n=this.attachShadow({mode:"open"});n.innerHTML=t,this.onViewImpl(n),this.removeAttribute("style")}onViewImpl(e){throw'Did not override method "onViewImpl"'}}customElements.define("r-view",Ps);class zs extends Ps{icon=null;msg=null;constructor(e){super("./utils/widget/notification/view.html"),this.outerContainer=e}onViewImpl(e){const t=e.getElementById("icon"),n=e.getElementById("msg"),s=e.getElementById("close");this.icon=t,this.msg=n,s.addEventListener("click",(()=>{this.outerContainer.fade()}))}setIcon(e){this.icon&&(this.icon.innerText=e)}setMessage(e){this.msg&&(this.msg.innerText=e)}}customElements.define("pop-widgetcontent",zs);class Ts extends _s{constructor(){super(),this.style.pointerEvents="all",this.setContent(this.notifContent=new zs(this))}setIcon(e){return this.notifContent.setIcon(e),this}setMessage(e){return this.notifContent.setMessage(e),this}}ks.add(Ts);const Ss=new $s({captureRejections:!0}),Ds=new Ts;const Ms={onConnect:function(e){Ss.on("--connect",e)},onDisconnect:function(e){Ss.on("--disconnect",e)}};class Rs extends $s{static controllers=[];gamepad=null;get id(){return this.gamepad.id}get mapping(){return this.gamepad.mapping}constructor(e){super({captureRejections:!0}),this.gamepad=e,Rs.controllers[e.index]=this,this.on("press",(e=>this.emit(`press-${e}`))),this.on("release",(e=>this.emit(`release-${e}`))),this.on("value",((e,t)=>this.emit(`value-${e}`,t))),this.on("axel",((e,t)=>this.emit(`axel-${e}`,t)))}vibrate(e,t=0,n=0){let s=null;(s=this.gamepad.vibrationActuator)&&s.playEffect(s.type,{duration:e,strongMagnitude:t,weakMagnitude:n})}addPressListener(e,t){this.on(`press-${e}`,t)}removePressListener(e,t){this.off(`press-${e}`,t)}addReleaseListener(e,t){this.on(`release-${e}`,t)}removeReleaseListener(e,t){this.off(`release-${e}`,t)}addValueChangeListener(e,t){this.on(`value-${e}`,t)}removeValueChangeListener(e,t){this.off(`value-${e}`,t)}addAxelChangeListener(e,t){this.on(`axel-${e}`,t)}removeAxelChangeListener(e,t){this.off(`axel-${e}`,t)}}function Us(e,t,n,s){if(e.length!==t.length)return;const i=e.length;for(let o=0;o<i;o++){let i=e[o],a=t[o];n(i,a)||s.call(null,i,a,o)}}if("function"!=typeof navigator.getGamepads)throw"Your browser does not support the Gamepad API, please consider updating your browser";!function(){window.addEventListener("gamepadconnected",(e=>{Ss.emit("--connect",new Rs(e.gamepad)),Ds.setMessage(`控制器 ${e.gamepad.id} 已连接`),Ds.popup({horizontal:"right",vertical:"bottom",verticalFrom:"bottom",horizontalFrom:"right"})})),window.addEventListener("gamepaddisconnected",(e=>{Ss.emit("--disconnect",new Rs(e.gamepad)),Ds.setMessage(`控制器 ${e.gamepad.id} 断开连接`),Ds.popup({horizontal:"right",vertical:"bottom",verticalFrom:"bottom",horizontalFrom:"right"})}));let e=[],t=[];!function e(t){requestAnimationFrame((()=>{t.apply(null),e(t)}))}((()=>{let n=0;for(const s of navigator.getGamepads())s?(e[n]&&Us(e[n],s.buttons,((e,t)=>{if(e.pressed===t.pressed&&e.touched===t.touched&&e.value===t.value)return!0}),((e,t,s)=>{Ss.emit("button-change",e,t,s,n)})),e[n]=s.buttons,t[n]&&Us(t[n],s.axes,((e,t)=>e===t),((e,t,s)=>{Ss.emit("axes-change",e,t,s,n)})),t[n]=s.axes,n++):n++})),Ss.on("button-change",((e,t,n,s)=>{const i=Rs.controllers[s];i.emit("button-change",n,t,e),t.pressed!==e.pressed?t.pressed?i.emit("press",n):(i.emit("release",n),i.emit("value",n,0)):i.emit("value",n,t.value,e.value)})),Ss.on("axes-change",((e,t,n,s)=>{Rs.controllers[s].emit("axel",n,t,e)}))}();const Ns=new class{target=null;click(e,t,n=0){let s=new PointerEvent("click",{clientX:e,clientY:t,button:n,bubbles:!0,composed:!0});const i=document.elementFromPoint(e,t);i.dispatchEvent(s),i.focus()}move(e,t){let n=document.elementFromPoint(e,t);this.target||(this.target=n),n!==this.target&&(this._enter(n,e,t),this._leave(this.target,e,t),this.target=n);let s=new MouseEvent("mousemove",{clientX:e,clientY:t,bubbles:!0,composed:!0});n.dispatchEvent(s)}_enter=(e,t,n)=>{let s=new MouseEvent("mouseenter",{clientX:t,clientY:n,composed:!0}),i=new MouseEvent("mouseover",{clientX:t,clientY:n,bubbles:!0,composed:!0});e.dispatchEvent(s),e.dispatchEvent(i)};_leave=(e,t,n)=>{let s=new MouseEvent("mouseleave",{clientX:t,clientY:n,composed:!0}),i=new MouseEvent("mouseout",{clientX:t,clientY:n,bubbles:!0,composed:!0});e.dispatchEvent(s),e.dispatchEvent(i)};down(e,t,n=0){let s=new PointerEvent("mousedown",{clientX:e,clientY:t,button:n,bubbles:!0,composed:!0});document.elementFromPoint(e,t).dispatchEvent(s)}up(e,t,n=0){let s=new PointerEvent("mouseup",{clientX:e,clientY:t,button:n,bubbles:!0,composed:!0});document.elementFromPoint(e,t).dispatchEvent(s)}setCursorVisible(e=!0){const t=document.body.style,n="boolean"==typeof e?e?"auto":"none":document.body.style;t.cursor=n}};const Bs=new class{scrollSpeed=30;cursorSpeed=8;stickDeadzone=.1;virtCursor=null;transformSpeed={x:0,y:0,scroll:0};instance=!1;_isLooping=!1;_receiveMouseEvent=e=>{e.isTrusted&&this._setVirtCursorEnable(!1)};_receiveControllerEvent=(e,t)=>{Math.abs(t)>.1&&(this._setVirtCursorEnable(!0),this._isLooping||this._eachRenderTick())};_setVirtCursorEnable(e=!0){e?(this.virtCursor.enable=!0,Ns.setCursorVisible(!1)):(this.virtCursor.enable=!1,Ns.setCursorVisible(!0))}init(e){e&&(this.virtCursor=e,Ms.onConnect((e=>{this.instance||(e.id.startsWith("Xbox")?(this._setVirtCursorEnable(!0),this.instance=e,this._configController(e),window.addEventListener("mousemove",this._receiveMouseEvent),e.on("axel",this._receiveControllerEvent)):this._setVirtCursorEnable(!1))})),Ms.onDisconnect((e=>{this._setVirtCursorEnable(!1),this.instance=null,this._distroyInstance(e),window.removeEventListener("mousemove",this._receiveMouseEvent),e.off("axel",this._receiveControllerEvent)})))}_configController=e=>{e.vibrate(200,1,1),e.on("release",this._onKeyUp),e.addReleaseListener(us,this.onEnsure),e.addReleaseListener(ds,this.onBack),e.addPressListener(fs,this.onLeftButton),e.addPressListener(ps,this.onRightButton),e.addAxelChangeListener(gs,this.onScroll),e.addAxelChangeListener(hs,this.onCursorMoveHorizontal),e.addAxelChangeListener(ms,this.onCursorMoveVertical),this._eachRenderTick()};_distroyInstance(e){e.off("release",this._onKeyUp),e.removeReleaseListener(us,this.onEnsure),e.removeReleaseListener(ds,this.onBack),e.removePressListener(fs,this.onLeftButton),e.removePressListener(ps,this.onRightButton),e.removeAxelChangeListener(gs,this.onScroll),e.removeAxelChangeListener(gs,this.onCursorMoveHorizontal),e.removeAxelChangeListener(gs,this.onCursorMoveVertical)}_onKeyDown=(e,t)=>{this.virtCursor.click=!0,Ns.down(e,t)};_onKeyUp=()=>{this.virtCursor.click=!1;const{x:e,y:t}=this.virtCursor;Ns.up(e,t)};onEnsure=()=>{const{x:e,y:t}=this.virtCursor;this.virtCursor.click=!0,Ns.click(e,t)};onBack=()=>{Pager.removeByIndex(Pager.index())};onLeftButton=()=>{let e=Pager.index();e?Pager.select(e-1):Pager.select(Pager.size()-1)};onRightButton=()=>{let e=Pager.index();e===Pager.size()-1?Pager.select(0):Pager.select(e+1)};onScroll=e=>{Math.abs(e)>this.stickDeadzone?this.transformSpeed.scroll=this.scrollSpeed*e:this.transformSpeed.scroll=0};onCursorMoveHorizontal=e=>{Math.abs(e)>this.stickDeadzone?this.transformSpeed.x=this.cursorSpeed*e:this.transformSpeed.x=0};onCursorMoveVertical=e=>{Math.abs(e)>this.stickDeadzone?this.transformSpeed.y=this.cursorSpeed*e:this.transformSpeed.y=0};_eachRenderTick=()=>{const{x:e,y:t}=this.virtCursor,n=this.virtCursor,{x:s,y:i,scroll:o}=this.transformSpeed,{width:a,height:l}=visualViewport;let r=!1;const c=e+s,u=t+i;s&&c>16&&c<a-6&&(n.x=c,r=!0),i&&u>16&&u<l-6&&(n.y=u,r=!0),r&&Ns.move(c,u),o&&rem.emit("scroll-up",o),this.instance&&this.virtCursor.enable?(this._isLooping=!0,requestAnimationFrame((()=>{this._eachRenderTick()}))):this._isLooping=!1}};class Os extends xs{static layer=function(){const e=document.createElement("div");return e.style.cssText="display: none; width: 100vw; height: 100vh;position: fixed; top: 0px; left: 0px; pointer-events: all;",e}();static injectLayer(e){e.appendChild(this.layer)}showLayer(e=!0){const t=e?"var(--fade)":"transparent";Os.layer.style.display="block",Os.layer.animate([{opacity:0,backgroundColor:t},{opacity:1,backgroundColor:t}],{duration:100,fill:"forwards"})}disableLayer(){Os.layer.animate([{opacity:1},{opacity:0}],100).onfinish=()=>Os.layer.style.display="none"}getLayer(){return Os.layer}}function Vs(e){return"function"==typeof e}class qs extends Os{isPoped=!1;constructor(){super(),this.style.display="none",this.addEventListener("click",(e=>e.stopPropagation()))}hide(){this.isPoped&&(this.disableLayer(),this.animate([{opacity:1,transform:"translate(-50%, -50%) scale(1)"},{opacity:0,transform:"translate(-50%, -50%) scale(0.94)"}],100).onfinish=()=>{this.style.display="none",this.isPoped=!1,Vs(this.onhide)&&this.onhide.call(this)})}display(e){this.isPoped||(e&&this.showLayer(),this.style.display="block",this.style.pointerEvents="none",this.animate([{opacity:0,transform:"translate(-50%, calc(-50% + 12px))"},{opacity:1,transform:"translate(-50%, -50%)"}],100).onfinish=()=>{this.style.pointerEvents="all",this.isPoped=!0,Vs(this.ondisplay)&&this.ondisplay.call(this)})}}class Is extends xs{constructor(e="vertical"){super(),this.classList.add("scrollable",e),this.orientation=e}}function Fs(e){const t=document.createElement("div");return t.innerText=e,t.classList.add("btn","radius","px4","margin"),t.style.display="none",t}ks.add(Is);class js extends qs{_pageIndex=0;_pages=[];get pageIndex(){return this._pageIndex}set pageIndex(e){if(e<0||e>=this._pages.length)return!1;e?e===this._pages.length-1?(this.setButtonsDisplay(7),this.next.innerText="完成"):(this.setButtonsDisplay(7),this.next.innerText="下一步"):(this.setButtonsDisplay(5),this.next.innerText="下一步"),this._changePage(this._pageIndex,e),this._pageIndex=e,this.progress.value=e+1}_changePage(e,t){const n=t-e>0?-1:1;this.content.children[0].animate([{transform:"translateX(0)",opacity:1},{transform:`translateX(${25*n}%)`,opacity:0}],100).onfinish=()=>{this.content.children[0].remove(),this.content.appendChild(this._pages[t]),this._pages[t].animate([{transform:`translateX(${-25*n}%)`,opacity:0},{transform:"translateX(0)",opacity:1}],100)}}constructor(){super(),this.style.cssText="width: 420px;pointer-events: all;display: none;height: 560px;max-height: 88%;border-radius: 8px;box-shadow: 0px 8px 12px rgba(0,0,0,0.32);overflow: hidden;background-color: var(--controlBackground);position: absolute;top: 50%; left: 50%; transform: translate(-50%, -50%);";const e=document.createElement("progress"),t=document.createElement("div"),n=document.createElement("div"),s=document.createElement("div"),i=Fs("下一步"),o=Fs("上一步"),a=Fs("取消");this.progress=e,this.content=t,this.next=i,this.prev=o,this.cancel=a,e.value=0,e.classList.add("horizontal"),t.style.cssText="width: 100%; height: fit-content; min-height: 488px;",o.classList.add("bright"),i.classList.add("accent"),a.classList.add("light"),o.addEventListener("click",(()=>{1===this.pageIndex&&this.setButtonsDisplay(5),this.pageIndex--})),i.addEventListener("click",(()=>{if(this.pageIndex===this._pages.length-1)return this.onFinishWizard();this.pageIndex++,this.setButtonsDisplay(7)})),s.appendChild(o),s.appendChild(i),n.appendChild(a),n.appendChild(s),n.classList.add("Row"),s.classList.add("Row"),n.style.justifyContent="space-between",n.style.backgroundColor="var(--controlBrighter)",n.style.padding="12px",this.appendChild(e),this.appendChild(t),this.appendChild(n),a.addEventListener("click",(()=>this.hide())),this.setButtonsDisplay(5)}onFinishWizard(){}addPage(...e){for(const t of e)this._pages.push(t);this.progress.value||(this.progress.value=1,this.content.appendChild(this._pages[0])),this.progress.max=this._pages.length}setButtonsDisplay(e){const t=!!(1&e),n=!!(2&e),s=!!(4&e);this.next.style.display=t?"":"none",this.prev.style.display=n?"":"none",this.cancel.style.display=s?"":"none"}setProgress(e){this.progress.value=e}}ks.add(js);class Hs extends xs{constructor(e={}){super();const t=document.createElement("img"),n=e.size||200;this.style.cssText=`border-radius: ${e.radius||"50%"};\n            display: flex;\n            overflow: hidden;\n            width: ${n}px;\n            height: ${n}px;\n            background-color: var(--controlGray);`,t.style.cssText="display: none;",t.draggable=!1,t.src=e.url,t.onload=()=>{t.width=n,t.style.cssText="display: block;",t.animate([{opacity:0},{opacity:1}],200)},this.appendChild(t)}}ks.add(Hs);class Ws extends xs{constructor(e=!1){super();const t=this.attachShadow({mode:"open"}),n=e?"textarea":"input";t.innerHTML=`\n        <style>\n        :host {\n            width: fit-content;\n            height: fit-content;\n            display: block;\n        }\n        ${n} {\n            display: block;\n            font-family: Roboto, sans-serif;\n            outline: none;\n            border: none;\n            width: 200px;\n            background-color: transparent;\n            padding: 8px;\n            resize: none;\n            height: 16px;\n        }\n        .input {\n            outline: none;\n            position: relative;\n            overflow: hidden;\n            border-radius: 6px;\n            background-color: rgba(255,255,255,0.5);\n        }\n        .input::after {\n            content: '';\n            position: absolute;\n            bottom: 0px;\n            left: 50%;\n            transform: translateX(-50%);\n            width: 0%;\n            border-bottom: solid 2px var(--controlColor);\n            transition: all 0.16s;\n        }\n        .input.focus::after {\n            width: 100%;\n        }\n        .txtarea {\n            min-height: 160px;\n        }\n        </style>\n        <div class="input" id="c">${e?'<textarea id="input" class="txtarea"></textarea>':'<input id="input">'}</div>\n        `,this.input=t.querySelector("#input"),this.container=t.querySelector("#c"),this.input.addEventListener("blur",(()=>{this.container.classList.remove("focus")})),this.input.addEventListener("focus",(()=>{this.container.classList.add("focus")}))}}ks.add(Ws);const Xs=new js,Ys=()=>{let e=new Is;return e.classList.add("Column"),e.style.justifyContent="center",e},Gs=(e,t=1)=>{let n=document.createElement("h"+t);return n.innerHTML=e,n};function Js(e,t){const n=new Hs({url:t?.avatarUrl}),s=new Ws,i=Gs("修改你的头像与昵称",2);i.style.marginTop="40px",n.style.marginTop="20px",s.style.marginTop="60px",s.input.value=t?.nickname||"";const o=Ys(),a=Ys();o.appendChild(i),o.appendChild(n),o.appendChild(s);const l=Gs("修改你的介绍",2);return l.style.marginTop="40px",a.appendChild(l),a.appendChild(new Ws(!0)),Xs.inject(e),Xs.addPage(o,a),Xs}class Ks extends Ts{display(){this.popup({horizontal:"right",vertical:"bottom"})}}ks.add(Ks);const Qs=new Ks;function Zs(e){let t,n,s,i,o,a,l,r,c,d,m,g,v,$,y,w,b;const x=e[6].default,k=u(x,e,e[5],null);return{c(){t=z("div"),n=z("div"),s=z("div"),i=T(e[0]),o=S(),a=z("h4"),l=T(e[1]),r=S(),c=z("div"),d=z("div"),m=z("div"),g=S(),v=z("div"),v.textContent="▼",y=S(),w=z("div"),k&&k.c(),U(s,"class","avatar svelte-1ebysre"),U(a,"class","svelte-1ebysre"),U(n,"class","Row start svelte-1ebysre"),O(m,"background-color","var(--controlNight)"),O(m,"width","2px"),O(m,"height","calc(100% - 16px)"),O(v,"text-align","center"),O(v,"height","16px"),O(v,"transform","translateY(-8px) scaleX(0.6)"),U(d,"class",$=(e[2]?"hide ":"")+"Column svelte-1ebysre"),O(d,"width","32px"),O(d,"color","var(--controlNight)"),U(w,"class","content svelte-1ebysre"),U(c,"class","Row start svelte-1ebysre"),O(c,"height","fit-content"),U(t,"class","Column start svelte-1ebysre"),O(t,"height","fit-content")},m(u,f){E(u,t,f),C(t,n),C(n,s),C(s,i),C(n,o),C(n,a),C(a,l),C(t,r),C(t,c),C(c,d),C(d,m),C(d,g),C(d,v),e[7](d),C(c,y),C(c,w),k&&k.m(w,null),e[8](w),b=!0},p(e,[t]){(!b||1&t)&&N(i,e[0]),(!b||2&t)&&N(l,e[1]),(!b||4&t&&$!==($=(e[2]?"hide ":"")+"Column svelte-1ebysre"))&&U(d,"class",$),k&&k.p&&(!b||32&t)&&p(k,x,e,e[5],b?f(x,e[5],t,null):h(e[5]),null)},i(e){b||(be(k,e),b=!0)},o(e){xe(k,e),b=!1},d(n){n&&A(t),e[7](null),k&&k.d(n),e[8](null)}}}function ei(e,t,n){let s,i,{$$slots:o={},$$scope:a}=t,{icon:l=""}=t,{title:r=""}=t,{hideLine:c=!1}=t;return Y((()=>{n(3,s.style.height=i.getBoundingClientRect().height+16+"px",s)})),e.$$set=e=>{"icon"in e&&n(0,l=e.icon),"title"in e&&n(1,r=e.title),"hideLine"in e&&n(2,c=e.hideLine),"$$scope"in e&&n(5,a=e.$$scope)},[l,r,c,s,i,a,o,function(e){te[e?"unshift":"push"]((()=>{s=e,n(3,s)}))},function(e){te[e?"unshift":"push"]((()=>{i=e,n(4,i)}))}]}class ti extends Se{constructor(e){super(),Te(this,e,ei,Zs,l,{icon:0,title:1,hideLine:2})}}const ni=new Audio;let si,ii,oi,ai,li,ri,ci,ui,di,fi,pi,hi,mi,gi,vi,$i,yi,wi="default";async function bi(e){if(e&&e!==wi){try{await ni.setSinkId(e),wi=e}catch(e){return!1}return!0}}async function xi(e){let t=0;for(const n of e){if(n.deviceId===wi)return t;t++}return-1}async function ki(){return(await navigator.mediaDevices.enumerateDevices()).filter((e=>"audiooutput"===e.kind))}async function Ci(){navigator.mediaDevices.addEventListener("devicechange",(async e=>{rem.emit("audioDeviceChange",(await e.target.enumerateDevices()).filter((e=>"audiooutput"===e.kind)))}))}function _i(e=!0){ri.disconnect(),$i.disconnect(),e?(ri.connect(ci),$i.connect(oi)):ri.connect(oi),"undefined"!=typeof rem&&rem.emit("eqChange")}function Li(){const e=si.delay.delayTime,t=si.fader.fadeIn;return li.gain.setValueAtTime(.001,ii.currentTime+e),li.gain.exponentialRampToValueAtTime(1,ii.currentTime+t+e),new Promise((n=>{setTimeout((()=>{n()}),1e3*(e+t))}))}function Ei(){store.set("process",si),rem&&rem.emit("processUpdate",si)}function Ai(e){oi.delayTime.value=e,si.delay.delayTime=e,Ei()}function Pi(e){ai.gain.linearRampToValueAtTime(e,ii.currentTime),si.gain.gain=e,Ei()}function zi(e){ri.pan.value=e,si.stereoPanner.pan=e,Ei()}Ci();class Ti{static audioCtx=new AudioContext;static audioElement=new Audio;static em=new Rn;static on(e,t){this.em.on(e,t)}on(e,t){Ti.on(e,t)}static async play(){return this.em.emit("play"),hooks.send("thumbar:pause"),await Promise.all([this.audioElement.play(),Li()])}play(){return Ti.play()}static pause(){(function(){const e=si.delay.delayTime,t=si.fader.fadeOut;return li.gain.setValueAtTime(1,ii.currentTime+e),li.gain.exponentialRampToValueAtTime(.001,ii.currentTime+t+e),new Promise((n=>{setTimeout((()=>{n()}),1e3*(e+t))}))})().then((()=>{this.audioElement.pause()})),hooks.send("thumbar:play"),this.em.emit("pause")}pause(){Ti.pause()}static seek(e){if("number"!=typeof e)return this.audioElement.currentTime;this.audioElement.currentTime=e,this.em.emit("seek")}seek(e){return Ti.seek(e)}static load(e){return e&&(this.audioElement.src=e),this.audioElement.src}load(e){return Ti.load(e)}async loadData(e){e.onLoadMetadata=e=>{Ti.metadata=e,rem.emit("metadata",e)},Ti.audioData=e,this.load(await e.url()),this.onDataLoaded()}onDataLoaded(){}static volume(e){if(void 0===e)return this.audioElement.volume;"number"!=typeof e||(e>0?(this.audioElement.muted=!1,this.audioElement.volume=e):this.audioElement.muted=!0)}volume(e){return Ti.volume(e)}static duration(){return this.audioElement.duration||this.audioData?.data.dt/1e3||0}duration(){return Ti.duration()}static isPlaying(){return!this.audioElement.paused}isPlaying(){return Ti.isPlaying()}static metadata={};getMetadata(){return Object.assign({},Ti.metadata)}}Ti.audioElement.addEventListener("ended",(()=>{Ti.em.emit("ended")})),Ti.audioElement.onloadedmetadata=()=>{rem.emit("setControlsContent",Ti.audioData)};const Si=Ti.audioCtx.createMediaElementSource(Ti.audioElement),Di=Ti.audioCtx.createMediaStreamDestination();var Mi;!function(e,t,n){ii=e,oi=e.createDelay(),ai=e.createGain(),li=e.createGain(),ri=e.createStereoPanner(),function(e){const t=function(e){return function(t,n,s){const i=e.createBiquadFilter();return i.type=t,i.frequency.value=n,i.gain.value=0,s&&(i.Q.value=s),i}}(e);ci=t("lowshelf",31),ui=t("peaking",62,1.516129),di=t("peaking",125,1.504),fi=t("peaking",250,1.5),pi=t("peaking",500,1.5),hi=t("peaking",1e3,1.5),mi=t("peaking",2e3,1.5),gi=t("peaking",4e3,1.5),vi=t("peaking",8e3,1.5),$i=t("highshelf",16e3),ci.connect(ui),ui.connect(di),di.connect(fi),fi.connect(pi),pi.connect(hi),hi.connect(mi),mi.connect(gi),gi.connect(vi),vi.connect($i),yi={31:ci,62:ui,125:di,250:fi,500:pi,1e3:hi,2e3:mi,4e3:gi,8e3:vi,16e3:$i}}(e),t.connect(ai),ai.connect(ri),ri.connect(oi),oi.connect(li),li.connect(n),_i()}(Ti.audioCtx,Si,Di),Mi=Di.stream,ni.srcObject=Mi,ni.play();const Ri=new Ti;function Ui(e){let t,n;return{c(){t=z("div"),n=T(e[4]),O(t,"color","var(--controlDark)"),O(t,"font-weight","bold"),O(t,"margin-bottom","12px"),O(t,"margin-left","calc(14px + "+e[0]+")")},m(e,s){E(e,t,s),C(t,n)},p(e,s){16&s&&N(n,e[4]),1&s&&O(t,"margin-left","calc(14px + "+e[0]+")")},d(e){e&&A(t)}}}function Ni(e){let t,n,s,i,o=e[4]&&Ui(e);const a=e[6].default,l=u(a,e,e[5],null);return{c(){t=z("div"),o&&o.c(),n=S(),s=z("div"),l&&l.c(),U(s,"class","tile svelte-1f36s4l"),O(s,"border-radius",e[2]),O(s,"background-color",e[3]),O(s,"margin",e[1]+" "+e[0]),U(t,"class","container svelte-1f36s4l")},m(e,a){E(e,t,a),o&&o.m(t,null),C(t,n),C(t,s),l&&l.m(s,null),i=!0},p(e,[r]){e[4]?o?o.p(e,r):(o=Ui(e),o.c(),o.m(t,n)):o&&(o.d(1),o=null),l&&l.p&&(!i||32&r)&&p(l,a,e,e[5],i?f(a,e[5],r,null):h(e[5]),null),(!i||4&r)&&O(s,"border-radius",e[2]),(!i||8&r)&&O(s,"background-color",e[3]),(!i||3&r)&&O(s,"margin",e[1]+" "+e[0])},i(e){i||(be(l,e),i=!0)},o(e){xe(l,e),i=!1},d(e){e&&A(t),o&&o.d(),l&&l.d(e)}}}function Bi(e,t,n){let{$$slots:s={},$$scope:i}=t,{marginHorizon:o="10px"}=t,{marginVertical:a="6px"}=t,{radius:l="8px"}=t,{color:r="var(--dynamicControlLight)"}=t,{title:c=""}=t;return e.$$set=e=>{"marginHorizon"in e&&n(0,o=e.marginHorizon),"marginVertical"in e&&n(1,a=e.marginVertical),"radius"in e&&n(2,l=e.radius),"color"in e&&n(3,r=e.color),"title"in e&&n(4,c=e.title),"$$scope"in e&&n(5,i=e.$$scope)},[o,a,l,r,c,i,s]}window.globalPlayer=Ri,navigator.mediaSession.setActionHandler("play",(()=>Ri.play())),navigator.mediaSession.setActionHandler("pause",(()=>Ri.pause())),hooks.on("player:play",(()=>Ri.play())),hooks.on("player:pause",(()=>Ri.pause()));class Oi extends Se{constructor(e){super(),Te(this,e,Bi,Ni,l,{marginHorizon:0,marginVertical:1,radius:2,color:3,title:4})}}function Vi(e,t,n){const s=e.slice();return s[6]=t[n],s[8]=n,s}function qi(e){let t,n,s,i,a,l,r=(e[6].label||e[6])+"";function c(...t){return e[4](e[8],...t)}return{c(){t=z("div"),n=T(r),s=S(),U(t,"class",i="btn outlined"+(0===e[8]?" first-child":"")+(e[0]===e[8]?" selected":"")+" svelte-1d1p4yz")},m(e,i){E(e,t,i),C(t,n),C(t,s),a||(l=[M(t,"click",c),M(t,"mousedown",ji)],a=!0)},p(s,o){e=s,2&o&&r!==(r=(e[6].label||e[6])+"")&&N(n,r),1&o&&i!==(i="btn outlined"+(0===e[8]?" first-child":"")+(e[0]===e[8]?" selected":"")+" svelte-1d1p4yz")&&U(t,"class",i)},d(e){e&&A(t),a=!1,o(l)}}}function Ii(e){let t,n=e[1],s=[];for(let t=0;t<n.length;t+=1)s[t]=qi(Vi(e,n,t));return{c(){t=z("div");for(let e=0;e<s.length;e+=1)s[e].c();U(t,"class","Row container svelte-1d1p4yz")},m(e,n){E(e,t,n);for(let e=0;e<s.length;e+=1)s[e].m(t,null)},p(e,i){if(7&i){let o;for(n=e[1],o=0;o<n.length;o+=1){const a=Vi(e,n,o);s[o]?s[o].p(a,i):(s[o]=qi(a),s[o].c(),s[o].m(t,null))}for(;o<s.length;o+=1)s[o].d(1);s.length=n.length}},d(e){e&&A(t),P(s,e)}}}function Fi(e){let t,s;const i=[e[3],{breakLine:!0}];let o={$$slots:{default:[Ii]},$$scope:{ctx:e}};for(let e=0;e<i.length;e+=1)o=n(o,i[e]);return t=new Qn({props:o}),{c(){Ae(t.$$.fragment)},m(e,n){Pe(t,e,n),s=!0},p(e,[n]){const s=8&n?_e(i,[Le(e[3]),i[1]]):{};515&n&&(s.$$scope={dirty:n,ctx:e}),t.$set(s)},i(e){s||(be(t.$$.fragment,e),s=!0)},o(e){xe(t.$$.fragment,e),s=!1},d(e){ze(t,e)}}}const ji=e=>e.stopPropagation();function Hi(e,t,s){let{dataList:i=[]}=t,{selected:o=0}=t;const a=J();function l(e,t){a("selected",t),s(0,o=t)}return e.$$set=e=>{s(3,t=n(n({},t),m(e))),"dataList"in e&&s(1,i=e.dataList),"selected"in e&&s(0,o=e.selected)},t=m(t),[o,i,l,t,(e,t)=>l(0,e)]}class Wi extends Se{constructor(e){super(),Te(this,e,Hi,Fi,l,{dataList:1,selected:0})}}function Xi(t){let n,s,i,a,l,r;return{c(){n=z("div"),s=z("div"),U(s,"class",i="switchThumb"+(t[0]?" thumb-active":"")+" svelte-od6td5"),U(n,"class",a="switch"+(t[0]?" active":"")+" svelte-od6td5")},m(e,i){E(e,n,i),C(n,s),l||(r=[M(n,"mousedown",R(Yi)),M(n,"click",R(t[1]))],l=!0)},p(e,[t]){1&t&&i!==(i="switchThumb"+(e[0]?" thumb-active":"")+" svelte-od6td5")&&U(s,"class",i),1&t&&a!==(a="switch"+(e[0]?" active":"")+" svelte-od6td5")&&U(n,"class",a)},i:e,o:e,d(e){e&&A(n),l=!1,o(r)}}}const Yi=()=>{};function Gi(e,t,n){let{checked:s=!1}=t;const i=J();function o(){n(0,s=!s),i("toggle",s)}return e.$$set=e=>{"checked"in e&&n(0,s=e.checked)},[s,o,function(){o()}]}class Ji extends Se{constructor(e){super(),Te(this,e,Gi,Xi,l,{checked:0,toggle:2})}get toggle(){return this.$$.ctx[2]}}function Ki(e){let t,n,s;function i(t){e[4](t)}let o={};return void 0!==e[0]&&(o.checked=e[0]),t=new Ji({props:o}),te.push((()=>Ee(t,"checked",i))),e[5](t),t.$on("toggle",e[2]),{c(){Ae(t.$$.fragment)},m(e,n){Pe(t,e,n),s=!0},p(e,s){const i={};!n&&1&s&&(n=!0,i.checked=e[0],ce((()=>n=!1))),t.$set(i)},i(e){s||(be(t.$$.fragment,e),s=!0)},o(e){xe(t.$$.fragment,e),s=!1},d(n){e[5](null),ze(t,n)}}}function Qi(e){let t,s;const i=[e[3]];let o={$$slots:{default:[Ki]},$$scope:{ctx:e}};for(let e=0;e<i.length;e+=1)o=n(o,i[e]);return t=new Qn({props:o}),t.$on("click",e[6]),{c(){Ae(t.$$.fragment)},m(e,n){Pe(t,e,n),s=!0},p(e,[n]){const s=8&n?_e(i,[Le(e[3])]):{};259&n&&(s.$$scope={dirty:n,ctx:e}),t.$set(s)},i(e){s||(be(t.$$.fragment,e),s=!0)},o(e){xe(t.$$.fragment,e),s=!1},d(e){ze(t,e)}}}function Zi(e,t,s){let i,o=J(),{checked:a=!1}=t;return e.$$set=e=>{s(3,t=n(n({},t),m(e))),"checked"in e&&s(0,a=e.checked)},t=m(t),[a,i,function(e){let t=e.detail;o("toggle",t)},t,function(e){a=e,s(0,a)},function(e){te[e?"unshift":"push"]((()=>{i=e,s(1,i)}))},()=>i.toggle()]}class eo extends Se{constructor(e){super(),Te(this,e,Zi,Qi,l,{checked:0})}}function to(e){let t,n,s;function i(t){e[15](t)}let o={data:"开发者工具",extra:"开启或关闭 DevTools",useAvatar:!1,isUrl:!1};return void 0!==e[3]&&(o.checked=e[3]),t=new eo({props:o}),te.push((()=>Ee(t,"checked",i))),t.$on("toggle",ro),{c(){Ae(t.$$.fragment)},m(e,n){Pe(t,e,n),s=!0},p(e,s){const i={};!n&&8&s[0]&&(n=!0,i.checked=e[3],ce((()=>n=!1))),t.$set(i)},i(e){s||(be(t.$$.fragment,e),s=!0)},o(e){xe(t.$$.fragment,e),s=!1},d(e){ze(t,e)}}}function no(e){let t,n,s,i,o,a,l;function r(t){e[16](t)}function c(t){e[17](t)}let u={data:"主题色 (色相)",useAvatar:!1,isUrl:!1};function d(t){e[18](t)}void 0!==e[0]&&(u.dataList=e[0]),void 0!==e[1]&&(u.selected=e[1]),t=new Wi({props:u}),te.push((()=>Ee(t,"dataList",r))),te.push((()=>Ee(t,"selected",c))),t.$on("selected",e[11]);let f={data:'使用 "Acrylic" ',extra:"性能较低的设备关闭此选项以获得更好的体验",useAvatar:!1,isUrl:!1};return void 0!==e[2]&&(f.checked=e[2]),o=new eo({props:f}),te.push((()=>Ee(o,"checked",d))),o.$on("toggle",e[12]),{c(){Ae(t.$$.fragment),i=S(),Ae(o.$$.fragment)},m(e,n){Pe(t,e,n),E(e,i,n),Pe(o,e,n),l=!0},p(e,i){const l={};!n&&1&i[0]&&(n=!0,l.dataList=e[0],ce((()=>n=!1))),!s&&2&i[0]&&(s=!0,l.selected=e[1],ce((()=>s=!1))),t.$set(l);const r={};!a&&4&i[0]&&(a=!0,r.checked=e[2],ce((()=>a=!1))),o.$set(r)},i(e){l||(be(t.$$.fragment,e),be(o.$$.fragment,e),l=!0)},o(e){xe(t.$$.fragment,e),xe(o.$$.fragment,e),l=!1},d(e){ze(t,e),e&&A(i),ze(o,e)}}}function so(e){let t,n,s,i,o,a,l,r;function c(t){e[19](t)}function u(t){e[20](t)}let d={data:"缓存音乐质量",useAvatar:!1,isUrl:!1};return void 0!==e[0]&&(d.dataList=e[0]),void 0!==e[1]&&(d.selected=e[1]),t=new Wi({props:d}),te.push((()=>Ee(t,"dataList",c))),te.push((()=>Ee(t,"selected",u))),t.$on("selected",e[11]),o=new Qn({props:{useAvatar:!1,data:"清除用户信息",extra:"需手动重启应用"}}),o.$on("click",co),l=new Qn({props:{useAvatar:!1,data:"清除歌曲缓存"}}),l.$on("click",uo),{c(){Ae(t.$$.fragment),i=S(),Ae(o.$$.fragment),a=S(),Ae(l.$$.fragment)},m(e,n){Pe(t,e,n),E(e,i,n),Pe(o,e,n),E(e,a,n),Pe(l,e,n),r=!0},p(e,i){const o={};!n&&1&i[0]&&(n=!0,o.dataList=e[0],ce((()=>n=!1))),!s&&2&i[0]&&(s=!0,o.selected=e[1],ce((()=>s=!1))),t.$set(o)},i(e){r||(be(t.$$.fragment,e),be(o.$$.fragment,e),be(l.$$.fragment,e),r=!0)},o(e){xe(t.$$.fragment,e),xe(o.$$.fragment,e),xe(l.$$.fragment,e),r=!1},d(e){ze(t,e),e&&A(i),ze(o,e),e&&A(a),ze(l,e)}}}function io(e){let t,n,s,i,o,a,l,r;function c(t){e[21](t)}function u(t){e[22](t)}let d={data:"页面滚动速度",useAvatar:!1,isUrl:!1};function f(t){e[23](t)}function p(t){e[24](t)}void 0!==e[5]&&(d.dataList=e[5]),void 0!==e[4]&&(d.selected=e[4]),t=new Wi({props:d}),te.push((()=>Ee(t,"dataList",c))),te.push((()=>Ee(t,"selected",u))),t.$on("selected",e[13]);let h={data:"指针移动速度",useAvatar:!1,isUrl:!1};return void 0!==e[7]&&(h.dataList=e[7]),void 0!==e[6]&&(h.selected=e[6]),o=new Wi({props:h}),te.push((()=>Ee(o,"dataList",f))),te.push((()=>Ee(o,"selected",p))),o.$on("selected",e[14]),{c(){Ae(t.$$.fragment),i=S(),Ae(o.$$.fragment)},m(e,n){Pe(t,e,n),E(e,i,n),Pe(o,e,n),r=!0},p(e,i){const r={};!n&&32&i[0]&&(n=!0,r.dataList=e[5],ce((()=>n=!1))),!s&&16&i[0]&&(s=!0,r.selected=e[4],ce((()=>s=!1))),t.$set(r);const c={};!a&&128&i[0]&&(a=!0,c.dataList=e[7],ce((()=>a=!1))),!l&&64&i[0]&&(l=!0,c.selected=e[6],ce((()=>l=!1))),o.$set(c)},i(e){r||(be(t.$$.fragment,e),be(o.$$.fragment,e),r=!0)},o(e){xe(t.$$.fragment,e),xe(o.$$.fragment,e),r=!1},d(e){ze(t,e),e&&A(i),ze(o,e)}}}function oo(e){let t,n,s,i;function o(t){e[25](t)}function a(t){e[26](t)}let l={data:"设备",extra:"输出设备变化时将会切换到默认设备",useAvatar:!1,isUrl:!1};return void 0!==e[10]&&(l.dataList=e[10]),void 0!==e[9]&&(l.selected=e[9]),t=new Wi({props:l}),te.push((()=>Ee(t,"dataList",o))),te.push((()=>Ee(t,"selected",a))),t.$on("selected",e[27]),{c(){Ae(t.$$.fragment)},m(e,n){Pe(t,e,n),i=!0},p(e,i){const o={};!n&&1024&i[0]&&(n=!0,o.dataList=e[10],ce((()=>n=!1))),!s&&512&i[0]&&(s=!0,o.selected=e[9],ce((()=>s=!1))),t.$set(o)},i(e){i||(be(t.$$.fragment,e),i=!0)},o(e){xe(t.$$.fragment,e),i=!1},d(e){ze(t,e)}}}function ao(e){let t,n,s,i,o,a,l,r,c,u,d,f,p,h,m;o=new Rt({props:{placeholder:"  搜索设置",fullBorder:!0}});let g=window.rem.isBeta&&function(e){let t,n;return t=new Oi({props:{title:"测试功能",$$slots:{default:[to]},$$scope:{ctx:e}}}),{c(){Ae(t.$$.fragment)},m(e,s){Pe(t,e,s),n=!0},p(e,n){const s={};8&n[0]|2&n[1]&&(s.$$scope={dirty:n,ctx:e}),t.$set(s)},i(e){n||(be(t.$$.fragment,e),n=!0)},o(e){xe(t.$$.fragment,e),n=!1},d(e){ze(t,e)}}}(e);return r=new Oi({props:{title:"主题",$$slots:{default:[no]},$$scope:{ctx:e}}}),u=new Oi({props:{title:"缓存",$$slots:{default:[so]},$$scope:{ctx:e}}}),f=new Oi({props:{title:"控制器",$$slots:{default:[io]},$$scope:{ctx:e}}}),h=new Oi({props:{title:"输出",$$slots:{default:[oo]},$$scope:{ctx:e}}}),{c(){t=z("div"),n=z("div"),s=z("h1"),s.textContent="设置",i=S(),Ae(o.$$.fragment),a=S(),g&&g.c(),l=S(),Ae(r.$$.fragment),c=S(),Ae(u.$$.fragment),d=S(),Ae(f.$$.fragment),p=S(),Ae(h.$$.fragment),U(s,"class","svelte-cndn71"),U(n,"class","column grid-margin svelte-cndn71"),O(n,"justify-content","space-between"),O(n,"width","calc(100% - 48px)"),U(t,"class","row c svelte-cndn71")},m(e,v){E(e,t,v),C(t,n),C(n,s),C(n,i),Pe(o,n,null),C(t,a),g&&g.m(t,null),C(t,l),Pe(r,t,null),C(t,c),Pe(u,t,null),C(t,d),Pe(f,t,null),C(t,p),Pe(h,t,null),m=!0},p(e,t){window.rem.isBeta&&g.p(e,t);const n={};7&t[0]|2&t[1]&&(n.$$scope={dirty:t,ctx:e}),r.$set(n);const s={};3&t[0]|2&t[1]&&(s.$$scope={dirty:t,ctx:e}),u.$set(s);const i={};240&t[0]|2&t[1]&&(i.$$scope={dirty:t,ctx:e}),f.$set(i);const o={};1536&t[0]|2&t[1]&&(o.$$scope={dirty:t,ctx:e}),h.$set(o)},i(e){m||(be(o.$$.fragment,e),be(g),be(r.$$.fragment,e),be(u.$$.fragment,e),be(f.$$.fragment,e),be(h.$$.fragment,e),m=!0)},o(e){xe(o.$$.fragment,e),xe(g),xe(r.$$.fragment,e),xe(u.$$.fragment,e),xe(f.$$.fragment,e),xe(h.$$.fragment,e),m=!1},d(e){e&&A(t),ze(o),g&&g.d(),ze(r),ze(u),ze(f),ze(h)}}}function lo(e){let t,n;return t=new $t({props:{$$slots:{default:[ao]},$$scope:{ctx:e}}}),e[28](t),{c(){Ae(t.$$.fragment)},m(e,s){Pe(t,e,s),n=!0},p(e,n){const s={};1791&n[0]|2&n[1]&&(s.$$scope={dirty:n,ctx:e}),t.$set(s)},i(e){n||(be(t.$$.fragment,e),n=!0)},o(e){xe(t.$$.fragment,e),n=!1},d(n){e[28](null),ze(t,n)}}}function ro(e){const t=e.detail?"open":"close";hooks.send(`devtools:${t}`)}function co(){store.clear()}function uo(){}function fo(e,t,n){let s=store.getSync("sys-settings"),i=s.theme.controlColor.slice(1),o=s.theme.controlColor[0],a=s.theme.useAcrylic,l=s.beta.showDevTools;let r,[c,...u]=store.getSync("stickScrollSpeedRatio")||[1,{label:"慢",value:.3},{label:"中",value:.65},{label:"快",value:1}],[d,...f]=store.getSync("cursorMoveSpeedRatio")||[1,{label:"慢",value:.3},{label:"中",value:.65},{label:"快",value:1}];Pager.beforeSwitch((()=>{if(r?.prepared()){const{save:e}=Pager.getContext();e.offsetRatio=r.getOffsetRatio()}})),Y((async()=>{const{save:e}=Pager.getContext();await le(),e.offsetRatio&&r.setOffsetRatio(e.offsetRatio)}));let p=0,h=[];async function m(){n(10,h=[...await ki()]),n(9,p=await xi(h))}rem.on("audioDeviceChange",m),G((()=>{rem.off("audioDeviceChange",m)})),Y((async()=>{n(10,h=await async function(){const e=await ki();return n(9,p=await xi(e)),e}())}));return[i,o,a,l,c,u,d,f,r,p,h,function(e){const t=e.detail;n(1,o=s.theme.controlColor[0]=t),rem.emit("changeControlColor",i[o]),store.set("sys-settings",s)},function(e){const t=e.detail;s.theme.useAcrylic=t,rem.emit("useAcrylic",t)},function(e){const t=e.detail;n(4,c=t),store.set("stickScrollSpeedRatio",[t,...u])},function(e){const t=e.detail;n(6,d=t),store.set("cursorMoveSpeedRatio",[t,...f])},function(e){l=e,n(3,l)},function(e){i=e,n(0,i)},function(e){o=e,n(1,o)},function(e){a=e,n(2,a)},function(e){i=e,n(0,i)},function(e){o=e,n(1,o)},function(e){u=e,n(5,u)},function(e){c=e,n(4,c)},function(e){f=e,n(7,f)},function(e){d=e,n(6,d)},function(e){h=e,n(10,h)},function(e){p=e,n(9,p)},async e=>{n(9,p=e.detail),bi(h[e.detail].deviceId)},function(e){te[e?"unshift":"push"]((()=>{r=e,n(8,r)}))}]}class po extends Se{constructor(e){super(),Te(this,e,fo,lo,l,{},null,[-1,-1])}}function ho(e){let t,n,s,i,o,a,l,r,c,u,d,f,p;function h(t){e[6](t)}let m={containerStyle:mo+"; margin-right: 8px;",cssText:mo};function g(t){e[7](t)}void 0!==e[0]&&(m.value=e[0]),r=new Rt({props:m}),te.push((()=>Ee(r,"value",h))),r.$on("change",e[5]);let v={};return void 0!==e[1]&&(v.value=e[1]),d=new Ke({props:v}),te.push((()=>Ee(d,"value",g))),d.$on("mousemove",e[4]),d.$on("mouseup",e[4]),{c(){t=z("div"),n=z("div"),s=T(e[2]),i=z("pre"),o=T(e[3]),a=S(),l=z("div"),Ae(r.$$.fragment),u=S(),Ae(d.$$.fragment),U(i,"class","comm svelte-1wmbvzg"),U(n,"class","Row"),U(l,"class","Row"),U(t,"class","Row c svelte-1wmbvzg")},m(e,c){E(e,t,c),C(t,n),C(n,s),C(n,i),C(i,o),C(t,a),C(t,l),Pe(r,l,null),C(l,u),Pe(d,l,null),p=!0},p(e,[t]){(!p||4&t)&&N(s,e[2]),(!p||8&t)&&N(o,e[3]);const n={};!c&&1&t&&(c=!0,n.value=e[0],ce((()=>c=!1))),r.$set(n);const i={};!f&&2&t&&(f=!0,i.value=e[1],ce((()=>f=!1))),d.$set(i)},i(e){p||(be(r.$$.fragment,e),be(d.$$.fragment,e),p=!0)},o(e){xe(r.$$.fragment,e),xe(d.$$.fragment,e),p=!1},d(e){e&&A(t),ze(r),ze(d)}}}const mo="height: 20px; width: 56px; padding: 0 4px; background-color: transparent;";function go(e,t,n){let{label:s=""}=t,{comment:i=""}=t,{inputValue:o}=t,{progressValue:a}=t;const l=J();return e.$$set=e=>{"label"in e&&n(2,s=e.label),"comment"in e&&n(3,i=e.comment),"inputValue"in e&&n(0,o=e.inputValue),"progressValue"in e&&n(1,a=e.progressValue)},[o,a,s,i,function(e){l("progressChange",e.detail)},function(e){l("inputChange",e.detail)},function(e){o=e,n(0,o)},function(e){a=e,n(1,a)}]}class vo extends Se{constructor(e){super(),Te(this,e,go,ho,l,{label:2,comment:3,inputValue:0,progressValue:1})}}function $o(e){let t,n,s,i,o;function a(t){e[5](t)}function l(t){e[6](t)}function r(t){e[7](t)}let c={comment:"调整音量增幅\n请谨慎使用以保护听力"};return void 0!==e[0]&&(c.label=e[0]),void 0!==e[1]&&(c.inputValue=e[1]),void 0!==e[2]&&(c.progressValue=e[2]),t=new vo({props:c}),te.push((()=>Ee(t,"label",a))),te.push((()=>Ee(t,"inputValue",l))),te.push((()=>Ee(t,"progressValue",r))),t.$on("inputChange",e[3]),t.$on("progressChange",e[4]),{c(){Ae(t.$$.fragment)},m(e,n){Pe(t,e,n),o=!0},p(e,[o]){const a={};!n&&1&o&&(n=!0,a.label=e[0],ce((()=>n=!1))),!s&&2&o&&(s=!0,a.inputValue=e[1],ce((()=>s=!1))),!i&&4&o&&(i=!0,a.progressValue=e[2],ce((()=>i=!1))),t.$set(a)},i(e){o||(be(t.$$.fragment,e),o=!0)},o(e){xe(t.$$.fragment,e),o=!1},d(e){ze(t,e)}}}function yo(e,t,n){let s="增益",i=si.gain.gain.toFixed(2),o=i/2*100;return[s,i,o,function({detail:e}){e=+e;let t=Math.max(Math.min(2,e),0);Pi(t),n(1,i=e.toFixed(2)),n(2,o=t/2*100)},function({detail:e}){let t=2*(e/=100);Pi(t),n(1,i=t.toFixed(2))},function(e){s=e,n(0,s)},function(e){i=e,n(1,i)},function(e){o=e,n(2,o)}]}class wo extends Se{constructor(e){super(),Te(this,e,yo,$o,l,{})}}function bo(e){let t,n,s,i,o;function a(t){e[5](t)}function l(t){e[6](t)}function r(t){e[7](t)}let c={};return void 0!==e[0]&&(c.label=e[0]),void 0!==e[1]&&(c.inputValue=e[1]),void 0!==e[2]&&(c.progressValue=e[2]),t=new vo({props:c}),te.push((()=>Ee(t,"label",a))),te.push((()=>Ee(t,"inputValue",l))),te.push((()=>Ee(t,"progressValue",r))),t.$on("inputChange",e[3]),t.$on("progressChange",e[4]),{c(){Ae(t.$$.fragment)},m(e,n){Pe(t,e,n),o=!0},p(e,[o]){const a={};!n&&1&o&&(n=!0,a.label=e[0],ce((()=>n=!1))),!s&&2&o&&(s=!0,a.inputValue=e[1],ce((()=>s=!1))),!i&&4&o&&(i=!0,a.progressValue=e[2],ce((()=>i=!1))),t.$set(a)},i(e){o||(be(t.$$.fragment,e),o=!0)},o(e){xe(t.$$.fragment,e),o=!1},d(e){ze(t,e)}}}function xo(e,t,n){let s="延迟",i=si.delay.delayTime.toFixed(3),o=200*i;return[s,i,o,function({detail:e}){e=+e;let t=Math.max(Math.min(.5,e),0);Ai(t),n(1,i=e.toFixed(3)),n(2,o=200*t)},function({detail:e}){let t=(e/=100)/2;Ai(t),n(1,i=t.toFixed(3))},function(e){s=e,n(0,s)},function(e){i=e,n(1,i)},function(e){o=e,n(2,o)}]}class ko extends Se{constructor(e){super(),Te(this,e,xo,bo,l,{})}}function Co(e){let t,n,s,i,o;function a(t){e[5](t)}function l(t){e[6](t)}function r(t){e[7](t)}let c={comment:"左右声道平衡"};return void 0!==e[0]&&(c.label=e[0]),void 0!==e[1]&&(c.inputValue=e[1]),void 0!==e[2]&&(c.progressValue=e[2]),t=new vo({props:c}),te.push((()=>Ee(t,"label",a))),te.push((()=>Ee(t,"inputValue",l))),te.push((()=>Ee(t,"progressValue",r))),t.$on("inputChange",e[3]),t.$on("progressChange",e[4]),{c(){Ae(t.$$.fragment)},m(e,n){Pe(t,e,n),o=!0},p(e,[o]){const a={};!n&&1&o&&(n=!0,a.label=e[0],ce((()=>n=!1))),!s&&2&o&&(s=!0,a.inputValue=e[1],ce((()=>s=!1))),!i&&4&o&&(i=!0,a.progressValue=e[2],ce((()=>i=!1))),t.$set(a)},i(e){o||(be(t.$$.fragment,e),o=!0)},o(e){xe(t.$$.fragment,e),o=!1},d(e){ze(t,e)}}}function _o(e,t,n){let s="平衡",i=si.stereoPanner.pan.toFixed(2),o=50*(+i+1);return[s,i,o,function({detail:e}){e=+e,zi(Math.max(Math.min(1,e),-1)),n(1,i=e.toFixed(2)),n(2,o=50*(+i+1))},function({detail:e}){let t=2*(e/=100)-1;zi(t),n(1,i=t.toFixed(2))},function(e){s=e,n(0,s)},function(e){i=e,n(1,i)},function(e){o=e,n(2,o)}]}class Lo extends Se{constructor(e){super(),Te(this,e,_o,Co,l,{})}}function Eo(e){let t,n,s,i,o,a,l,r;function c(t){e[8](t)}function u(t){e[9](t)}let d={label:"淡入"};function f(t){e[10](t)}function p(t){e[11](t)}void 0!==e[0]&&(d.inputValue=e[0]),void 0!==e[1]&&(d.progressValue=e[1]),t=new vo({props:d}),te.push((()=>Ee(t,"inputValue",c))),te.push((()=>Ee(t,"progressValue",u))),t.$on("inputChange",e[4]),t.$on("progressChange",e[5]);let h={label:"淡出"};return void 0!==e[2]&&(h.inputValue=e[2]),void 0!==e[3]&&(h.progressValue=e[3]),o=new vo({props:h}),te.push((()=>Ee(o,"inputValue",f))),te.push((()=>Ee(o,"progressValue",p))),o.$on("inputChange",e[6]),o.$on("progressChange",e[7]),{c(){Ae(t.$$.fragment),i=S(),Ae(o.$$.fragment)},m(e,n){Pe(t,e,n),E(e,i,n),Pe(o,e,n),r=!0},p(e,[i]){const r={};!n&&1&i&&(n=!0,r.inputValue=e[0],ce((()=>n=!1))),!s&&2&i&&(s=!0,r.progressValue=e[1],ce((()=>s=!1))),t.$set(r);const c={};!a&&4&i&&(a=!0,c.inputValue=e[2],ce((()=>a=!1))),!l&&8&i&&(l=!0,c.progressValue=e[3],ce((()=>l=!1))),o.$set(c)},i(e){r||(be(t.$$.fragment,e),be(o.$$.fragment,e),r=!0)},o(e){xe(t.$$.fragment,e),xe(o.$$.fragment,e),r=!1},d(e){ze(t,e),e&&A(i),ze(o,e)}}}function Ao(e,t,n){let s=Object.assign({},si.fader);function i(e){!function(e=.2,t=.2){si.fader.fadeIn=e,si.fader.fadeOut=t,Ei()}(e.fadeIn,e.fadeOut)}let o=s.fadeIn.toFixed(3),a=200*o,l=s.fadeOut.toFixed(3),r=200*l;return[o,a,l,r,function({detail:e}){e=+e;let t=s.fadeIn=Math.max(Math.min(.5,e),0);i(s),n(0,o=e.toFixed(3)),n(1,a=200*t)},function({detail:e}){e/=100;let t=s.fadeIn=e/2;i(s),n(0,o=t.toFixed(3))},function({detail:e}){e=+e;let t=s.fadeOut=Math.max(Math.min(.5,e),0);i(s),n(2,l=e.toFixed(3)),n(3,r=200*t)},function({detail:e}){e/=100;let t=s.fadeOut=e/2;i(s),n(2,l=t.toFixed(3))},function(e){o=e,n(0,o)},function(e){a=e,n(1,a)},function(e){l=e,n(2,l)},function(e){r=e,n(3,r)}]}class Po extends Se{constructor(e){super(),Te(this,e,Ao,Eo,l,{})}}function zo(t){let n,s,i,a,l,r,c,u,d,f,p,h,m,g;return{c(){n=z("div"),s=z("div"),i=z("div"),a=z("div"),c=S(),u=z("div"),d=T(t[0]),f=S(),p=z("div"),U(a,"class","thumb svelte-14im67a"),U(i,"class",l="progress "+(t[4]?"drag":"")+" svelte-14im67a"),O(i,"--height",t[2]+"px"),U(s,"class",r="Column track "+(t[1]?"":"disable")+" svelte-14im67a"),U(u,"class","label svelte-14im67a"),U(p,"contenteditable",""),U(p,"class",h="txt "+(t[4]?"bigger":"")+" "+(t[1]?"":"disable")+" svelte-14im67a"),U(n,"class","Column outer svelte-14im67a")},m(e,o){E(e,n,o),C(n,s),C(s,i),C(i,a),t[11](s),C(n,c),C(n,u),C(u,d),C(n,f),C(n,p),t[12](p),m||(g=[M(a,"mousedown",R(t[8])),M(i,"click",R(t[7])),M(s,"click",R(t[6])),M(p,"blur",t[9])],m=!0)},p(e,[t]){16&t&&l!==(l="progress "+(e[4]?"drag":"")+" svelte-14im67a")&&U(i,"class",l),4&t&&O(i,"--height",e[2]+"px"),2&t&&r!==(r="Column track "+(e[1]?"":"disable")+" svelte-14im67a")&&U(s,"class",r),1&t&&N(d,e[0]),18&t&&h!==(h="txt "+(e[4]?"bigger":"")+" "+(e[1]?"":"disable")+" svelte-14im67a")&&U(p,"class",h)},i:e,o:e,d(e){e&&A(n),t[11](null),t[12](null),m=!1,o(g)}}}function To(e,t,n){let s,{f:i=31}=t,{label:o=i}=t,{enable:a=!0}=t,l=0,r=0;function c(){const e=+u.innerText;!function(e,t){si.eq[e]=t,yi[e].gain.value=t,rem&&rem.emit("eqChange"),Ei()}(i,e),rem&&rem.emit("eqChange"),n(2,l=(e+20)/40*r)}let u,d=!1;function f(){d&&n(4,d=!1)}function p(e){d&&(n(2,l=Math.max(0,Math.min(l-e.movementY/window.devicePixelRatio,r))),g(l/r*40-20))}function h(e){"Enter"===e.key&&document.activeElement===u&&(e.preventDefault(),m(u.innerText.replace(/\n/g,"")),u.blur())}function m(e){e=+e,e=isNaN(e)?0:e,g(Math.max(-20,Math.min(e,20))),c()}function g(e){n(5,u.innerText=(+e).toFixed(1),u)}return Y((()=>{r=s.getBoundingClientRect().height,document.addEventListener("mouseup",f),document.addEventListener("mousemove",p),u.addEventListener("keydown",h),g(function(e){return void 0===e?Object.assign({},si.eq):si.eq[e]}(i)),c()})),G((()=>{document.removeEventListener("mouseup",f),document.removeEventListener("mousemove",p),u.removeEventListener("keydown",h)})),e.$$set=e=>{"f"in e&&n(10,i=e.f),"label"in e&&n(0,o=e.label),"enable"in e&&n(1,a=e.enable)},[o,a,l,s,d,u,function(){g(+u.innerText+.5),c()},function(){g(u.innerText-.5),c()},function(){n(4,d=!0)},function(){m(u.innerText)},i,function(e){te[e?"unshift":"push"]((()=>{s=e,n(3,s)}))},function(e){te[e?"unshift":"push"]((()=>{u=e,n(5,u)}))}]}class So extends Se{constructor(e){super(),Te(this,e,To,zo,l,{f:10,label:0,enable:1})}}function Do(e){let t,n,s,i,o,a,l,r,c,u,d,f,p,h,m,g,v,$,y,w,b,x,k,C,_,L,P,z,T,D;function M(t){e[1](t)}let R={f:31};function U(t){e[2](t)}void 0!==e[0]&&(R.enable=e[0]),t=new So({props:R}),te.push((()=>Ee(t,"enable",M)));let N={f:62};function B(t){e[3](t)}void 0!==e[0]&&(N.enable=e[0]),i=new So({props:N}),te.push((()=>Ee(i,"enable",U)));let O={f:125};function V(t){e[4](t)}void 0!==e[0]&&(O.enable=e[0]),l=new So({props:O}),te.push((()=>Ee(l,"enable",B)));let q={f:250};function I(t){e[5](t)}void 0!==e[0]&&(q.enable=e[0]),u=new So({props:q}),te.push((()=>Ee(u,"enable",V)));let F={f:500};function j(t){e[6](t)}void 0!==e[0]&&(F.enable=e[0]),p=new So({props:F}),te.push((()=>Ee(p,"enable",I)));let H={f:1e3,label:"1k"};function W(t){e[7](t)}void 0!==e[0]&&(H.enable=e[0]),g=new So({props:H}),te.push((()=>Ee(g,"enable",j)));let X={f:2e3,label:"2k"};function Y(t){e[8](t)}void 0!==e[0]&&(X.enable=e[0]),y=new So({props:X}),te.push((()=>Ee(y,"enable",W)));let G={f:4e3,label:"4k"};function J(t){e[9](t)}void 0!==e[0]&&(G.enable=e[0]),x=new So({props:G}),te.push((()=>Ee(x,"enable",Y)));let K={f:8e3,label:"8k"};function Q(t){e[10](t)}void 0!==e[0]&&(K.enable=e[0]),_=new So({props:K}),te.push((()=>Ee(_,"enable",J)));let Z={f:16e3,label:"16k"};return void 0!==e[0]&&(Z.enable=e[0]),z=new So({props:Z}),te.push((()=>Ee(z,"enable",Q))),{c(){Ae(t.$$.fragment),s=S(),Ae(i.$$.fragment),a=S(),Ae(l.$$.fragment),c=S(),Ae(u.$$.fragment),f=S(),Ae(p.$$.fragment),m=S(),Ae(g.$$.fragment),$=S(),Ae(y.$$.fragment),b=S(),Ae(x.$$.fragment),C=S(),Ae(_.$$.fragment),P=S(),Ae(z.$$.fragment)},m(e,n){Pe(t,e,n),E(e,s,n),Pe(i,e,n),E(e,a,n),Pe(l,e,n),E(e,c,n),Pe(u,e,n),E(e,f,n),Pe(p,e,n),E(e,m,n),Pe(g,e,n),E(e,$,n),Pe(y,e,n),E(e,b,n),Pe(x,e,n),E(e,C,n),Pe(_,e,n),E(e,P,n),Pe(z,e,n),D=!0},p(e,[s]){const a={};!n&&1&s&&(n=!0,a.enable=e[0],ce((()=>n=!1))),t.$set(a);const c={};!o&&1&s&&(o=!0,c.enable=e[0],ce((()=>o=!1))),i.$set(c);const f={};!r&&1&s&&(r=!0,f.enable=e[0],ce((()=>r=!1))),l.$set(f);const m={};!d&&1&s&&(d=!0,m.enable=e[0],ce((()=>d=!1))),u.$set(m);const $={};!h&&1&s&&(h=!0,$.enable=e[0],ce((()=>h=!1))),p.$set($);const b={};!v&&1&s&&(v=!0,b.enable=e[0],ce((()=>v=!1))),g.$set(b);const C={};!w&&1&s&&(w=!0,C.enable=e[0],ce((()=>w=!1))),y.$set(C);const E={};!k&&1&s&&(k=!0,E.enable=e[0],ce((()=>k=!1))),x.$set(E);const A={};!L&&1&s&&(L=!0,A.enable=e[0],ce((()=>L=!1))),_.$set(A);const P={};!T&&1&s&&(T=!0,P.enable=e[0],ce((()=>T=!1))),z.$set(P)},i(e){D||(be(t.$$.fragment,e),be(i.$$.fragment,e),be(l.$$.fragment,e),be(u.$$.fragment,e),be(p.$$.fragment,e),be(g.$$.fragment,e),be(y.$$.fragment,e),be(x.$$.fragment,e),be(_.$$.fragment,e),be(z.$$.fragment,e),D=!0)},o(e){xe(t.$$.fragment,e),xe(i.$$.fragment,e),xe(l.$$.fragment,e),xe(u.$$.fragment,e),xe(p.$$.fragment,e),xe(g.$$.fragment,e),xe(y.$$.fragment,e),xe(x.$$.fragment,e),xe(_.$$.fragment,e),xe(z.$$.fragment,e),D=!1},d(e){ze(t,e),e&&A(s),ze(i,e),e&&A(a),ze(l,e),e&&A(c),ze(u,e),e&&A(f),ze(p,e),e&&A(m),ze(g,e),e&&A($),ze(y,e),e&&A(b),ze(x,e),e&&A(C),ze(_,e),e&&A(P),ze(z,e)}}}function Mo(e,t,n){let{enable:s=!0}=t;return e.$$set=e=>{"enable"in e&&n(0,s=e.enable)},[s,function(e){s=e,n(0,s)},function(e){s=e,n(0,s)},function(e){s=e,n(0,s)},function(e){s=e,n(0,s)},function(e){s=e,n(0,s)},function(e){s=e,n(0,s)},function(e){s=e,n(0,s)},function(e){s=e,n(0,s)},function(e){s=e,n(0,s)},function(e){s=e,n(0,s)}]}class Ro extends Se{constructor(e){super(),Te(this,e,Mo,Do,l,{enable:0})}}function Uo(t){let n;return{c(){n=T("无")},m(e,t){E(e,n,t)},p:e,d(e){e&&A(n)}}}function No(e){let t,n,s,i,o,a,l,r,c,u,d,f,p,h,m,g,v,$,y,w=e[0].codec+"",b=e[0].numberOfChannels+"",x=e[0].sampleRate/1e3+"",k=e[0].bitrate>0&&Bo(e),_=e[0].bitsPerSample&&Oo(e);return{c(){t=z("div"),n=T("编码"),s=z("em"),i=T(w),o=S(),a=z("div"),l=T("音轨数"),r=z("em"),c=T(b),u=S(),k&&k.c(),d=S(),_&&_.c(),f=S(),p=z("div"),h=T("采样率"),m=z("em"),g=T(x),v=T(" kHz"),$=S(),y=z("div"),y.innerHTML='解码器<em class="svelte-s5zlk4">内置 FFmpeg 解码器</em>',U(s,"class","svelte-s5zlk4"),U(r,"class","svelte-s5zlk4"),U(m,"class","svelte-s5zlk4"),O(p,"margin-bottom","8px")},m(e,w){E(e,t,w),C(t,n),C(t,s),C(s,i),E(e,o,w),E(e,a,w),C(a,l),C(a,r),C(r,c),E(e,u,w),k&&k.m(e,w),E(e,d,w),_&&_.m(e,w),E(e,f,w),E(e,p,w),C(p,h),C(p,m),C(m,g),C(m,v),E(e,$,w),E(e,y,w)},p(e,t){1&t&&w!==(w=e[0].codec+"")&&N(i,w),1&t&&b!==(b=e[0].numberOfChannels+"")&&N(c,b),e[0].bitrate>0?k?k.p(e,t):(k=Bo(e),k.c(),k.m(d.parentNode,d)):k&&(k.d(1),k=null),e[0].bitsPerSample?_?_.p(e,t):(_=Oo(e),_.c(),_.m(f.parentNode,f)):_&&(_.d(1),_=null),1&t&&x!==(x=e[0].sampleRate/1e3+"")&&N(g,x)},d(e){e&&A(t),e&&A(o),e&&A(a),e&&A(u),k&&k.d(e),e&&A(d),_&&_.d(e),e&&A(f),e&&A(p),e&&A($),e&&A(y)}}}function Bo(e){let t,n,s,i,o,a=~~(e[0].bitrate/10)/100+"";return{c(){t=z("div"),n=T("码率"),s=z("em"),i=T(a),o=T(" kBps"),U(s,"class","svelte-s5zlk4")},m(e,a){E(e,t,a),C(t,n),C(t,s),C(s,i),C(s,o)},p(e,t){1&t&&a!==(a=~~(e[0].bitrate/10)/100+"")&&N(i,a)},d(e){e&&A(t)}}}function Oo(e){let t,n,s,i,o,a=e[0].bitsPerSample+"";return{c(){t=z("div"),n=T("位深"),s=z("em"),i=T(a),o=T(" bit"),U(s,"class","svelte-s5zlk4")},m(e,a){E(e,t,a),C(t,n),C(t,s),C(s,i),C(s,o)},p(e,t){1&t&&a!==(a=e[0].bitsPerSample+"")&&N(i,a)},d(e){e&&A(t)}}}function Vo(e){let t;function n(e,t){return e[0]?No:Uo}let s=n(e),i=s(e);return{c(){i.c(),t=D()},m(e,n){i.m(e,n),E(e,t,n)},p(e,o){s===(s=n(e))&&i?i.p(e,o):(i.d(1),i=s(e),i&&(i.c(),i.m(t.parentNode,t)))},d(e){i.d(e),e&&A(t)}}}function qo(e){let t,n,s,i,o,a,l,r,c,u,d,f,p,h,m,g,v,$,y,w,b,x,k,_,L,P,D,M,R,B,V,q,I,F,j,H,W,X,Y,G,J,K,Q,Z,ee,te,ne,se,ie,oe,ae=e[1].gain.gain>1?"+":e[1].gain.gain<1?"-":"",le=e[1].gain.gain.toFixed(2)+"",re=e[1].stereoPanner.pan.toFixed(2)+"",ce=((1-e[1].stereoPanner.pan)/2).toFixed(2)+"",ue=((e[1].stereoPanner.pan+1)/2).toFixed(2)+"",de=e[1].delay.delayTime+"",fe=e[1].fader.fadeIn+"",pe=e[1].fader.fadeOut+"",he=e[1].eq.enable?"":"(已禁用)";return{c(){t=z("div"),t.innerHTML='位深<em class="svelte-s5zlk4">Float 32bit</em>',n=S(),s=z("div"),i=T("频率"),o=z("em"),o.textContent=Ti.audioCtx.sampleRate/1e3+" kHz",a=S(),l=z("div"),r=z("div"),r.textContent="增益",c=S(),u=z("em"),d=z("div"),f=T(ae),p=T(le),h=S(),m=z("div"),g=z("div"),g.textContent="平衡",v=S(),$=z("em"),y=z("div"),w=T(re),b=T(" ("),x=T(ce),k=T("/"),_=T(ue),L=T(")"),P=S(),D=z("div"),M=z("div"),M.textContent="延迟",R=S(),B=z("em"),V=z("div"),q=T(de),I=T("s"),F=S(),j=z("div"),H=z("div"),H.textContent="淡入淡出",W=S(),X=z("em"),Y=z("div"),G=T(fe),J=T("s / "),K=T(pe),Q=T("s"),Z=S(),ee=z("div"),te=z("div"),ne=T("均衡器 "),se=T(he),ie=S(),oe=z("canvas"),U(o,"class","svelte-s5zlk4"),U(r,"class","label svelte-s5zlk4"),U(d,"class","link svelte-s5zlk4"),U(u,"class","svelte-s5zlk4"),U(l,"class","Row pair svelte-s5zlk4"),U(g,"class","label svelte-s5zlk4"),U(y,"class","link svelte-s5zlk4"),U($,"class","svelte-s5zlk4"),U(m,"class","Row pair svelte-s5zlk4"),U(M,"class","label svelte-s5zlk4"),U(V,"class","link svelte-s5zlk4"),U(B,"class","svelte-s5zlk4"),U(D,"class","Row pair svelte-s5zlk4"),U(H,"class","label svelte-s5zlk4"),U(Y,"class","link svelte-s5zlk4"),U(X,"class","svelte-s5zlk4"),U(j,"class","Row pair svelte-s5zlk4"),U(te,"class","label svelte-s5zlk4"),O(te,"margin-top","8px"),O(oe,"align-self","flex-start"),U(oe,"id","eqCanvas"),U(oe,"width","180"),U(oe,"height","82"),U(oe,"class","svelte-s5zlk4"),U(ee,"class","Column pair svelte-s5zlk4")},m(A,z){E(A,t,z),E(A,n,z),E(A,s,z),C(s,i),C(s,o),E(A,a,z),E(A,l,z),C(l,r),C(l,c),C(l,u),C(u,d),C(d,f),C(d,p),E(A,h,z),E(A,m,z),C(m,g),C(m,v),C(m,$),C($,y),C(y,w),C(y,b),C(y,x),C(y,k),C(y,_),C(y,L),E(A,P,z),E(A,D,z),C(D,M),C(D,R),C(D,B),C(B,V),C(V,q),C(V,I),E(A,F,z),E(A,j,z),C(j,H),C(j,W),C(j,X),C(X,Y),C(Y,G),C(Y,J),C(Y,K),C(Y,Q),E(A,Z,z),E(A,ee,z),C(ee,te),C(te,ne),C(te,se),C(ee,ie),C(ee,oe),e[7](oe)},p(e,t){2&t&&ae!==(ae=e[1].gain.gain>1?"+":e[1].gain.gain<1?"-":"")&&N(f,ae),2&t&&le!==(le=e[1].gain.gain.toFixed(2)+"")&&N(p,le),2&t&&re!==(re=e[1].stereoPanner.pan.toFixed(2)+"")&&N(w,re),2&t&&ce!==(ce=((1-e[1].stereoPanner.pan)/2).toFixed(2)+"")&&N(x,ce),2&t&&ue!==(ue=((e[1].stereoPanner.pan+1)/2).toFixed(2)+"")&&N(_,ue),2&t&&de!==(de=e[1].delay.delayTime+"")&&N(q,de),2&t&&fe!==(fe=e[1].fader.fadeIn+"")&&N(G,fe),2&t&&pe!==(pe=e[1].fader.fadeOut+"")&&N(K,pe),2&t&&he!==(he=e[1].eq.enable?"":"(已禁用)")&&N(se,he)},d(i){i&&A(t),i&&A(n),i&&A(s),i&&A(a),i&&A(l),i&&A(h),i&&A(m),i&&A(P),i&&A(D),i&&A(F),i&&A(j),i&&A(Z),i&&A(ee),e[7](null)}}}function Io(t){return{c:e,m:e,p:e,d:e}}function Fo(t){let n,s,i,o,a,l,r,c,u=t[23].label+"";return{c(){n=z("div"),s=z("div"),s.textContent="设备",i=S(),o=z("em"),a=z("div"),l=T(u),U(s,"class","label svelte-s5zlk4"),U(a,"class","link svelte-s5zlk4"),U(o,"class","svelte-s5zlk4"),U(n,"class","Row pair svelte-s5zlk4")},m(e,u){E(e,n,u),C(n,s),C(n,i),C(n,o),C(o,a),C(a,l),r||(c=M(a,"click",t[8]),r=!0)},p:e,d(e){e&&A(n),r=!1,c()}}}function jo(t){return{c:e,m:e,p:e,d:e}}function Ho(e){let t,n={ctx:e,current:null,token:null,hasCatch:!1,pending:jo,then:Fo,catch:Io,value:23};return function(e,t){const n=t.token={};function s(e,s,i,o){if(t.token!==n)return;t.resolved=o;let a=t.ctx;void 0!==i&&(a=a.slice(),a[i]=o);const l=e&&(t.current=e)(a);let r=!1;t.block&&(t.blocks?t.blocks.forEach(((e,n)=>{n!==s&&e&&(ye(),xe(e,1,1,(()=>{t.blocks[n]===e&&(t.blocks[n]=null)})),we())})):t.block.d(1),l.c(),be(l,1),l.m(t.mount(),t.anchor),r=!0),t.block=l,t.blocks&&(t.blocks[s]=l),r&&pe()}if((i=e)&&"object"==typeof i&&"function"==typeof i.then){const n=X();if(e.then((e=>{W(n),s(t.then,1,t.value,e),W(null)}),(e=>{if(W(n),s(t.catch,2,t.error,e),W(null),!t.hasCatch)throw e})),t.current!==t.pending)return s(t.pending,0),!0}else{if(t.current!==t.then)return s(t.then,1,t.value,e),!0;t.resolved=e}var i}(e[5](),n),{c(){t=D(),n.block.c()},m(e,s){E(e,t,s),n.block.m(e,n.anchor=s),n.mount=()=>t.parentNode,n.anchor=t},p(t,s){!function(e,t,n){const s=t.slice(),{resolved:i}=e;e.current===e.then&&(s[e.value]=i),e.current===e.catch&&(s[e.error]=i),e.block.p(s,n)}(n,e=t,s)},d(e){e&&A(t),n.block.d(e),n.token=null,n=null}}}function Wo(e){let t,n,s,i,o,a,l;return n=new ti({props:{title:"输入",icon:"",$$slots:{default:[Vo]},$$scope:{ctx:e}}}),i=new ti({props:{title:"处理",$$slots:{default:[qo]},$$scope:{ctx:e}}}),a=new ti({props:{hideLine:!0,title:"输出",icon:"",$$slots:{default:[Ho]},$$scope:{ctx:e}}}),{c(){t=z("div"),Ae(n.$$.fragment),s=S(),Ae(i.$$.fragment),o=S(),Ae(a.$$.fragment),U(t,"class","Column"),O(t,"padding","12px 0")},m(e,r){E(e,t,r),Pe(n,t,null),C(t,s),Pe(i,t,null),C(t,o),Pe(a,t,null),l=!0},p(e,t){const s={};16777217&t&&(s.$$scope={dirty:t,ctx:e}),n.$set(s);const o={};16777234&t&&(o.$$scope={dirty:t,ctx:e}),i.$set(o);const l={};16777216&t&&(l.$$scope={dirty:t,ctx:e}),a.$set(l)},i(e){l||(be(n.$$.fragment,e),be(i.$$.fragment,e),be(a.$$.fragment,e),l=!0)},o(e){xe(n.$$.fragment,e),xe(i.$$.fragment,e),xe(a.$$.fragment,e),l=!1},d(e){e&&A(t),ze(n),ze(i),ze(a)}}}function Xo(e){let t,n,s,i,o,a,l,r,c,u,d,f,p,h,m,g,v,$;function y(t){e[10](t)}n=new wo({}),i=new Lo({}),a=new ko({}),c=new Po({});let w={clickable:!1,data:"开启均衡器",useAvatar:!1};function b(t){e[11](t)}void 0!==e[1].eq.enable&&(w.checked=e[1].eq.enable),f=new eo({props:w}),te.push((()=>Ee(f,"checked",y))),f.$on("toggle",e[6]);let x={};return void 0!==e[1].eq.enable&&(x.enable=e[1].eq.enable),g=new Ro({props:x}),te.push((()=>Ee(g,"enable",b))),{c(){t=z("div"),Ae(n.$$.fragment),s=S(),Ae(i.$$.fragment),o=S(),Ae(a.$$.fragment),l=S(),r=z("div"),Ae(c.$$.fragment),u=S(),d=z("div"),Ae(f.$$.fragment),h=S(),m=z("div"),Ae(g.$$.fragment),U(t,"class","tunnerCard svelte-s5zlk4"),U(r,"class","tunnerCard svelte-s5zlk4"),U(m,"class","Row"),U(d,"class","tunnerCard marginBottom svelte-s5zlk4")},m(e,p){E(e,t,p),Pe(n,t,null),C(t,s),Pe(i,t,null),C(t,o),Pe(a,t,null),E(e,l,p),E(e,r,p),Pe(c,r,null),E(e,u,p),E(e,d,p),Pe(f,d,null),C(d,h),C(d,m),Pe(g,m,null),$=!0},p(e,t){const n={};!p&&2&t&&(p=!0,n.checked=e[1].eq.enable,ce((()=>p=!1))),f.$set(n);const s={};!v&&2&t&&(v=!0,s.enable=e[1].eq.enable,ce((()=>v=!1))),g.$set(s)},i(e){$||(be(n.$$.fragment,e),be(i.$$.fragment,e),be(a.$$.fragment,e),be(c.$$.fragment,e),be(f.$$.fragment,e),be(g.$$.fragment,e),$=!0)},o(e){xe(n.$$.fragment,e),xe(i.$$.fragment,e),xe(a.$$.fragment,e),xe(c.$$.fragment,e),xe(f.$$.fragment,e),xe(g.$$.fragment,e),$=!1},d(e){e&&A(t),ze(n),ze(i),ze(a),e&&A(l),e&&A(r),ze(c),e&&A(u),e&&A(d),ze(f),ze(g)}}}function Yo(e){let t,n,s,i,o,a,l,r,c,u,d,f,p,h;return i=new $t({props:{$$slots:{default:[Wo]},$$scope:{ctx:e}}}),e[9](i),r=new $t({props:{$$slots:{default:[Xo]},$$scope:{ctx:e}}}),e[12](r),{c(){t=z("div"),n=z("div"),s=z("div"),Ae(i.$$.fragment),o=S(),a=z("div"),l=z("div"),Ae(r.$$.fragment),c=S(),u=z("div"),d=z("div"),d.textContent="完成",U(s,"class","Row"),O(s,"height","72vh"),O(s,"margin-left","12px"),U(n,"class","Column outerWindow tunnerPanel svelte-s5zlk4"),O(n,"width","300px"),U(l,"class","Column"),O(l,"height","calc(72vh - 48px)"),O(l,"width","100%"),O(l,"position","relative"),U(d,"class","btn big radius px4 accent"),U(u,"class","Row bottomGroup svelte-s5zlk4"),O(u,"padding","0 12px"),U(a,"class","Column outerWindow svelte-s5zlk4"),O(a,"height","100%"),O(a,"width","calc(72vw - 300px)"),U(t,"class","Row"),O(t,"height","72vh"),O(t,"width","72vw")},m(m,g){E(m,t,g),C(t,n),C(n,s),Pe(i,s,null),C(t,o),C(t,a),C(a,l),Pe(r,l,null),C(a,c),C(a,u),C(u,d),f=!0,p||(h=M(d,"click",e[13]),p=!0)},p(e,[t]){const n={};16777235&t&&(n.$$scope={dirty:t,ctx:e}),i.$set(n);const s={};16777218&t&&(s.$$scope={dirty:t,ctx:e}),r.$set(s)},i(e){f||(be(i.$$.fragment,e),be(r.$$.fragment,e),f=!0)},o(e){xe(i.$$.fragment,e),xe(r.$$.fragment,e),f=!1},d(n){n&&A(t),e[9](null),ze(i),e[12](null),ze(r),p=!1,h()}}}function Go(e,t,n){let s,i,o,a,l,r,c,u=globalPlayer.getMetadata()?.format,d=store.getSync("process");function f(e){n(0,u=e.format)}function p(e){n(1,d=e)}function h(){if(!d||!a)return;const e=d.eq;let t=0,n=0;a.clearRect(-1,-1,l+1,r+1),a.strokeStyle=c.getPropertyValue("--controlGray"),a.lineWidth=1,a.lineCap="miter",a.lineJoin="round",a.beginPath(),a.moveTo(0,41),a.lineTo(180,41),a.stroke(),a.closePath(),a.beginPath(),a.strokeStyle=c.getPropertyValue("--controlDark"),a.lineWidth=2,a.lineCap="round",a.lineJoin="round",d.eq.enable||(a.strokeStyle=c.getPropertyValue("--controlBlack")),t=41-2*e[31],a.moveTo(0,t),n=41-2*e[62],a.bezierCurveTo(10,t,10,n,20,n),t=n,n=41-2*e[125],a.bezierCurveTo(30,t,30,n,40,n),t=n,n=41-2*e[250],a.bezierCurveTo(50,t,50,n,60,n),t=n,n=41-2*e[500],a.bezierCurveTo(70,t,70,n,80,n),t=n,n=41-2*e[1e3],a.bezierCurveTo(90,t,90,n,100,n),t=n,n=41-2*e[2e3],a.bezierCurveTo(110,t,110,n,120,n),t=n,n=41-2*e[4e3],a.bezierCurveTo(130,t,130,n,140,n),t=n,n=41-2*e[8e3],a.bezierCurveTo(150,t,150,n,160,n),t=n,n=41-2*e[16e3],a.bezierCurveTo(170,t,170,n,180,n),a.stroke(),a.closePath()}Y((()=>{s.update(),i.update(),rem.on("metadata",f),rem.on("processUpdate",p)})),G((()=>{rem.off("metadata",f),rem.off("processUpdate",p)})),Y((()=>{a=o.getContext("2d"),r=o.height,l=o.width,c=getComputedStyle(document.body),a.translate(.5,.5),h(),rem.on("eqChange",(()=>h()))}));return[u,d,s,i,o,async function(){const e=await ki();return e[await xi(e)]},function({detail:e}){_i(e)},function(e){te[e?"unshift":"push"]((()=>{o=e,n(4,o)}))},()=>{window.rem.emit("tunnerClose"),window.Pager.openNew("设置",po)},function(e){te[e?"unshift":"push"]((()=>{s=e,n(2,s)}))},function(t){e.$$.not_equal(d.eq.enable,t)&&(d.eq.enable=t,n(1,d))},function(t){e.$$.not_equal(d.eq.enable,t)&&(d.eq.enable=t,n(1,d))},function(e){te[e?"unshift":"push"]((()=>{i=e,n(3,i)}))},()=>{window.rem.emit("tunnerClose")}]}class Jo extends Se{constructor(e){super(),Te(this,e,Go,Yo,l,{})}}function Ko(e){let t,n;return t=new Jo({}),{c(){Ae(t.$$.fragment)},m(e,s){Pe(t,e,s),n=!0},i(e){n||(be(t.$$.fragment,e),n=!0)},o(e){xe(t.$$.fragment,e),n=!1},d(e){ze(t,e)}}}function Qo(e){let t,n,s,i,o,a,l,r,c,d,m,g,v,$,y,w,b,x,k;function _(t){e[14](t)}function L(t){e[15](t)}function P(t){e[16](t)}function T(t){e[17](t)}let D={};function R(t){e[18](t)}function N(t){e[19](t)}function B(t){e[20](t)}void 0!==e[1]&&(D.display=e[1]),void 0!==e[2]&&(D.x=e[2]),void 0!==e[3]&&(D.y=e[3]),void 0!==e[4]&&(D.data=e[4]),n=new as({props:D}),te.push((()=>Ee(n,"display",_))),te.push((()=>Ee(n,"x",L))),te.push((()=>Ee(n,"y",P))),te.push((()=>Ee(n,"data",T)));let O={};function V(t){e[21](t)}void 0!==e[7]&&(O.enable=e[7]),void 0!==e[8]&&(O.active=e[8]),void 0!==e[6]&&(O.htmlElement=e[6]),r=new cs({props:O}),te.push((()=>Ee(r,"enable",R))),te.push((()=>Ee(r,"active",N))),te.push((()=>Ee(r,"htmlElement",B)));let q={shadowBlurRadius:24,noLayer:!1,$$slots:{default:[Ko]},$$scope:{ctx:e}};void 0!==e[9]&&(q.showPopupWindow=e[9]),v=new Vn({props:q}),te.push((()=>Ee(v,"showPopupWindow",V)));const I=e[13].default,F=u(I,e,e[24],null);return{c(){t=z("div"),Ae(n.$$.fragment),l=S(),Ae(r.$$.fragment),g=S(),Ae(v.$$.fragment),y=S(),F&&F.c(),U(t,"class",w="container "+(e[0]?"layer":"")+" svelte-eujq9c")},m(s,i){E(s,t,i),Pe(n,t,null),C(t,l),Pe(r,t,null),C(t,g),Pe(v,t,null),C(t,y),F&&F.m(t,null),e[23](t),b=!0,x||(k=M(t,"click",e[22]),x=!0)},p(e,[l]){const u={};!s&&2&l&&(s=!0,u.display=e[1],ce((()=>s=!1))),!i&&4&l&&(i=!0,u.x=e[2],ce((()=>i=!1))),!o&&8&l&&(o=!0,u.y=e[3],ce((()=>o=!1))),!a&&16&l&&(a=!0,u.data=e[4],ce((()=>a=!1))),n.$set(u);const g={};!c&&128&l&&(c=!0,g.enable=e[7],ce((()=>c=!1))),!d&&256&l&&(d=!0,g.active=e[8],ce((()=>d=!1))),!m&&64&l&&(m=!0,g.htmlElement=e[6],ce((()=>m=!1))),r.$set(g);const y={};16777216&l&&(y.$$scope={dirty:l,ctx:e}),!$&&512&l&&($=!0,y.showPopupWindow=e[9],ce((()=>$=!1))),v.$set(y),F&&F.p&&(!b||16777216&l)&&p(F,I,e,e[24],b?f(I,e[24],l,null):h(e[24]),null),(!b||1&l&&w!==(w="container "+(e[0]?"layer":"")+" svelte-eujq9c"))&&U(t,"class",w)},i(e){b||(be(n.$$.fragment,e),be(r.$$.fragment,e),be(v.$$.fragment,e),be(F,e),b=!0)},o(e){xe(n.$$.fragment,e),xe(r.$$.fragment,e),xe(v.$$.fragment,e),xe(F,e),b=!1},d(s){s&&A(t),ze(n),ze(r),ze(v),F&&F.d(s),e[23](null),x=!1,k()}}}function Zo(e,t,n){let{$$slots:s={},$$scope:i}=t,o=!1;const a=new Rn;function l(){n(0,o=!0)}function r(){n(0,o=!1),n(1,c=!1)}let c,u,d,f,p;function h(e,t,s){n(2,u=visualViewport.width-e>200?e:e-200),n(3,d=t);let i=[];for(const e of contextMap.keys())s.includes(e)&&i.push(contextMap.get(e));i.length&&(l(),n(4,f=i),n(1,c=!0))}a.on("active",l),a.on("disable",r),window.addEventListener("mousedown",(e=>{if(2===e.button){const{pageX:t,pageY:n,path:s}=e;if(c)return a.emit("disable"),requestIdleCallback((()=>h(t,n,s)));e.preventDefault(),h(t,n,s)}})),K("layerEvents",a);let m,g,v,$=new Proxy({click:!1,scroll:0,x:visualViewport.width/2,y:visualViewport.height/2,enable:g},{get:(e,t)=>e[t],set(e,t,s){switch(t){case"click":n(8,v=s),e[t]=s;break;case"enable":n(7,g=s),e[t]=s;break;case"x":n(6,m.style.left=s+"px",m),e[t]=s;break;case"y":n(6,m.style.top=s+"px",m),e[t]=s}return!0}});Y((async()=>{Bs.init($),Os.injectLayer(p);const e=await store.get("profile");e?Js(p,e):rem.on("logined",(e=>Js(p,e)))})),Y((()=>{Qs.inject(p),Ds.inject(p)}));let y=!1;rem.on("tunnerOpen",(()=>n(9,y=!0))),rem.on("tunnerClose",(()=>n(9,y=!1)));return e.$$set=e=>{"$$scope"in e&&n(24,i=e.$$scope)},[o,c,u,d,f,p,m,g,v,y,a,l,r,s,function(e){c=e,n(1,c)},function(e){u=e,n(2,u)},function(e){d=e,n(3,d)},function(e){f=e,n(4,f)},function(e){g=e,n(7,g)},function(e){v=e,n(8,v)},function(e){m=e,n(6,m)},function(e){y=e,n(9,y)},()=>a.emit("disable"),function(e){te[e?"unshift":"push"]((()=>{p=e,n(5,p)}))},i]}class ea extends Se{constructor(e){super(),Te(this,e,Zo,Qo,l,{activeLayer:11,disableLayer:12})}get activeLayer(){return this.$$.ctx[11]}get disableLayer(){return this.$$.ctx[12]}}function ta(e){let t,n;return t=new Dn({}),{c(){Ae(t.$$.fragment)},m(e,s){Pe(t,e,s),n=!0},i(e){n||(be(t.$$.fragment,e),n=!0)},o(e){xe(t.$$.fragment,e),n=!1},d(e){ze(t,e)}}}function na(t){let n,s,i,o;return{c(){n=z("div"),s=z("div"),s.textContent="  修改个人信息",U(s,"class","btn outlined"),O(n,"padding-left","56px"),O(n,"margin","8px 0px")},m(e,a){E(e,n,a),C(n,s),i||(o=M(s,"click",t[6]),i=!0)},p:e,d(e){e&&A(n),i=!1,o()}}}function sa(t){let n,s;return n=new Qn({props:{isUrl:!1,style:"font-size: small",size:"small",avatar:"",data:"登陆"}}),n.$on("click",t[4]),{c(){Ae(n.$$.fragment)},m(e,t){Pe(n,e,t),s=!0},p:e,i(e){s||(be(n.$$.fragment,e),s=!0)},o(e){xe(n.$$.fragment,e),s=!1},d(e){ze(n,e)}}}function ia(t){let n,s;return n=new Qn({props:{style:"font-size: small",isUrl:!1,size:"small",avatar:"",data:"注销"}}),n.$on("click",t[5]),{c(){Ae(n.$$.fragment)},m(e,t){Pe(n,e,t),s=!0},p:e,i(e){s||(be(n.$$.fragment,e),s=!0)},o(e){xe(n.$$.fragment,e),s=!1},d(e){ze(n,e)}}}function oa(e){let t,n,s,i,o,a,l,r,c,u,d,f,p,h,m,g,v,$;function y(t){e[8](t)}let w={$$slots:{default:[ta]},$$scope:{ctx:e}};void 0!==e[2]&&(w.showPopupWindow=e[2]),s=new Vn({props:w}),te.push((()=>Ee(s,"showPopupWindow",y))),s.$on("layerClick",e[3]),a=new Qn({props:{isUrl:e[0].avatarUrl,avatar:e[0].avatarUrl||"",data:e[0].name,width:28,height:28,clickable:!1}});let b=e[1]&&na(e);const x=[ia,sa],k=[];function _(e,t){return e[1]?0:1}return c=_(e),u=k[c]=x[c](e),p=new Qn({props:{isUrl:!1,style:"font-size: small",size:"small",avatar:"",data:"设置"}}),p.$on("click",e[7]),m=new Qn({props:{isUrl:!1,style:"font-size: small",size:"small",avatar:"",data:"下载管理"}}),{c(){t=z("div"),n=z("header"),Ae(s.$$.fragment),o=S(),Ae(a.$$.fragment),l=S(),b&&b.c(),r=S(),u.c(),d=S(),f=z("div"),Ae(p.$$.fragment),h=S(),Ae(m.$$.fragment),g=S(),v=z("footer"),v.textContent="REM",U(n,"class","row svelte-hqlcci"),U(f,"class","article row svelte-hqlcci"),U(v,"class","column svelte-hqlcci"),U(t,"class","row c svelte-hqlcci")},m(e,i){E(e,t,i),C(t,n),Pe(s,n,null),C(n,o),Pe(a,n,null),C(n,l),b&&b.m(n,null),C(n,r),k[c].m(n,null),C(t,d),C(t,f),Pe(p,f,null),C(f,h),Pe(m,f,null),C(t,g),C(t,v),$=!0},p(e,[t]){const o={};1024&t&&(o.$$scope={dirty:t,ctx:e}),!i&&4&t&&(i=!0,o.showPopupWindow=e[2],ce((()=>i=!1))),s.$set(o);const l={};1&t&&(l.isUrl=e[0].avatarUrl),1&t&&(l.avatar=e[0].avatarUrl||""),1&t&&(l.data=e[0].name),a.$set(l),e[1]?b?b.p(e,t):(b=na(e),b.c(),b.m(n,r)):b&&(b.d(1),b=null);let d=c;c=_(e),c===d?k[c].p(e,t):(ye(),xe(k[d],1,1,(()=>{k[d]=null})),we(),u=k[c],u?u.p(e,t):(u=k[c]=x[c](e),u.c()),be(u,1),u.m(n,null))},i(e){$||(be(s.$$.fragment,e),be(a.$$.fragment,e),be(u),be(p.$$.fragment,e),be(m.$$.fragment,e),$=!0)},o(e){xe(s.$$.fragment,e),xe(a.$$.fragment,e),xe(u),xe(p.$$.fragment,e),xe(m.$$.fragment,e),$=!1},d(e){e&&A(t),ze(s),ze(a),b&&b.d(),k[c].d(),ze(p),ze(m)}}}function aa(e,t,n){let s=Q("close"),{user:i}=t,o=!!i.avatarUrl,a=!1;return e.$$set=e=>{"user"in e&&n(0,i=e.user)},[i,o,a,async()=>{n(2,a=!1);const e=await store.get("profile");e&&(n(0,i={avatarUrl:e.avatarUrl,name:e.nickname}),n(1,o=!!i.avatarUrl))},()=>{n(2,a=!0)},function(){NeteaseApi.logout(),store.rm("profile"),store.rm("token"),n(0,i={avatarUrl:"",name:"未登录"}),n(1,o=!!i.avatarUrl)},()=>{s(),Xs.display(!0)},function(){s(),Pager.openNew("设置",po,{})},function(e){a=e,n(2,a)}]}class la extends Se{constructor(e){super(),Te(this,e,aa,oa,l,{user:0})}}function ra(e,t,n){const s=e.slice();return s[23]=t[n],s[33]=n,s}function ca(e,t,n){const s=e.slice();return s[23]=t[n],s}function ua(e,t,n){const s=e.slice();return s[23]=t[n],s}function da(e,t,n){const s=e.slice();return s[23]=t[n],s}function fa(e,t,n){const s=e.slice();return s[23]=t[n],s}function pa(e){let t,n,s;function i(t){e[14](t)}let o={};return void 0!==e[2]&&(o.user=e[2]),t=new la({props:o}),te.push((()=>Ee(t,"user",i))),{c(){Ae(t.$$.fragment)},m(e,n){Pe(t,e,n),s=!0},p(e,s){const i={};!n&&4&s[0]&&(n=!0,i.user=e[2],ce((()=>n=!1))),t.$set(i)},i(e){s||(be(t.$$.fragment,e),s=!0)},o(e){xe(t.$$.fragment,e),s=!1},d(e){ze(t,e)}}}function ha(e){let t,n,s=e[5],i=[];for(let t=0;t<s.length;t+=1)i[t]=ga(ra(e,s,t));const o=e=>xe(i[e],1,1,(()=>{i[e]=null}));return{c(){for(let e=0;e<i.length;e+=1)i[e].c();t=D()},m(e,s){for(let t=0;t<i.length;t+=1)i[t].m(e,s);E(e,t,s),n=!0},p(e,n){if(552&n[0]){let a;for(s=e[5],a=0;a<s.length;a+=1){const o=ra(e,s,a);i[a]?(i[a].p(o,n),be(i[a],1)):(i[a]=ga(o),i[a].c(),be(i[a],1),i[a].m(t.parentNode,t))}for(ye(),a=s.length;a<i.length;a+=1)o(a);we()}},i(e){if(!n){for(let e=0;e<s.length;e+=1)be(i[e]);n=!0}},o(e){i=i.filter(Boolean);for(let e=0;e<i.length;e+=1)xe(i[e]);n=!1},d(e){P(i,e),e&&A(t)}}}function ma(e){let t,n,s,i,o,a=e[6].songs&&va(e),l=e[6].artists&&ya(e),r=e[6].albums&&ba(e),c=e[6].playlists&&ka(e);return{c(){a&&a.c(),t=S(),l&&l.c(),n=S(),r&&r.c(),s=S(),c&&c.c(),i=D()},m(e,u){a&&a.m(e,u),E(e,t,u),l&&l.m(e,u),E(e,n,u),r&&r.m(e,u),E(e,s,u),c&&c.m(e,u),E(e,i,u),o=!0},p(e,o){e[6].songs?a?(a.p(e,o),64&o[0]&&be(a,1)):(a=va(e),a.c(),be(a,1),a.m(t.parentNode,t)):a&&(ye(),xe(a,1,1,(()=>{a=null})),we()),e[6].artists?l?(l.p(e,o),64&o[0]&&be(l,1)):(l=ya(e),l.c(),be(l,1),l.m(n.parentNode,n)):l&&(ye(),xe(l,1,1,(()=>{l=null})),we()),e[6].albums?r?(r.p(e,o),64&o[0]&&be(r,1)):(r=ba(e),r.c(),be(r,1),r.m(s.parentNode,s)):r&&(ye(),xe(r,1,1,(()=>{r=null})),we()),e[6].playlists?c?(c.p(e,o),64&o[0]&&be(c,1)):(c=ka(e),c.c(),be(c,1),c.m(i.parentNode,i)):c&&(ye(),xe(c,1,1,(()=>{c=null})),we())},i(e){o||(be(a),be(l),be(r),be(c),o=!0)},o(e){xe(a),xe(l),xe(r),xe(c),o=!1},d(e){a&&a.d(e),e&&A(t),l&&l.d(e),e&&A(n),r&&r.d(e),e&&A(s),c&&c.d(e),e&&A(i)}}}function ga(e){let t,n;return t=new Qn({props:{size:"small",data:e[23],isUrl:!1,avatar:e[33]+1}}),t.$on("mousedown",(function(){return e[19](e[23])})),{c(){Ae(t.$$.fragment)},m(e,s){Pe(t,e,s),n=!0},p(n,s){e=n;const i={};32&s[0]&&(i.data=e[23]),t.$set(i)},i(e){n||(be(t.$$.fragment,e),n=!0)},o(e){xe(t.$$.fragment,e),n=!1},d(e){ze(t,e)}}}function va(e){let t,n,s,i,o=e[6].songs,a=[];for(let t=0;t<o.length;t+=1)a[t]=$a(fa(e,o,t));const l=e=>xe(a[e],1,1,(()=>{a[e]=null}));return{c(){t=z("div"),t.textContent="歌曲",n=S();for(let e=0;e<a.length;e+=1)a[e].c();s=D(),U(t,"class","title svelte-1ewfxbv")},m(e,o){E(e,t,o),E(e,n,o);for(let t=0;t<a.length;t+=1)a[t].m(e,o);E(e,s,o),i=!0},p(e,t){if(584&t[0]){let n;for(o=e[6].songs,n=0;n<o.length;n+=1){const i=fa(e,o,n);a[n]?(a[n].p(i,t),be(a[n],1)):(a[n]=$a(i),a[n].c(),be(a[n],1),a[n].m(s.parentNode,s))}for(ye(),n=o.length;n<a.length;n+=1)l(n);we()}},i(e){if(!i){for(let e=0;e<o.length;e+=1)be(a[e]);i=!0}},o(e){a=a.filter(Boolean);for(let e=0;e<a.length;e+=1)xe(a[e]);i=!1},d(e){e&&A(t),e&&A(n),P(a,e),e&&A(s)}}}function $a(e){let t,n;return t=new Qn({props:{size:"small",data:e[23].name,isUrl:!1,avatar:""}}),t.$on("mousedown",(function(){return e[15](e[23])})),{c(){Ae(t.$$.fragment)},m(e,s){Pe(t,e,s),n=!0},p(n,s){e=n;const i={};64&s[0]&&(i.data=e[23].name),t.$set(i)},i(e){n||(be(t.$$.fragment,e),n=!0)},o(e){xe(t.$$.fragment,e),n=!1},d(e){ze(t,e)}}}function ya(e){let t,n,s,i,o,a,l=e[6].artists,r=[];for(let t=0;t<l.length;t+=1)r[t]=wa(da(e,l,t));const c=e=>xe(r[e],1,1,(()=>{r[e]=null}));return{c(){t=z("div"),n=S(),s=z("div"),s.textContent="艺术家",i=S();for(let e=0;e<r.length;e+=1)r[e].c();o=D(),U(t,"class","divider"),U(s,"class","title svelte-1ewfxbv")},m(e,l){E(e,t,l),E(e,n,l),E(e,s,l),E(e,i,l);for(let t=0;t<r.length;t+=1)r[t].m(e,l);E(e,o,l),a=!0},p(e,t){if(584&t[0]){let n;for(l=e[6].artists,n=0;n<l.length;n+=1){const s=da(e,l,n);r[n]?(r[n].p(s,t),be(r[n],1)):(r[n]=wa(s),r[n].c(),be(r[n],1),r[n].m(o.parentNode,o))}for(ye(),n=l.length;n<r.length;n+=1)c(n);we()}},i(e){if(!a){for(let e=0;e<l.length;e+=1)be(r[e]);a=!0}},o(e){r=r.filter(Boolean);for(let e=0;e<r.length;e+=1)xe(r[e]);a=!1},d(e){e&&A(t),e&&A(n),e&&A(s),e&&A(i),P(r,e),e&&A(o)}}}function wa(e){let t,n;return t=new Qn({props:{size:"small",data:e[23].name,isUrl:!0,avatar:e[23].img1v1Url,width:24,height:24}}),t.$on("mousedown",(function(){return e[16](e[23])})),{c(){Ae(t.$$.fragment)},m(e,s){Pe(t,e,s),n=!0},p(n,s){e=n;const i={};64&s[0]&&(i.data=e[23].name),64&s[0]&&(i.avatar=e[23].img1v1Url),t.$set(i)},i(e){n||(be(t.$$.fragment,e),n=!0)},o(e){xe(t.$$.fragment,e),n=!1},d(e){ze(t,e)}}}function ba(e){let t,n,s,i,o,a,l=e[6].albums,r=[];for(let t=0;t<l.length;t+=1)r[t]=xa(ua(e,l,t));const c=e=>xe(r[e],1,1,(()=>{r[e]=null}));return{c(){t=z("div"),n=S(),s=z("div"),s.textContent="专辑",i=S();for(let e=0;e<r.length;e+=1)r[e].c();o=D(),U(t,"class","divider"),U(s,"class","title svelte-1ewfxbv")},m(e,l){E(e,t,l),E(e,n,l),E(e,s,l),E(e,i,l);for(let t=0;t<r.length;t+=1)r[t].m(e,l);E(e,o,l),a=!0},p(e,t){if(584&t[0]){let n;for(l=e[6].albums,n=0;n<l.length;n+=1){const s=ua(e,l,n);r[n]?(r[n].p(s,t),be(r[n],1)):(r[n]=xa(s),r[n].c(),be(r[n],1),r[n].m(o.parentNode,o))}for(ye(),n=l.length;n<r.length;n+=1)c(n);we()}},i(e){if(!a){for(let e=0;e<l.length;e+=1)be(r[e]);a=!0}},o(e){r=r.filter(Boolean);for(let e=0;e<r.length;e+=1)xe(r[e]);a=!1},d(e){e&&A(t),e&&A(n),e&&A(s),e&&A(i),P(r,e),e&&A(o)}}}function xa(e){let t,n;return t=new Qn({props:{size:"small",data:e[23].name,isUrl:!1,avatar:" "}}),t.$on("mousedown",(function(){return e[17](e[23])})),{c(){Ae(t.$$.fragment)},m(e,s){Pe(t,e,s),n=!0},p(n,s){e=n;const i={};64&s[0]&&(i.data=e[23].name),t.$set(i)},i(e){n||(be(t.$$.fragment,e),n=!0)},o(e){xe(t.$$.fragment,e),n=!1},d(e){ze(t,e)}}}function ka(e){let t,n,s,i,o,a,l=e[6].playlists,r=[];for(let t=0;t<l.length;t+=1)r[t]=Ca(ca(e,l,t));const c=e=>xe(r[e],1,1,(()=>{r[e]=null}));return{c(){t=z("div"),n=S(),s=z("div"),s.textContent="歌单",i=S();for(let e=0;e<r.length;e+=1)r[e].c();o=D(),U(t,"class","divider"),U(s,"class","title svelte-1ewfxbv")},m(e,l){E(e,t,l),E(e,n,l),E(e,s,l),E(e,i,l);for(let t=0;t<r.length;t+=1)r[t].m(e,l);E(e,o,l),a=!0},p(e,t){if(584&t[0]){let n;for(l=e[6].playlists,n=0;n<l.length;n+=1){const s=ca(e,l,n);r[n]?(r[n].p(s,t),be(r[n],1)):(r[n]=Ca(s),r[n].c(),be(r[n],1),r[n].m(o.parentNode,o))}for(ye(),n=l.length;n<r.length;n+=1)c(n);we()}},i(e){if(!a){for(let e=0;e<l.length;e+=1)be(r[e]);a=!0}},o(e){r=r.filter(Boolean);for(let e=0;e<r.length;e+=1)xe(r[e]);a=!1},d(e){e&&A(t),e&&A(n),e&&A(s),e&&A(i),P(r,e),e&&A(o)}}}function Ca(e){let t,n;return t=new Qn({props:{size:"small",data:e[23].name,isUrl:!0,avatar:e[23].coverImgUrl,width:24,height:24}}),t.$on("mousedown",(function(){return e[18](e[23])})),{c(){Ae(t.$$.fragment)},m(e,s){Pe(t,e,s),n=!0},p(n,s){e=n;const i={};64&s[0]&&(i.data=e[23].name),64&s[0]&&(i.avatar=e[23].coverImgUrl),t.$set(i)},i(e){n||(be(t.$$.fragment,e),n=!0)},o(e){xe(t.$$.fragment,e),n=!1},d(e){ze(t,e)}}}function _a(e){let t,n,s,i;const o=[ma,ha],a=[];function l(e,t){return e[6]?0:1}return t=l(e),n=a[t]=o[t](e),{c(){n.c(),s=D()},m(e,n){a[t].m(e,n),E(e,s,n),i=!0},p(e,i){let r=t;t=l(e),t===r?a[t].p(e,i):(ye(),xe(a[r],1,1,(()=>{a[r]=null})),we(),n=a[t],n?n.p(e,i):(n=a[t]=o[t](e),n.c()),be(n,1),n.m(s.parentNode,s))},i(e){i||(be(n),i=!0)},o(e){xe(n),i=!1},d(e){a[t].d(e),e&&A(s)}}}function La(e){let t,n,s,i,a,l,r,c,u,d,f,p,h,m,g;return c=new Xe({props:{size:"big",isUrl:e[0],avatar:e[0]||"",width:32,height:32}}),c.$on("click",e[7]),d=new Vn({props:{showPopupWindow:e[1],cssText:"position: absolute; top: 64px; overflow: hidden;",$$slots:{default:[pa]},$$scope:{ctx:e}}}),d.$on("layerClick",e[8]),d.$on("animIn",Ea),p=new Vn({props:{noLayer:!0,showPopupWindow:e[4],cssText:"position: fixed; top: 56px; width: 360px; overflow: hidden; max-height: calc(100vh - 148px); min-height: 0; background-color: var(--controlWhite);",$$slots:{default:[_a]},$$scope:{ctx:e}}}),p.$on("layerClick",e[20]),{c(){t=z("div"),n=z("div"),s=z("span"),i=S(),a=z("input"),l=S(),r=z("div"),Ae(c.$$.fragment),u=S(),Ae(d.$$.fragment),f=S(),Ae(p.$$.fragment),U(s,"class","iconfont icon-search avatar menu svelte-1ewfxbv"),U(a,"type","text"),U(a,"class","input svelte-1ewfxbv"),U(a,"placeholder","搜索歌曲和歌手"),U(a,"spellcheck","false"),U(r,"class","avatar-container svelte-1ewfxbv"),U(n,"class","column search svelte-1ewfxbv"),U(t,"class","column svelte-1ewfxbv"),O(t,"margin-left","48px"),O(t,"-webkit-app-region","no-drag")},m(o,v){E(o,t,v),C(t,n),C(n,s),C(n,i),C(n,a),B(a,e[3]),C(n,l),C(n,r),Pe(c,r,null),C(t,u),Pe(d,t,null),C(t,f),Pe(p,t,null),h=!0,m||(g=[M(s,"click",e[9]),M(a,"input",e[12]),M(a,"change",e[9]),M(a,"focus",e[10]),M(a,"blur",e[13]),M(a,"input",e[11])],m=!0)},p(e,t){8&t[0]&&a.value!==e[3]&&B(a,e[3]);const n={};1&t[0]&&(n.isUrl=e[0]),1&t[0]&&(n.avatar=e[0]||""),c.$set(n);const s={};2&t[0]&&(s.showPopupWindow=e[1]),4&t[0]|8&t[1]&&(s.$$scope={dirty:t,ctx:e}),d.$set(s);const i={};16&t[0]&&(i.showPopupWindow=e[4]),104&t[0]|8&t[1]&&(i.$$scope={dirty:t,ctx:e}),p.$set(i)},i(e){h||(be(c.$$.fragment,e),be(d.$$.fragment,e),be(p.$$.fragment,e),h=!0)},o(e){xe(c.$$.fragment,e),xe(d.$$.fragment,e),xe(p.$$.fragment,e),h=!1},d(e){e&&A(t),ze(c),ze(d),ze(p),m=!1,o(g)}}}function Ea(e){e.detail.animate({transform:["translate(-20px, -32px) scale(0.9)","translate(0px, 0px) scale(1)"],opacity:[0,1]},100)}function Aa(e,t,n){let s=!1;let i=store.getSync("profile"),o={avatarUrl:"",name:"未登录"},{avatarUrl:a=(i?i.avatarUrl:"")}=t;async function l(){i&&n(2,o={avatarUrl:i.avatarUrl,name:i.nickname}),n(0,a=i?i.avatarUrl:"")}l(),rem.on("__updateLoginAvatar",(async()=>{i=await store.get("profile"),l()}));let r,c,u=!1,d=[];async function f(){await NeteaseApi.search(r)}return e.$$set=e=>{"avatarUrl"in e&&n(0,a=e.avatarUrl)},[a,s,o,r,u,d,c,()=>n(1,s=!0),async()=>{n(1,s=!1);const e=await store.get("profile");e&&n(2,o={avatarUrl:e.avatarUrl,name:e.nickname}),n(0,a=e?e.avatarUrl:"")},f,async function(){n(5,d=(await NeteaseApi.search()).body.result.hots.reduce(((e,t)=>[...e,t.first]),[])),n(4,u=!0)},async function(){if(!r)return n(6,c=null);const e=(await NeteaseApi.suggest(r)).body.result;console.log(e),Object.keys(e).length&&n(6,c=e)},function(){r=this.value,n(3,r)},()=>setTimeout((()=>n(4,u=!1))),function(e){o=e,n(2,o)},e=>{n(3,r=`${e.name}`),f()},e=>{n(3,r=`${e.name}`),f()},e=>{n(3,r=`${e.name}`),f()},e=>{n(3,r=`${e.name}`),f()},e=>{n(3,r=e),f()},()=>n(4,u=!1)]}class Pa extends Se{constructor(e){super(),Te(this,e,Aa,La,l,{avatarUrl:0},null,[-1,-1])}}function za(e){let t,n,s,i,o,a,l,r,u,d,f,p,h,m,g,v,$,y,w,b,x,k;function _(t){e[9](t)}function L(t){e[10](t)}r=new Pa({});let P={};void 0!==e[0]&&(P.selected=e[0]),void 0!==e[1]&&(P.tabs=e[1]),d=new Ie({props:P}),te.push((()=>Ee(d,"selected",_))),te.push((()=>Ee(d,"tabs",L)));return g=new ft({props:{}}),e[11](g),$=new at({}),w=new ea({}),x=new yn({}),{c(){t=z("div"),n=z("img"),i=S(),o=z("div"),a=z("div"),l=z("div"),Ae(r.$$.fragment),u=S(),Ae(d.$$.fragment),m=S(),Ae(g.$$.fragment),v=S(),Ae($.$$.fragment),y=S(),Ae(w.$$.fragment),b=S(),Ae(x.$$.fragment),U(n,"class","wallpaper svelte-b18196"),c(n.src,s=e[3])||U(n,"src",s),U(n,"alt",""),U(n,"width",e[5]),O(l,"width","100vw"),O(l,"height","54px"),O(l,"justify-content","center"),O(l,"-webkit-app-region","drag"),U(l,"class","Row"),U(a,"class",h="row head"+(e[7]?" color":"")+(e[4]?"":" noneAcrylic")+" svelte-b18196"),U(o,"class","row window svelte-b18196"),O(t,"transition","background-color 0.2s"),O(t,"background-color","var("+(e[4]?"--acrylicBackgroundColor":"--noneAcrylicBackgroundColor")+")")},m(s,c){E(s,t,c),C(t,n),e[8](n),C(t,i),C(t,o),C(o,a),C(a,l),Pe(r,l,null),C(a,u),Pe(d,a,null),C(o,m),Pe(g,o,null),C(o,v),Pe($,o,null),C(t,y),Pe(w,t,null),E(s,b,c),Pe(x,s,c),k=!0},p(e,[i]){(!k||8&i&&!c(n.src,s=e[3]))&&U(n,"src",s),(!k||32&i)&&U(n,"width",e[5]);const o={};!f&&1&i&&(f=!0,o.selected=e[0],ce((()=>f=!1))),!p&&2&i&&(p=!0,o.tabs=e[1],ce((()=>p=!1))),d.$set(o),(!k||144&i&&h!==(h="row head"+(e[7]?" color":"")+(e[4]?"":" noneAcrylic")+" svelte-b18196"))&&U(a,"class",h);g.$set({}),(!k||16&i)&&O(t,"background-color","var("+(e[4]?"--acrylicBackgroundColor":"--noneAcrylicBackgroundColor")+")")},i(e){k||(be(r.$$.fragment,e),be(d.$$.fragment,e),be(g.$$.fragment,e),be($.$$.fragment,e),be(w.$$.fragment,e),be(x.$$.fragment,e),k=!0)},o(e){xe(r.$$.fragment,e),xe(d.$$.fragment,e),xe(g.$$.fragment,e),xe($.$$.fragment,e),xe(w.$$.fragment,e),xe(x.$$.fragment,e),k=!1},d(n){n&&A(t),e[8](null),ze(r),ze(d),e[11](null),ze(g),ze($),ze(w),n&&A(b),ze(x,n)}}}function Ta(){return new Promise((e=>{hooks.once("win:bounds",((t,n)=>{e(n)})),hooks.send("winquery:bounds")}))}function Sa(e,t,n){let s=fn;store.getSync("profile")?store.get("cookie").then((e=>NeteaseApi.checkIn(e))):s=Dn;let i,o=-1,a=[s,hn],l=["我的","发现"];window.Pager=(()=>{let e=[{},{}],t=[0],s=(new Map).set("我的",{}).set("发现",{}),r=[];function c(t,i,o={},r=!1){if(p(t)){if(r){const n=l.indexOf(t);return a[n]=i,e[n]=o,!1}return!0}return a.push(i),l.push(t),n(1,l),e.push(o),s.set(t,{}),!0}function u(s,c=!1){(s<0||s>=l.length)&&(s=0);let u=e[s];"function"==typeof u&&(u=u.call(null)),(o!==s||c)&&(r.forEach((e=>e.call(null))),r=[],t[s]=l[o],i.display(a[s],u),n(0,o=s))}function d(e,t=!1){"number"!=typeof e&&(e=l.indexOf(e)),u(e,t)}function f(i){(i<0||i>=l.length)&&(i=0),s.delete(l[o]),r=[],a=a.slice(0,i).concat(a.slice(i+1)),n(1,l=l.slice(0,i).concat(l.slice(i+1)));let c="function"==typeof e[i]?e[i]().onTabDestroy:e[i].onTabDestroy;e=e.slice(0,i).concat(e.slice(i+1)),"function"==typeof c&&c(i),function(){let e=l.indexOf(t[o]);!~e&&(e=0),u(e,!0)}()}function p(e){return"string"==typeof e?~l.indexOf(e):~a.indexOf(e)}return{add:c,select:d,remove:function(e){"number"!=typeof e&&(e=l.indexOf(e)),f(e)},has:p,openNew:async function(e,t,n,s=!1){if(c(e,t,n,s))return d(e);d(e,!0)},getContext:function(){const t=a[o],n=l[o];return{name:n,class:t,props:e[o],save:s.get(n)}},beforeSwitch:function(e){r.push(e)},size:function(){return l.length},index:function(){return o},removeByIndex:e=>{e>1&&f(e)}}})();let r,c=store.getSync("sys-settings"),u=!1;!async function(){n(3,r=await async function(){let e=await wallpaper.getWallpaper(),t="";return t="string"==typeof e?e:URL.createObjectURL(new Blob([e])),t}())}(),rem.on("__openMinePage",(()=>{window.Pager.openNew("我的",fn,{},!0)})),window.__changeBgPos=p,hooks.on("win:screen-move",((e,t,n)=>{d&&(d.style.setProperty("--top",n),d.style.setProperty("--left",t))})),hooks.on("win:max",(()=>p(0,0))),hooks.on("win:unmax",((e,t)=>{p(t[0],t[1])})),hooks.send("winbind:move");let d,f=1080;function p(e,t){u&&d&&(d.style.setProperty("--top",t),d.style.setProperty("--left",e))}(async()=>{let e=await Ta(),t=await new Promise((e=>{hooks.once("win:screenSize",((t,n)=>{e(n)})),hooks.send("winquery:screenSize")}));window.Pager.select(0),n(5,f=t.width),p(e.x,e.y)})(),rem.on("useAcrylic",(e=>{document.body.style.setProperty("--dynamicControlLight",e?"var(--acrylicBackgroundColor)":"var(--controlBrighter)")})),rem.on("playerReady",(()=>{__setColor(document.body,d,1),requestIdleCallback((()=>{hooks.send("win:show-main")}))})),rem.on("changeControlColor",(e=>{document.body.style.setProperty("--controlHue",e)})),rem.on("useAcrylic",(async e=>{if(c.theme.useAcrylic=n(4,u=e),e){let e=await Ta();p(e.x,e.y)}store.set("sys-settings",c)})),c||(c={theme:{controlColor:[2,39,148,210,270,292,322],useAcrylic:!1},beta:{showDevTools:!1},quality:{dataList:["低","中","高","最佳"],selected:3}},store.set("sys-settings",c));let h=c.theme.controlColor.slice(1),m=c.theme.controlColor[0];rem.emit("changeControlColor",h[m]),rem.emit("useAcrylic",c.theme.useAcrylic);let g=!1;return rem.on("__pageFold",(()=>{n(7,g=!0)})),rem.on("__pageUnfold",(()=>{n(7,g=!1)})),[o,l,i,r,u,f,d,g,function(e){te[e?"unshift":"push"]((()=>{d=e,n(6,d)}))},function(e){o=e,n(0,o)},function(e){l=e,n(1,l)},function(e){te[e?"unshift":"push"]((()=>{i=e,n(2,i)}))}]}let Da=new Map;const Ma={async get(e){if(Da.has(e))return Da.get(e);let t=null,n=await hooks.invoke("store:get",e);try{t=JSON.parse(n)}catch(e){t=n}return null!=t?(Da.set(e,t),t):void 0},getSync(e){if(Da.has(e))return Da.get(e);let t=null,n=hooks.sendSync("store:getSync",e);try{t=JSON.parse(n)}catch(e){t=n}return null!=t?(Da.set(e,t),t):void 0},set:async(e,t)=>(Da.set(e,t),await hooks.invoke("store:set",e,"string"==typeof t?t:JSON.stringify(t))),setCache(e,t){Da.set(e,t)},rm:async e=>(Da.has(e)&&Da.delete(e),await hooks.invoke("store:rm",e)),clear(){for(const e of Da.keys())this.rm(e)}};return window.store=Ma,window.rem=new Rn({captureRejections:!0}),window.contextMap=new Map,rem.isBeta=!0,hooks.on("online",(()=>Qs.setMessage("网络已恢复").display())),hooks.on("offline",(()=>Qs.setMessage("网络连接出现问题").display())),Ci(),rem.on("audioDeviceChange",(async e=>{for(const t of e)if(t.deviceId===wi)return;bi("default")})),(si=store.getSync("process"))||(si={delay:{delayTime:.1},gain:{gain:1},stereoPanner:{pan:0},fader:{fadeIn:.2,fadeOut:.2},eq:{enable:!0,31:0,62:0,125:0,250:0,500:0,1e3:0,2e3:0,4e3:0,8e3:0,16e3:0}},Ei()),oi.delayTime.value=si.delay.delayTime,ai.gain.linearRampToValueAtTime(si.gain.gain,ii.currentTime),ri.pan.value=si.stereoPanner.pan,new class extends Se{constructor(e){super(),Te(this,e,Sa,za,l,{})}}({target:document.body})}();
