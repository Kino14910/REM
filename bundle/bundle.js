var app=function(){"use strict";function e(){}const t=e=>e;function n(e,t){for(const n in t)e[n]=t[n];return e}function s(e){return e()}function i(){return Object.create(null)}function o(e){e.forEach(s)}function a(e){return"function"==typeof e}function l(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}let r;function c(e,t){return r||(r=document.createElement("a")),r.href=t,e===r.href}function u(e,t,n,s){if(e){const i=d(e,t,n,s);return e[0](i)}}function d(e,t,s,i){return e[1]&&i?n(s.ctx.slice(),e[1](i(t))):s.ctx}function p(e,t,n,s){if(e[2]&&s){const i=e[2](s(n));if(void 0===t.dirty)return i;if("object"==typeof i){const e=[],n=Math.max(t.dirty.length,i.length);for(let s=0;s<n;s+=1)e[s]=t.dirty[s]|i[s];return e}return t.dirty|i}return t.dirty}function f(e,t,n,s,i,o){if(i){const a=d(t,n,s,o);e.p(a,i)}}function h(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let e=0;e<n;e++)t[e]=-1;return t}return-1}function m(e){const t={};for(const n in e)"$"!==n[0]&&(t[n]=e[n]);return t}function g(e){return null==e?"":e}function $(t){return t&&a(t.destroy)?t.destroy:e}const v="undefined"!=typeof window;let y=v?()=>window.performance.now():()=>Date.now(),w=v?e=>requestAnimationFrame(e):e;const b=new Set;function x(e){b.forEach((t=>{t.c(e)||(b.delete(t),t.f())})),0!==b.size&&w(x)}function k(e){let t;return 0===b.size&&w(x),{promise:new Promise((n=>{b.add(t={c:e,f:n})})),abort(){b.delete(t)}}}function _(e,t){e.appendChild(t)}function C(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function L(e){const t=S("style");return function(e,t){_(e.head||e,t)}(C(e),t),t.sheet}function E(e,t,n){e.insertBefore(t,n||null)}function P(e){e.parentNode.removeChild(e)}function A(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function S(e){return document.createElement(e)}function z(e){return document.createTextNode(e)}function T(){return z(" ")}function M(){return z("")}function R(e,t,n,s){return e.addEventListener(t,n,s),()=>e.removeEventListener(t,n,s)}function D(e){return function(t){return t.stopPropagation(),e.call(this,t)}}function N(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function U(e){return""===e?null:+e}function q(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function V(e,t){e.value=null==t?"":t}function B(e,t,n,s){null===n?e.style.removeProperty(t):e.style.setProperty(t,n,s?"important":"")}function O(e,t,{bubbles:n=!1,cancelable:s=!1}={}){const i=document.createEvent("CustomEvent");return i.initCustomEvent(e,n,s,t),i}const F=new Map;let I,W=0;function j(e,t,n,s,i,o,a,l=0){const r=16.666/s;let c="{\n";for(let e=0;e<=1;e+=r){const s=t+(n-t)*o(e);c+=100*e+`%{${a(s,1-s)}}\n`}const u=c+`100% {${a(n,1-n)}}\n}`,d=`__svelte_${function(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}(u)}_${l}`,p=C(e),{stylesheet:f,rules:h}=F.get(p)||function(e,t){const n={stylesheet:L(t),rules:{}};return F.set(e,n),n}(p,e);h[d]||(h[d]=!0,f.insertRule(`@keyframes ${d} ${u}`,f.cssRules.length));const m=e.style.animation||"";return e.style.animation=`${m?`${m}, `:""}${d} ${s}ms linear ${i}ms 1 both`,W+=1,d}function H(e,t){const n=(e.style.animation||"").split(", "),s=n.filter(t?e=>e.indexOf(t)<0:e=>-1===e.indexOf("__svelte")),i=n.length-s.length;i&&(e.style.animation=s.join(", "),W-=i,W||w((()=>{W||(F.forEach((e=>{const{stylesheet:t}=e;let n=t.cssRules.length;for(;n--;)t.deleteRule(n);e.rules={}})),F.clear())})))}function X(e){I=e}function Y(){if(!I)throw new Error("Function called outside component initialization");return I}function G(e){Y().$$.on_mount.push(e)}function J(e){Y().$$.after_update.push(e)}function Q(e){Y().$$.on_destroy.push(e)}function K(){const e=Y();return(t,n,{cancelable:s=!1}={})=>{const i=e.$$.callbacks[t];if(i){const o=O(t,n,{cancelable:s});return i.slice().forEach((t=>{t.call(e,o)})),!o.defaultPrevented}return!0}}function Z(e,t){return Y().$$.context.set(e,t),t}function ee(e){return Y().$$.context.get(e)}function te(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach((e=>e.call(this,t)))}const ne=[],se=[],ie=[],oe=[],ae=Promise.resolve();let le=!1;function re(){le||(le=!0,ae.then(me))}function ce(){return re(),ae}function ue(e){ie.push(e)}function de(e){oe.push(e)}const pe=new Set;let fe,he=0;function me(){const e=I;do{for(;he<ne.length;){const e=ne[he];he++,X(e),ge(e.$$)}for(X(null),ne.length=0,he=0;se.length;)se.pop()();for(let e=0;e<ie.length;e+=1){const t=ie[e];pe.has(t)||(pe.add(t),t())}ie.length=0}while(ne.length);for(;oe.length;)oe.pop()();le=!1,pe.clear(),X(e)}function ge(e){if(null!==e.fragment){e.update(),o(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(ue)}}function $e(){return fe||(fe=Promise.resolve(),fe.then((()=>{fe=null}))),fe}function ve(e,t,n){e.dispatchEvent(O(`${t?"intro":"outro"}${n}`))}const ye=new Set;let we;function be(){we={r:0,c:[],p:we}}function xe(){we.r||o(we.c),we=we.p}function ke(e,t){e&&e.i&&(ye.delete(e),e.i(t))}function _e(e,t,n,s){if(e&&e.o){if(ye.has(e))return;ye.add(e),we.c.push((()=>{ye.delete(e),s&&(n&&e.d(1),s())})),e.o(t)}}const Ce={duration:0};function Le(n,s,i){let l,r=s(n,i),c=!0;const u=we;function d(){const{delay:s=0,duration:i=300,easing:a=t,tick:d=e,css:p}=r||Ce;p&&(l=j(n,1,0,i,s,a,p));const f=y()+s,h=f+i;ue((()=>ve(n,!1,"start"))),k((e=>{if(c){if(e>=h)return d(0,1),ve(n,!1,"end"),--u.r||o(u.c),!1;if(e>=f){const t=a((e-f)/i);d(1-t,t)}}return c}))}return u.r+=1,a(r)?$e().then((()=>{r=r(),d()})):d(),{end(e){e&&r.tick&&r.tick(1,0),c&&(l&&H(n,l),c=!1)}}}function Ee(e,t){const n=t.token={};function s(e,s,i,o){if(t.token!==n)return;t.resolved=o;let a=t.ctx;void 0!==i&&(a=a.slice(),a[i]=o);const l=e&&(t.current=e)(a);let r=!1;t.block&&(t.blocks?t.blocks.forEach(((e,n)=>{n!==s&&e&&(be(),_e(e,1,1,(()=>{t.blocks[n]===e&&(t.blocks[n]=null)})),xe())})):t.block.d(1),l.c(),ke(l,1),l.m(t.mount(),t.anchor),r=!0),t.block=l,t.blocks&&(t.blocks[s]=l),r&&me()}if((i=e)&&"object"==typeof i&&"function"==typeof i.then){const n=Y();if(e.then((e=>{X(n),s(t.then,1,t.value,e),X(null)}),(e=>{if(X(n),s(t.catch,2,t.error,e),X(null),!t.hasCatch)throw e})),t.current!==t.pending)return s(t.pending,0),!0}else{if(t.current!==t.then)return s(t.then,1,t.value,e),!0;t.resolved=e}var i}function Pe(e,t,n){const s=t.slice(),{resolved:i}=e;e.current===e.then&&(s[e.value]=i),e.current===e.catch&&(s[e.error]=i),e.block.p(s,n)}function Ae(e,t){const n={},s={},i={$$scope:1};let o=e.length;for(;o--;){const a=e[o],l=t[o];if(l){for(const e in a)e in l||(s[e]=1);for(const e in l)i[e]||(n[e]=l[e],i[e]=1);e[o]=l}else for(const e in a)i[e]=1}for(const e in s)e in n||(n[e]=void 0);return n}function Se(e){return"object"==typeof e&&null!==e?e:{}}function ze(e,t,n){const s=e.$$.props[t];void 0!==s&&(e.$$.bound[s]=n,n(e.$$.ctx[s]))}function Te(e){e&&e.c()}function Me(e,t,n,i){const{fragment:l,on_mount:r,on_destroy:c,after_update:u}=e.$$;l&&l.m(t,n),i||ue((()=>{const t=r.map(s).filter(a);c?c.push(...t):o(t),e.$$.on_mount=[]})),u.forEach(ue)}function Re(e,t){const n=e.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function De(t,n,s,a,l,r,c,u=[-1]){const d=I;X(t);const p=t.$$={fragment:null,ctx:null,props:r,update:e,not_equal:l,bound:i(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(d?d.$$.context:[])),callbacks:i(),dirty:u,skip_bound:!1,root:n.target||d.$$.root};c&&c(p.root);let f=!1;if(p.ctx=s?s(t,n.props||{},((e,n,...s)=>{const i=s.length?s[0]:n;return p.ctx&&l(p.ctx[e],p.ctx[e]=i)&&(!p.skip_bound&&p.bound[e]&&p.bound[e](i),f&&function(e,t){-1===e.$$.dirty[0]&&(ne.push(e),re(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}(t,e)),n})):[],p.update(),f=!0,o(p.before_update),p.fragment=!!a&&a(p.ctx),n.target){if(n.hydrate){const e=function(e){return Array.from(e.childNodes)}(n.target);p.fragment&&p.fragment.l(e),e.forEach(P)}else p.fragment&&p.fragment.c();n.intro&&ke(t.$$.fragment),Me(t,n.target,n.anchor,n.customElement),me()}X(d)}class Ne{$destroy(){Re(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}class Ue{val;static NullErr=Error("Null values that may cause errors.");constructor(e){this.val=e}setValue(e){this.val=e}isNull(){return null===this.val}expect(e){if(null!==this.val)return this.val;throw Error(`${e}`)}unwrap(){if(null!==this.val)return this.val;throw Ue.NullErr}}function qe(e){return new Ue(e)}function Ve(){return new Ue(null)}class Be{prev=Ve();next=Ve();raw=Ve();handler=Ve();connect(e){return e.next.setValue(this.next.expect("Do not operate Linked alone")),this.next.expect("Do not operate Linked alone").prev.setValue(e),this.next.setValue(e),e.prev.setValue(this),e}disconnect(){const e="get prev fail at disconnect",t="get next fail at disconnect";return this.prev.expect(e).next.setValue(this.next.expect(t)),this.next.expect(t).prev.setValue(this.prev.expect(e)),this.prev.setValue(null),this.next.setValue(null),this}record(e,t){this.handler.setValue(e),t&&this.raw.setValue(t)}}class Oe{thisArg;rawRecord=new Map;record=new Map;Entry=new Be;End=new Be;_pointer=this.Entry;constructor(e=(()=>({}))){this.thisArg=e,this.Entry.next.setValue(this.End),this.End.prev.setValue(this.Entry)}size(){return this.record.size}_recordNode(e,t){return!this.record.has(e)&&(this.record.set(e,t),!0)}_recordRawNode(e,t){return!this.rawRecord.has(e)&&(this.rawRecord.set(e,t),this._recordNode(t.handler.unwrap(),t),!0)}_creator(e){let t=new Be;return t.record(e),t}_onceCreator(e){let t=new Be,n=this;return t.record(((...e)=>{try{t.raw.expect("The function used to wrap is empty").apply(n.thisArg(),e)}finally{n.deleteNode(t)}}),e),t}put(e){const t=this._creator(e);this._recordNode(e,t)&&(this._pointer.connect(t),this._pointer=t)}prepend(e){const t=this._creator(e);this._recordNode(e,t)&&this.Entry.connect(t)}once(e){const t=this._onceCreator(e);try{this._recordRawNode(t.raw.unwrap(),t)&&(this._pointer.connect(t),this._pointer=t)}finally{}}prependOnce(e){const t=this._onceCreator(e);try{this._recordRawNode(t.raw.unwrap(),t)&&this.Entry.connect(t)}finally{}}deleteNode(e){try{return this._pointer===e&&(this._pointer=e.prev.unwrap()),e.raw.isNull()||this.rawRecord.delete(e.raw.unwrap()),this.record.delete(e.handler.unwrap()),e.disconnect(),!0}catch(e){return!1}}delete(e){if(this.rawRecord.has(e)){const t=qe(this.rawRecord.get(e)||null).expect("Don't modify Linekd outside of IndexedLinked");return this.deleteNode(t),!0}if(this.record.has(e)){const t=qe(this.record.get(e)||null).expect("Don't modify Linekd outside of IndexedLinked");return this.deleteNode(t),!0}return!1}free(){let e=this.Entry.next.expect("Free error");for(;e!==this.End;){const t=e.next.expect("Free error");this.deleteNode(e),e=t}this._pointer=this.Entry}}class Fe{maxListeners=-1;thisArg={};_events={};captureRejections=!1;setMaxListeners(e){return this.maxListeners=e,this}getMaxListeners(){return this.maxListeners}_thisGetter=()=>this.thisArg;_getEventLinked(e){let t;return(t=this._events[e])||(t=this._events[e]=new Oe(this._thisGetter)),t}_canAddNew(e){return-1!==this.maxListeners&&e===this.maxListeners}_addListener(e,t,n=!1,s=!1){const i=this._getEventLinked(e);this._canAddNew(i.size())?this._emitError(RangeError("Listeners is full and cannot join a new listener, please use setMaxListeners to resize")):n?s?i.prependOnce(t):i.prepend(t):s?i.once(t):i.put(t)}addListener(e,t){return this._addListener(e,t),this}on(e,t){return this._addListener(e,t),this}prependListener(e,t){return this._addListener(e,t,!0),this}removeListener(e,t){return this._getEventLinked(e).delete(t),this}off(e,t){return this._getEventLinked(e).delete(t),this}removeAllListeners(e){this._getEventLinked(e).free()}_emit(e,t=!1,...n){const s=this._getEventLinked(e),i=this.thisArg;this.thisArg=t?void 0:i;let o=s.Entry.next.expect("EventEmitter$_emit");for(;o!==s.End;){const t=o.next.expect("EventEmitter$_emit");try{const e=o.handler.unwrap().apply(this.thisArg,n);this.captureRejections&&e instanceof Promise&&e.catch((e=>this._emitError(e)))}catch(t){if("error"===e)throw t;this._emitError(t)}o=t}this.thisArg=i}_emitError(e){if(!(this.listenerCount("error")>0))throw e;try{this._emit("error",!0,e)}catch(e){throw e}}emit(e,...t){this._emit(e,!1,...t)}emitNone(e,...t){this._emit(e,!0,...t)}once(e,t){return this._addListener(e,t,!1,!0),this}prependOnceListener(e,t){return this._addListener(e,t,!0,!0),this}listenerCount(e){return this._getEventLinked(e).size()}listeners(e){const t=this._getEventLinked(e),n=[];let s=t.Entry.next.unwrap();for(;s!==t.End;)n.push(s.handler.unwrap());return n}rawListeners(e){const t=this._getEventLinked(e),n=[];let s=t.Entry.next.unwrap();for(;s!==t.End;)try{n.push(s.raw.unwrap())}catch(e){n.push(s.handler.unwrap())}return n}eventNames(){return Reflect.ownKeys(this._events)}constructor(e){e&&(this.captureRejections=e.captureRejections||!1,this.thisArg=e.thisArg||{})}}const Ie=new Fe({captureRejections:!0});Ie.on("error",(e=>{console.error(e)}));class We{static _lifeCycle=new Fe({captureRejections:!0}).on("error",(e=>console.error(e)));static states={uninit:0,runtimeReady:1,playerReady:2,controlsReady:3,started:4,0:"uninit",1:"runtimeReady",2:"playerReady",3:"controlsReady",4:"started"};static _currentState=We.states.uninit;static when=e=>{const t=e;if(void 0===(e=this.states[e]))throw"[LifeCycle::when]: Unknown state";if(e<this._currentState)throw`[LifeCycle::when] when ${t} but now is ${this.states[this._currentState]}`;return new Promise((e=>{this._lifeCycle.once(t,(()=>{e(),requestIdleCallback((()=>{this._lifeCycle.listenerCount(t)||this.next()}))}))}))};static start=()=>{if(this._currentState!==this.states.uninit)throw"[LifeCycle::start]";this.next()};static next=()=>{this._currentState>4||requestIdleCallback((()=>{this._lifeCycle.listenerCount(this.states[this._currentState])||this.next(),this._lifeCycle.emitNone(this.states[this._currentState++])}))}}function je(e,t,n){const s=e.slice();return s[19]=t[n],s[21]=n,s}function He(e){let t,n,s,i,o,a,l,r=e[6](e[19])+"",c=!("$mine"===e[19]||"$explorer"===e[19])&&Ye(e);function u(){return e[14](e[21])}return{c(){t=S("div"),n=S("span"),s=z(r),i=T(),c&&c.c(),o=T(),N(t,"class","tab tab-text Row svelte-1lpbeos")},m(e,r){E(e,t,r),_(t,n),_(n,s),_(t,i),c&&c.m(t,null),_(t,o),a||(l=R(t,"click",u),a=!0)},p(n,i){e=n,1&i&&r!==(r=e[6](e[19])+"")&&q(s,r),"$mine"!==e[19]&&"$explorer"!==e[19]?c?c.p(e,i):(c=Ye(e),c.c(),c.m(t,o)):c&&(c.d(1),c=null)},d(e){e&&P(t),c&&c.d(),a=!1,l()}}}function Xe(e){let t;function n(e,t){return"$mine"===e[19]||"$explorer"===e[19]?Je:Ge}let s=n(e),i=s(e);return{c(){i.c(),t=M()},m(e,n){i.m(e,n),E(e,t,n)},p(e,o){s===(s=n(e))&&i?i.p(e,o):(i.d(1),i=s(e),i&&(i.c(),i.m(t.parentNode,t)))},d(e){i.d(e),e&&P(t)}}}function Ye(e){let t,n,s;function i(){return e[13](e[21])}return{c(){t=S("div"),t.textContent="⨉",N(t,"class","Row cross closeable svelte-1lpbeos")},m(e,o){E(e,t,o),n||(s=R(t,"click",i),n=!0)},p(t,n){e=t},d(e){e&&P(t),n=!1,s()}}}function Ge(e){let t,n,s,i,a,l,r,c,u=e[6](e[19])+"";function d(){return e[12](e[21])}return{c(){t=S("div"),n=S("span"),s=z(u),i=T(),a=S("div"),a.textContent="⨉",l=T(),N(n,"class","tab-text svelte-1lpbeos"),N(a,"class","column cross svelte-1lpbeos"),N(t,"id","nav_selected"),N(t,"class","tab selected column svelte-1lpbeos"),B(t,"padding-right","2px")},m(o,u){E(o,t,u),_(t,n),_(n,s),_(t,i),_(t,a),_(t,l),r||(c=[R(a,"click",e[11]),R(t,"click",d)],r=!0)},p(t,n){e=t,1&n&&u!==(u=e[6](e[19])+"")&&q(s,u)},d(e){e&&P(t),r=!1,o(c)}}}function Je(e){let t,n,s,i,o=e[6](e[19])+"";function a(){return e[10](e[21])}return{c(){t=S("div"),n=z(o),N(t,"id","nav_selected"),N(t,"class","tab selected tab-text svelte-1lpbeos")},m(e,o){E(e,t,o),_(t,n),s||(i=R(t,"click",a),s=!0)},p(t,s){e=t,1&s&&o!==(o=e[6](e[19])+"")&&q(n,o)},d(e){e&&P(t),s=!1,i()}}}function Qe(e){let t;function n(e,t){return e[21]===e[1]?Xe:He}let s=n(e),i=s(e);return{c(){i.c(),t=M()},m(e,n){i.m(e,n),E(e,t,n)},p(e,o){s===(s=n(e))&&i?i.p(e,o):(i.d(1),i=s(e),i&&(i.c(),i.m(t.parentNode,t)))},d(e){i.d(e),e&&P(t)}}}function Ke(t){let n,s,i,a,l,r,c,u,d,p,f=t[0],h=[];for(let e=0;e<f.length;e+=1)h[e]=Qe(je(t,f,e));return{c(){n=S("div"),s=S("div"),s.textContent="◀",i=T(),a=S("div"),l=S("div");for(let e=0;e<h.length;e+=1)h[e].c();r=T(),c=S("div"),c.textContent="▶",N(s,"class","btn light left Column svelte-1lpbeos"),N(l,"class","Row c svelte-1lpbeos"),N(a,"class","Column stretch svelte-1lpbeos"),N(c,"class","btn light right Column svelte-1lpbeos"),N(n,"class",u="Column stretch "+(t[2]?"overflowed":"")+" svelte-1lpbeos")},m(e,o){E(e,n,o),_(n,s),_(n,i),_(n,a),_(a,l);for(let e=0;e<h.length;e+=1)h[e].m(l,null);t[15](l),t[16](a),_(n,r),_(n,c),d||(p=[R(s,"click",t[9]),R(c,"click",t[17])],d=!0)},p(e,[t]){if(323&t){let n;for(f=e[0],n=0;n<f.length;n+=1){const s=je(e,f,n);h[n]?h[n].p(s,t):(h[n]=Qe(s),h[n].c(),h[n].m(l,null))}for(;n<h.length;n+=1)h[n].d(1);h.length=f.length}4&t&&u!==(u="Column stretch "+(e[2]?"overflowed":"")+" svelte-1lpbeos")&&N(n,"class",u)},i:e,o:e,d(e){e&&P(n),A(h,e),t[15](null),t[16](null),d=!1,o(p)}}}function Ze(e){Pager.select(e)}function et(e,t,n){let s;let i,o,{tabs:a=["$mine","$explorer"]}=t,l=!1;function r(e,t=!0){let n=o.scrollLeft+(+e||0);o.scrollTo({left:n,behavior:t?"smooth":"instant"})}J((()=>{n(2,l=i.getBoundingClientRect().width>o.getBoundingClientRect().width),requestAnimationFrame((()=>{let e=document.getElementById("nav_selected");if(e){r(e.getBoundingClientRect().left-visualViewport.width/2+100)}}))})),G((()=>{o.addEventListener("wheel",(e=>{r(e.deltaY,!1)}))})),Ie.on("langChange",(function(){requestIdleCallback((()=>{const e=a.slice();n(0,a=e)}))}));let{selected:c=0}=t;function u(e=c){Pager.remove(e)}return e.$$set=e=>{"tabs"in e&&n(0,a=e.tabs),"selected"in e&&n(1,c=e.selected)},n(5,s=visualViewport.width/3),[a,c,l,i,o,s,(e,...t)=>e.startsWith("$")?langMapping.s(e.slice(1),...t):e,r,u,()=>r(-s),e=>Ze(e),()=>u(),e=>Ze(e),e=>u(e),e=>Ze(e),function(e){se[e?"unshift":"push"]((()=>{i=e,n(3,i)}))},function(e){se[e?"unshift":"push"]((()=>{o=e,n(4,o)}))},()=>r(s)]}We.when("controlsReady").then((()=>{hooks.send("win:show-main")}));class tt extends Ne{constructor(e){super(),De(this,e,et,Ke,l,{tabs:0,selected:1})}}let nt=new Map;const st={async get(e){if(nt.has(e))return nt.get(e);let t=null,n=await hooks.invoke("store:get",e);try{t=JSON.parse(n)}catch(e){t=n}return null!=t?(nt.set(e,t),t):void 0},getSync(e){if(nt.has(e))return nt.get(e);let t=null,n=hooks.sendSync("store:getSync",e);try{t=JSON.parse(n)}catch(e){t=n}return null!=t?(nt.set(e,t),t):void 0},async getRaw(e){if(nt.has(e))return nt.get(e);let t=await hooks.invoke("store:getRaw",e);return null!=t?(nt.set(e,t),t):void 0},async set(e,t){let n;nt.set(e,t);try{n=JSON.stringify(t)}catch(e){n=t}return await hooks.invoke("store:set",e,n)},setRaw:async(e,t)=>(nt.set(e,t),await hooks.invoke("store:set",e,t)),setCache(e,t){nt.set(e,t)},rm:async e=>(nt.has(e)&&nt.delete(e),await hooks.invoke("store:rm",e)),clear(){for(const e of nt.keys())this.rm(e)}};let it=!1;We.when("uninit").then((()=>it=!0));const ot=new Map;async function at(e){if(!it)return e;let t;if(t=ot.get(e))return t;let n=await async function(e){const t=(await st.get("ThumbNails/index")||[]).indexOf(e);return~t?st.getRaw(`ThumbNails/${t}`):e}(e);if("string"==typeof n)return async function(e){let t=await st.get("ThumbNails/index")||[];const n=await(await fetch(e)).arrayBuffer();st.setRaw(`ThumbNails/${t.length}`,n.slice(0)),t.push(e),st.set("ThumbNails/index",t)}(e),n;const s=URL.createObjectURL(new Blob([n]));return ot.set(e,s),s}const lt=new class{_queue=[];_callbacks=[];size;constructor(e=4){this.size=e,requestIdleCallback(this.handleOnce)}add(e){this._queue.push(e)}handleOnce=async()=>{const e=await this._decodeQueue(),t=this._callbacks.splice(0,this.size);e.forEach(((e,n)=>{t[n].call(null,e)})),requestIdleCallback(this.handleOnce)};async _decodeQueue(){return await Promise.all(this._queue.splice(0,this.size).map((e=>e.decode())))}decode(e){return this.add(e),new Promise((e=>{this._callbacks.push((t=>e(t)))}))}};function rt(e){let t,n,s;return{c(){t=S("span"),n=z(e[2]),N(t,"class",s="avatar iconfont size-"+(e[3]?e[3]:"normal")+" svelte-m9oihy")},m(e,s){E(e,t,s),_(t,n)},p(e,i){4&i&&q(n,e[2]),8&i&&s!==(s="avatar iconfont size-"+(e[3]?e[3]:"normal")+" svelte-m9oihy")&&N(t,"class",s)},d(e){e&&P(t)}}}function ct(e){let t,n,s={ctx:e,current:null,token:null,hasCatch:!1,pending:pt,then:dt,catch:ut,value:13};return Ee(n=at(e[2]),s),{c(){t=M(),s.block.c()},m(e,n){E(e,t,n),s.block.m(e,s.anchor=n),s.mount=()=>t.parentNode,s.anchor=t},p(t,i){e=t,s.ctx=e,4&i&&n!==(n=at(e[2]))&&Ee(n,s)||Pe(s,e,i)},d(e){e&&P(t),s.block.d(e),s.token=null,s=null}}}function ut(t){return{c:e,m:e,p:e,d:e}}function dt(e){let t,n,s,i;return{c(){t=S("img"),c(t.src,n=e[13])||N(t,"src",n),N(t,"class","avatar svelte-m9oihy"),N(t,"alt","avatar"),N(t,"draggable","false"),N(t,"width",e[4]),N(t,"height",e[5])},m(n,o){E(n,t,o),e[11](t),s||(i=R(t,"load",e[10]),s=!0)},p(e,s){4&s&&!c(t.src,n=e[13])&&N(t,"src",n),16&s&&N(t,"width",e[4]),32&s&&N(t,"height",e[5])},d(n){n&&P(t),e[11](null),s=!1,i()}}}function pt(e){let t;return{c(){t=S("div"),N(t,"class","avatar svelte-m9oihy"),B(t,"background-color","var(--controlGray)"),B(t,"width",e[4]+"px"),B(t,"height",e[5]+"px")},m(e,n){E(e,t,n)},p(e,n){16&n&&B(t,"width",e[4]+"px"),32&n&&B(t,"height",e[5]+"px")},d(e){e&&P(t)}}}function ft(t){let n,s,i,o,a;function l(e,t){return e[1]?ct:rt}let r=l(t),c=r(t);return{c(){n=S("div"),c.c(),N(n,"class",s="column"+(t[7]?" clkable":"")+" svelte-m9oihy"),N(n,"style",i="width: fit-content; heigth: fit-content; overflow: hidden; border-radius: "+t[6]+";"+t[8])},m(e,s){E(e,n,s),c.m(n,null),o||(a=R(n,"click",t[9]),o=!0)},p(e,[t]){r===(r=l(e))&&c?c.p(e,t):(c.d(1),c=r(e),c&&(c.c(),c.m(n,null))),128&t&&s!==(s="column"+(e[7]?" clkable":"")+" svelte-m9oihy")&&N(n,"class",s),320&t&&i!==(i="width: fit-content; heigth: fit-content; overflow: hidden; border-radius: "+e[6]+";"+e[8])&&N(n,"style",i)},i:e,o:e,d(e){e&&P(n),c.d(),o=!1,a()}}}function ht(e,t,n){const s=K();let{isUrl:i=!0}=t,{avatar:o=""}=t,{size:a=""}=t,{width:l}=t,{height:r}=t,{radius:c="50%"}=t,{clickable:u=!0}=t,{ctx:d=this}=t,{cssText:p=""}=t;return e.$$set=e=>{"isUrl"in e&&n(1,i=e.isUrl),"avatar"in e&&n(2,o=e.avatar),"size"in e&&n(3,a=e.size),"width"in e&&n(4,l=e.width),"height"in e&&n(5,r=e.height),"radius"in e&&n(6,c=e.radius),"clickable"in e&&n(7,u=e.clickable),"ctx"in e&&n(0,d=e.ctx),"cssText"in e&&n(8,p=e.cssText)},[d,i,o,a,l,r,c,u,p,function(e){s("click",e)},function(){s("loaded")},function(e){se[e?"unshift":"push"]((()=>{d=e,n(0,d)}))}]}class mt extends Ne{constructor(e){super(),De(this,e,ht,ft,l,{isUrl:1,avatar:2,size:3,width:4,height:5,radius:6,clickable:7,ctx:0,cssText:8})}}function gt(t){let n,s,i,a;return{c(){n=S("input"),N(n,"type","range"),N(n,"style",s=t[1]+"; --progress: "+t[0]+"%; --rail-width: "+t[2]+"px; --thumb-width: "+t[3]+"px; --display-progress: "+t[5]+"px;"),N(n,"step","0.001"),N(n,"class","svelte-16lo84c")},m(e,s){E(e,n,s),V(n,t[0]),t[9](n),i||(a=[R(n,"change",t[8]),R(n,"input",t[8]),R(n,"mousedown",t[6]),R(n,"mousemove",t[7])],i=!0)},p(e,[t]){47&t&&s!==(s=e[1]+"; --progress: "+e[0]+"%; --rail-width: "+e[2]+"px; --thumb-width: "+e[3]+"px; --display-progress: "+e[5]+"px;")&&N(n,"style",s),1&t&&V(n,e[0])},i:e,o:e,d(e){e&&P(n),t[9](null),i=!1,o(a)}}}function $t(e,t,n){let s,i,{value:o}=t,{cssStyle:a=""}=t,{width:l=100}=t,{thumbWidth:r=12}=t,c=K(),u=!1;return document.addEventListener("mouseup",(()=>{u&&(u=!1,c("mouseup",i.value))})),e.$$set=e=>{"value"in e&&n(0,o=e.value),"cssStyle"in e&&n(1,a=e.cssStyle),"width"in e&&n(2,l=e.width),"thumbWidth"in e&&n(3,r=e.thumbWidth)},e.$$.update=()=>{13&e.$$.dirty&&n(5,s=(l-r)*o/(100*l)*l+r/2)},[o,a,l,r,i,s,function(e){u=!0;let t=e.offsetX/i.offsetWidth*100;n(4,i.value=t,i),n(0,o=t),c("mousedown",t)},function(){u&&c("mousemove",i.value)},function(){o=U(this.value),n(0,o)},function(e){se[e?"unshift":"push"]((()=>{i=e,n(4,i)}))}]}class vt extends Ne{constructor(e){super(),De(this,e,$t,gt,l,{value:0,cssStyle:1,width:2,thumbWidth:3})}}function yt(t){let n,s,i,a;return{c(){n=S("input"),N(n,"type","range"),N(n,"style",s=t[1]+"; --progress: "+t[0]+"%; --rail-width: "+t[2]+"px; --thumb-width: "+t[3]+"px; --scale: "+window.devicePixelRatio+";"),N(n,"step","0.001"),N(n,"class","svelte-vemcja")},m(e,s){E(e,n,s),V(n,t[0]),t[8](n),i||(a=[R(n,"change",t[7]),R(n,"input",t[7]),R(n,"mousedown",t[5]),R(n,"mousemove",t[6])],i=!0)},p(e,[t]){15&t&&s!==(s=e[1]+"; --progress: "+e[0]+"%; --rail-width: "+e[2]+"px; --thumb-width: "+e[3]+"px; --scale: "+window.devicePixelRatio+";")&&N(n,"style",s),1&t&&V(n,e[0])},i:e,o:e,d(e){e&&P(n),t[8](null),i=!1,o(a)}}}function wt(e,t,n){let s,{value:i}=t,{cssStyle:o=""}=t,{width:a=100}=t,{thumbWidth:l=10}=t,r=K(),c=!1;return document.addEventListener("mouseup",(()=>{c&&(c=!1,r("mouseup",s.value))})),e.$$set=e=>{"value"in e&&n(0,i=e.value),"cssStyle"in e&&n(1,o=e.cssStyle),"width"in e&&n(2,a=e.width),"thumbWidth"in e&&n(3,l=e.thumbWidth)},[i,o,a,l,s,function(e){c=!0;let t=e.offsetX/s.offsetWidth*100;n(4,s.value=t,s),n(0,i=t),r("mousedown",t)},function(){c&&r("mousemove",s.value)},function(){i=U(this.value),n(0,i)},function(e){se[e?"unshift":"push"]((()=>{s=e,n(4,s)}))}]}class bt extends Ne{constructor(e){super(),De(this,e,wt,yt,l,{value:0,cssStyle:1,width:2,thumbWidth:3})}}const xt=Symbol("[[Observers]]");class kt{[xt]=new Set;addObserver(e){("function"==typeof e||"object"==typeof e&&e&&"function"==typeof e.update)&&this[xt].add(e)}removeObserver(e){if(!e)return this.removeAllObservers();this[xt].delete(e)}removeAllObservers(){this[xt]=new Set}notifyObservers(...e){for(const t of this[xt])"function"==typeof t?t.call(this,...e):t.update(this,...e)}}const _t=new class extends kt{_metadata={};constructor(e={}){super(),this.setMetadata(e)}setMetadata(e={}){this._metadata.title=e.title||this._metadata.title,this._metadata.album=e.album||this._metadata.album,this._metadata.artist=e.artist||this._metadata.artist,this._metadata.artwork=e.artwork||this._metadata.artwork}getMetadataConfig(){return this._metadata}title(e){return void 0!==e?(this._metadata.title=e,this):this._metadata.title}album(e){return void 0===e?this._metadata.album:(this._metadata.album=e,this)}artist(e){return void 0===e?this._metadata.artist:(this._metadata.artist=e,this)}artwork(e,t){return void 0===e?this._metadata.artwork||[]:(this._metadata.artwork||(this._metadata.artwork=[]),void 0===t?this._metadata.artwork[e]:(this._metadata.artwork[e]=t,this))}setArtwork(e){return this._metadata.artwork=e,this}apply(){navigator.mediaSession.metadata=new MediaMetadata(this._metadata),hooks.send("win:title",`${this._metadata.title} - ${this._metadata.artist}`)}};class Ct{constructor(e){this.data=e}urls={};getPlayUrlAsync=async(e="high")=>{let t;try{t="low"===e?this.data.l.br:"medium"===e?this.data.m.br:this.data.h.br}catch(n){switch(e){case"low":if(t=!!this.data.h&&this.data.h.br,t)break;case"high":if(t=!!this.data.m&&this.data.m.br,t)break;case"medium":if(t=!!this.data.l&&this.data.l.br,t)break}}const n=this.urls[e]=await NeteaseApi.getSongUrlX(this.data.id,await st.get("cookie"));let s=n.body.data[0].url;const i=this.type=n.body.data[0].type,o=await server.getMedia(`ne${this.data.id}.${i}`,this.onLoadMetadata);return o?URL.createObjectURL(new Blob([o])):(server.saveToCache(s,`ne${this.data.id}.${i}`,this.onLoadMetadata),s)};onLoadMetadata(){}async url(e="high"){return this.urls[e]?this.urls[e]:await this.getPlayUrlAsync(e)}title(){return this.data.name}album(){return this.data.al}artist(){return this.data.ar}uri(){return this.data.id}}class Lt{static listData=[];static getAudioData(e=this.current){return st.set("listElementPlaying",e),new Ct(this.listData[e])}static current=0;static mode=0;static MODE=0;static MODE_SINGLE_LOOP=1;static MODE_RANDOM=2;static loadList(e=[]){this.listData=e.slice(),st.set("listPlaying",this.listData),this.current=0}static getCurrentData(){return this.listData[this.current]}static query(e){let t=[];return this.listData.forEach(((n,s)=>{e.name&&n.name.includes(e.name)&&t.push(s)})),t}static next(){if(!this.listData.length)return;let e=this.current,t=this.listData.length;switch(this.mode){case 0:e=e===t-1?0:e+1;break;case 2:e=~~(Math.random()*t-1)}return this.current=e,this.getAudioData(e)}static prev(){if(!this.listData.length)return;let e=this.current,t=this.listData.length;switch(this.mode){case 0:e=e?e-1:t;break;case 2:e=~~(Math.random()*t-1)}return this.current=e,this.getAudioData(e)}static playNext(){const e=Lt.next();e&&this.playByAudioData(e)}static playPrev(){const e=Lt.prev();e&&this.playByAudioData(e)}static play(e=this.current){this.current=e;const t=this.getAudioData(e);this.playByAudioData(t)}static async load(e){this.current=e;const t=this.getAudioData(e);await globalPlayer.loadData(t),Ie.emit("loadedContent"),Ie.emit("setControlsContent",t)}static playByAudioData(e){globalPlayer.loadData(e).then((async()=>{await globalPlayer.play(),Ie.emit("loadedContent")})),Ie.emit("setControlsContent",e)}}function Et(e){if("function"!=typeof e)throw"handler should be type of function";let t,n;const s=i=>{t||(t=i,n=requestAnimationFrame(s));const o=i-t;t=i,e.call(void 0,o,i),n=requestAnimationFrame(s)};return requestAnimationFrame(s),{cancel:()=>{cancelAnimationFrame(n)}}}function Pt(e,t,n,s){let i=4*(t*(s-1)+n);return(e=e.data).slice(i,i+4)}We.when("runtimeReady").then((()=>{navigator.mediaSession.setActionHandler("nexttrack",(()=>Lt.playNext())),navigator.mediaSession.setActionHandler("previoustrack",(()=>Lt.playPrev())),hooks.on("player:previous",(()=>Lt.playPrev())),hooks.on("player:next",(()=>Lt.playNext()))}));const At=new OffscreenCanvas(0,0),St=At.getContext("2d");function zt(e,t=1){if(!e)return"transparent";let n=St;const s=e.width,i=e.height;At.width=s,At.height=i,n.drawImage(e,0,0);const o=n.getImageData(0,0,s,i),a=s/2,l=i/2,r=s/4,c=a+r,u=i/4,d=l+u;let p=Pt(o,s,r,u),f=Pt(o,s,c,u),h=Pt(o,s,a,l),m=Pt(o,s,r,d),g=Pt(o,s,c,d),$=[];for(let e=0;e<4;e++){let t=(p[e]+f[e]+h[e]+m[e]+g[e])/5;$[e]=~~t}$=function(e,t,n){e/=255,t/=255,n/=255;var s,i,o=Math.min(e,t,n),a=Math.max(e,t,n),l=(o+a)/2,r=a-o;if(a==o)s=0,i=0;else{switch(i=l>.5?r/(2-a-o):r/(a+o),a){case e:s=(t-n)/r+(t<n?6:0);break;case t:s=2+(n-e)/r;break;case n:s=4+(e-t)/r}s=Math.round(60*s)}return[s,i=Math.round(100*i),l=Math.round(100*l)]}(...$);return`hsla(${$[0]},${$[1]>40?40:$[1]}%,${$[2]>50?50:$[2]}%, ${t})`}function Tt(e){let t,n,s,i,a,l,r,c,u,d,p,f,h,m,g,$,v,y,w,b,x,k,C,L,A,M,D,U,V,O,F,I,W,j,H,X,Y,G=e[3]?"":"",J=e[9]&&Mt(e);function Q(t){e[27](t)}let K={width:200};function Z(t){e[29](t)}void 0!==e[6]&&(K.value=e[6]),A=new bt({props:K}),se.push((()=>ze(A,"value",Q))),A.$on("mousedown",e[20]),A.$on("mousemove",e[22]),A.$on("mouseup",e[21]);let ee={cssStyle:"margin-right: 8px;"};return void 0!==e[7]&&(ee.value=e[7]),F=new bt({props:ee}),se.push((()=>ze(F,"value",Z))),F.$on("mousedown",Nt),F.$on("mousemove",Nt),F.$on("mouseup",e[19]),{c(){t=S("div"),J&&J.c(),n=T(),s=S("div"),i=S("div"),a=S("div"),l=z(""),c=T(),u=S("div"),d=z(""),f=T(),h=S("div"),m=z(G),g=T(),$=S("div"),$.textContent="",v=T(),y=S("div"),w=z(""),x=T(),k=S("div"),C=S("span"),C.textContent="0:00",L=T(),Te(A.$$.fragment),D=T(),U=S("span"),U.textContent="0:00",V=T(),O=S("div"),Te(F.$$.fragment),W=T(),j=S("div"),j.textContent="",N(t,"class","column header edge svelte-1nalff2"),N(a,"class",r="btn big btn-nb"+(e[11]?" active":"")+" svelte-1nalff2"),N(u,"class",p="btn big btn-nb"+(e[0].mode?" disable":"")+" svelte-1nalff2"),N(h,"class","btn big btn-big svelte-1nalff2"),N($,"class","btn big btn-nb svelte-1nalff2"),N(y,"class",b="btn big btn-nb"+(e[10]?" active":"")+" svelte-1nalff2"),N(i,"class","column"),B(i,"margin","4px 0px"),N(C,"class","time svelte-1nalff2"),N(U,"class","time svelte-1nalff2"),N(k,"class","column"),B(k,"width","100%"),N(s,"class","row center svelte-1nalff2"),N(j,"class","btn big btn-nb svelte-1nalff2"),N(O,"class","column edge svelte-1nalff2"),B(O,"flex-direction","row-reverse")},m(o,r){E(o,t,r),J&&J.m(t,null),E(o,n,r),E(o,s,r),_(s,i),_(i,a),_(a,l),_(i,c),_(i,u),_(u,d),_(i,f),_(i,h),_(h,m),_(i,g),_(i,$),_(i,v),_(i,y),_(y,w),_(s,x),_(s,k),_(k,C),e[26](C),_(k,L),Me(A,k,null),_(k,D),_(k,U),e[28](U),E(o,V,r),E(o,O,r),Me(F,O,null),_(O,W),_(O,j),H=!0,X||(Y=[R(a,"click",e[24]),R(u,"click",e[16]),R(h,"click",e[15]),R($,"click",e[17]),R(y,"click",e[25]),R(j,"click",e[30])],X=!0)},p(e,n){e[9]?J?(J.p(e,n),512&n[0]&&ke(J,1)):(J=Mt(e),J.c(),ke(J,1),J.m(t,null)):J&&(be(),_e(J,1,1,(()=>{J=null})),xe()),(!H||2048&n[0]&&r!==(r="btn big btn-nb"+(e[11]?" active":"")+" svelte-1nalff2"))&&N(a,"class",r),(!H||1&n[0]&&p!==(p="btn big btn-nb"+(e[0].mode?" disable":"")+" svelte-1nalff2"))&&N(u,"class",p),(!H||8&n[0])&&G!==(G=e[3]?"":"")&&q(m,G),(!H||1024&n[0]&&b!==(b="btn big btn-nb"+(e[10]?" active":"")+" svelte-1nalff2"))&&N(y,"class",b);const s={};!M&&64&n[0]&&(M=!0,s.value=e[6],de((()=>M=!1))),A.$set(s);const i={};!I&&128&n[0]&&(I=!0,i.value=e[7],de((()=>I=!1))),F.$set(i)},i(e){H||(ke(J),ke(A.$$.fragment,e),ke(F.$$.fragment,e),H=!0)},o(e){_e(J),_e(A.$$.fragment,e),_e(F.$$.fragment,e),H=!1},d(i){i&&P(t),J&&J.d(),i&&P(n),i&&P(s),e[26](null),Re(A),e[28](null),i&&P(V),i&&P(O),Re(F),X=!1,o(Y)}}}function Mt(e){let t,n,s,i,o,a,l,r,c,u,d,p=(e[2].title||e[1].no_song_playing)+"",f=(e[2].artist||"")+"";function h(t){e[23](t)}let m={isUrl:!!e[2].album,avatar:e[2].artwork?e[2].artwork[0].src:"R",width:56,height:56,radius:"4px"};return void 0!==e[4]&&(m.ctx=e[4]),n=new mt({props:m}),se.push((()=>ze(n,"ctx",h))),n.$on("loaded",e[14]),{c(){t=S("div"),Te(n.$$.fragment),i=T(),o=S("div"),a=S("div"),l=z(p),r=T(),c=S("div"),u=z(f),N(t,"class","avatar-container svelte-1nalff2"),N(a,"class","title svelte-1nalff2"),N(c,"class","subtitle svelte-1nalff2"),N(o,"class","row txt svelte-1nalff2")},m(e,s){E(e,t,s),Me(n,t,null),E(e,i,s),E(e,o,s),_(o,a),_(a,l),_(o,r),_(o,c),_(c,u),d=!0},p(e,t){const i={};4&t[0]&&(i.isUrl=!!e[2].album),4&t[0]&&(i.avatar=e[2].artwork?e[2].artwork[0].src:"R"),!s&&16&t[0]&&(s=!0,i.ctx=e[4],de((()=>s=!1))),n.$set(i),(!d||6&t[0])&&p!==(p=(e[2].title||e[1].no_song_playing)+"")&&q(l,p),(!d||4&t[0])&&f!==(f=(e[2].artist||"")+"")&&q(u,f)},i(e){d||(ke(n.$$.fragment,e),d=!0)},o(e){_e(n.$$.fragment,e),d=!1},d(e){e&&P(t),Re(n),e&&P(i),e&&P(o)}}}function Rt(e){let t,n,s=e[8]&&Tt(e);return{c(){t=S("div"),s&&s.c(),N(t,"class","column c svelte-1nalff2")},m(i,o){E(i,t,o),s&&s.m(t,null),e[31](t),n=!0},p(e,n){e[8]?s?(s.p(e,n),256&n[0]&&ke(s,1)):(s=Tt(e),s.c(),ke(s,1),s.m(t,null)):s&&(be(),_e(s,1,1,(()=>{s=null})),xe())},i(e){n||(ke(s),n=!0)},o(e){_e(s),n=!1},d(n){n&&P(t),s&&s.d(),e[31](null)}}}function Dt(e){let t=~~(e%60);return t<10&&(t="0"+t),`${~~(e/60)}:${t}`}function Nt(e){const t=+e.detail;globalPlayer.volume(t/100)}function Ut(e,t,n){let s=langMapping.getMapping();Ie.on("langChange",(e=>{n(1,s=e.getMapping())}));let i,o,a,l={},r=!1,c=1;_t.addObserver((function(e){this.apply(),n(2,l=e)}));let u=0;const d=()=>{if(y)return;let e=globalPlayer.seek();n(6,u=e/c*100),n(12,w.innerText=Dt(e),w)};let p;Ie.on("setControlsContent",(async function(e){_t.title(e.title()),_t.album(e.album().name),_t.artist(e.artist().reduce(((e,t)=>[...e,t.name]),[]).join("; ")),_t.artwork(0,{src:e.album().picUrl}),_t.notifyObservers(_t.getMetadataConfig())})),Ie.on("loadedContent",(()=>{c=globalPlayer.duration(),n(13,b.innerText=Dt(c),b),i&&(n(6,u=0),i.cancel()),i=Et(d)}));let f=!1,h=!1;function m(){if(globalPlayer.load())return r?globalPlayer.pause():globalPlayer.play()}Ie.on("setControlsContent",(()=>{h||n(9,h=!0)})),We.when("playerReady").then((async()=>{const e=globalPlayer;e.on("play",(()=>n(3,r=!0))),e.on("pause",(()=>n(3,r=!1))),e.on("ended",(()=>Lt.playNext())),await async function(){globalPlayer.volume(n(7,p=await st.get("volume")||50)/100)}();let t=await st.get("listPlaying"),s=await st.get("listElementPlaying");t&&"number"==typeof s&&(Lt.loadList(t),Lt.load(s)),n(8,f=!0)})),window.addEventListener("keypress",(e=>{" "===e.key&&m()}));let g=!1,$=!1;function v(){return g?n(0,Lt.mode=1,Lt):$?n(0,Lt.mode=2,Lt):void n(0,Lt.mode=0,Lt)}var y=!1;let w,b;new Array(5);return[Lt,s,l,r,o,a,u,p,f,h,g,$,w,b,function(){const e=zt(o,1);a.style.setProperty("--color",e)},m,function(){Lt.playPrev()},function(){Lt.playNext()},v,function(){st.set("volume",p)},function(){y=!0},function(e){y=!1;try{globalPlayer.seek(e.detail/100*c)}catch(e){}},function(e){y&&n(12,w.innerText=Dt(e.detail/100*c),w)},function(e){o=e,n(4,o)},()=>{n(11,$=!$),v()},()=>{n(10,g=!g),v()},function(e){se[e?"unshift":"push"]((()=>{w=e,n(12,w)}))},function(e){u=e,n(6,u)},function(e){se[e?"unshift":"push"]((()=>{b=e,n(13,b)}))},function(e){p=e,n(7,p)},()=>{Ie.emit("tunnerOpen")},function(e){se[e?"unshift":"push"]((()=>{a=e,n(5,a)}))}]}class qt extends Ne{constructor(e){super(),De(this,e,Ut,Rt,l,{},null,[-1,-1])}}function Vt(t){let n;return{c(){n=S("div")},m(e,t){E(e,n,t)},p:e,i:e,o:e,d(e){e&&P(n)}}}class Bt extends Ne{constructor(e){super(),De(this,e,null,Vt,l,{})}}function Ot(e,t,n){return new Promise(((s,i)=>{let o=e.animate(t,n);o.onfinish=()=>s(o),o.onremove=()=>i(o)}))}function Ft(e){let t,s,i,o;const a=[e[1]];var l=e[0];function r(e){let t={};for(let e=0;e<a.length;e+=1)t=n(t,a[e]);return{props:t}}return l&&(i=new l(r())),{c(){t=S("div"),s=S("div"),i&&Te(i.$$.fragment),N(s,"class","innerWindow row svelte-uddjc1"),N(t,"class","container row svelte-uddjc1")},m(n,a){E(n,t,a),_(t,s),i&&Me(i,s,null),e[4](s),o=!0},p(e,[t]){const n=2&t?Ae(a,[Se(e[1])]):{};if(l!==(l=e[0])){if(i){be();const e=i;_e(e.$$.fragment,1,0,(()=>{Re(e,1)})),xe()}l?(i=new l(r()),Te(i.$$.fragment),ke(i.$$.fragment,1),Me(i,s,null)):i=null}else l&&i.$set(n)},i(e){o||(i&&ke(i.$$.fragment,e),o=!0)},o(e){i&&_e(i.$$.fragment,e),o=!1},d(n){n&&P(t),i&&Re(i),e[4](null)}}}function It(e,t,n){let s,i=Bt,o={};return G((()=>{new MutationObserver((()=>{Ie.emit("pageContentChange")})).observe(s,{childList:!0,subtree:!0,attributes:!1})})),[i,o,s,async function(e,t){await Ot(s,[{opacity:1,transform:"scale(1)"},{opacity:0,transform:"scale(1.06)"}],{duration:60,ease:"cubic-bezier(0.95, 0.05, 0.795, 0.035)",fill:"forwards"}),function(e,t){if(i===e)return n(0,i=Bt),n(1,o=t),void setTimeout((()=>{n(0,i=e)}));n(1,o=t),n(0,i=e)}(e,t),requestIdleCallback((async()=>{await Ot(s,[{opacity:0,transform:"scale(0.96)"},{opacity:1,transform:"scale(1)"}],{duration:80,ease:"cubic-bezier(0.19, 1, 0.22, 1)",fill:"forwards"}),Ie.emit("pageSwipeAnimFinish")}))},function(e){se[e?"unshift":"push"]((()=>{s=e,n(2,s)}))}]}class Wt extends Ne{constructor(e){super(),De(this,e,It,Ft,l,{display:3})}get display(){return this.$$.ctx[3]}}function jt(e){let t,n;const s=e[6].default,i=u(s,e,e[5],null);return{c(){t=S("div"),i&&i.c(),N(t,"class","container svelte-1mqptgy"),N(t,"style",e[1])},m(s,o){E(s,t,o),i&&i.m(t,null),e[7](t),n=!0},p(e,[o]){i&&i.p&&(!n||32&o)&&f(i,s,e,e[5],n?p(s,e[5],o,null):h(e[5]),null),(!n||2&o)&&N(t,"style",e[1])},i(e){n||(ke(i,e),n=!0)},o(e){_e(i,e),n=!1},d(n){n&&P(t),i&&i.d(n),e[7](null)}}}function Ht(e,t,n){let{$$slots:s={},$$scope:i}=t,{measureMeter:o}=t,{cssStyle:a}=t;return e.$$set=e=>{"measureMeter"in e&&n(0,o=e.measureMeter),"cssStyle"in e&&n(1,a=e.cssStyle),"$$scope"in e&&n(5,i=e.$$scope)},[o,a,function(e){o.offsetHeight&&o.offsetWidth&&e({width:o.offsetWidth,height:o.offsetHeight}),new MutationObserver(((t,n)=>{n.disconnect();try{e({width:o.offsetWidth,height:o.offsetHeight})}catch(e){}})).observe(o,{childList:!0,subtree:!0,attributes:!0})},function(){o.setAttribute("__force-update__",""),o.removeAttribute("__force-update__")},function(){return{width:o.offsetWidth,height:o.offsetHeight}},i,s,function(e){se[e?"unshift":"push"]((()=>{o=e,n(0,o)}))}]}class Xt extends Ne{constructor(e){super(),De(this,e,Ht,jt,l,{measureMeter:0,cssStyle:1,measure:2,forceUpdate:3,currentSize:4})}get measure(){return this.$$.ctx[2]}get forceUpdate(){return this.$$.ctx[3]}get currentSize(){return this.$$.ctx[4]}}function Yt(e){let t,n,s,i,o,a,l,r;const c=e[17].default,d=u(c,e,e[16],null);return{c(){t=S("div"),n=S("div"),s=S("div"),d&&d.c(),i=T(),o=S("div"),a=S("div"),N(s,"class","meter svelte-1287890"),B(s,"width","100%"),N(n,"class","restrict-container svelte-1287890"),N(a,"class","thumb svelte-1287890"),B(a,"--height",e[7]+"px"),B(a,"--top",e[10]+"px"),B(a,"min-height",e[0]+"px"),N(o,"class",l="track "+(e[1]?"needHover":"")+"  "+(e[9]?"hover":"")+" "+(e[8]?"hide":"")+" svelte-1287890"),N(t,"class","out-container svelte-1287890")},m(l,c){E(l,t,c),_(t,n),_(n,s),d&&d.m(s,null),e[18](s),e[19](n),_(t,i),_(t,o),_(o,a),e[20](a),e[21](o),e[22](t),r=!0},p(e,t){d&&d.p&&(!r||65536&t[0])&&f(d,c,e,e[16],r?p(c,e[16],t,null):h(e[16]),null),(!r||128&t[0])&&B(a,"--height",e[7]+"px"),(!r||1024&t[0])&&B(a,"--top",e[10]+"px"),(!r||1&t[0])&&B(a,"min-height",e[0]+"px"),(!r||770&t[0]&&l!==(l="track "+(e[1]?"needHover":"")+"  "+(e[9]?"hover":"")+" "+(e[8]?"hide":"")+" svelte-1287890"))&&N(o,"class",l)},i(e){r||(ke(d,e),r=!0)},o(e){_e(d,e),r=!1},d(n){n&&P(t),d&&d.d(n),e[18](null),e[19](null),e[20](null),e[21](null),e[22](null)}}}function Gt(e,t,n){let s,i,o,a,l,r,c,u,d,p,{$$slots:f={},$$scope:h}=t,{minThumbHeight:m=12}=t,{hoverToShow:g=!1}=t,$=0,v=!1;function y(){a&&n(10,k=$!==m?a.scrollTop/c*d:(d-$)/(c-r)*a.scrollTop)}function w(){r=s.offsetHeight,d=o.offsetHeight,c=i.offsetHeight,u=c?Math.min(r/c,1):1,n(7,$=u*d),$<m&&(n(7,$=m),u=d?Math.min($/d,1):1),n(8,v=u>=1),p=o&&o.getBoundingClientRect().top,T("afterUpdated")}let b=!1;function x(e){e=Math.min(Math.max($/2,e),d-$/2),y(),C((e-$/2)/(d-$)*c)}G((async()=>{o.addEventListener("mouseenter",(()=>{n(9,b=!0)})),o.addEventListener("mouseleave",(()=>{E||n(9,b=!1)})),Ie.on("pageContentChange",w),Ie.on("scroll",x),Ie.on("scroll-up",_)})),Q((()=>{Ie.off("pageContentChange",w),Ie.off("scroll-up",_),Ie.off("scroll",x)}));let k=0;async function _(e){if(!s)return;const t=await st.get("stickScrollSpeedRatio");let n=t?t[t[0]+1].value:.6;C(a.scrollTop+e*n),y()}function C(e){e=Math.min(Math.max(0,e),c),a.scrollTo({top:e})}let L=0,E=!1;function P(e){E=!0;let t=e.offsetY;t=e.pageY-p,C((t-$/2)/d*c),L=e.offsetY-k}function A(e){e.stopPropagation(),n(9,b=!0),L=e.offsetY,E=!0}function S(e){L=0,E=!1,e.path.includes(o)||n(9,b=!1)}function z(e){if(!E)return;C((e.pageY-p-L)/d*c)}const T=K();let M;return G((()=>{window.addEventListener("resize",w),o.addEventListener("mousedown",P),l.addEventListener("mousedown",A),document.addEventListener("mouseup",S),document.addEventListener("mousemove",z),M=Et(y)})),Q((()=>{window.removeEventListener("resize",w),o.removeEventListener("mousedown",P),l.removeEventListener("mousedown",A),document.removeEventListener("mouseup",S),document.removeEventListener("mousemove",z),M.cancel()})),e.$$set=e=>{"minThumbHeight"in e&&n(0,m=e.minThumbHeight),"hoverToShow"in e&&n(1,g=e.hoverToShow),"$$scope"in e&&n(16,h=e.$$scope)},[m,g,s,i,o,a,l,$,v,b,k,w,function(){return!!a},function(){return(a?.scrollTop||0)/(c||1)},function(e){C(e)},function(e){a&&n(5,a.scrollTop=e,a)},h,f,function(e){se[e?"unshift":"push"]((()=>{i=e,n(3,i)}))},function(e){se[e?"unshift":"push"]((()=>{a=e,n(5,a)}))},function(e){se[e?"unshift":"push"]((()=>{l=e,n(6,l)}))},function(e){se[e?"unshift":"push"]((()=>{o=e,n(4,o)}))},function(e){se[e?"unshift":"push"]((()=>{s=e,n(2,s)}))}]}class Jt extends Ne{constructor(e){super(),De(this,e,Gt,Yt,l,{minThumbHeight:0,hoverToShow:1,update:11,prepared:12,getOffsetRatio:13,setOffsetRatio:14,scrollTo:15},null,[-1,-1])}get update(){return this.$$.ctx[11]}get prepared(){return this.$$.ctx[12]}get getOffsetRatio(){return this.$$.ctx[13]}get setOffsetRatio(){return this.$$.ctx[14]}get scrollTo(){return this.$$.ctx[15]}}function Qt(e,{delay:n=0,duration:s=400,easing:i=t}={}){const o=+getComputedStyle(e).opacity;return{delay:n,duration:s,easing:i,css:e=>"opacity: "+e*o}}function Kt(e,t,n){const s=e.slice();return s[8]=t[n],s[10]=n,s}function Zt(e){let t,n,s=e[0][e[10]]+"";return{c(){t=S("div"),n=z(s),N(t,"class","t txt svelte-17bu6no"),B(t,"width",e[8]+"%")},m(e,s){E(e,t,s),_(t,n)},p(e,t){1&t&&s!==(s=e[0][e[10]]+"")&&q(n,s)},d(e){e&&P(t)}}}function en(t){let n,s,i,a,l=t[5],r=[];for(let e=0;e<l.length;e+=1)r[e]=Zt(Kt(t,l,e));return{c(){n=S("div");for(let e=0;e<r.length;e+=1)r[e].c();N(n,"class",s="column tile"+(t[1]?" selected":"")+(t[2]?" focus":"")+" svelte-17bu6no")},m(e,s){E(e,n,s);for(let e=0;e<r.length;e+=1)r[e].m(n,null);i||(a=[R(n,"click",t[3]),R(n,"dblclick",t[4])],i=!0)},p(e,[t]){if(33&t){let s;for(l=e[5],s=0;s<l.length;s+=1){const i=Kt(e,l,s);r[s]?r[s].p(i,t):(r[s]=Zt(i),r[s].c(),r[s].m(n,null))}for(;s<r.length;s+=1)r[s].d(1);r.length=l.length}6&t&&s!==(s="column tile"+(e[1]?" selected":"")+(e[2]?" focus":"")+" svelte-17bu6no")&&N(n,"class",s)},i:e,o:e,d(e){e&&P(n),A(r,e),i=!1,o(a)}}}function tn(e,t,n){let s=K();let{location:i=[]}=t,{data:o=[]}=t,{selected:a=!1}=t,{focus:l=!1}=t,r=function(e){let t=new Array(e.length).fill(0);return(e=[...e]).push(100),t.forEach(((t,n,s)=>{s[n]=e[n+1]-e[n]})),t}(i);return e.$$set=e=>{"location"in e&&n(6,i=e.location),"data"in e&&n(0,o=e.data),"selected"in e&&n(1,a=e.selected),"focus"in e&&n(2,l=e.focus)},[o,a,l,function(e){s("click",e)},function(e){s("dbclick",e)},r,i]}class nn extends Ne{constructor(e){super(),De(this,e,tn,en,l,{location:6,data:0,selected:1,focus:2})}}function sn(t){let n;return{c(){n=S("canvas"),B(n,"width",t[0]+"px"),B(n,"height",t[0]+"px"),N(n,"width",t[2]),N(n,"height",t[2])},m(e,s){E(e,n,s),t[11](n)},p(e,[t]){1&t&&B(n,"width",e[0]+"px"),1&t&&B(n,"height",e[0]+"px")},i:e,o:e,d(e){e&&P(n),t[11](null)}}}function on(e,t,n){let s,i,{size:o=200}=t,{min:a=60}=t,{max:l=270}=t,{transformDuration:r=500}=t,{transformationDelay:c=500}=t,{angularVelocity:u=.2}=t,{roundCap:d=!0}=t,{lineWidth:p=6}=t,{strokeStyle:f=getComputedStyle(document.body).getPropertyValue("--controlColor")}=t;const h=window.devicePixelRatio;let m=h*o,g=0,$=a;const v=Math.PI/180;function y(){L=g*v,E=$*v}const w=(e,t)=>(e+t)%360,b=(()=>{let e=0;return t=>{if(e+=t,g=w(g,u*t),$=w($,u*t),y(),e>c)return _=3===_?0:_+1,e=0}})(),x=(()=>{let e=0,t=(l-a)/r,n=t/r,s=r/2;return i=>{if(e+=i,g=w(g,u*i),$=w($,(2*(e>s?t-(e-s)*n:e*n)+u)*i),e>r)return $=g+l,_++,y(),e=0;y()}})(),k=(()=>{let e=0,t=(l-a)/r,n=t/r,s=r/2;return i=>{if(e+=i,g=w(g,(2*(e>s?t-(e-s)*n:e*n)+u)*i),$=w($,u*i),e>r)return g=$-a,_++,y(),e=0;y()}})();let _=0;let C,L=0,E=0;const P=e=>{if(!C)return C=e,void requestAnimationFrame(P);const t=e-C;C=e,(e=>{0==_&&x(e),1==_&&b(e),2==_&&k(e),3==_&&b(e)})(t),i.strokeStyle=f,i.clearRect(0,0,o,o),i.beginPath(),i.arc(o/2,o/2,(o-p)/2,L,E),i.stroke(),i.closePath(),requestAnimationFrame(P)};return G((()=>{i=s.getContext("2d"),i.scale(h,h),i.lineWidth=p,d&&(i.lineCap="round"),requestAnimationFrame(P)})),e.$$set=e=>{"size"in e&&n(0,o=e.size),"min"in e&&n(3,a=e.min),"max"in e&&n(4,l=e.max),"transformDuration"in e&&n(5,r=e.transformDuration),"transformationDelay"in e&&n(6,c=e.transformationDelay),"angularVelocity"in e&&n(7,u=e.angularVelocity),"roundCap"in e&&n(8,d=e.roundCap),"lineWidth"in e&&n(9,p=e.lineWidth),"strokeStyle"in e&&n(10,f=e.strokeStyle)},[o,s,m,a,l,r,c,u,d,p,f,function(e){se[e?"unshift":"push"]((()=>{s=e,n(1,s)}))}]}class an extends Ne{constructor(e){super(),De(this,e,on,sn,l,{size:0,min:3,max:4,transformDuration:5,transformationDelay:6,angularVelocity:7,roundCap:8,lineWidth:9,strokeStyle:10})}}function ln(e,t,n){const s=e.slice();return s[10]=t[n],s[12]=n,s}function rn(t){let n,s,i;return s=new an({props:{strokeStyle:window.getComputedStyle(document.body).getPropertyValue("--controlDark"),size:20,lineWidth:3,transformationDelay:300,transformDuration:300}}),{c(){n=S("div"),Te(s.$$.fragment),N(n,"class","Column"),B(n,"width","100%"),B(n,"margin-top","20px")},m(e,t){E(e,n,t),Me(s,n,null),i=!0},p:e,i(e){i||(ke(s.$$.fragment,e),i=!0)},o(e){_e(s.$$.fragment,e),i=!1},d(e){e&&P(n),Re(s)}}}function cn(e){let t,n,s=e[1],i=[];for(let t=0;t<s.length;t+=1)i[t]=un(ln(e,s,t));const o=e=>_e(i[e],1,1,(()=>{i[e]=null}));return{c(){for(let e=0;e<i.length;e+=1)i[e].c();t=M()},m(e,s){for(let t=0;t<i.length;t+=1)i[t].m(e,s);E(e,t,s),n=!0},p(e,n){if(63&n){let a;for(s=e[1],a=0;a<s.length;a+=1){const o=ln(e,s,a);i[a]?(i[a].p(o,n),ke(i[a],1)):(i[a]=un(o),i[a].c(),ke(i[a],1),i[a].m(t.parentNode,t))}for(be(),a=s.length;a<i.length;a+=1)o(a);xe()}},i(e){if(!n){for(let e=0;e<s.length;e+=1)ke(i[e]);n=!0}},o(e){i=i.filter(Boolean);for(let e=0;e<i.length;e+=1)_e(i[e]);n=!1},d(e){A(i,e),e&&P(t)}}}function un(e){let t,n,s;function i(t){e[6](t)}let o={data:[e[12]+1,e[10].name,e[10].ar.reduce(pn,[]).join(" / "),e[10].al.name],selected:e[2].has(e[12]),focus:~e[3]&&e[3]};return void 0!==e[0]&&(o.location=e[0]),t=new nn({props:o}),se.push((()=>ze(t,"location",i))),t.$on("click",(function(){return e[7](e[12])})),t.$on("dbclick",(function(){return e[8](e[12])})),{c(){Te(t.$$.fragment)},m(e,n){Me(t,e,n),s=!0},p(s,i){e=s;const o={};2&i&&(o.data=[e[12]+1,e[10].name,e[10].ar.reduce(pn,[]).join(" / "),e[10].al.name]),4&i&&(o.selected=e[2].has(e[12])),8&i&&(o.focus=~e[3]&&e[3]),!n&&1&i&&(n=!0,o.location=e[0],de((()=>n=!1))),t.$set(o)},i(e){s||(ke(t.$$.fragment,e),s=!0)},o(e){_e(t.$$.fragment,e),s=!1},d(e){Re(t,e)}}}function dn(e){let t,n,s,i;const o=[cn,rn],a=[];function l(e,t){return e[1].length?0:1}return t=l(e),n=a[t]=o[t](e),{c(){n.c(),s=M()},m(e,n){a[t].m(e,n),E(e,s,n),i=!0},p(e,[i]){let r=t;t=l(e),t===r?a[t].p(e,i):(be(),_e(a[r],1,1,(()=>{a[r]=null})),xe(),n=a[t],n?n.p(e,i):(n=a[t]=o[t](e),n.c()),ke(n,1),n.m(s.parentNode,s))},i(e){i||(ke(n),i=!0)},o(e){_e(n),i=!1},d(e){a[t].d(e),e&&P(s)}}}const pn=(e,t)=>[...e,t.name];function fn(e,t,n){let s=K(),{listData:i=[]}=t,{location:o=[]}=t,{selections:a=new Set}=t,{focus:l=-1}=t;function r(e){s("click",{listData:i,i:e})}function c(e){s("dbclick",{listData:i,i:e})}G((()=>{s("mount")})),J((()=>{i.length>0&&s("update")}));return e.$$set=e=>{"listData"in e&&n(1,i=e.listData),"location"in e&&n(0,o=e.location),"selections"in e&&n(2,a=e.selections),"focus"in e&&n(3,l=e.focus)},[o,i,a,l,r,c,function(e){o=e,n(0,o)},e=>r(e),e=>c(e)]}class hn extends Ne{constructor(e){super(),De(this,e,fn,dn,l,{listData:1,location:0,selections:2,focus:3})}}function mn(e){let t,n,s;return{c(){t=S("textarea"),N(t,"type",e[0]),N(t,"id",e[1]),N(t,"spellcheck",e[8]),t.value=e[2],N(t,"maxlength",e[4]),N(t,"style",e[5]),N(t,"placeholder",e[7]),N(t,"class","svelte-188f7of")},m(i,o){E(i,t,o),e[17](t),n||(s=[R(t,"focus",e[12]),R(t,"change",e[14]),R(t,"input",e[15]),R(t,"blur",e[13])],n=!0)},p(e,n){1&n&&N(t,"type",e[0]),2&n&&N(t,"id",e[1]),256&n&&N(t,"spellcheck",e[8]),4&n&&(t.value=e[2]),16&n&&N(t,"maxlength",e[4]),32&n&&N(t,"style",e[5]),128&n&&N(t,"placeholder",e[7])},d(i){i&&P(t),e[17](null),n=!1,o(s)}}}function gn(e){let t,n,s;return{c(){t=S("input"),N(t,"type",e[0]),N(t,"id",e[1]),N(t,"spellcheck",e[8]),t.value=e[2],N(t,"style",e[5]),N(t,"placeholder",e[7]),N(t,"class","svelte-188f7of")},m(i,o){E(i,t,o),e[16](t),n||(s=[R(t,"focus",e[12]),R(t,"change",e[14]),R(t,"input",e[15]),R(t,"blur",e[13])],n=!0)},p(e,n){1&n&&N(t,"type",e[0]),2&n&&N(t,"id",e[1]),256&n&&N(t,"spellcheck",e[8]),4&n&&t.value!==e[2]&&(t.value=e[2]),32&n&&N(t,"style",e[5]),128&n&&N(t,"placeholder",e[7])},d(i){i&&P(t),e[16](null),n=!1,o(s)}}}function $n(t){let n,s;function i(e,t){return e[3]?gn:mn}let o=i(t),a=o(t);return{c(){n=S("div"),a.c(),N(n,"class",s=(t[6]?"full-border":"input")+(t[11]?" focus":"")+" svelte-188f7of"),N(n,"style",t[9])},m(e,t){E(e,n,t),a.m(n,null)},p(e,[t]){o===(o=i(e))&&a?a.p(e,t):(a.d(1),a=o(e),a&&(a.c(),a.m(n,null))),2112&t&&s!==(s=(e[6]?"full-border":"input")+(e[11]?" focus":"")+" svelte-188f7of")&&N(n,"class",s),512&t&&N(n,"style",e[9])},i:e,o:e,d(e){e&&P(n),a.d()}}}function vn(e,t,n){let s,{type:i="text"}=t,{id:o="default-id"}=t,{value:a=""}=t,{singleLine:l=!0}=t,{maxLength:r=999999}=t,{cssText:c=""}=t,{fullBorder:u=!1}=t,{placeholder:d=""}=t,{spellcheck:p=!1}=t,{containerStyle:f=""}=t,h=K(),m=!1;return e.$$set=e=>{"type"in e&&n(0,i=e.type),"id"in e&&n(1,o=e.id),"value"in e&&n(2,a=e.value),"singleLine"in e&&n(3,l=e.singleLine),"maxLength"in e&&n(4,r=e.maxLength),"cssText"in e&&n(5,c=e.cssText),"fullBorder"in e&&n(6,u=e.fullBorder),"placeholder"in e&&n(7,d=e.placeholder),"spellcheck"in e&&n(8,p=e.spellcheck),"containerStyle"in e&&n(9,f=e.containerStyle)},[i,o,a,l,r,c,u,d,p,f,s,m,function(){n(11,m=!0),h("focus")},function(){n(11,m=!1),h("blur")},function(){h("change",s.value)},function(){h("input",s.value)},function(e){se[e?"unshift":"push"]((()=>{s=e,n(10,s)}))},function(e){se[e?"unshift":"push"]((()=>{s=e,n(10,s)}))}]}class yn extends Ne{constructor(e){super(),De(this,e,vn,$n,l,{type:0,id:1,value:2,singleLine:3,maxLength:4,cssText:5,fullBorder:6,placeholder:7,spellcheck:8,containerStyle:9})}}function wn(e,t,n){const s=e.slice();return s[48]=t[n],s[50]=n,s}function bn(e,t,n){const s=e.slice();return s[51]=t[n],s[50]=n,s}function xn(e){let t,n,s,i,o=e[51]+"";return{c(){t=S("div"),n=z(o),N(t,"index",s=e[50]),N(t,"class",i=g(e[4]===e[50]?"selected":"")+" svelte-lznlow")},m(e,s){E(e,t,s),_(t,n)},p(e,n){16&n[0]&&i!==(i=g(e[4]===e[50]?"selected":"")+" svelte-lznlow")&&N(t,"class",i)},d(e){e&&P(t)}}}function kn(e){let t,n,s,i,o,a,l,r,c,u,d,p=e[0].names,f=[];for(let t=0;t<p.length;t+=1)f[t]=_n(wn(e,p,t));function h(t){e[26](t)}function m(t){e[27](t)}function g(t){e[28](t)}let $={};return void 0!==e[5]&&($.listData=e[5]),void 0!==e[8]&&($.location=e[8]),void 0!==e[9]&&($.selections=e[9]),o=new hn({props:$}),se.push((()=>ze(o,"listData",h))),se.push((()=>ze(o,"location",m))),se.push((()=>ze(o,"selections",g))),o.$on("update",e[20]),o.$on("click",e[15]),o.$on("dbclick",e[16]),{c(){t=S("div"),n=S("div");for(let e=0;e<f.length;e+=1)f[e].c();s=T(),i=S("div"),Te(o.$$.fragment),N(n,"class","Row splitter svelte-lznlow"),B(n,"width","calc(100% - 44px)"),B(n,"margin","0px 24px"),N(i,"class","Column list svelte-lznlow"),N(t,"class","Column c svelte-lznlow")},m(a,l){E(a,t,l),_(t,n);for(let e=0;e<f.length;e+=1)f[e].m(n,null);e[25](n),_(t,s),_(t,i),Me(o,i,null),e[29](t),c=!0,u||(d=R(n,"mousedown",e[14]),u=!0)},p(e,t){if(8327&t[0]){let s;for(p=e[0].names,s=0;s<p.length;s+=1){const i=wn(e,p,s);f[s]?f[s].p(i,t):(f[s]=_n(i),f[s].c(),f[s].m(n,null))}for(;s<f.length;s+=1)f[s].d(1);f.length=p.length}const s={};!a&&32&t[0]&&(a=!0,s.listData=e[5],de((()=>a=!1))),!l&&256&t[0]&&(l=!0,s.location=e[8],de((()=>l=!1))),!r&&512&t[0]&&(r=!0,s.selections=e[9],de((()=>r=!1))),o.$set(s)},i(e){c||(ke(o.$$.fragment,e),c=!0)},o(e){_e(o.$$.fragment,e),c=!1},d(n){n&&P(t),A(f,n),e[25](null),Re(o),e[29](null),u=!1,d()}}}function _n(e){let t,n,s,i,o,a=e[48]+"";function l(){return e[24](e[50])}return{c(){t=S("div"),n=z(a),N(t,"class",s="splitterTab"+(e[1]===e[50]?e[2]?" backwards":" forwards":"")+" svelte-lznlow"),B(t,"width",e[7][e[50]]+"%")},m(e,s){E(e,t,s),_(t,n),i||(o=R(t,"click",l),i=!0)},p(i,o){e=i,1&o[0]&&a!==(a=e[48]+"")&&q(n,a),6&o[0]&&s!==(s="splitterTab"+(e[1]===e[50]?e[2]?" backwards":" forwards":"")+" svelte-lznlow")&&N(t,"class",s),128&o[0]&&B(t,"width",e[7][e[50]]+"%")},d(e){e&&P(t),i=!1,o()}}}function Cn(e){let t,n,s=0===e[4]&&kn(e);return{c(){s&&s.c(),t=M()},m(e,i){s&&s.m(e,i),E(e,t,i),n=!0},p(e,n){0===e[4]?s?(s.p(e,n),16&n[0]&&ke(s,1)):(s=kn(e),s.c(),ke(s,1),s.m(t.parentNode,t)):s&&(be(),_e(s,1,1,(()=>{s=null})),xe())},i(e){n||(ke(s),n=!0)},o(e){_e(s),n=!1},d(e){s&&s.d(e),e&&P(t)}}}function Ln(e){let t,n,s,i,a,l,r,c,u,d,p,f,h,m,g,$,v,y,w,b,x,k,C,L,M,D,U,V,O,F,I,W,j,H=e[3].trackCount+"",X=e[3].title+"",Y=e[3].subtitle+"";i=new mt({props:{width:292,height:292,radius:"0",avatar:e[3].imgUrl}}),M=new yn({props:{type:"text",placeholder:"  搜索列表",fullBorder:!0}}),M.$on("input",e[22]);let G=e[12],J=[];for(let t=0;t<G.length;t+=1)J[t]=xn(bn(e,G,t));return F=new Jt({props:{$$slots:{default:[Cn]},$$scope:{ctx:e}}}),e[30](F),{c(){t=S("div"),n=S("div"),s=S("div"),Te(i.$$.fragment),a=T(),l=S("div"),r=z(H),c=z(" 首"),u=T(),d=S("div"),p=S("div"),f=S("h3"),h=z(X),m=T(),g=S("div"),$=z(Y),v=T(),y=S("div"),w=S("div"),w.textContent=" 播放",b=T(),x=S("div"),x.textContent="",k=T(),C=S("div"),L=S("div"),Te(M.$$.fragment),D=T(),U=S("div");for(let e=0;e<J.length;e+=1)J[e].c();V=T(),O=S("div"),Te(F.$$.fragment),B(s,"z-index","-1"),B(s,"height","250px"),N(l,"class","bread-crumb svelte-lznlow"),N(f,"class","title svelte-lznlow"),N(g,"class","subtitle svelte-lznlow"),N(w,"class","btn big accent svelte-lznlow"),N(x,"class","btn big bright svelte-lznlow"),N(y,"class","Row"),N(d,"class","Column rowl svelte-lznlow"),N(n,"class","header Column svelte-lznlow"),B(n,"overflow","hidden"),B(n,"position","relative"),N(U,"class","Row view-display svelte-lznlow"),N(L,"class","nav Row svelte-lznlow"),B(O,"height","calc(100% - 60px)"),N(C,"class","playlistContent svelte-lznlow"),N(C,"style",""),N(t,"class","Row"),B(t,"width","100%"),B(t,"height","100%")},m(o,P){E(o,t,P),_(t,n),_(n,s),Me(i,s,null),_(n,a),_(n,l),_(l,r),_(l,c),_(n,u),_(n,d),_(d,p),_(p,f),_(f,h),_(p,m),_(p,g),_(g,$),_(d,v),_(d,y),_(y,w),_(y,b),_(y,x),_(t,k),_(t,C),_(C,L),Me(M,L,null),_(L,D),_(L,U);for(let e=0;e<J.length;e+=1)J[e].m(U,null);_(C,V),_(C,O),Me(F,O,null),I=!0,W||(j=[R(w,"click",e[17]),R(x,"click",e[18]),R(U,"click",e[23])],W=!0)},p(e,t){const n={};if(8&t[0]&&(n.avatar=e[3].imgUrl),i.$set(n),(!I||8&t[0])&&H!==(H=e[3].trackCount+"")&&q(r,H),(!I||8&t[0])&&X!==(X=e[3].title+"")&&q(h,X),(!I||8&t[0])&&Y!==(Y=e[3].subtitle+"")&&q($,Y),4112&t[0]){let n;for(G=e[12],n=0;n<G.length;n+=1){const s=bn(e,G,n);J[n]?J[n].p(s,t):(J[n]=xn(s),J[n].c(),J[n].m(U,null))}for(;n<J.length;n+=1)J[n].d(1);J.length=G.length}const s={};2039&t[0]|4194304&t[1]&&(s.$$scope={dirty:t,ctx:e}),F.$set(s)},i(e){I||(ke(i.$$.fragment,e),ke(M.$$.fragment,e),ke(F.$$.fragment,e),I=!0)},o(e){_e(i.$$.fragment,e),_e(M.$$.fragment,e),_e(F.$$.fragment,e),I=!1},d(n){n&&P(t),Re(i),Re(M),A(J,n),e[30](null),Re(F),W=!1,o(j)}}}function En(e){let t=[...e],n=new Array(e.length).fill(0);return t.push(100),n.forEach(((e,n,s)=>{s[n]=t[n+1]-t[n]})),n}function Pn(e,t){return e.toLowerCase().includes(t.toLowerCase())}function An(e,t,n){let{header:s=null}=t;const i=()=>1;let{listSplitter:o=st.getSync("playlist/splitter")||{location:[0,16,44,72],names:["功能","歌曲名","艺术家","专辑"]}}=t,a=st.getSync("playlist/displayType")||0;Q((()=>{st.set("playlist/displayType",a)})),o.sortFunc=[i,(e,t)=>t.name>e.name||-1,(e,t)=>t.ar[0].name>e.ar[0].name||-1,(e,t)=>t.al.name>e.al.name||-1];let l,r,{listData:c=[]}=t,{sortBy:u=0}=t,{forwards:d=!0}=t,p=[];function f(e){r=[...e],e.sort(o.sortFunc[u]),!d&&e.reverse(),n(5,p=e)}G((()=>{c instanceof Promise?Ie.once("pageSwipeAnimFinish",(()=>c.then((e=>f(e))))):f(c)}));let h=!1;function m(e){if(!h)return!1;let t;"number"!=typeof e&&(e=o.names.indexOf(e)),e===u&&n(2,d=!d),t=o.sortFunc[e]||i,n(1,u=e),st.set("playlist/sortBy",u),st.set("playlist/forwards",d);let s=[...r];s.sort(t),d||(s=s.reverse()),setTimeout((()=>{n(5,p=s)}))}m(u);let g,$,v=En(o.location),y=o.location,w=!1,b=0,x=0,k=0;document.addEventListener("mousemove",(function(e){w&&(h=!1,k=e.screenX-x,$.style.transform=`translateX(${k}px)`)})),document.addEventListener("mouseup",(function(){if(w){w=!1,$.style.transform="";let e=k/b*100;n(8,y[g]+=e,y),n(7,v=En(y));const t=p;n(5,p=[]),setTimeout((()=>{n(5,p=t)})),x=k=g=0,$=null,st.set("playlist/splitter",{location:y,names:o.names})}}));let _=!1;document.addEventListener("keydown",(e=>{e.ctrlKey&&(_=!0)})),document.addEventListener("keyup",(e=>{e.ctrlKey&&(_=!1)}));let C,L=new Set;G((()=>{contextMap.set(C,{"刷新":()=>{const{name:e,props:t}=Pager.getContext(),n=Pager.getContext().class;Pager.openNew(e,n,t,!0)}})})),Q((()=>{contextMap.delete(C)}));const E=((e,t=600)=>{let n;return(...s)=>{n||(n=setTimeout((()=>{e(...s),n=null}),t))}})((async e=>{const t=await async function(e){if(!e)return[];const t=(await c).slice();let n=[];for(const s of t){const{name:t,al:i,ar:o}=s;if(Pn(t,e))n.push(s);else if(Pn(i.name||"",e))n.push(s);else for(const t of o)if(Pn(t.name||"",e)){n.push(s);break}}return n}(e);t.length?f(t):f(await c)}));let P,A=!1;Pager.beforeSwitch((()=>{if(P?.prepared()){const{save:e}=Pager.getContext();e.offsetRatio=P.getOffsetRatio()}Ie.emit("__pageUnfold")}));return e.$$set=e=>{"header"in e&&n(3,s=e.header),"listSplitter"in e&&n(0,o=e.listSplitter),"listData"in e&&n(21,c=e.listData),"sortBy"in e&&n(1,u=e.sortBy),"forwards"in e&&n(2,d=e.forwards)},[o,u,d,s,a,p,l,v,y,L,C,P,["",""],m,function(e){h=!0,$=e.target,$!==l&&(g=[...$.parentNode.children].indexOf($),0!==g&&(b=e.path[1].offsetWidth,w=!0,e.target.offsetLeft,x=e.screenX))},function(e){const t=e.detail.i;_?(L.add(t),n(9,L)):n(9,L=(new Set).add(t))},async function(e){const{listData:t,i:n}=e.detail,s=Lt.query({name:t[n].name});if(!s.length)return Lt.loadList(t),void Lt.play(n);Lt.play(s[0])},async function(){let e=(await c).slice(0);Lt.loadList(e),Lt.play(0)},async function(){let e=(await c).slice(0);Lt.loadList(e.sort((()=>Math.random()-.5))),Lt.play(0)},E,async function(){A||(await ce(),async function(){if(P?.prepared()){const{save:e}=Pager.getContext();P.setOffsetRatio(e.offsetRatio)}}(),A=!0)},c,e=>{E(e.detail)},e=>{n(4,a=+e.target.getAttribute("index")??a)},e=>m(e),function(e){se[e?"unshift":"push"]((()=>{l=e,n(6,l)}))},function(e){p=e,n(5,p)},function(e){y=e,n(8,y)},function(e){L=e,n(9,L)},function(e){se[e?"unshift":"push"]((()=>{C=e,n(10,C)}))},function(e){se[e?"unshift":"push"]((()=>{P=e,n(11,P)}))}]}class Sn extends Ne{constructor(e){super(),De(this,e,An,Ln,l,{header:3,listSplitter:0,listData:21,sortBy:1,forwards:2},null,[-1,-1])}}function zn(t){let n;return{c(){n=S("div"),N(n,"class","Column c svelte-kksz75"),B(n,"background-color",t[5]),B(n,"width",t[0]+"px"),B(n,"height",t[1]+"px"),B(n,"border-radius",t[2]),B(n,"border","solid "+t[3]+" "+t[4])},m(e,s){E(e,n,s),t[9](n)},p(e,[t]){32&t&&B(n,"background-color",e[5]),1&t&&B(n,"width",e[0]+"px"),2&t&&B(n,"height",e[1]+"px"),4&t&&B(n,"border-radius",e[2]),24&t&&B(n,"border","solid "+e[3]+" "+e[4])},i:e,o:e,d(e){e&&P(n),t[9](null)}}}function Tn(e,t,n){let s,{src:i=""}=t,{width:o=64}=t,{height:a=64}=t,{radius:l="8px"}=t,{borderWidth:r="2px"}=t,{borderColor:c="var(--controlGray)"}=t,{skeletonColor:u="var(--controlGray)"}=t;const d=new Image(o,a);async function p(){d.src=await at(i),await lt.decode(d),s&&(s.appendChild(d),await new Promise((e=>{d.animate([{opacity:0},{opacity:1}],{duration:200,fill:"forwards"}).onfinish=()=>e()})))}d.draggable=!1,d.alt="",d.style.opacity=1;const f=async()=>{d.remove(),await p()};return G((async()=>{await p(),Ie.on("win:focus",f)})),Pager.beforeSwitch((()=>{Ie.off("win:focus",f)})),e.$$set=e=>{"src"in e&&n(8,i=e.src),"width"in e&&n(0,o=e.width),"height"in e&&n(1,a=e.height),"radius"in e&&n(2,l=e.radius),"borderWidth"in e&&n(3,r=e.borderWidth),"borderColor"in e&&n(4,c=e.borderColor),"skeletonColor"in e&&n(5,u=e.skeletonColor)},[o,a,l,r,c,u,s,"",i,function(e){se[e?"unshift":"push"]((()=>{s=e,n(6,s)}))}]}class Mn extends Ne{constructor(e){super(),De(this,e,Tn,zn,l,{alt:7,src:8,width:0,height:1,radius:2,borderWidth:3,borderColor:4,skeletonColor:5})}get alt(){return this.$$.ctx[7]}}function Rn(e,t,n){const s=e.slice();return s[35]=t[n],s[37]=n,s}function Dn(e,t,n){const s=e.slice();return s[38]=t[n],s[37]=n,s}function Nn(e,t,n){const s=e.slice();return s[40]=t[n],s[37]=n,s}function Un(t){return{c:e,m:e,p:e,i:e,o:e,d:e}}function qn(e){let t,n;return t=new Mn({props:{width:160,height:160,radius:"4px",src:e[42],borderWidth:"0px"}}),{c(){Te(t.$$.fragment)},m(e,s){Me(t,e,s),n=!0},p(e,n){const s={};1&n[0]&&(s.src=e[42]),t.$set(s)},i(e){n||(ke(t.$$.fragment,e),n=!0)},o(e){_e(t.$$.fragment,e),n=!1},d(e){Re(t,e)}}}function Vn(t){let n;return{c(){n=S("div"),N(n,"class","avatar svelte-1xd6fai"),B(n,"background-color","var(--controlGray)")},m(e,t){E(e,n,t)},p:e,i:e,o:e,d(e){e&&P(n)}}}function Bn(e){let t,n,s,i,a,l,r,c,u,d,p,f,h,m=e[40].name+"",g={ctx:e,current:null,token:null,hasCatch:!1,pending:Vn,then:qn,catch:Un,value:42,blocks:[,,,]};function $(){return e[21](e[40])}function v(){return e[22](e[40])}return Ee(n=at(e[40].coverImgUrl),g),{c(){t=S("div"),g.block.c(),s=T(),i=S("div"),i.textContent="",a=T(),l=S("div"),r=S("div"),c=z(m),u=T(),N(i,"class","btn light FAB svelte-1xd6fai"),N(l,"class","row title svelte-1xd6fai"),N(t,"class","card row active svelte-1xd6fai"),N(t,"title",d=e[40].name)},m(e,n){E(e,t,n),g.block.m(t,g.anchor=null),g.mount=()=>t,g.anchor=s,_(t,s),_(t,i),_(t,a),_(t,l),_(l,r),_(r,c),_(t,u),p=!0,f||(h=[R(i,"click",D($)),R(i,"mouseenter",D(Yn)),R(i,"mouseleave",D(Gn)),R(t,"click",v)],f=!0)},p(s,i){e=s,g.ctx=e,1&i[0]&&n!==(n=at(e[40].coverImgUrl))&&Ee(n,g)||Pe(g,e,i),(!p||1&i[0])&&m!==(m=e[40].name+"")&&q(c,m),(!p||1&i[0]&&d!==(d=e[40].name))&&N(t,"title",d)},i(e){p||(ke(g.block),p=!0)},o(e){for(let e=0;e<3;e+=1){_e(g.blocks[e])}p=!1},d(e){e&&P(t),g.block.d(),g.token=null,g=null,f=!1,o(h)}}}function On(e){let t,n,s=e[0],i=[];for(let t=0;t<s.length;t+=1)i[t]=Bn(Nn(e,s,t));const o=e=>_e(i[e],1,1,(()=>{i[e]=null}));return{c(){t=S("div");for(let e=0;e<i.length;e+=1)i[e].c();N(t,"class","column card-container svelte-1xd6fai")},m(e,s){E(e,t,s);for(let e=0;e<i.length;e+=1)i[e].m(t,null);n=!0},p(e,n){if(284675&n[0]){let a;for(s=e[0],a=0;a<s.length;a+=1){const o=Nn(e,s,a);i[a]?(i[a].p(o,n),ke(i[a],1)):(i[a]=Bn(o),i[a].c(),ke(i[a],1),i[a].m(t,null))}for(be(),a=s.length;a<i.length;a+=1)o(a);xe()}},i(e){if(!n){for(let e=0;e<s.length;e+=1)ke(i[e]);n=!0}},o(e){i=i.filter(Boolean);for(let e=0;e<i.length;e+=1)_e(i[e]);n=!1},d(e){e&&P(t),A(i,e)}}}function Fn(e){let t,n,s,i,o,a,l,r,c=e[11]("all_artists",e[5].showAllArtists?e[11]("collapse"):e[11]("expand"),e[8].count)+"",u=e[8],d=[];for(let t=0;t<u.length;t+=1)d[t]=In(Dn(e,u,t));const p=e=>_e(d[e],1,1,(()=>{d[e]=null}));return{c(){t=S("div"),n=S("div"),s=z(c),i=T();for(let e=0;e<d.length;e+=1)d[e].c();N(n,"class","btn light dynamic"),B(n,"position","absolute"),B(n,"left","200px"),B(n,"top","0px"),B(n,"border-radius","6px"),N(t,"class","Row"),N(t,"row-title",o=e[11]("favorite_artists")),B(t,"--item-height","200px"),B(t,"--item-width","200px"),B(t,"align-self","flex-start")},m(o,c){E(o,t,c),_(t,n),_(n,s),_(t,i);for(let e=0;e<d.length;e+=1)d[e].m(t,null);a=!0,l||(r=R(n,"click",e[25]),l=!0)},p(e,n){if((!a||288&n[0])&&c!==(c=e[11]("all_artists",e[5].showAllArtists?e[11]("collapse"):e[11]("expand"),e[8].count)+"")&&q(s,c),256&n[0]){let s;for(u=e[8],s=0;s<u.length;s+=1){const i=Dn(e,u,s);d[s]?(d[s].p(i,n),ke(d[s],1)):(d[s]=In(i),d[s].c(),ke(d[s],1),d[s].m(t,null))}for(be(),s=u.length;s<d.length;s+=1)p(s);xe()}},i(e){if(!a){for(let e=0;e<u.length;e+=1)ke(d[e]);a=!0}},o(e){d=d.filter(Boolean);for(let e=0;e<d.length;e+=1)_e(d[e]);a=!1},d(e){e&&P(t),A(d,e),l=!1,r()}}}function In(e){let t,n,s,i,a,l,r,c,u,d,p,f,h,m,g=e[38].name+"",$=(e[38].alias.length?e[38].alias[0]:"")+"";return i=new Mn({props:{width:140,height:140,radius:"50%",src:e[38].picUrl,alt:e[38].name}}),{c(){t=S("div"),n=S("div"),n.textContent="",s=T(),Te(i.$$.fragment),a=T(),l=S("div"),r=z(g),c=T(),u=S("div"),d=z($),p=T(),N(n,"class","btn light FAB svelte-1xd6fai"),N(l,"class","name title svelte-1xd6fai"),N(u,"class","name svelte-1xd6fai"),N(t,"class","Column artist-c active svelte-1xd6fai")},m(e,o){E(e,t,o),_(t,n),_(t,s),Me(i,t,null),_(t,a),_(t,l),_(l,r),_(t,c),_(t,u),_(u,d),_(t,p),f=!0,h||(m=[R(n,"click",D(Jn)),R(n,"mouseenter",D(Yn)),R(n,"mouseleave",D(Gn))],h=!0)},p(e,t){const n={};256&t[0]&&(n.src=e[38].picUrl),256&t[0]&&(n.alt=e[38].name),i.$set(n),(!f||256&t[0])&&g!==(g=e[38].name+"")&&q(r,g),(!f||256&t[0])&&$!==($=(e[38].alias.length?e[38].alias[0]:"")+"")&&q(d,$)},i(e){f||(ke(i.$$.fragment,e),f=!0)},o(e){_e(i.$$.fragment,e),f=!1},d(e){e&&P(t),Re(i),h=!1,o(m)}}}function Wn(e){let t,n,s,i,o,a,l,r,c=e[11]("all_albums",e[5].showAllAlbums?e[11]("collapse"):e[11]("expand"),e[9].count)+"",u=e[9],d=[];for(let t=0;t<u.length;t+=1)d[t]=jn(Rn(e,u,t));const p=e=>_e(d[e],1,1,(()=>{d[e]=null}));return{c(){t=S("div"),n=S("div"),s=z(c),i=T();for(let e=0;e<d.length;e+=1)d[e].c();N(n,"class","btn light dynamic"),B(n,"position","absolute"),B(n,"left","200px"),B(n,"top","0px"),B(n,"border-radius","6px"),N(t,"class","Row"),N(t,"row-title",o=e[11]("favorite_albums")),B(t,"--item-height","200px"),B(t,"--item-width","200px"),B(t,"align-self","flex-start")},m(o,c){E(o,t,c),_(t,n),_(n,s),_(t,i);for(let e=0;e<d.length;e+=1)d[e].m(t,null);a=!0,l||(r=R(n,"click",e[26]),l=!0)},p(e,n){if((!a||544&n[0])&&c!==(c=e[11]("all_albums",e[5].showAllAlbums?e[11]("collapse"):e[11]("expand"),e[9].count)+"")&&q(s,c),823808&n[0]){let s;for(u=e[9],s=0;s<u.length;s+=1){const i=Rn(e,u,s);d[s]?(d[s].p(i,n),ke(d[s],1)):(d[s]=jn(i),d[s].c(),ke(d[s],1),d[s].m(t,null))}for(be(),s=u.length;s<d.length;s+=1)p(s);xe()}},i(e){if(!a){for(let e=0;e<u.length;e+=1)ke(d[e]);a=!0}},o(e){d=d.filter(Boolean);for(let e=0;e<d.length;e+=1)_e(d[e]);a=!1},d(e){e&&P(t),A(d,e),l=!1,r()}}}function jn(e){let t,n,s,i,a,l,r,c,u,d,p,f=e[35].name+"";function h(){return e[27](e[35])}function m(){return e[28](e[35])}return i=new Mn({props:{width:140,height:140,radius:"8px",src:e[35].picUrl,alt:e[35].name}}),{c(){t=S("div"),n=S("div"),n.textContent="",s=T(),Te(i.$$.fragment),a=T(),l=S("div"),r=z(f),c=T(),N(n,"class","btn light FAB svelte-1xd6fai"),N(l,"class","name title svelte-1xd6fai"),B(l,"width","calc(100% - 16px)"),N(t,"class","Column artist-c al active svelte-1xd6fai")},m(e,o){E(e,t,o),_(t,n),_(t,s),Me(i,t,null),_(t,a),_(t,l),_(l,r),_(t,c),u=!0,d||(p=[R(n,"click",D(h)),R(n,"mouseenter",D(Yn)),R(n,"mouseleave",D(Gn)),R(t,"click",m)],d=!0)},p(t,n){e=t;const s={};512&n[0]&&(s.src=e[35].picUrl),512&n[0]&&(s.alt=e[35].name),i.$set(s),(!u||512&n[0])&&f!==(f=e[35].name+"")&&q(r,f)},i(e){u||(ke(i.$$.fragment,e),u=!0)},o(e){_e(i.$$.fragment,e),u=!1},d(e){e&&P(t),Re(i),d=!1,o(p)}}}function Hn(e){let t,n,s,i,o,a,l,r,u,d,p,f,h,m,g,$;d=new Xt({props:{cssStyle:"width: 100%",$$slots:{default:[On]},$$scope:{ctx:e}}}),e[23](d);let v=e[8].length&&Fn(e),y=e[9].length&&Wn(e);return{c(){t=S("div"),n=S("div"),s=S("img"),o=T(),a=S("div"),l=z("▼"),u=T(),Te(d.$$.fragment),f=T(),v&&v.c(),h=T(),y&&y.c(),N(s,"class","collection-bgc svelte-1xd6fai"),c(s.src,i=e[4])||N(s,"src",i),N(s,"alt",""),N(a,"title",e[11]("unfold")),N(a,"class",r="toggle"+(e[7]?"":" unfold")+" svelte-1xd6fai"),N(n,"class",p="collection"+(e[7]?"":" unfold")+" svelte-1xd6fai"),N(n,"data-title",e[11]("my_playist")),N(t,"class","row")},m(i,r){E(i,t,r),_(t,n),_(n,s),e[20](s),_(n,o),_(n,a),_(a,l),_(n,u),Me(d,n,null),e[24](n),_(t,f),v&&v.m(t,null),_(t,h),y&&y.m(t,null),m=!0,g||($=R(a,"click",e[13]),g=!0)},p(e,o){(!m||16&o[0]&&!c(s.src,i=e[4]))&&N(s,"src",i),(!m||128&o[0]&&r!==(r="toggle"+(e[7]?"":" unfold")+" svelte-1xd6fai"))&&N(a,"class",r);const l={};1&o[0]|4096&o[1]&&(l.$$scope={dirty:o,ctx:e}),d.$set(l),(!m||128&o[0]&&p!==(p="collection"+(e[7]?"":" unfold")+" svelte-1xd6fai"))&&N(n,"class",p),e[8].length?v?(v.p(e,o),256&o[0]&&ke(v,1)):(v=Fn(e),v.c(),ke(v,1),v.m(t,h)):v&&(be(),_e(v,1,1,(()=>{v=null})),xe()),e[9].length?y?(y.p(e,o),512&o[0]&&ke(y,1)):(y=Wn(e),y.c(),ke(y,1),y.m(t,null)):y&&(be(),_e(y,1,1,(()=>{y=null})),xe())},i(e){m||(ke(d.$$.fragment,e),ke(v),ke(y),m=!0)},o(e){_e(d.$$.fragment,e),_e(v),_e(y),m=!1},d(n){n&&P(t),e[20](null),e[23](null),Re(d),e[24](null),v&&v.d(),y&&y.d(),g=!1,$()}}}function Xn(e){let t,n;return t=new Jt({props:{$$slots:{default:[Hn]},$$scope:{ctx:e}}}),e[29](t),{c(){Te(t.$$.fragment)},m(e,s){Me(t,e,s),n=!0},p(e,n){const s={};1021&n[0]|4096&n[1]&&(s.$$scope={dirty:n,ctx:e}),t.$set(s)},i(e){n||(ke(t.$$.fragment,e),n=!0)},o(e){_e(t.$$.fragment,e),n=!1},d(n){e[29](null),Re(t,n)}}}function Yn(){this.parentNode.classList.remove("active")}function Gn(){this.parentNode.classList.add("active")}const Jn=()=>{};function Qn(e,t,n){const s=(e,...t)=>langMapping.s(e,...t);let i,o,a,{playlists:l=[]}=t;G((async function(){let e=await st.get("dailyDesktop");if(n(3,o.onload=()=>{i.style.setProperty("--color",zt(o,1)),i.style.setProperty("--start","220px")},o),e&&(new Date).getTime()-e.timeStamp<576e5)return n(4,a=await at(e.url));e=await server.fetchJson("https://cn.bing.com/HPImageArchive.aspx?format=js&idx=0&n=1");const t="https://www.bing.com"+e.images[0].url;n(4,a=await at(t)),st.set("dailyDesktop",{timeStamp:(new Date).getTime(),url:t})}));let r=Pager.getContext().save;async function c(e,t){t=await t(),Pager.openNew(e,Sn,t)}async function u(e){let t=await st.get("playlist"+e);return t||await async function(e){let t=await st.get("cookie"),n=await st.get("playlist"+e);let s=(await NeteaseApi.getPlaylistDetail(e,t)).body.playlist.trackIds.reduce(((e,t)=>[...e,t.id]),[]);return n=(await NeteaseApi.getSongDetail(s,t)).body.songs,st.setCache("playlist"+e,n),n}(e)}!async function(){if(r.__playlists)return n(0,l=r.__playlists);const e=await st.get("cookie"),t=(await st.get("profile")).userId,s=await NeteaseApi.getUserPlaylist(t,e);200==s.status&&n(5,r.__playlists=n(0,l=s.body.playlist),r)}();let d,p=!0;function f(){n(7,p=!p),d.measure((({height:e})=>{i.style.setProperty("--height",e+160+"px"),requestAnimationFrame((()=>{v.update()}))}))}function h(e){st.rm("playlist"+e)}function m(e){st.rm("al"+e)}Pager.beforeSwitch((()=>{const{save:e}=Pager.getContext();e&&(e.collectionFolded=p)})),G((()=>{contextMap.set(i,{"复制图片链接":"","图片另存为":""});const{save:e}=Pager.getContext();e&&void 0!==e.collectionFolded&&(e.collectionFolded||f())})),Q((()=>{contextMap.delete(i)}));let g=[];async function $(){let e=await async function(){let e=r.__artistSublist;if(!e){let e=await NeteaseApi.getArtistSublist(await st.get("cookie"),1);return e=await NeteaseApi.getArtistSublist(await st.get("cookie"),e.body.count),e.body.data.count=e.body.count,n(5,r.__artistSublist=e.body.data,r)}return e}();n(8,g=r.showAllArtists?e:e.slice(0,12)),n(8,g.count=e.count,g)}$();let v,y=[];async function w(e){const t=await async function(){let e=r.__alSublist;if(!e){let e=await NeteaseApi.getAlbumSublist(await st.get("cookie"),1);return e=await NeteaseApi.getAlbumSublist(await st.get("cookie"),e.body.count),e.body.data.count=e.body.count,n(5,r.__alSublist=e.body.data,r)}return e}();n(9,y=t.slice(0,e||t.count)),n(9,y.count=t.count,y)}async function b(e,t=0){let n=0===t?await u(e):await x(e);const s=Lt.getCurrentData();if(Lt.loadList(n),s){let e=Lt.query({name:s.name});if(e.length)return Lt.play(e[0])}Lt.play(0)}async function x(e){let t=await st.get("al"+e);return t||(t=(await NeteaseApi.getAlbumDetail(e,await st.get("cookie"))).body.songs,st.set("al"+e,t)),t}r.showAllAlbums?w():w(12),Pager.beforeSwitch((()=>{if(v?.prepared()){const{save:e}=Pager.getContext();e.offsetRatio=v.getOffsetRatio()}})),G((()=>{const{save:e}=Pager.getContext();requestIdleCallback((()=>v.setOffsetRatio(e.offsetRatio)))}));return e.$$set=e=>{"playlists"in e&&n(0,l=e.playlists)},[l,u,i,o,a,r,d,p,g,y,v,s,c,f,h,m,$,w,b,x,function(e){se[e?"unshift":"push"]((()=>{o=e,n(3,o)}))},e=>{b(e.id)},e=>{let t=e.id;c(e.name,(async()=>({header:{imgUrl:e.coverImgUrl,title:e.name,subtitle:s("created_by",e.creator.nickname),playCount:e.playCount,trackCount:e.trackCount},listData:u(t),sortBy:await st.get("playlist/sortBy"),forwards:await st.get("playlist/forwards"),onTabDestroy(){h(t)}})))},function(e){se[e?"unshift":"push"]((()=>{d=e,n(6,d)}))},function(e){se[e?"unshift":"push"]((()=>{i=e,n(2,i)}))},()=>{r.showAllArtists?(n(5,r.showAllArtists=!1,r),$()):(n(5,r.showAllArtists=!0,r),$())},()=>{r.showAllAlbums?(w(12),n(5,r.showAllAlbums=!1,r)):(w(),n(5,r.showAllAlbums=!0,r))},e=>{b(e.id,1)},e=>{let t=e.id;c(e.name,(async()=>({header:{imgUrl:e.picUrl,title:e.name,subtitle:`${e.artists.reduce(((e,t)=>[...e,t.name]),[]).join(" ")}`,playCount:e.playCount,trackCount:e.size},listData:x(t),sortBy:await st.get("playlist/sortBy"),forwards:await st.get("playlist/forwards"),onTabDestroy(){m(t)}})))},function(e){se[e?"unshift":"push"]((()=>{v=e,n(10,v)}))}]}class Kn extends Ne{constructor(e){super(),De(this,e,Qn,Xn,l,{playlists:0,getDetailX:1},null,[-1,-1])}get getDetailX(){return this.$$.ctx[1]}}function Zn(t){let n;return{c(){n=S("div"),n.innerHTML="<h1>发现</h1>",N(n,"class","row")},m(e,t){E(e,n,t)},p:e,i:e,o:e,d(e){e&&P(n)}}}class es extends Ne{constructor(e){super(),De(this,e,null,Zn,l,{})}}function ts(t){let n,s,i,a,l,r,c,u,d,p,f,h,m,g,$,v,y,w=t[0]?"":"";return{c(){n=S("div"),s=S("div"),i=S("div"),i.textContent="",a=T(),l=S("div"),r=z(w),c=T(),u=S("div"),u.textContent="⨉",f=T(),h=S("div"),m=S("div"),g=z("REM"),N(i,"class","column clk svelte-17abfmp"),N(l,"class","column clk small svelte-17abfmp"),B(l,"margin","0 4px"),N(u,"class","column clk red svelte-17abfmp"),N(s,"class",d="column btn-group appbtns"+(t[1]?" rev":"")+" svelte-17abfmp"),N(n,"class",p="column container "+(t[1]?"left":"right")+" svelte-17abfmp"),N(m,"class","title"+(Ie.isBeta?" debug":"")+" svelte-17abfmp"),N(h,"class",$="column container "+(t[1]?"right":"left")+" svelte-17abfmp")},m(e,o){E(e,n,o),_(n,s),_(s,i),_(s,a),_(s,l),_(l,r),_(s,c),_(s,u),E(e,f,o),E(e,h,o),_(h,m),_(m,g),v||(y=[R(i,"click",ns),R(l,"click",t[2]),R(u,"click",ss)],v=!0)},p(e,[t]){1&t&&w!==(w=e[0]?"":"")&&q(r,w),2&t&&d!==(d="column btn-group appbtns"+(e[1]?" rev":"")+" svelte-17abfmp")&&N(s,"class",d),2&t&&p!==(p="column container "+(e[1]?"left":"right")+" svelte-17abfmp")&&N(n,"class",p),2&t&&$!==($="column container "+(e[1]?"right":"left")+" svelte-17abfmp")&&N(h,"class",$)},i:e,o:e,d(e){e&&P(n),e&&P(f),e&&P(h),v=!1,o(y)}}}function ns(){hooks.send("win:min")}function ss(){hooks.send("win:close")}function is(e,t,n){let s=!1;hooks.on("win:max",(()=>{n(0,s=!0)})),hooks.on("win:unmax",(()=>{n(0,s=!1)}));let i=!1;return hooks.invoke("isMac").then((e=>{e&&n(1,i=!0)})),[s,i,function(){s?hooks.send("win:unmax"):hooks.send("win:max")}]}class os extends Ne{constructor(e){super(),De(this,e,is,ts,l,{})}}const as=e=>({}),ls=e=>({...e[4]});function rs(e){let t;const n=e[7].default,s=u(n,e,e[6],ls);return{c(){s&&s.c()},m(e,n){s&&s.m(e,n),t=!0},p(e,i){s&&s.p&&(!t||80&i)&&f(s,n,e,e[6],(e=>16&e)(i)||!t?h(e[6]):p(n,e[6],i,as),ls)},i(e){t||(ke(s,e),t=!0)},o(e){_e(s,e),t=!1},d(e){s&&s.d(e)}}}function cs(e){let t,s,i;const o=[e[4]];var a=e[0];function l(e){let t={};for(let e=0;e<o.length;e+=1)t=n(t,o[e]);return{props:t}}return a&&(t=new a(l())),{c(){t&&Te(t.$$.fragment),s=M()},m(e,n){t&&Me(t,e,n),E(e,s,n),i=!0},p(e,n){const i=16&n?Ae(o,[Se(e[4])]):{};if(a!==(a=e[0])){if(t){be();const e=t;_e(e.$$.fragment,1,0,(()=>{Re(e,1)})),xe()}a?(t=new a(l()),Te(t.$$.fragment),ke(t.$$.fragment,1),Me(t,s.parentNode,s)):t=null}else a&&t.$set(i)},i(e){i||(t&&ke(t.$$.fragment,e),i=!0)},o(e){t&&_e(t.$$.fragment,e),i=!1},d(e){e&&P(s),t&&Re(t,e)}}}function us(e){let t,n,s,i,o,a;const l=[cs,rs],r=[];function c(e,t){return e[0]?0:1}return n=c(e),s=r[n]=l[n](e),{c(){t=S("div"),s.c(),N(t,"class","container svelte-1mv98ub"),N(t,"style",e[1])},m(s,l){E(s,t,l),r[n].m(t,null),e[8](t),i=!0,o||(a=R(t,"mousedown",e[3]),o=!0)},p(e,[o]){let a=n;n=c(e),n===a?r[n].p(e,o):(be(),_e(r[a],1,1,(()=>{r[a]=null})),xe(),s=r[n],s?s.p(e,o):(s=r[n]=l[n](e),s.c()),ke(s,1),s.m(t,null)),(!i||2&o)&&N(t,"style",e[1])},i(e){i||(ke(s),i=!0)},o(e){_e(s),i=!1},d(s){s&&P(t),r[n].d(),e[8](null),o=!1,a()}}}function ds(e){e.animate({opacity:["0.4","0"]},200).onfinish=()=>{e.remove()}}function ps(e,t,s){let{$$slots:i={},$$scope:o}=t,{rippleColor:a=""}=t,{component:l=null}=t,{cssStyle:r=""}=t,c=null;return e.$$set=e=>{s(4,t=n(n({},t),m(e))),"rippleColor"in e&&s(5,a=e.rippleColor),"component"in e&&s(0,l=e.component),"cssStyle"in e&&s(1,r=e.cssStyle),"$$scope"in e&&s(6,o=e.$$scope)},t=m(t),[l,r,c,function(e){!function(e,t,n,s){const{left:i,top:o}=e.getBoundingClientRect(),{pageX:a,pageY:l}=t,{offsetWidth:r,offsetHeight:c}=e,u=Math.sqrt(c**2+r**2)/2,d=document.createElement("div");d.style.position="absolute",d.style.borderRadius="50%",d.style.opacity="0.4",d.style.pointerEvents="none",e.appendChild(d),d.animate([{top:l-o+"px",left:a-i+"px",width:"0px",height:"0px",backgroundColor:`${s||"var(--controlColor)"}`},{top:c/2-u+"px",left:r/2-u+"px",width:2*u+"px",height:2*u+"px",backgroundColor:`${s||"var(--controlColor)"}`}],{duration:320,fill:"forwards",easing:"cubic-bezier(0.05, 0.7, 0.2, 1)"}).onfinish=()=>{"function"==typeof n&&n.call(d,d)}}(c,e,ds,a)},t,a,o,i,function(e){se[e?"unshift":"push"]((()=>{c=e,s(2,c)}))}]}class fs extends Ne{constructor(e){super(),De(this,e,ps,us,l,{rippleColor:5,component:0,cssStyle:1})}}function hs(t){let n,s,i,o,a,l=t[7](t[6])+"";return{c(){n=S("img"),i=T(),o=S("h5"),a=z(l),c(n.src,s=t[5])||N(n,"src",s),N(n,"width",228),N(n,"height",228),N(n,"draggable","false"),N(n,"alt"," "),B(n,"border-radius","24px")},m(e,s){E(e,n,s),t[14](n),E(e,i,s),E(e,o,s),_(o,a)},p(e,t){32&t&&!c(n.src,s=e[5])&&N(n,"src",s),64&t&&l!==(l=e[7](e[6])+"")&&q(a,l)},i:e,o:e,d(e){e&&P(n),t[14](null),e&&P(i),e&&P(o)}}}function ms(e){let t,n,s,i,a,l,r,c,u,d,p;return c=new fs({props:{rippleColor:"#000",cssStyle:"border-radius: 8px;",$$slots:{default:[gs]},$$scope:{ctx:e}}}),{c(){t=S("input"),s=T(),i=S("input"),l=T(),r=S("div"),Te(c.$$.fragment),N(t,"type","text"),N(t,"class",n=g(e[2]&&"error")+" svelte-12m1k1q"),N(t,"placeholder",e[7]("phone_number")),N(i,"type","password"),N(i,"class",a=g(e[2]&&"error")+" svelte-12m1k1q"),N(i,"placeholder",e[7]("password")),B(r,"padding","24px 0px 12px 0px")},m(n,o){E(n,t,o),V(t,e[0]),E(n,s,o),E(n,i,o),V(i,e[1]),E(n,l,o),E(n,r,o),Me(c,r,null),u=!0,d||(p=[R(t,"input",e[12]),R(i,"input",e[13])],d=!0)},p(e,s){(!u||4&s&&n!==(n=g(e[2]&&"error")+" svelte-12m1k1q"))&&N(t,"class",n),1&s&&t.value!==e[0]&&V(t,e[0]),(!u||4&s&&a!==(a=g(e[2]&&"error")+" svelte-12m1k1q"))&&N(i,"class",a),2&s&&i.value!==e[1]&&V(i,e[1]);const o={};131072&s&&(o.$$scope={dirty:s,ctx:e}),c.$set(o)},i(e){u||(ke(c.$$.fragment,e),u=!0)},o(e){_e(c.$$.fragment,e),u=!1},d(e){e&&P(t),e&&P(s),e&&P(i),e&&P(l),e&&P(r),Re(c),d=!1,o(p)}}}function gs(t){let n,s,i;return{c(){n=S("div"),n.textContent=`${t[7]("login")}`,N(n,"class","column submit svelte-12m1k1q")},m(e,o){E(e,n,o),s||(i=R(n,"click",t[8]),s=!0)},p:e,d(e){e&&P(n),s=!1,i()}}}function $s(e){let t,n,s,i,o,a,l,r,c,u,d,p,f,h=e[7]("login_type",e[7](e[9][e[3]]))+"",m=e[7]("switch_to")+"",g=e[7](e[9][e[3]?0:1])+"";const $=[ms,hs],v=[];function y(e,t){return e[3]?e[5]?1:-1:0}return~(c=y(e))&&(u=v[c]=$[c](e)),{c(){t=S("div"),n=S("h3"),s=z(h),i=T(),o=S("span"),a=z(m),l=z(g),r=T(),u&&u.c(),N(o,"class","span svelte-12m1k1q"),N(t,"class","row c svelte-12m1k1q")},m(u,h){E(u,t,h),_(t,n),_(n,s),_(n,i),_(n,o),_(o,a),_(o,l),_(t,r),~c&&v[c].m(t,null),d=!0,p||(f=R(o,"click",e[11]),p=!0)},p(e,[n]){(!d||8&n)&&h!==(h=e[7]("login_type",e[7](e[9][e[3]]))+"")&&q(s,h),(!d||8&n)&&g!==(g=e[7](e[9][e[3]?0:1])+"")&&q(l,g);let i=c;c=y(e),c===i?~c&&v[c].p(e,n):(u&&(be(),_e(v[i],1,1,(()=>{v[i]=null})),xe()),~c?(u=v[c],u?u.p(e,n):(u=v[c]=$[c](e),u.c()),ke(u,1),u.m(t,null)):u=null)},i(e){d||(ke(u),d=!0)},o(e){_e(u),d=!1},d(e){e&&P(t),~c&&v[c].d(),p=!1,f()}}}function vs(e,t,n){const s=ee("close")||(()=>{Ie.emit("__openMinePage"),Ie.emit("__updateLoginAvatar")});let i,o,a=!1;let l,r=0,c="",u="wait_scanning";async function d(){const e=await NeteaseApi.loginViaQRCode(),t=e[0];n(5,c=e[1].body.data.qrimg);let s=async()=>{const e=await NeteaseApi.validQRLogin(t);if(1!==r)return;let i=()=>setTimeout((async()=>{await s()}),500);switch(n(6,u=e.body.message),e.body.code){case 801:i();break;case 800:d();break;case 802:n(4,l.style.opacity=.32,l),i();break;case 803:st.set("cookie",e.body.cookie),p()}};s()}async function p(){const e=(await NeteaseApi.getUserAccount(await st.get("cookie"))).body.data.profile;st.set("profile",e),Ie.emit("logined",e),s()}return[i,o,a,r,l,c,u,(e,...t)=>langMapping.s(e,...t)||e,async function(){const e=await NeteaseApi.login(i,o);if(200!==e.body.code)return n(1,o=""),void n(2,a=!0);await Promise.all([st.set("profile",JSON.stringify(e.body.profile)),st.set("token",JSON.stringify(e.body.token)),st.set("cookie",e.cookie.join(""))]),p()},["phone_number","qr_code"],d,()=>{n(3,r=r?0:1),r&&d()},function(){i=this.value,n(0,i)},function(){o=this.value,n(1,o)},function(e){se[e?"unshift":"push"]((()=>{l=e,n(4,l)}))}]}class ys extends Ne{constructor(e){super(),De(this,e,vs,$s,l,{})}}function ws(e){let t,n,s,i,a,l,r,c;const d=e[11].default,m=u(d,e,e[10],null);return{c(){t=S("div"),n=S("div"),m&&m.c(),N(n,"class","container svelte-1p01wi3"),N(n,"style",s=e[1]+"; --blur-radius: "+e[3]+"px; --offset: "+e[4]+"px;"),N(t,"class","layer row svelte-1p01wi3")},m(s,o){E(s,t,o),_(t,n),m&&m.m(n,null),l=!0,r||(c=[$(i=e[6].call(null,n)),R(n,"click",D(e[12])),R(t,"click",D(e[5]))],r=!0)},p(e,t){m&&m.p&&(!l||1024&t)&&f(m,d,e,e[10],l?p(d,e[10],t,null):h(e[10]),null),(!l||26&t&&s!==(s=e[1]+"; --blur-radius: "+e[3]+"px; --offset: "+e[4]+"px;"))&&N(n,"style",s)},i(e){l||(ke(m,e),a&&a.end(1),l=!0)},o(e){_e(m,e),a=Le(t,Qt,{duration:100}),l=!1},d(e){e&&P(t),m&&m.d(e),e&&a&&a.end(),r=!1,o(c)}}}function bs(n){let s,i,l,r,c,d,m,g;const v=n[11].default,w=u(v,n,n[10],null);return{c(){s=S("div"),w&&w.c(),N(s,"class","container svelte-1p01wi3"),N(s,"style",i="z-index:99999;"+n[1])},m(e,t){E(e,s,t),w&&w.m(s,null),d=!0,m||(g=[$(l=n[6].call(null,s)),R(s,"click",n[5])],m=!0)},p(e,t){w&&w.p&&(!d||1024&t)&&f(w,v,e,e[10],d?p(v,e[10],t,null):h(e[10]),null),(!d||2&t&&i!==(i="z-index:99999;"+e[1]))&&N(s,"style",i)},i(n){d||(ke(w,n),ue((()=>{c&&c.end(1),r=function(n,s,i){let o,l,r=s(n,i),c=!1,u=0;function d(){o&&H(n,o)}function p(){const{delay:s=0,duration:i=300,easing:a=t,tick:p=e,css:f}=r||Ce;f&&(o=j(n,0,1,i,s,a,f,u++)),p(0,1);const h=y()+s,m=h+i;l&&l.abort(),c=!0,ue((()=>ve(n,!0,"start"))),l=k((e=>{if(c){if(e>=m)return p(1,0),ve(n,!0,"end"),d(),c=!1;if(e>=h){const t=a((e-h)/i);p(t,1-t)}}return c}))}let f=!1;return{start(){f||(f=!0,H(n),a(r)?(r=r(),$e().then(p)):p())},invalidate(){f=!1},end(){c&&(d(),c=!1)}}}(s,Qt,{duration:120}),r.start()})),d=!0)},o(e){_e(w,e),r&&r.invalidate(),c=Le(s,Qt,{duration:80}),d=!1},d(e){e&&P(s),w&&w.d(e),e&&c&&c.end(),m=!1,o(g)}}}function xs(e){let t,n,s,i=e[0]&&!e[2]&&ws(e),o=e[0]&&e[2]&&bs(e);return{c(){i&&i.c(),t=T(),o&&o.c(),n=M()},m(e,a){i&&i.m(e,a),E(e,t,a),o&&o.m(e,a),E(e,n,a),s=!0},p(e,[s]){e[0]&&!e[2]?i?(i.p(e,s),5&s&&ke(i,1)):(i=ws(e),i.c(),ke(i,1),i.m(t.parentNode,t)):i&&(be(),_e(i,1,1,(()=>{i=null})),xe()),e[0]&&e[2]?o?(o.p(e,s),5&s&&ke(o,1)):(o=bs(e),o.c(),ke(o,1),o.m(n.parentNode,n)):o&&(be(),_e(o,1,1,(()=>{o=null})),xe())},i(e){s||(ke(i),ke(o),s=!0)},o(e){_e(i),_e(o),s=!1},d(e){i&&i.d(e),e&&P(t),o&&o.d(e),e&&P(n)}}}function ks(e,t,n){let{$$slots:s={},$$scope:i}=t;const o=K();function a(){o("layerClick")}Z("close",a);let{showPopupWindow:l=!1}=t,{cssText:r=""}=t,{noLayer:c=!1}=t,{shadowBlurRadius:u=8}=t,{shadowOffset:d=2}=t;return e.$$set=e=>{"showPopupWindow"in e&&n(0,l=e.showPopupWindow),"cssText"in e&&n(1,r=e.cssText),"noLayer"in e&&n(2,c=e.noLayer),"shadowBlurRadius"in e&&n(3,u=e.shadowBlurRadius),"shadowOffset"in e&&n(4,d=e.shadowOffset),"$$scope"in e&&n(10,i=e.$$scope)},[l,r,c,u,d,a,function(e){return o("animIn",e),{destroy(){o("animOut",e)}}},function(e,t={}){return undefined.animate(e,t)},function(){n(0,l=!0)},function(){n(0,l=!1)},i,s,function(t){te.call(this,e,t)}]}class _s extends Ne{constructor(e){super(),De(this,e,ks,xs,l,{showPopupWindow:0,cssText:1,noLayer:2,shadowBlurRadius:3,shadowOffset:4,animate:7,destroy:8,pop:9})}get animate(){return this.$$.ctx[7]}get destroy(){return this.$$.ctx[8]}get pop(){return this.$$.ctx[9]}}function Cs(t){let n;return{c(){n=S("div"),B(n,"width","14px")},m(e,t){E(e,n,t)},p:e,i:e,o:e,d(e){e&&P(n)}}}function Ls(e){let t,n,s;return n=new mt({props:{size:e[1],isUrl:e[0],avatar:e[2],width:e[6],height:e[7]}}),{c(){t=S("div"),Te(n.$$.fragment),N(t,"class","column leading svelte-emkyx5")},m(e,i){E(e,t,i),Me(n,t,null),s=!0},p(e,t){const s={};2&t&&(s.size=e[1]),1&t&&(s.isUrl=e[0]),4&t&&(s.avatar=e[2]),64&t&&(s.width=e[6]),128&t&&(s.height=e[7]),n.$set(s)},i(e){s||(ke(n.$$.fragment,e),s=!0)},o(e){_e(n.$$.fragment,e),s=!1},d(e){e&&P(t),Re(n)}}}function Es(e){let t,n,s,i;function o(e,t){return e[4]?Ss:As}let a=o(e),l=a(e);const r=e[13].default,c=u(r,e,e[14],null);return{c(){t=S("div"),n=S("div"),l.c(),s=T(),c&&c.c(),N(n,"class","row align svelte-emkyx5"),N(n,"style",e[5]),N(t,"class","column"),B(t,"justify-content","space-between"),B(t,"width",e[9]?"calc(100% - 84px)":"calc(100% - 28px)")},m(e,o){E(e,t,o),_(t,n),l.m(n,null),_(t,s),c&&c.m(t,null),i=!0},p(e,s){a===(a=o(e))&&l?l.p(e,s):(l.d(1),l=a(e),l&&(l.c(),l.m(n,null))),(!i||32&s)&&N(n,"style",e[5]),c&&c.p&&(!i||16384&s)&&f(c,r,e,e[14],i?p(r,e[14],s,null):h(e[14]),null),(!i||512&s)&&B(t,"width",e[9]?"calc(100% - 84px)":"calc(100% - 28px)")},i(e){i||(ke(c,e),i=!0)},o(e){_e(c,e),i=!1},d(e){e&&P(t),l.d(),c&&c.d(e)}}}function Ps(e){let t,n,s,i;function o(e,t){return e[4]?Ts:zs}let a=o(e),l=a(e);const r=e[13].default,c=u(r,e,e[14],null);return{c(){t=S("div"),l.c(),n=T(),c&&c.c(),N(t,"class","row align svelte-emkyx5"),N(t,"style",s="width: "+(e[9]?"calc(100% - 84px)":"calc(100% - 28px)")+";"+e[5])},m(e,s){E(e,t,s),l.m(t,null),_(t,n),c&&c.m(t,null),i=!0},p(e,u){a===(a=o(e))&&l?l.p(e,u):(l.d(1),l=a(e),l&&(l.c(),l.m(t,n))),c&&c.p&&(!i||16384&u)&&f(c,r,e,e[14],i?p(r,e[14],u,null):h(e[14]),null),(!i||544&u&&s!==(s="width: "+(e[9]?"calc(100% - 84px)":"calc(100% - 28px)")+";"+e[5]))&&N(t,"style",s)},i(e){i||(ke(c,e),i=!0)},o(e){_e(c,e),i=!1},d(e){e&&P(t),l.d(),c&&c.d(e)}}}function As(e){let t,n;return{c(){t=S("span"),n=z(e[3])},m(e,s){E(e,t,s),_(t,n)},p(e,t){8&t&&q(n,e[3])},d(e){e&&P(t)}}}function Ss(e){let t,n,s,i,o;return{c(){t=S("span"),n=z(e[3]),s=T(),i=S("span"),o=z(e[4]),B(i,"font-size","small"),B(i,"color","#888")},m(e,a){E(e,t,a),_(t,n),E(e,s,a),E(e,i,a),_(i,o)},p(e,t){8&t&&q(n,e[3]),16&t&&q(o,e[4])},d(e){e&&P(t),e&&P(s),e&&P(i)}}}function zs(e){let t,n;return{c(){t=S("span"),n=z(e[3])},m(e,s){E(e,t,s),_(t,n)},p(e,t){8&t&&q(n,e[3])},d(e){e&&P(t)}}}function Ts(e){let t,n,s,i,o;return{c(){t=S("span"),n=z(e[3]),s=T(),i=S("span"),o=z(e[4]),B(i,"font-size","small"),B(i,"color","#888")},m(e,a){E(e,t,a),_(t,n),E(e,s,a),E(e,i,a),_(i,o)},p(e,t){8&t&&q(n,e[3]),16&t&&q(o,e[4])},d(e){e&&P(t),e&&P(s),e&&P(i)}}}function Ms(e){let t,n,s,i,a,l,r,c,u,d;const p=[Ls,Cs],f=[];function h(e,t){return e[9]?0:1}n=h(e),s=f[n]=p[n](e);const m=[Ps,Es],g=[];function $(e,t){return e[10]?0:1}return a=$(e),l=g[a]=m[a](e),{c(){t=S("div"),s.c(),i=T(),l.c(),N(t,"class",r="column c"+(e[8]?" cl":"")+" svelte-emkyx5")},m(s,o){E(s,t,o),f[n].m(t,null),_(t,i),g[a].m(t,null),c=!0,u||(d=[R(t,"click",e[11]),R(t,"mousedown",e[12])],u=!0)},p(e,o){let u=n;n=h(e),n===u?f[n].p(e,o):(be(),_e(f[u],1,1,(()=>{f[u]=null})),xe(),s=f[n],s?s.p(e,o):(s=f[n]=p[n](e),s.c()),ke(s,1),s.m(t,i));let d=a;a=$(e),a===d?g[a].p(e,o):(be(),_e(g[d],1,1,(()=>{g[d]=null})),xe(),l=g[a],l?l.p(e,o):(l=g[a]=m[a](e),l.c()),ke(l,1),l.m(t,null)),(!c||256&o&&r!==(r="column c"+(e[8]?" cl":"")+" svelte-emkyx5"))&&N(t,"class",r)},i(e){c||(ke(s),ke(l),c=!0)},o(e){_e(s),_e(l),c=!1},d(e){e&&P(t),f[n].d(),g[a].d(),u=!1,o(d)}}}function Rs(e){let t,n;return t=new fs({props:{cssStyle:"width: 100%",rippleColor:e[8]?"gray":"transparent",$$slots:{default:[Ms]},$$scope:{ctx:e}}}),{c(){Te(t.$$.fragment)},m(e,s){Me(t,e,s),n=!0},p(e,[n]){const s={};256&n&&(s.rippleColor=e[8]?"gray":"transparent"),18431&n&&(s.$$scope={dirty:n,ctx:e}),t.$set(s)},i(e){n||(ke(t.$$.fragment,e),n=!0)},o(e){_e(t.$$.fragment,e),n=!1},d(e){Re(t,e)}}}function Ds(e,t,n){let{$$slots:s={},$$scope:i}=t;const o=K();let{isUrl:a=!0}=t,{size:l="normal"}=t,{avatar:r=""}=t,{data:c=""}=t,{extra:u=""}=t,{style:d=""}=t,{width:p}=t,{height:f}=t,{clickable:h=!0}=t,{useAvatar:m=!0}=t,{breakLine:g=!1}=t;return e.$$set=e=>{"isUrl"in e&&n(0,a=e.isUrl),"size"in e&&n(1,l=e.size),"avatar"in e&&n(2,r=e.avatar),"data"in e&&n(3,c=e.data),"extra"in e&&n(4,u=e.extra),"style"in e&&n(5,d=e.style),"width"in e&&n(6,p=e.width),"height"in e&&n(7,f=e.height),"clickable"in e&&n(8,h=e.clickable),"useAvatar"in e&&n(9,m=e.useAvatar),"breakLine"in e&&n(10,g=e.breakLine),"$$scope"in e&&n(14,i=e.$$scope)},[a,l,r,c,u,d,p,f,h,m,g,function(e){o("click",e)},function(e){o("mousedown",e)},s,i]}class Ns extends Ne{constructor(e){super(),De(this,e,Ds,Rs,l,{isUrl:0,size:1,avatar:2,data:3,extra:4,style:5,width:6,height:7,clickable:8,useAvatar:9,breakLine:10})}}function Us(e,t,n){const s=e.slice();return s[6]=t[n],s}function qs(e,t,n){const s=e.slice();return s[9]=t[n],s}function Vs(e){let t,n;return t=new Ns({props:{useAvatar:!1,size:"small",isUrl:!1,data:e[9]}}),t.$on("click",(function(){a(e[4](e[6][e[9]]))&&e[4](e[6][e[9]]).apply(this,arguments)})),{c(){Te(t.$$.fragment)},m(e,s){Me(t,e,s),n=!0},p(n,s){e=n;const i={};8&s&&(i.data=e[9]),t.$set(i)},i(e){n||(ke(t.$$.fragment,e),n=!0)},o(e){_e(t.$$.fragment,e),n=!1},d(e){Re(t,e)}}}function Bs(e){let t,n,s,i,o=Object.keys(e[6]),a=[];for(let t=0;t<o.length;t+=1)a[t]=Vs(qs(e,o,t));const l=e=>_e(a[e],1,1,(()=>{a[e]=null}));return{c(){t=S("div"),n=T();for(let e=0;e<a.length;e+=1)a[e].c();s=M(),N(t,"class","divider svelte-14ron6b")},m(e,o){E(e,t,o),E(e,n,o);for(let t=0;t<a.length;t+=1)a[t].m(e,o);E(e,s,o),i=!0},p(e,t){if(24&t){let n;for(o=Object.keys(e[6]),n=0;n<o.length;n+=1){const i=qs(e,o,n);a[n]?(a[n].p(i,t),ke(a[n],1)):(a[n]=Vs(i),a[n].c(),ke(a[n],1),a[n].m(s.parentNode,s))}for(be(),n=o.length;n<a.length;n+=1)l(n);xe()}},i(e){if(!i){for(let e=0;e<o.length;e+=1)ke(a[e]);i=!0}},o(e){a=a.filter(Boolean);for(let e=0;e<a.length;e+=1)_e(a[e]);i=!1},d(e){e&&P(t),e&&P(n),A(a,e),e&&P(s)}}}function Os(e){let t,n,s,i,o,a=e[3],l=[];for(let t=0;t<a.length;t+=1)l[t]=Bs(Us(e,a,t));const r=e=>_e(l[e],1,1,(()=>{l[e]=null}));return{c(){t=S("div");for(let e=0;e<l.length;e+=1)l[e].c();N(t,"class",n="container "+(e[0]?"display":"")+" svelte-14ron6b"),B(t,"--x",e[1]+"px"),B(t,"--y",e[2]+"px")},m(e,n){E(e,t,n);for(let e=0;e<l.length;e+=1)l[e].m(t,null);s=!0,i||(o=R(t,"click",Fs),i=!0)},p(e,[i]){if(24&i){let n;for(a=e[3],n=0;n<a.length;n+=1){const s=Us(e,a,n);l[n]?(l[n].p(s,i),ke(l[n],1)):(l[n]=Bs(s),l[n].c(),ke(l[n],1),l[n].m(t,null))}for(be(),n=a.length;n<l.length;n+=1)r(n);xe()}(!s||1&i&&n!==(n="container "+(e[0]?"display":"")+" svelte-14ron6b"))&&N(t,"class",n),(!s||2&i)&&B(t,"--x",e[1]+"px"),(!s||4&i)&&B(t,"--y",e[2]+"px")},i(e){if(!s){for(let e=0;e<a.length;e+=1)ke(l[e]);s=!0}},o(e){l=l.filter(Boolean);for(let e=0;e<l.length;e+=1)_e(l[e]);s=!1},d(e){e&&P(t),A(l,e),i=!1,o()}}}const Fs=e=>e.stopPropagation();function Is(e,t,n){let{display:s=!1}=t,{x:i=0}=t,{y:o=0}=t,{data:a=[{}]}=t;return ee("layerEvents").on("disable",(()=>{n(0,s=!1)})),e.$$set=e=>{"display"in e&&n(0,s=e.display),"x"in e&&n(1,i=e.x),"y"in e&&n(2,o=e.y),"data"in e&&n(3,a=e.data)},[s,i,o,a,function(e){return"function"==typeof e?()=>{e.call(null),n(0,s=!1)}:()=>n(0,s=!1)}]}class Ws extends Ne{constructor(e){super(),De(this,e,Is,Os,l,{display:0,x:1,y:2,data:3})}}function js(t){let n,s;return{c(){n=S("div"),N(n,"class",s="virt-cursor"+(t[1]?" active":"")+(t[2]?" enable":"")+" svelte-1biibe")},m(e,s){E(e,n,s),t[3](n)},p(e,[t]){6&t&&s!==(s="virt-cursor"+(e[1]?" active":"")+(e[2]?" enable":"")+" svelte-1biibe")&&N(n,"class",s)},i:e,o:e,d(e){e&&P(n),t[3](null)}}}function Hs(e,t,n){let{active:s=!1}=t,{enable:i=!1}=t,{htmlElement:o}=t;return e.$$set=e=>{"active"in e&&n(1,s=e.active),"enable"in e&&n(2,i=e.enable),"htmlElement"in e&&n(0,o=e.htmlElement)},[o,s,i,function(e){se[e?"unshift":"push"]((()=>{o=e,n(0,o)}))}]}class Xs extends Ne{constructor(e){super(),De(this,e,Hs,js,l,{active:1,enable:2,htmlElement:0})}}const Ys=0,Gs=1,Js=4,Qs=5,Ks=0,Zs=1,ei=3;let ti=0;function ni(){return ti++}const si=Symbol();class ii extends HTMLElement{static[si]={};inject(e){e instanceof Node&&e.appendChild(this)}}const oi=new class{_store=new Map;add(e){if(e[si]){const t=ni();this._store.set(e,t),customElements.define(`uid-${t}`,e)}}getInstance(e,...t){return this._store.has(e)||this.add(e),Reflect.construct(e,t)}inject(e,t,...n){if(t instanceof Node){const s=this.getInstance(e,...n);return t.appendChild(s),s}return null}};const ai=new class{vertical="center";horizontal="center";verticalFrom="bottom";horizontalFrom="none"};class li extends ii{isPoped=!1;constructor(){super(),this.style.position="absolute",this.style.display="none"}popup(e){const{vertical:t,verticalFrom:n,horizontal:s,horizontalFrom:i}=Object.assign(ai,e),o="top"===n?-16:"bottom"===n?16:0,a="left"===i?-16:"right"===i?16:0,l=this.getBoundingClientRect();switch(s){case"left":this.style.left="8px";break;case"right":this.style.right="24px";break;default:this.style.left=(visualViewport.width-l.width)/2+"px"}switch(t){case"top":this.style.top="58px";break;case"bottom":this.style.bottom="78px";break;default:this.style.left=(visualViewport.height-l.height)/2+"px"}this.style.display="block",this.animate([{opacity:0,transform:`translate(${a}px, ${o}px)`},{opacity:1,transform:"translate(0, 0)"}],100).onfinish=()=>{this.isPoped=!0}}fade(){this.animate([{opacity:1,transform:"scale(1)"},{opacity:0,transform:"scale(0.94)"}],100).onfinish=()=>{this.style.display="none",this.isPoped=!1,this.onFaded.call(this)}}setContent(e){return this.appendChild(e),this}onPopup(){}onFaded(){}}oi.add(li);const ri=new Map,ci=new Map;async function ui(e){let t;return ri.has(e)?t=ri.get(e):(t=await async function(e){let t;return ci.has(e)?t=ci.get(e):ci.set(e,t=fetch(e)),await(await t).clone().text()}(e),ri.set(e,t),ci.delete(e)),t}class di extends HTMLElement{constructor(e){super(),this.style.display="none",this.init(e)}async init(e){const t=await ui(e),n=this.attachShadow({mode:"open"});n.innerHTML=t,this.onViewImpl(n),this.removeAttribute("style")}onViewImpl(e){throw'Did not override method "onViewImpl"'}}customElements.define("r-view",di);class pi extends di{icon=null;msg=null;constructor(e){super("../../utils/widget/notification/view.html"),this.outerContainer=e}onViewImpl(e){const t=e.getElementById("icon"),n=e.getElementById("msg"),s=e.getElementById("close");this.icon=t,this.msg=n,s.addEventListener("click",(()=>{this.outerContainer.fade()}))}setIcon(e){this.icon&&(this.icon.innerText=e)}setMessage(e){this.msg&&(this.msg.innerText=e)}}customElements.define("pop-widgetcontent",pi);class fi extends li{constructor(){super(),this.style.pointerEvents="all",this.setContent(this.notifContent=new pi(this))}setIcon(e){return this.notifContent.setIcon(e),this}setMessage(e){return this.notifContent.setMessage(e),this}}oi.add(fi);const hi=new Fe({captureRejections:!0}),mi=new fi;const gi={onConnect:function(e){hi.on("--connect",e)},onDisconnect:function(e){hi.on("--disconnect",e)}};class $i extends Fe{static controllers=[];gamepad=null;get id(){return this.gamepad.id}get mapping(){return this.gamepad.mapping}constructor(e){super({captureRejections:!0}),this.gamepad=e,$i.controllers[e.index]=this,this.on("press",(e=>this.emit(`press-${e}`))),this.on("release",(e=>this.emit(`release-${e}`))),this.on("value",((e,t)=>this.emit(`value-${e}`,t))),this.on("axel",((e,t)=>this.emit(`axel-${e}`,t)))}vibrate(e,t=0,n=0){let s=null;(s=this.gamepad.vibrationActuator)&&s.playEffect(s.type,{duration:e,strongMagnitude:t,weakMagnitude:n})}addPressListener(e,t){this.on(`press-${e}`,t)}removePressListener(e,t){this.off(`press-${e}`,t)}addReleaseListener(e,t){this.on(`release-${e}`,t)}removeReleaseListener(e,t){this.off(`release-${e}`,t)}addValueChangeListener(e,t){this.on(`value-${e}`,t)}removeValueChangeListener(e,t){this.off(`value-${e}`,t)}addAxelChangeListener(e,t){this.on(`axel-${e}`,t)}removeAxelChangeListener(e,t){this.off(`axel-${e}`,t)}}function vi(e,t,n,s){if(e.length!==t.length)return;const i=e.length;for(let o=0;o<i;o++){let i=e[o],a=t[o];n(i,a)||s.call(null,i,a,o)}}if("function"!=typeof navigator.getGamepads)throw"Your browser does not support the Gamepad API, please consider updating your browser";!function(){window.addEventListener("gamepadconnected",(e=>{hi.emit("--connect",new $i(e.gamepad)),mi.setMessage(`控制器 ${e.gamepad.id} 已连接`),mi.popup({horizontal:"right",vertical:"bottom",verticalFrom:"bottom",horizontalFrom:"right"})})),window.addEventListener("gamepaddisconnected",(e=>{hi.emit("--disconnect",new $i(e.gamepad)),mi.setMessage(`控制器 ${e.gamepad.id} 断开连接`),mi.popup({horizontal:"right",vertical:"bottom",verticalFrom:"bottom",horizontalFrom:"right"})}));let e=[],t=[];!function e(t){requestAnimationFrame((()=>{t.apply(null),e(t)}))}((()=>{let n=0;for(const s of navigator.getGamepads())s?(e[n]&&vi(e[n],s.buttons,((e,t)=>{if(e.pressed===t.pressed&&e.touched===t.touched&&e.value===t.value)return!0}),((e,t,s)=>{hi.emit("button-change",e,t,s,n)})),e[n]=s.buttons,t[n]&&vi(t[n],s.axes,((e,t)=>e===t),((e,t,s)=>{hi.emit("axes-change",e,t,s,n)})),t[n]=s.axes,n++):n++})),hi.on("button-change",((e,t,n,s)=>{const i=$i.controllers[s];i.emit("button-change",n,t,e),t.pressed!==e.pressed?t.pressed?i.emit("press",n):(i.emit("release",n),i.emit("value",n,0)):i.emit("value",n,t.value,e.value)})),hi.on("axes-change",((e,t,n,s)=>{$i.controllers[s].emit("axel",n,t,e)}))}();const yi=new class{target=null;click(e,t,n=0){let s=new PointerEvent("click",{clientX:e,clientY:t,button:n,bubbles:!0,composed:!0});const i=document.elementFromPoint(e,t);i.dispatchEvent(s),i.focus()}move(e,t){let n=document.elementFromPoint(e,t);this.target||(this.target=n),n!==this.target&&(this._enter(n,e,t),this._leave(this.target,e,t),this.target=n);let s=new MouseEvent("mousemove",{clientX:e,clientY:t,bubbles:!0,composed:!0});n.dispatchEvent(s)}_enter=(e,t,n)=>{let s=new MouseEvent("mouseenter",{clientX:t,clientY:n,composed:!0}),i=new MouseEvent("mouseover",{clientX:t,clientY:n,bubbles:!0,composed:!0});e.dispatchEvent(s),e.dispatchEvent(i)};_leave=(e,t,n)=>{let s=new MouseEvent("mouseleave",{clientX:t,clientY:n,composed:!0}),i=new MouseEvent("mouseout",{clientX:t,clientY:n,bubbles:!0,composed:!0});e.dispatchEvent(s),e.dispatchEvent(i)};down(e,t,n=0){let s=new PointerEvent("mousedown",{clientX:e,clientY:t,button:n,bubbles:!0,composed:!0});document.elementFromPoint(e,t).dispatchEvent(s)}up(e,t,n=0){let s=new PointerEvent("mouseup",{clientX:e,clientY:t,button:n,bubbles:!0,composed:!0});document.elementFromPoint(e,t).dispatchEvent(s)}setCursorVisible(e=!0){const t=document.body.style,n="boolean"==typeof e?e?"auto":"none":document.body.style;t.cursor=n}};const wi=new class{scrollSpeed=30;cursorSpeed=8;stickDeadzone=.1;virtCursor=null;transformSpeed={x:0,y:0,scroll:0};instance=!1;_isLooping=!1;_receiveMouseEvent=e=>{e.isTrusted&&this._setVirtCursorEnable(!1)};_receiveControllerEvent=(e,t)=>{Math.abs(t)>.1&&(this._setVirtCursorEnable(!0),this._isLooping||this._eachRenderTick())};_setVirtCursorEnable(e=!0){e?(this.virtCursor.enable=!0,yi.setCursorVisible(!1)):(this.virtCursor.enable=!1,yi.setCursorVisible(!0))}init(e){e&&(this.virtCursor=e,gi.onConnect((e=>{this.instance||(e.id.startsWith("Xbox")?(this._setVirtCursorEnable(!0),this.instance=e,this._configController(e),window.addEventListener("mousemove",this._receiveMouseEvent),e.on("axel",this._receiveControllerEvent)):this._setVirtCursorEnable(!1))})),gi.onDisconnect((e=>{this._setVirtCursorEnable(!1),this.instance=null,this._distroyInstance(e),window.removeEventListener("mousemove",this._receiveMouseEvent),e.off("axel",this._receiveControllerEvent)})))}_configController=e=>{e.vibrate(200,1,1),e.on("release",this._onKeyUp),e.addReleaseListener(Ys,this.onEnsure),e.addReleaseListener(Gs,this.onBack),e.addPressListener(Js,this.onLeftButton),e.addPressListener(Qs,this.onRightButton),e.addAxelChangeListener(ei,this.onScroll),e.addAxelChangeListener(Ks,this.onCursorMoveHorizontal),e.addAxelChangeListener(Zs,this.onCursorMoveVertical),this._eachRenderTick()};_distroyInstance(e){e.off("release",this._onKeyUp),e.removeReleaseListener(Ys,this.onEnsure),e.removeReleaseListener(Gs,this.onBack),e.removePressListener(Js,this.onLeftButton),e.removePressListener(Qs,this.onRightButton),e.removeAxelChangeListener(ei,this.onScroll),e.removeAxelChangeListener(ei,this.onCursorMoveHorizontal),e.removeAxelChangeListener(ei,this.onCursorMoveVertical)}_onKeyDown=(e,t)=>{this.virtCursor.click=!0,yi.down(e,t)};_onKeyUp=()=>{this.virtCursor.click=!1;const{x:e,y:t}=this.virtCursor;yi.up(e,t)};onEnsure=()=>{const{x:e,y:t}=this.virtCursor;this.virtCursor.click=!0,yi.click(e,t)};onBack=()=>{Pager.removeByIndex(Pager.index())};onLeftButton=()=>{let e=Pager.index();e?Pager.select(e-1):Pager.select(Pager.size()-1)};onRightButton=()=>{let e=Pager.index();e===Pager.size()-1?Pager.select(0):Pager.select(e+1)};onScroll=e=>{Math.abs(e)>this.stickDeadzone?this.transformSpeed.scroll=this.scrollSpeed*e:this.transformSpeed.scroll=0};onCursorMoveHorizontal=e=>{Math.abs(e)>this.stickDeadzone?this.transformSpeed.x=this.cursorSpeed*e:this.transformSpeed.x=0};onCursorMoveVertical=e=>{Math.abs(e)>this.stickDeadzone?this.transformSpeed.y=this.cursorSpeed*e:this.transformSpeed.y=0};_eachRenderTick=()=>{const{x:e,y:t}=this.virtCursor,n=this.virtCursor,{x:s,y:i,scroll:o}=this.transformSpeed,{width:a,height:l}=visualViewport;let r=!1;const c=e+s,u=t+i;s&&c>16&&c<a-6&&(n.x=c,r=!0),i&&u>16&&u<l-6&&(n.y=u,r=!0),r&&yi.move(c,u),o&&Ie.emit("scroll-up",o),this.instance&&this.virtCursor.enable?(this._isLooping=!0,requestAnimationFrame((()=>{this._eachRenderTick()}))):this._isLooping=!1}};class bi extends ii{static layer=function(){const e=document.createElement("div");return e.style.cssText="display: none; width: 100vw; height: 100vh;position: fixed; top: 0px; left: 0px; pointer-events: all;",e}();static injectLayer(e){e.appendChild(this.layer)}showLayer(e=!0){const t=e?"var(--fade)":"transparent";bi.layer.style.display="block",bi.layer.animate([{opacity:0,backgroundColor:t},{opacity:1,backgroundColor:t}],{duration:100,fill:"forwards"})}disableLayer(){bi.layer.animate([{opacity:1},{opacity:0}],100).onfinish=()=>bi.layer.style.display="none"}getLayer(){return bi.layer}}function xi(e){return"function"==typeof e}class ki extends bi{isPoped=!1;constructor(){super(),this.style.display="none",this.addEventListener("click",(e=>e.stopPropagation()))}hide(){this.isPoped&&(this.disableLayer(),this.animate([{opacity:1,transform:"translate(-50%, -50%) scale(1)"},{opacity:0,transform:"translate(-50%, -50%) scale(0.94)"}],100).onfinish=()=>{this.style.display="none",this.isPoped=!1,xi(this.onhide)&&this.onhide.call(this)})}display(e){this.isPoped||(e&&this.showLayer(),this.style.display="block",this.style.pointerEvents="none",this.animate([{opacity:0,transform:"translate(-50%, calc(-50% + 12px))"},{opacity:1,transform:"translate(-50%, -50%)"}],100).onfinish=()=>{this.style.pointerEvents="all",this.isPoped=!0,xi(this.ondisplay)&&this.ondisplay.call(this)})}}function _i(e){const t=document.createElement("div");return t.innerText=e,t.classList.add("btn","radius","px4","margin"),t.style.display="none",t}class Ci extends ki{_pageIndex=0;_pages=[];localeParser=e=>e;get pageIndex(){return this._pageIndex}set pageIndex(e){if(e<0||e>=this._pages.length)return!1;e?e===this._pages.length-1?(this.setButtonsDisplay(7),this.next.innerText=this.localeParser("done")):(this.setButtonsDisplay(7),this.next.innerText=this.localeParser("next_step")):(this.setButtonsDisplay(5),this.next.innerText=this.localeParser("next_step")),this._changePage(this._pageIndex,e),this._pageIndex=e,this.progress.value=e+1}_changePage(e,t){const n=t-e>0?-1:1;this.content.children[0].animate([{transform:"translateX(0)",opacity:1},{transform:`translateX(${25*n}%)`,opacity:0}],{duration:100,easing:"ease-in-out"}).onfinish=()=>{this.content.children[0].remove(),this.content.appendChild(this._pages[t]),this._pages[t].animate([{transform:`translateX(${-25*n}%)`,opacity:0},{transform:"translateX(0)",opacity:1}],{duration:100,easing:"ease-in-out"})}}constructor(){super(),this.style.cssText="width: 420px;pointer-events: all;display: none;height: 560px;max-height: 88%;border-radius: 8px;box-shadow: 0px 8px 12px rgba(0,0,0,0.32);overflow: hidden;background-color: var(--controlBackground);position: absolute;top: 50%; left: 50%; transform: translate(-50%, -50%);";const e=document.createElement("progress"),t=document.createElement("div"),n=document.createElement("div"),s=document.createElement("div"),i=_i("下一步"),o=_i("上一步"),a=_i("取消");this.progress=e,this.content=t,this.next=i,this.prev=o,this.cancel=a,e.value=0,e.classList.add("horizontal"),t.style.cssText="width: 100%; height: fit-content; min-height: 488px;",o.classList.add("bright"),i.classList.add("accent"),a.classList.add("light"),o.addEventListener("click",(()=>{1===this.pageIndex&&this.setButtonsDisplay(5),this.pageIndex--})),i.addEventListener("click",(()=>{if(this.pageIndex===this._pages.length-1)return this.onFinishWizard();this.pageIndex++,this.setButtonsDisplay(7)})),s.appendChild(o),s.appendChild(i),n.appendChild(a),n.appendChild(s),n.classList.add("Row"),s.classList.add("Row"),n.style.justifyContent="space-between",n.style.backgroundColor="var(--controlBrighter)",n.style.padding="12px",this.appendChild(e),this.appendChild(t),this.appendChild(n),a.addEventListener("click",(()=>this.hide())),this.setButtonsDisplay(5),Ie.on("langChange",(e=>{const t=this.localeParser=(...t)=>e.s(...t);i.innerText=t("next_step"),o.innerText=t("prev_step"),a.innerText=t("cancel")}))}onFinishWizard(){}addPage(...e){for(const t of e)this._pages.push(t);this.progress.value||(this.progress.value=1,this.content.appendChild(this._pages[0])),this.progress.max=this._pages.length}setButtonsDisplay(e){const t=!!(1&e),n=!!(2&e),s=!!(4&e);this.next.style.display=t?"":"none",this.prev.style.display=n?"":"none",this.cancel.style.display=s?"":"none"}setProgress(e){this.progress.value=e}}oi.add(Ci);class Li extends ii{constructor(e={}){super();const t=document.createElement("img"),n=e.size||200;this.style.cssText=`border-radius: ${e.radius||"50%"};\n            display: flex;\n            overflow: hidden;\n            width: ${n}px;\n            height: ${n}px;\n            background-color: var(--controlGray);`,t.style.cssText="display: none;",t.draggable=!1,t.src=e.url,t.onload=()=>{t.width=n,t.style.cssText="display: block;",t.animate([{opacity:0},{opacity:1}],200)},this.appendChild(t)}}oi.add(Li);class Ei extends ii{constructor(e="vertical"){super(),this.classList.add("scrollable",e),this.orientation=e}}oi.add(Ei);class Pi extends ii{constructor(e=!1){super();const t=this.attachShadow({mode:"open"}),n=e?"textarea":"input";t.innerHTML=`\n        <style>\n        :host {\n            width: fit-content;\n            height: fit-content;\n            display: block;\n        }\n        ${n} {\n            display: block;\n            font-family: Roboto, sans-serif;\n            outline: none;\n            border: none;\n            width: 200px;\n            background-color: transparent;\n            padding: 8px;\n            resize: none;\n            height: 16px;\n        }\n        .input {\n            outline: none;\n            position: relative;\n            overflow: hidden;\n            border-radius: 6px;\n            background-color: rgba(255,255,255,0.5);\n        }\n        .input::after {\n            content: '';\n            position: absolute;\n            bottom: 0px;\n            left: 50%;\n            transform: translateX(-50%);\n            width: 0%;\n            border-bottom: solid 2px var(--controlColor);\n            transition: all 0.16s;\n        }\n        .input.focus::after {\n            width: 100%;\n        }\n        .txtarea {\n            min-height: 160px;\n        }\n        </style>\n        <div class="input" id="c">${e?'<textarea id="input" class="txtarea"></textarea>':'<input id="input">'}</div>\n        `,this.input=t.querySelector("#input"),this.container=t.querySelector("#c"),this.input.addEventListener("blur",(()=>{this.container.classList.remove("focus")})),this.input.addEventListener("focus",(()=>{this.container.classList.add("focus")}))}}oi.add(Pi);const Ai=new Ci,Si=()=>{let e=new Ei;return e.classList.add("Column"),e.style.justifyContent="center",e},zi=(e,t=1)=>{let n=document.createElement("h"+t);return n.innerHTML=e,n};function Ti(e,t){const n=new Li({url:t?.avatarUrl}),s=new Pi,i=zi("修改你的头像与昵称",2);i.style.marginTop="40px",n.style.marginTop="20px",s.style.marginTop="60px",s.input.value=t?.nickname||"";const o=Si(),a=Si();o.appendChild(i),o.appendChild(n),o.appendChild(s);const l=zi("修改你的介绍",2);return l.style.marginTop="40px",a.appendChild(l),a.appendChild(new Pi(!0)),Ai.inject(e),Ai.addPage(o,a),Ie.on("langChange",(e=>{i.innerText=e.s("edit_avatar_username"),l.innerText=e.s("edit_desc")})),Ai}class Mi extends fi{display(){this.popup({horizontal:"right",vertical:"bottom"})}}oi.add(Mi);const Ri=new Mi;function Di(e){let t,n,s,i,o,a,l,r,c,d,m,g,$,v,y,w,b;const x=e[6].default,k=u(x,e,e[5],null);return{c(){t=S("div"),n=S("div"),s=S("div"),i=z(e[0]),o=T(),a=S("h4"),l=z(e[1]),r=T(),c=S("div"),d=S("div"),m=S("div"),g=T(),$=S("div"),$.textContent="▼",y=T(),w=S("div"),k&&k.c(),N(s,"class","avatar svelte-1ebysre"),N(a,"class","svelte-1ebysre"),N(n,"class","Row start svelte-1ebysre"),B(m,"background-color","var(--controlNight)"),B(m,"width","2px"),B(m,"height","calc(100% - 16px)"),B($,"text-align","center"),B($,"height","16px"),B($,"transform","translateY(-8px) scaleX(0.6)"),N(d,"class",v=(e[2]?"hide ":"")+"Column svelte-1ebysre"),B(d,"width","32px"),B(d,"color","var(--controlNight)"),N(w,"class","content svelte-1ebysre"),N(c,"class","Row start svelte-1ebysre"),B(c,"height","fit-content"),N(t,"class","Column start svelte-1ebysre"),B(t,"height","fit-content")},m(u,p){E(u,t,p),_(t,n),_(n,s),_(s,i),_(n,o),_(n,a),_(a,l),_(t,r),_(t,c),_(c,d),_(d,m),_(d,g),_(d,$),e[7](d),_(c,y),_(c,w),k&&k.m(w,null),e[8](w),b=!0},p(e,[t]){(!b||1&t)&&q(i,e[0]),(!b||2&t)&&q(l,e[1]),(!b||4&t&&v!==(v=(e[2]?"hide ":"")+"Column svelte-1ebysre"))&&N(d,"class",v),k&&k.p&&(!b||32&t)&&f(k,x,e,e[5],b?p(x,e[5],t,null):h(e[5]),null)},i(e){b||(ke(k,e),b=!0)},o(e){_e(k,e),b=!1},d(n){n&&P(t),e[7](null),k&&k.d(n),e[8](null)}}}function Ni(e,t,n){let s,i,{$$slots:o={},$$scope:a}=t,{icon:l=""}=t,{title:r=""}=t,{hideLine:c=!1}=t;return G((()=>{n(3,s.style.height=i.getBoundingClientRect().height+16+"px",s)})),e.$$set=e=>{"icon"in e&&n(0,l=e.icon),"title"in e&&n(1,r=e.title),"hideLine"in e&&n(2,c=e.hideLine),"$$scope"in e&&n(5,a=e.$$scope)},[l,r,c,s,i,a,o,function(e){se[e?"unshift":"push"]((()=>{s=e,n(3,s)}))},function(e){se[e?"unshift":"push"]((()=>{i=e,n(4,i)}))}]}class Ui extends Ne{constructor(e){super(),De(this,e,Ni,Di,l,{icon:0,title:1,hideLine:2})}}const qi=new Audio;let Vi,Bi,Oi,Fi,Ii,Wi,ji,Hi,Xi,Yi,Gi,Ji,Qi,Ki,Zi,eo,to,no,so,io,oo="default";async function ao(e){if(e&&e!==oo){try{await qi.setSinkId(e),oo=e}catch(e){return!1}return!0}}async function lo(e){let t=0;for(const n of e){if(n.deviceId===oo)return t;t++}return-1}async function ro(){return(await navigator.mediaDevices.enumerateDevices()).filter((e=>"audiooutput"===e.kind))}async function co(){await We.when("runtimeReady"),navigator.mediaDevices.addEventListener("devicechange",(async e=>{Ie.emit("audioDeviceChange",(await e.target.enumerateDevices()).filter((e=>"audiooutput"===e.kind)))}))}function uo(e=!0){Wi.disconnect(),eo.disconnect(),e?(Wi.connect(ji),eo.connect(Oi)):Wi.connect(Oi),void 0!==Ie&&Ie.emit("eqChange")}function po(e,t,n){Bi=e,Oi=e.createDelay(),Fi=e.createGain(),Ii=e.createGain(),Wi=e.createStereoPanner(),function(e){const t=function(e){return function(t,n,s){const i=e.createBiquadFilter();return i.type=t,i.frequency.value=n,i.gain.value=0,s&&(i.Q.value=s),i}}(e);ji=t("lowshelf",31),Hi=t("peaking",62,1.516129),Xi=t("peaking",125,1.504),Yi=t("peaking",250,1.5),Gi=t("peaking",500,1.5),Ji=t("peaking",1e3,1.5),Qi=t("peaking",2e3,1.5),Ki=t("peaking",4e3,1.5),Zi=t("peaking",8e3,1.5),eo=t("highshelf",16e3),ji.connect(Hi),Hi.connect(Xi),Xi.connect(Yi),Yi.connect(Gi),Gi.connect(Ji),Ji.connect(Qi),Qi.connect(Ki),Ki.connect(Zi),Zi.connect(eo),to={31:ji,62:Hi,125:Xi,250:Yi,500:Gi,1e3:Ji,2e3:Qi,4e3:Ki,8e3:Zi,16e3:eo}}(e),t.connect(Fi),Fi.connect(Wi),Wi.connect(Oi),Oi.connect(Ii),Ii.connect(n),uo(),function(){(Vi=st.getSync("process"))||(Vi={delay:{delayTime:.1},gain:{gain:1},stereoPanner:{pan:0},fader:{fadeIn:.2,fadeOut:.2},eq:{enable:!0,31:0,62:0,125:0,250:0,500:0,1e3:0,2e3:0,4e3:0,8e3:0,16e3:0}},fo());Oi.delayTime.value=Vi.delay.delayTime,Fi.gain.linearRampToValueAtTime(Vi.gain.gain,Bi.currentTime),Wi.pan.value=Vi.stereoPanner.pan}()}function fo(){st.set("process",Vi),Ie&&Ie.emit("processUpdate",Vi)}function ho(e){Oi.delayTime.value=e,Vi.delay.delayTime=e,fo()}function mo(e){Fi.gain.linearRampToValueAtTime(e,Bi.currentTime),Vi.gain.gain=e,fo()}function go(e){Wi.pan.value=e,Vi.stereoPanner.pan=e,fo()}async function $o(e,t){try{io=t,so=e,no=e.createGain();const n=await navigator.mediaDevices.getUserMedia({audio:!0});return e.createMediaStreamSource(n).connect(no),function(e=!1){e?no.connect(io):no.disconnect()}(!1),!0}finally{return!1}}co();class vo{static audioCtx=new AudioContext;static audioElement=new Audio;static em=new Fe;static on(e,t){this.em.on(e,t)}on(e,t){vo.on(e,t)}static async play(){await this.audioElement.play(),hooks.send("thumbar:pause"),this.em.emit("play"),await function(){const e=Vi.delay.delayTime,t=Vi.fader.fadeIn;return Ii.gain.setValueAtTime(.001,Bi.currentTime+e),Ii.gain.exponentialRampToValueAtTime(1,Bi.currentTime+t+e),new Promise((n=>{setTimeout((()=>{n()}),1e3*(e+t))}))}()}play(){return vo.play()}static async pause(){this.load()&&(hooks.send("thumbar:play"),this.em.emit("pause")),await function(){const e=Vi.delay.delayTime,t=Vi.fader.fadeOut;return Ii.gain.setValueAtTime(1,Bi.currentTime+e),Ii.gain.exponentialRampToValueAtTime(.001,Bi.currentTime+t+e),new Promise((n=>{setTimeout((()=>{n()}),1e3*(e+t))}))}(),this.audioElement.pause()}pause(){vo.pause()}static seek(e){if("number"!=typeof e)return this.audioElement.currentTime;this.audioElement.currentTime=e,this.em.emit("seek")}seek(e){return vo.seek(e)}static load(e){return e&&(this.audioElement.src=e),this.audioElement.src}load(e){return vo.load(e)}async loadData(e){e.onLoadMetadata=e=>{vo.metadata=e,Ie.emit("metadata",e)},vo.audioData=e,this.load(await e.url()),this.onDataLoaded()}onDataLoaded(){}static volume(e){if(void 0===e)return this.audioElement.volume;"number"!=typeof e||(e>0?(this.audioElement.muted=!1,this.audioElement.volume=e):this.audioElement.muted=!0)}volume(e){return vo.volume(e)}static duration(){return this.audioElement.duration||this.audioData?.data.dt/1e3||0}duration(){return vo.duration()}static isPlaying(){return!this.audioElement.paused}isPlaying(){return vo.isPlaying()}static metadata={};getMetadata(){return Object.assign({},vo.metadata)}}function yo(e){let t,n;return{c(){t=S("div"),n=z(e[4]),B(t,"color","var(--controlDark)"),B(t,"font-weight","bold"),B(t,"margin-bottom","6px"),B(t,"margin-left","calc(14px + "+e[0]+")")},m(e,s){E(e,t,s),_(t,n)},p(e,s){16&s&&q(n,e[4]),1&s&&B(t,"margin-left","calc(14px + "+e[0]+")")},d(e){e&&P(t)}}}function wo(e){let t,n,s,i,o=e[4]&&yo(e);const a=e[6].default,l=u(a,e,e[5],null);return{c(){t=S("div"),o&&o.c(),n=T(),s=S("div"),l&&l.c(),N(s,"class","tile svelte-1f36s4l"),B(s,"border-radius",e[2]),B(s,"background-color",e[3]),B(s,"margin",e[1]+" "+e[0]),N(t,"class","container svelte-1f36s4l")},m(e,a){E(e,t,a),o&&o.m(t,null),_(t,n),_(t,s),l&&l.m(s,null),i=!0},p(e,[r]){e[4]?o?o.p(e,r):(o=yo(e),o.c(),o.m(t,n)):o&&(o.d(1),o=null),l&&l.p&&(!i||32&r)&&f(l,a,e,e[5],i?p(a,e[5],r,null):h(e[5]),null),(!i||4&r)&&B(s,"border-radius",e[2]),(!i||8&r)&&B(s,"background-color",e[3]),(!i||3&r)&&B(s,"margin",e[1]+" "+e[0])},i(e){i||(ke(l,e),i=!0)},o(e){_e(l,e),i=!1},d(e){e&&P(t),o&&o.d(),l&&l.d(e)}}}function bo(e,t,n){let{$$slots:s={},$$scope:i}=t,{marginHorizon:o="10px"}=t,{marginVertical:a="6px"}=t,{radius:l="8px"}=t,{color:r="var(--dynamicControlLight)"}=t,{title:c=""}=t;return e.$$set=e=>{"marginHorizon"in e&&n(0,o=e.marginHorizon),"marginVertical"in e&&n(1,a=e.marginVertical),"radius"in e&&n(2,l=e.radius),"color"in e&&n(3,r=e.color),"title"in e&&n(4,c=e.title),"$$scope"in e&&n(5,i=e.$$scope)},[o,a,l,r,c,i,s]}We.when("runtimeReady").then((()=>{const e=vo.audioCtx.createMediaElementSource(vo.audioElement),t=vo.audioCtx.createMediaStreamDestination();vo.audioElement.addEventListener("ended",(()=>{vo.em.emit("ended")})),vo.audioElement.onloadedmetadata=()=>{Ie.emit("setControlsContent",vo.audioData)};const n=new vo;var s;window.globalPlayer=n,po(vo.audioCtx,e,t),$o(vo.audioCtx,t),s=t.stream,qi.srcObject=s,qi.play(),navigator.mediaSession.setActionHandler("play",(()=>n.play())),navigator.mediaSession.setActionHandler("pause",(()=>n.pause())),hooks.on("player:play",(()=>n.play())),hooks.on("player:pause",(()=>n.pause()))}));class xo extends Ne{constructor(e){super(),De(this,e,bo,wo,l,{marginHorizon:0,marginVertical:1,radius:2,color:3,title:4})}}function ko(t){let n,s,i,a,l,r;return{c(){n=S("div"),s=S("div"),N(s,"class",i="switchThumb"+(t[0]?" thumb-active":"")+" svelte-18hya48"),N(n,"class",a="switch"+(t[0]?" active":"")+" svelte-18hya48")},m(e,i){E(e,n,i),_(n,s),l||(r=[R(n,"mousedown",D(t[3])),R(n,"click",D(t[1]))],l=!0)},p(e,[t]){1&t&&i!==(i="switchThumb"+(e[0]?" thumb-active":"")+" svelte-18hya48")&&N(s,"class",i),1&t&&a!==(a="switch"+(e[0]?" active":"")+" svelte-18hya48")&&N(n,"class",a)},i:e,o:e,d(e){e&&P(n),l=!1,o(r)}}}function _o(e,t,n){let{checked:s=!1}=t;const i=K();function o(){n(0,s=!s),i("toggle",s)}return e.$$set=e=>{"checked"in e&&n(0,s=e.checked)},[s,o,function(){o()},function(t){te.call(this,e,t)}]}class Co extends Ne{constructor(e){super(),De(this,e,_o,ko,l,{checked:0,toggle:2})}get toggle(){return this.$$.ctx[2]}}function Lo(e){let t,n,s;function i(t){e[4](t)}let o={};return void 0!==e[0]&&(o.checked=e[0]),t=new Co({props:o}),se.push((()=>ze(t,"checked",i))),e[5](t),t.$on("toggle",e[2]),{c(){Te(t.$$.fragment)},m(e,n){Me(t,e,n),s=!0},p(e,s){const i={};!n&&1&s&&(n=!0,i.checked=e[0],de((()=>n=!1))),t.$set(i)},i(e){s||(ke(t.$$.fragment,e),s=!0)},o(e){_e(t.$$.fragment,e),s=!1},d(n){e[5](null),Re(t,n)}}}function Eo(e){let t,s;const i=[e[3]];let o={$$slots:{default:[Lo]},$$scope:{ctx:e}};for(let e=0;e<i.length;e+=1)o=n(o,i[e]);return t=new Ns({props:o}),t.$on("click",e[6]),{c(){Te(t.$$.fragment)},m(e,n){Me(t,e,n),s=!0},p(e,[n]){const s=8&n?Ae(i,[Se(e[3])]):{};259&n&&(s.$$scope={dirty:n,ctx:e}),t.$set(s)},i(e){s||(ke(t.$$.fragment,e),s=!0)},o(e){_e(t.$$.fragment,e),s=!1},d(e){Re(t,e)}}}function Po(e,t,s){let i,o=K(),{checked:a=!1}=t;return e.$$set=e=>{s(3,t=n(n({},t),m(e))),"checked"in e&&s(0,a=e.checked)},t=m(t),[a,i,function(e){let t=e.detail;o("toggle",t)},t,function(e){a=e,s(0,a)},function(e){se[e?"unshift":"push"]((()=>{i=e,s(1,i)}))},()=>i.toggle()]}class Ao extends Ne{constructor(e){super(),De(this,e,Po,Eo,l,{checked:0})}}function So(e){let t,n,s;function i(t){e[3](t)}let o={data:e[1].s("dev_tools"),extra:e[1].s("dev_tools_extra"),useAvatar:!1,isUrl:!1};return void 0!==e[0].showDevTools&&(o.checked=e[0].showDevTools),t=new Ao({props:o}),se.push((()=>ze(t,"checked",i))),t.$on("toggle",e[2]),{c(){Te(t.$$.fragment)},m(e,n){Me(t,e,n),s=!0},p(e,s){const i={};2&s&&(i.data=e[1].s("dev_tools")),2&s&&(i.extra=e[1].s("dev_tools_extra")),!n&&1&s&&(n=!0,i.checked=e[0].showDevTools,de((()=>n=!1))),t.$set(i)},i(e){s||(ke(t.$$.fragment,e),s=!0)},o(e){_e(t.$$.fragment,e),s=!1},d(e){Re(t,e)}}}function zo(e){let t,n,s=Ie.isBeta&&function(e){let t,n;return t=new xo({props:{title:e[1].s("test_features"),$$slots:{default:[So]},$$scope:{ctx:e}}}),{c(){Te(t.$$.fragment)},m(e,s){Me(t,e,s),n=!0},p(e,n){const s={};2&n&&(s.title=e[1].s("test_features")),19&n&&(s.$$scope={dirty:n,ctx:e}),t.$set(s)},i(e){n||(ke(t.$$.fragment,e),n=!0)},o(e){_e(t.$$.fragment,e),n=!1},d(e){Re(t,e)}}}(e);return{c(){s&&s.c(),t=M()},m(e,i){s&&s.m(e,i),E(e,t,i),n=!0},p(e,[t]){Ie.isBeta&&s.p(e,t)},i(e){n||(ke(s),n=!0)},o(e){_e(s),n=!1},d(e){s&&s.d(e),e&&P(t)}}}function To(e,t,n){let s,i=st.getSync("AppSettings/beta_features")||{showDevTools:!1};return G((()=>{hooks.send("devtools:"+(i.showDevTools?"open":"close"))})),n(1,s=window.langMapping),[i,s,function({detail:e}){const t=e?"open":"close";hooks.send(`devtools:${t}`),n(0,i.showDevTools=e,i),st.set("AppSettings/beta_features",i)},function(t){e.$$.not_equal(i.showDevTools,t)&&(i.showDevTools=t,n(0,i))}]}class Mo extends Ne{constructor(e){super(),De(this,e,To,zo,l,{})}}function Ro(e,t,n){const s=e.slice();return s[6]=t[n],s[8]=n,s}function Do(e){let t,n,s,i,a,l,r=(e[6].label||e[6])+"";function c(...t){return e[4](e[8],...t)}return{c(){t=S("div"),n=z(r),s=T(),N(t,"class",i="btn outlined"+(0===e[8]?" first-child":"")+(e[0]===e[8]?" selected":"")+" svelte-1d1p4yz")},m(e,i){E(e,t,i),_(t,n),_(t,s),a||(l=[R(t,"click",c),R(t,"mousedown",qo)],a=!0)},p(s,o){e=s,2&o&&r!==(r=(e[6].label||e[6])+"")&&q(n,r),1&o&&i!==(i="btn outlined"+(0===e[8]?" first-child":"")+(e[0]===e[8]?" selected":"")+" svelte-1d1p4yz")&&N(t,"class",i)},d(e){e&&P(t),a=!1,o(l)}}}function No(e){let t,n=e[1],s=[];for(let t=0;t<n.length;t+=1)s[t]=Do(Ro(e,n,t));return{c(){t=S("div");for(let e=0;e<s.length;e+=1)s[e].c();N(t,"class","Row container svelte-1d1p4yz")},m(e,n){E(e,t,n);for(let e=0;e<s.length;e+=1)s[e].m(t,null)},p(e,i){if(7&i){let o;for(n=e[1],o=0;o<n.length;o+=1){const a=Ro(e,n,o);s[o]?s[o].p(a,i):(s[o]=Do(a),s[o].c(),s[o].m(t,null))}for(;o<s.length;o+=1)s[o].d(1);s.length=n.length}},d(e){e&&P(t),A(s,e)}}}function Uo(e){let t,s;const i=[e[3],{breakLine:!0}];let o={$$slots:{default:[No]},$$scope:{ctx:e}};for(let e=0;e<i.length;e+=1)o=n(o,i[e]);return t=new Ns({props:o}),{c(){Te(t.$$.fragment)},m(e,n){Me(t,e,n),s=!0},p(e,[n]){const s=8&n?Ae(i,[Se(e[3]),i[1]]):{};515&n&&(s.$$scope={dirty:n,ctx:e}),t.$set(s)},i(e){s||(ke(t.$$.fragment,e),s=!0)},o(e){_e(t.$$.fragment,e),s=!1},d(e){Re(t,e)}}}const qo=e=>e.stopPropagation();function Vo(e,t,s){let{dataList:i=[]}=t,{selected:o=0}=t;const a=K();function l(e,t){o!==t&&(a("selected",t),s(0,o=t))}return e.$$set=e=>{s(3,t=n(n({},t),m(e))),"dataList"in e&&s(1,i=e.dataList),"selected"in e&&s(0,o=e.selected)},t=m(t),[o,i,l,t,(e,t)=>l(0,e)]}class Bo extends Ne{constructor(e){super(),De(this,e,Vo,Uo,l,{dataList:1,selected:0})}}function Oo(e){let t,n,s,i,o,a,l;function r(t){e[6](t)}function c(t){e[7](t)}let u={data:e[3]("theme_color"),useAvatar:!1,isUrl:!1};function d(t){e[8](t)}void 0!==e[0]&&(u.dataList=e[0]),void 0!==e[1]&&(u.selected=e[1]),t=new Bo({props:u}),se.push((()=>ze(t,"dataList",r))),se.push((()=>ze(t,"selected",c))),t.$on("selected",e[4]);let p={data:e[3]("use_acrylic"),extra:e[3]("use_acrylic_extra"),useAvatar:!1,isUrl:!1};return void 0!==e[2]&&(p.checked=e[2]),o=new Ao({props:p}),se.push((()=>ze(o,"checked",d))),o.$on("toggle",e[5]),{c(){Te(t.$$.fragment),i=T(),Te(o.$$.fragment)},m(e,n){Me(t,e,n),E(e,i,n),Me(o,e,n),l=!0},p(e,i){const l={};!n&&1&i&&(n=!0,l.dataList=e[0],de((()=>n=!1))),!s&&2&i&&(s=!0,l.selected=e[1],de((()=>s=!1))),t.$set(l);const r={};!a&&4&i&&(a=!0,r.checked=e[2],de((()=>a=!1))),o.$set(r)},i(e){l||(ke(t.$$.fragment,e),ke(o.$$.fragment,e),l=!0)},o(e){_e(t.$$.fragment,e),_e(o.$$.fragment,e),l=!1},d(e){Re(t,e),e&&P(i),Re(o,e)}}}function Fo(e){let t,n;return t=new xo({props:{title:e[3]("theme"),$$slots:{default:[Oo]},$$scope:{ctx:e}}}),{c(){Te(t.$$.fragment)},m(e,s){Me(t,e,s),n=!0},p(e,[n]){const s={};1031&n&&(s.$$scope={dirty:n,ctx:e}),t.$set(s)},i(e){n||(ke(t.$$.fragment,e),n=!0)},o(e){_e(t.$$.fragment,e),n=!1},d(e){Re(t,e)}}}function Io(e,t,n){let{colors:s,selected:i,useAcrylic:o}=st.getSync("AppSettings/theme")||{colors:[2,39,148,210,270,292,322],selected:3,useAcrylic:!1};const a=()=>st.set("AppSettings/theme",{colors:s,selected:i,useAcrylic:o});return[s,i,o,e=>langMapping.s(e),function({detail:e}){n(1,i=e),Ie.emit("changeControlColor",s[i]),a()},function({detail:e}){n(2,o=e),Ie.emit("useAcrylic",e),a()},function(e){s=e,n(0,s)},function(e){i=e,n(1,i)},function(e){o=e,n(2,o)}]}class Wo extends Ne{constructor(e){super(),De(this,e,Io,Fo,l,{})}}function jo(e){let t,n,s,i,o,a,l,r;function c(t){e[5](t)}function u(t){e[6](t)}let d={data:e[2].s("cache_quality"),useAvatar:!1,isUrl:!1};return void 0!==e[0]&&(d.dataList=e[0]),void 0!==e[1]&&(d.selected=e[1]),t=new Bo({props:d}),se.push((()=>ze(t,"dataList",c))),se.push((()=>ze(t,"selected",u))),t.$on("selected",e[3]),o=new Ns({props:{useAvatar:!1,data:e[2].s("clear_usr_data"),extra:e[2].s("clear_usr_data_extra")}}),o.$on("click",e[4]),l=new Ns({props:{useAvatar:!1,data:e[2].s("clear_cache")}}),l.$on("click",Xo),{c(){Te(t.$$.fragment),i=T(),Te(o.$$.fragment),a=T(),Te(l.$$.fragment)},m(e,n){Me(t,e,n),E(e,i,n),Me(o,e,n),E(e,a,n),Me(l,e,n),r=!0},p(e,i){const a={};4&i&&(a.data=e[2].s("cache_quality")),!n&&1&i&&(n=!0,a.dataList=e[0],de((()=>n=!1))),!s&&2&i&&(s=!0,a.selected=e[1],de((()=>s=!1))),t.$set(a);const r={};4&i&&(r.data=e[2].s("clear_usr_data")),4&i&&(r.extra=e[2].s("clear_usr_data_extra")),o.$set(r);const c={};4&i&&(c.data=e[2].s("clear_cache")),l.$set(c)},i(e){r||(ke(t.$$.fragment,e),ke(o.$$.fragment,e),ke(l.$$.fragment,e),r=!0)},o(e){_e(t.$$.fragment,e),_e(o.$$.fragment,e),_e(l.$$.fragment,e),r=!1},d(e){Re(t,e),e&&P(i),Re(o,e),e&&P(a),Re(l,e)}}}function Ho(e){let t,n;return t=new xo({props:{title:e[2].s("cache"),$$slots:{default:[jo]},$$scope:{ctx:e}}}),{c(){Te(t.$$.fragment)},m(e,s){Me(t,e,s),n=!0},p(e,[n]){const s={};4&n&&(s.title=e[2].s("cache")),135&n&&(s.$$scope={dirty:n,ctx:e}),t.$set(s)},i(e){n||(ke(t.$$.fragment,e),n=!0)},o(e){_e(t.$$.fragment,e),n=!1},d(e){Re(t,e)}}}function Xo(){}function Yo(e,t,n){let s,{qualities:i,selected:o}=st.getSync("AppSettings/cache")||{qualities:["lossless"],selected:0};return n(2,s=window.langMapping),[i,o,s,function({detail:e}){n(1,o=e),st.set("AppSettings/cache",{qualities:i,selected:o})},function(){st.clear()},function(e){i=e,n(0,i)},function(e){o=e,n(1,o)}]}class Go extends Ne{constructor(e){super(),De(this,e,Yo,Ho,l,{})}}function Jo(e){let t,n,s,i,o,a,l,r;function c(t){e[6](t)}function u(t){e[7](t)}let d={data:Ko("page_scroll_speed"),useAvatar:!1,isUrl:!1};function p(t){e[8](t)}function f(t){e[9](t)}void 0!==e[1].levels&&(d.dataList=e[1].levels),void 0!==e[3]&&(d.selected=e[3]),t=new Bo({props:d}),se.push((()=>ze(t,"dataList",c))),se.push((()=>ze(t,"selected",u))),t.$on("selected",e[4]);let h={data:Ko("cursor_move_speed"),useAvatar:!1,isUrl:!1};return void 0!==e[0].levels&&(h.dataList=e[0].levels),void 0!==e[2]&&(h.selected=e[2]),o=new Bo({props:h}),se.push((()=>ze(o,"dataList",p))),se.push((()=>ze(o,"selected",f))),o.$on("selected",e[5]),{c(){Te(t.$$.fragment),i=T(),Te(o.$$.fragment)},m(e,n){Me(t,e,n),E(e,i,n),Me(o,e,n),r=!0},p(e,i){const r={};!n&&2&i&&(n=!0,r.dataList=e[1].levels,de((()=>n=!1))),!s&&8&i&&(s=!0,r.selected=e[3],de((()=>s=!1))),t.$set(r);const c={};!a&&1&i&&(a=!0,c.dataList=e[0].levels,de((()=>a=!1))),!l&&4&i&&(l=!0,c.selected=e[2],de((()=>l=!1))),o.$set(c)},i(e){r||(ke(t.$$.fragment,e),ke(o.$$.fragment,e),r=!0)},o(e){_e(t.$$.fragment,e),_e(o.$$.fragment,e),r=!1},d(e){Re(t,e),e&&P(i),Re(o,e)}}}function Qo(e){let t,n;return t=new xo({props:{title:Ko("controller"),$$slots:{default:[Jo]},$$scope:{ctx:e}}}),{c(){Te(t.$$.fragment)},m(e,s){Me(t,e,s),n=!0},p(e,[n]){const s={};1039&n&&(s.$$scope={dirty:n,ctx:e}),t.$set(s)},i(e){n||(ke(t.$$.fragment,e),n=!0)},o(e){_e(t.$$.fragment,e),n=!1},d(e){Re(t,e)}}}function Ko(e){return langMapping.s(e)}function Zo(e,t,n){let s=st.getSync("AppSettings/left_stick")||{levels:[{label:Ko("slow"),value:.3},{label:Ko("medium"),value:.65},{label:Ko("fast"),value:1}],selected:1},i=st.getSync("AppSettings/right_stick")||{levels:[{label:Ko("slow"),value:.3},{label:Ko("medium"),value:.65},{label:Ko("fast"),value:1}],selected:1},o=s.selected,a=i.selected;return[s,i,o,a,function({detail:e}){n(1,i.selected=n(3,a=e),i),st.set("AppSettings/right_stick",i)},function({detail:e}){n(0,s.selected=n(2,o=e),s),st.set("AppSettings/left_stick",s)},function(t){e.$$.not_equal(i.levels,t)&&(i.levels=t,n(1,i))},function(e){a=e,n(3,a)},function(t){e.$$.not_equal(s.levels,t)&&(s.levels=t,n(0,s))},function(e){o=e,n(2,o)}]}class ea extends Ne{constructor(e){super(),De(this,e,Zo,Qo,l,{})}}function ta(e){let t,n,s,i,o,a;function l(t){e[5](t)}function r(t){e[6](t)}let c={data:e[3].s("device"),extra:e[3].s("device_extra"),useAvatar:!1,isUrl:!1};void 0!==e[1]&&(c.dataList=e[1]),void 0!==e[0]&&(c.selected=e[0]),t=new Bo({props:c}),se.push((()=>ze(t,"dataList",l))),se.push((()=>ze(t,"selected",r))),t.$on("selected",e[7]);let u=Ie.isBeta&&function(e){let t,n,s;function i(t){e[8](t)}let o={data:e[3].s("anc"),extra:e[3].s("anc_extra"),useAvatar:!1,isUrl:!1};return void 0!==e[2]&&(o.checked=e[2]),t=new Ao({props:o}),se.push((()=>ze(t,"checked",i))),t.$on("toggle",e[4]),{c(){Te(t.$$.fragment)},m(e,n){Me(t,e,n),s=!0},p(e,s){const i={};8&s&&(i.data=e[3].s("anc")),8&s&&(i.extra=e[3].s("anc_extra")),!n&&4&s&&(n=!0,i.checked=e[2],de((()=>n=!1))),t.$set(i)},i(e){s||(ke(t.$$.fragment,e),s=!0)},o(e){_e(t.$$.fragment,e),s=!1},d(e){Re(t,e)}}}(e);return{c(){Te(t.$$.fragment),i=T(),u&&u.c(),o=M()},m(e,n){Me(t,e,n),E(e,i,n),u&&u.m(e,n),E(e,o,n),a=!0},p(e,i){const o={};8&i&&(o.data=e[3].s("device")),8&i&&(o.extra=e[3].s("device_extra")),!n&&2&i&&(n=!0,o.dataList=e[1],de((()=>n=!1))),!s&&1&i&&(s=!0,o.selected=e[0],de((()=>s=!1))),t.$set(o),Ie.isBeta&&u.p(e,i)},i(e){a||(ke(t.$$.fragment,e),ke(u),a=!0)},o(e){_e(t.$$.fragment,e),_e(u),a=!1},d(e){Re(t,e),e&&P(i),u&&u.d(e),e&&P(o)}}}function na(e){let t,n;return t=new xo({props:{title:e[3].s("output"),$$slots:{default:[ta]},$$scope:{ctx:e}}}),{c(){Te(t.$$.fragment)},m(e,s){Me(t,e,s),n=!0},p(e,[n]){const s={};8&n&&(s.title=e[3].s("output")),2063&n&&(s.$$scope={dirty:n,ctx:e}),t.$set(s)},i(e){n||(ke(t.$$.fragment,e),n=!0)},o(e){_e(t.$$.fragment,e),n=!1},d(e){Re(t,e)}}}function sa(e,t,n){let s,i=0,o=[];async function a(){n(1,o=[...await ro()]),n(0,i=await lo(o))}Q((()=>{Ie.off("audioDeviceChange",a)})),G((async()=>{Ie.on("audioDeviceChange",a),n(1,o=await async function(){const e=await ro();return n(0,i=await lo(e)),e}())}));let l=!1;return n(3,s=window.langMapping),[i,o,l,s,function({detail:e}){n(2,l=!1)},function(e){o=e,n(1,o)},function(e){i=e,n(0,i)},async e=>{n(0,i=e.detail),ao(o[e.detail].deviceId)},function(e){l=e,n(2,l)}]}class ia extends Ne{constructor(e){super(),De(this,e,sa,na,l,{})}}var oa={lang:"中文",my_playist:"我的歌单",unfold:"展开",created_by:"由$1创建",favorite_artists:"收藏的艺术家",collapse:"收起",expand:"展开",favorite_albums:"收藏的专辑",all_artists:"$1全部 $2 位艺术家",all_albums:"$1全部 $2 张专辑",test_features:"测试功能",dev_tools:"开发者工具",dev_tools_extra:"开启或关闭开发者工具",cache:"缓存",cache_quality:"缓存音乐质量",clear_usr_data:"清除用户数据",clear_usr_data_extra:"需手动重启应用",clear_cache:"清除歌曲缓存",language:"语言",set_lang:"设置语言",set_lang_extra:"将会替换UI所有不可变元素的文字",output:"输出",device:"设备",device_extra:"正在使用的输出设备变化时将会切换到默认设备",anc:"主动降噪*",anc_extra:"需要访问你的麦克风 (这是个实验性的功能)",fast:"快",medium:"中",slow:"慢",controller:"控制器",page_scroll_speed:"页面滚动速度",cursor_move_speed:"指针移动速度",theme:"主题",theme_color:"主题色 (色相)",use_acrylic:'使用 "Acrylic" ',use_acrylic_extra:"性能较低的设备关闭此选项以获得更好的体验",settings:"设置",settings_search:"搜索设置",mine:"我的",explorer:"发现",edit_profile:"修改个人信息",login:"登录",logout:"注销",download_manager:"下载管理",not_login:"未登录",search:"搜索歌曲和歌手",songs:"歌曲",artists:"艺术家",albums:"专辑",playlists:"歌单",no_song_playing:"暂未播放歌曲",delay:"延迟",fade_in:"淡入",fade_out:"淡出",fade_in_and_out:"淡入淡出",gain:"增益",stereo_pan:"平衡",input:"输入",codec:"编码",num_of_tracks:"音轨数",bitrate:"码率",bit_length:"位深",sample_rate:"采样率",decoder:"解码器",builtin:"内置",frequency:"频率",equalizer:"均衡器",enable_eq:"开启均衡器",done:"完成",none:"无",disabled:"已禁用",processing:"处理",phone_number:"电话",qr_code:"二维码",wait_scanning:"等待扫描",login_type:"$1登录",switch_to:"使用",password:"密码",edit_avatar_username:"修改你的头像与昵称",edit_desc:"修改你的介绍",next_step:"下一步",prev_step:"上一步",cancel:"取消",disconnected:"网络连接出现问题",reconnected:"网络已恢复"},aa={lang:"English",my_playist:"My Playlists",unfold:"Unfold",created_by:"Created by $1",favorite_artists:"Loved Artists",collapse:"Collapse",expand:"Expand",favorite_albums:"Loved Albums",all_artists:"$1 all $2 artists",all_albums:"$1 all $2 albums",test_features:"Beta",dev_tools:"Developer tools",dev_tools_extra:"Open or Close Developer Tools",cache:"Cache",cache_quality:"Quality of cache",clear_usr_data:"Clear user data",clear_usr_data_extra:"A manual restart is required",clear_cache:"Clear music cache",language:"Language",set_lang:"Set language",set_lang_extra:"The text of all immutable elements of the UI will be replaced",output:"Output",device:"Device",device_extra:"When the output device in use changes, it will switch to the default device",anc:"Active Noise Cancellation *",anc_extra:"Need access to your microphone (This is an experimental feature)",fast:"Fast",medium:"Medium",slow:"Slow",controller:"Controller",page_scroll_speed:"Page scrolling speed",cursor_move_speed:"Cursor moving speed",theme:"Theme",theme_color:"Theme color (Hue)",use_acrylic:'Use "Acrylic" ',use_acrylic_extra:"Turn off this option for devices with lower performance for a better experience",settings:"Settings",settings_search:"Search for Settings",mine:"Mine",explorer:"Explorer",edit_profile:"Edit your profile",login:"Login",logout:"Logout",download_manager:"Download",not_login:"Not logged in",search:"Search for songs, artists",songs:"Songs",artists:"Artists",albums:"Albums",playlists:"Playlists",no_song_playing:"No song playing",delay:"Delay",fade_in:"Fade in",fade_out:"Fade out",fade_in_and_out:"Fade in and fade out",gain:"Gain",stereo_pan:"Stereo panner",input:"Input",codec:"Codec",num_of_tracks:"Number of tracks",bitrate:"Bitrate",bit_length:"Bit length",sample_rate:"Sample rate",decoder:"Decoder",builtin:"Builtin",frequency:"Frequency",equalizer:"Equalizer",enable_eq:"Enable EQ",done:"Done",none:"None",disabled:"Disabled",processing:"Processing",phone_number:"Phone",qr_code:"QR code",wait_scanning:"Wait for scanning",login_type:"Login via $1",switch_to:" switch to ",password:"Password",edit_avatar_username:"Edit Your Avatar And Username",edit_desc:"Edit Your Description",next_step:"Next",prev_step:"Prev",cancel:"Cancel",disconnected:"There is a problem with the network connection",reconnected:"The network has been reconnected"};class la{static langs={zh_cn:oa,en_us:aa};static parse(e,t,...n){let s=(this.langs[e]||this.langs.zh_cn)[t];return n.forEach(((e,t)=>{const n=String(e),i=`$${t+1}`;s=s.replace(i,n)})),s}static s=this.parse;lang="zh_cn";constructor(e){this.lang=e||"zh_cn"}parse(e,...t){return la.parse(this.lang,e,...t)}getMapping=()=>la.langs[this.lang];s=this.parse}function ra(e){let t,n;return t=new Bo({props:{data:e[1].s("set_lang"),extra:e[1].s("set_lang_extra"),dataList:e[2],selected:e[2].indexOf(e[0]),useAvatar:!1,isUrl:!1}}),t.$on("selected",e[3]),{c(){Te(t.$$.fragment)},m(e,s){Me(t,e,s),n=!0},p(e,n){const s={};2&n&&(s.data=e[1].s("set_lang")),2&n&&(s.extra=e[1].s("set_lang_extra")),1&n&&(s.selected=e[2].indexOf(e[0])),t.$set(s)},i(e){n||(ke(t.$$.fragment,e),n=!0)},o(e){_e(t.$$.fragment,e),n=!1},d(e){Re(t,e)}}}function ca(e){let t,n;return t=new xo({props:{title:e[1].s("language"),$$slots:{default:[ra]},$$scope:{ctx:e}}}),{c(){Te(t.$$.fragment)},m(e,s){Me(t,e,s),n=!0},p(e,[n]){const s={};2&n&&(s.title=e[1].s("language")),19&n&&(s.$$scope={dirty:n,ctx:e}),t.$set(s)},i(e){n||(ke(t.$$.fragment,e),n=!0)},o(e){_e(t.$$.fragment,e),n=!1},d(e){Re(t,e)}}}function ua(e,t,n){let s,{langs:i,selected:o}=st.getSync("AppSettings/lang")||{langs:[...Object.keys(la.langs)],selected:"zh_cn"};return n(1,s=window.langMapping),[o,s,i,function({detail:e}){n(0,o=i[e]);const t=window.langMapping=new la(o);Ie.emit("langChange",t),st.set("AppSettings/lang",{langs:i,selected:o})}]}class da extends Ne{constructor(e){super(),De(this,e,ua,ca,l,{})}}function pa(t){let n,s,i,o,a,l,r,c,u,d,p,f,h,m,g,$,v,y;return a=new yn({props:{placeholder:"  "+t[1]("settings_search"),fullBorder:!0}}),r=new Mo({}),u=new Wo({}),p=new Go({}),h=new ea({}),g=new ia({}),v=new da({}),{c(){n=S("div"),s=S("div"),i=S("h1"),i.textContent=`${t[1]("settings")}`,o=T(),Te(a.$$.fragment),l=T(),Te(r.$$.fragment),c=T(),Te(u.$$.fragment),d=T(),Te(p.$$.fragment),f=T(),Te(h.$$.fragment),m=T(),Te(g.$$.fragment),$=T(),Te(v.$$.fragment),N(i,"class","svelte-cndn71"),N(s,"class","column grid-margin svelte-cndn71"),B(s,"justify-content","space-between"),B(s,"width","calc(100% - 48px)"),N(n,"class","row c svelte-cndn71")},m(e,t){E(e,n,t),_(n,s),_(s,i),_(s,o),Me(a,s,null),_(n,l),Me(r,n,null),_(n,c),Me(u,n,null),_(n,d),Me(p,n,null),_(n,f),Me(h,n,null),_(n,m),Me(g,n,null),_(n,$),Me(v,n,null),y=!0},p:e,i(e){y||(ke(a.$$.fragment,e),ke(r.$$.fragment,e),ke(u.$$.fragment,e),ke(p.$$.fragment,e),ke(h.$$.fragment,e),ke(g.$$.fragment,e),ke(v.$$.fragment,e),y=!0)},o(e){_e(a.$$.fragment,e),_e(r.$$.fragment,e),_e(u.$$.fragment,e),_e(p.$$.fragment,e),_e(h.$$.fragment,e),_e(g.$$.fragment,e),_e(v.$$.fragment,e),y=!1},d(e){e&&P(n),Re(a),Re(r),Re(u),Re(p),Re(h),Re(g),Re(v)}}}function fa(e){let t,n;return t=new Jt({props:{$$slots:{default:[pa]},$$scope:{ctx:e}}}),e[2](t),{c(){Te(t.$$.fragment)},m(e,s){Me(t,e,s),n=!0},p(e,[n]){const s={};8&n&&(s.$$scope={dirty:n,ctx:e}),t.$set(s)},i(e){n||(ke(t.$$.fragment,e),n=!0)},o(e){_e(t.$$.fragment,e),n=!1},d(n){e[2](null),Re(t,n)}}}function ha(){Pager.select(Pager.index(),!0)}function ma(e,t,n){let s;Pager.beforeSwitch((()=>{if(s?.prepared()){const{save:e}=Pager.getContext();e.offsetRatio=s.getOffsetRatio()}}));return G((async()=>{Ie.once("langChange",ha);const{save:e}=Pager.getContext();await ce(),e.offsetRatio&&s.setOffsetRatio(e.offsetRatio)})),[s,e=>langMapping.s(e),function(e){se[e?"unshift":"push"]((()=>{s=e,n(0,s)}))}]}class ga extends Ne{constructor(e){super(),De(this,e,ma,fa,l,{})}}function $a(e){let t,n,s,i,o,a,l,r,c,u,d,p,f;function h(t){e[6](t)}let m={containerStyle:va+"; margin-right: 8px;",cssText:va};function g(t){e[7](t)}void 0!==e[0]&&(m.value=e[0]),r=new yn({props:m}),se.push((()=>ze(r,"value",h))),r.$on("change",e[5]);let $={};return void 0!==e[1]&&($.value=e[1]),d=new vt({props:$}),se.push((()=>ze(d,"value",g))),d.$on("mousemove",e[4]),d.$on("mouseup",e[4]),{c(){t=S("div"),n=S("div"),s=z(e[2]),i=S("pre"),o=z(e[3]),a=T(),l=S("div"),Te(r.$$.fragment),u=T(),Te(d.$$.fragment),N(i,"class","comm svelte-1wmbvzg"),N(n,"class","Row"),N(l,"class","Row"),N(t,"class","Row c svelte-1wmbvzg")},m(e,c){E(e,t,c),_(t,n),_(n,s),_(n,i),_(i,o),_(t,a),_(t,l),Me(r,l,null),_(l,u),Me(d,l,null),f=!0},p(e,[t]){(!f||4&t)&&q(s,e[2]),(!f||8&t)&&q(o,e[3]);const n={};!c&&1&t&&(c=!0,n.value=e[0],de((()=>c=!1))),r.$set(n);const i={};!p&&2&t&&(p=!0,i.value=e[1],de((()=>p=!1))),d.$set(i)},i(e){f||(ke(r.$$.fragment,e),ke(d.$$.fragment,e),f=!0)},o(e){_e(r.$$.fragment,e),_e(d.$$.fragment,e),f=!1},d(e){e&&P(t),Re(r),Re(d)}}}const va="height: 20px; width: 56px; padding: 0 4px; background-color: transparent;";function ya(e,t,n){let{label:s=""}=t,{comment:i=""}=t,{inputValue:o}=t,{progressValue:a}=t;const l=K();return e.$$set=e=>{"label"in e&&n(2,s=e.label),"comment"in e&&n(3,i=e.comment),"inputValue"in e&&n(0,o=e.inputValue),"progressValue"in e&&n(1,a=e.progressValue)},[o,a,s,i,function(e){l("progressChange",e.detail)},function(e){l("inputChange",e.detail)},function(e){o=e,n(0,o)},function(e){a=e,n(1,a)}]}class wa extends Ne{constructor(e){super(),De(this,e,ya,$a,l,{label:2,comment:3,inputValue:0,progressValue:1})}}function ba(e){let t,n,s,i;function o(t){e[5](t)}function a(t){e[6](t)}let l={label:e[2]("gain")};return void 0!==e[0]&&(l.inputValue=e[0]),void 0!==e[1]&&(l.progressValue=e[1]),t=new wa({props:l}),se.push((()=>ze(t,"inputValue",o))),se.push((()=>ze(t,"progressValue",a))),t.$on("inputChange",e[3]),t.$on("progressChange",e[4]),{c(){Te(t.$$.fragment)},m(e,n){Me(t,e,n),i=!0},p(e,[i]){const o={};!n&&1&i&&(n=!0,o.inputValue=e[0],de((()=>n=!1))),!s&&2&i&&(s=!0,o.progressValue=e[1],de((()=>s=!1))),t.$set(o)},i(e){i||(ke(t.$$.fragment,e),i=!0)},o(e){_e(t.$$.fragment,e),i=!1},d(e){Re(t,e)}}}function xa(e,t,n){let s=Vi.gain.gain.toFixed(2),i=s/2*100;return[s,i,e=>langMapping.s(e),function({detail:e}){e=+e;let t=Math.max(Math.min(2,e),0);mo(t),n(0,s=e.toFixed(2)),n(1,i=t/2*100)},function({detail:e}){let t=2*(e/=100);mo(t),n(0,s=t.toFixed(2))},function(e){s=e,n(0,s)},function(e){i=e,n(1,i)}]}class ka extends Ne{constructor(e){super(),De(this,e,xa,ba,l,{})}}function _a(e){let t,n,s,i;function o(t){e[5](t)}function a(t){e[6](t)}let l={label:e[2]("delay")};return void 0!==e[0]&&(l.inputValue=e[0]),void 0!==e[1]&&(l.progressValue=e[1]),t=new wa({props:l}),se.push((()=>ze(t,"inputValue",o))),se.push((()=>ze(t,"progressValue",a))),t.$on("inputChange",e[3]),t.$on("progressChange",e[4]),{c(){Te(t.$$.fragment)},m(e,n){Me(t,e,n),i=!0},p(e,[i]){const o={};!n&&1&i&&(n=!0,o.inputValue=e[0],de((()=>n=!1))),!s&&2&i&&(s=!0,o.progressValue=e[1],de((()=>s=!1))),t.$set(o)},i(e){i||(ke(t.$$.fragment,e),i=!0)},o(e){_e(t.$$.fragment,e),i=!1},d(e){Re(t,e)}}}function Ca(e,t,n){let s=Vi.delay.delayTime.toFixed(3),i=200*s;return[s,i,e=>langMapping.s(e),function({detail:e}){e=+e;let t=Math.max(Math.min(.5,e),0);ho(t),n(0,s=e.toFixed(3)),n(1,i=200*t)},function({detail:e}){let t=(e/=100)/2;ho(t),n(0,s=t.toFixed(3))},function(e){s=e,n(0,s)},function(e){i=e,n(1,i)}]}class La extends Ne{constructor(e){super(),De(this,e,Ca,_a,l,{})}}function Ea(e){let t,n,s,i;function o(t){e[5](t)}function a(t){e[6](t)}let l={label:e[2]("stereo_pan")};return void 0!==e[0]&&(l.inputValue=e[0]),void 0!==e[1]&&(l.progressValue=e[1]),t=new wa({props:l}),se.push((()=>ze(t,"inputValue",o))),se.push((()=>ze(t,"progressValue",a))),t.$on("inputChange",e[3]),t.$on("progressChange",e[4]),{c(){Te(t.$$.fragment)},m(e,n){Me(t,e,n),i=!0},p(e,[i]){const o={};!n&&1&i&&(n=!0,o.inputValue=e[0],de((()=>n=!1))),!s&&2&i&&(s=!0,o.progressValue=e[1],de((()=>s=!1))),t.$set(o)},i(e){i||(ke(t.$$.fragment,e),i=!0)},o(e){_e(t.$$.fragment,e),i=!1},d(e){Re(t,e)}}}function Pa(e,t,n){let s=Vi.stereoPanner.pan.toFixed(2),i=50*(+s+1);return[s,i,e=>langMapping.s(e),function({detail:e}){e=+e,go(Math.max(Math.min(1,e),-1)),n(0,s=e.toFixed(2)),n(1,i=50*(+s+1))},function({detail:e}){let t=2*(e/=100)-1;go(t),n(0,s=t.toFixed(2))},function(e){s=e,n(0,s)},function(e){i=e,n(1,i)}]}class Aa extends Ne{constructor(e){super(),De(this,e,Pa,Ea,l,{})}}function Sa(e){let t,n,s,i,o,a,l,r;function c(t){e[9](t)}function u(t){e[10](t)}let d={label:e[4]("fade_in")};function p(t){e[11](t)}function f(t){e[12](t)}void 0!==e[0]&&(d.inputValue=e[0]),void 0!==e[1]&&(d.progressValue=e[1]),t=new wa({props:d}),se.push((()=>ze(t,"inputValue",c))),se.push((()=>ze(t,"progressValue",u))),t.$on("inputChange",e[5]),t.$on("progressChange",e[6]);let h={label:e[4]("fade_out")};return void 0!==e[2]&&(h.inputValue=e[2]),void 0!==e[3]&&(h.progressValue=e[3]),o=new wa({props:h}),se.push((()=>ze(o,"inputValue",p))),se.push((()=>ze(o,"progressValue",f))),o.$on("inputChange",e[7]),o.$on("progressChange",e[8]),{c(){Te(t.$$.fragment),i=T(),Te(o.$$.fragment)},m(e,n){Me(t,e,n),E(e,i,n),Me(o,e,n),r=!0},p(e,[i]){const r={};!n&&1&i&&(n=!0,r.inputValue=e[0],de((()=>n=!1))),!s&&2&i&&(s=!0,r.progressValue=e[1],de((()=>s=!1))),t.$set(r);const c={};!a&&4&i&&(a=!0,c.inputValue=e[2],de((()=>a=!1))),!l&&8&i&&(l=!0,c.progressValue=e[3],de((()=>l=!1))),o.$set(c)},i(e){r||(ke(t.$$.fragment,e),ke(o.$$.fragment,e),r=!0)},o(e){_e(t.$$.fragment,e),_e(o.$$.fragment,e),r=!1},d(e){Re(t,e),e&&P(i),Re(o,e)}}}function za(e,t,n){let s=Object.assign({},Vi.fader);function i(e){!function(e=.2,t=.2){Vi.fader.fadeIn=e,Vi.fader.fadeOut=t,fo()}(e.fadeIn,e.fadeOut)}let o=s.fadeIn.toFixed(3),a=200*o,l=s.fadeOut.toFixed(3),r=200*l;return[o,a,l,r,e=>langMapping.s(e),function({detail:e}){e=+e;let t=s.fadeIn=Math.max(Math.min(.5,e),0);i(s),n(0,o=e.toFixed(3)),n(1,a=200*t)},function({detail:e}){e/=100;let t=s.fadeIn=e/2;i(s),n(0,o=t.toFixed(3))},function({detail:e}){e=+e;let t=s.fadeOut=Math.max(Math.min(.5,e),0);i(s),n(2,l=e.toFixed(3)),n(3,r=200*t)},function({detail:e}){e/=100;let t=s.fadeOut=e/2;i(s),n(2,l=t.toFixed(3))},function(e){o=e,n(0,o)},function(e){a=e,n(1,a)},function(e){l=e,n(2,l)},function(e){r=e,n(3,r)}]}class Ta extends Ne{constructor(e){super(),De(this,e,za,Sa,l,{})}}function Ma(t){let n,s,i,a,l,r,c,u,d,p,f,h,m,g;return{c(){n=S("div"),s=S("div"),i=S("div"),a=S("div"),c=T(),u=S("div"),d=z(t[0]),p=T(),f=S("div"),N(a,"class","thumb svelte-14im67a"),N(i,"class",l="progress "+(t[4]?"drag":"")+" svelte-14im67a"),B(i,"--height",t[2]+"px"),N(s,"class",r="Column track "+(t[1]?"":"disable")+" svelte-14im67a"),N(u,"class","label svelte-14im67a"),N(f,"contenteditable",""),N(f,"class",h="txt "+(t[4]?"bigger":"")+" "+(t[1]?"":"disable")+" svelte-14im67a"),N(n,"class","Column outer svelte-14im67a")},m(e,o){E(e,n,o),_(n,s),_(s,i),_(i,a),t[11](s),_(n,c),_(n,u),_(u,d),_(n,p),_(n,f),t[12](f),m||(g=[R(a,"mousedown",D(t[8])),R(i,"click",D(t[7])),R(s,"click",D(t[6])),R(f,"blur",t[9])],m=!0)},p(e,[t]){16&t&&l!==(l="progress "+(e[4]?"drag":"")+" svelte-14im67a")&&N(i,"class",l),4&t&&B(i,"--height",e[2]+"px"),2&t&&r!==(r="Column track "+(e[1]?"":"disable")+" svelte-14im67a")&&N(s,"class",r),1&t&&q(d,e[0]),18&t&&h!==(h="txt "+(e[4]?"bigger":"")+" "+(e[1]?"":"disable")+" svelte-14im67a")&&N(f,"class",h)},i:e,o:e,d(e){e&&P(n),t[11](null),t[12](null),m=!1,o(g)}}}function Ra(e,t,n){let s,{f:i=31}=t,{label:o=i}=t,{enable:a=!0}=t,l=0,r=0;function c(){const e=+u.innerText;!function(e,t){Vi.eq[e]=t,to[e].gain.value=t,Ie&&Ie.emit("eqChange"),fo()}(i,e),Ie&&Ie.emit("eqChange"),n(2,l=(e+20)/40*r)}let u,d=!1;function p(){d&&n(4,d=!1)}function f(e){d&&(n(2,l=Math.max(0,Math.min(l-e.movementY/window.devicePixelRatio,r))),g(l/r*40-20))}function h(e){"Enter"===e.key&&document.activeElement===u&&(e.preventDefault(),m(u.innerText.replace(/\n/g,"")),u.blur())}function m(e){e=+e,e=isNaN(e)?0:e,g(Math.max(-20,Math.min(e,20))),c()}function g(e){n(5,u.innerText=(+e).toFixed(1),u)}return G((()=>{r=s.getBoundingClientRect().height,document.addEventListener("mouseup",p),document.addEventListener("mousemove",f),u.addEventListener("keydown",h),g(function(e){return void 0===e?Object.assign({},Vi.eq):Vi.eq[e]}(i)),c()})),Q((()=>{document.removeEventListener("mouseup",p),document.removeEventListener("mousemove",f),u.removeEventListener("keydown",h)})),e.$$set=e=>{"f"in e&&n(10,i=e.f),"label"in e&&n(0,o=e.label),"enable"in e&&n(1,a=e.enable)},[o,a,l,s,d,u,function(){g(+u.innerText+.5),c()},function(){g(u.innerText-.5),c()},function(){n(4,d=!0)},function(){m(u.innerText)},i,function(e){se[e?"unshift":"push"]((()=>{s=e,n(3,s)}))},function(e){se[e?"unshift":"push"]((()=>{u=e,n(5,u)}))}]}class Da extends Ne{constructor(e){super(),De(this,e,Ra,Ma,l,{f:10,label:0,enable:1})}}function Na(e){let t,n,s,i,o,a,l,r,c,u,d,p,f,h,m,g,$,v,y,w,b,x,k,_,C,L,A,S,z,M;function R(t){e[1](t)}let D={f:31};function N(t){e[2](t)}void 0!==e[0]&&(D.enable=e[0]),t=new Da({props:D}),se.push((()=>ze(t,"enable",R)));let U={f:62};function q(t){e[3](t)}void 0!==e[0]&&(U.enable=e[0]),i=new Da({props:U}),se.push((()=>ze(i,"enable",N)));let V={f:125};function B(t){e[4](t)}void 0!==e[0]&&(V.enable=e[0]),l=new Da({props:V}),se.push((()=>ze(l,"enable",q)));let O={f:250};function F(t){e[5](t)}void 0!==e[0]&&(O.enable=e[0]),u=new Da({props:O}),se.push((()=>ze(u,"enable",B)));let I={f:500};function W(t){e[6](t)}void 0!==e[0]&&(I.enable=e[0]),f=new Da({props:I}),se.push((()=>ze(f,"enable",F)));let j={f:1e3,label:"1k"};function H(t){e[7](t)}void 0!==e[0]&&(j.enable=e[0]),g=new Da({props:j}),se.push((()=>ze(g,"enable",W)));let X={f:2e3,label:"2k"};function Y(t){e[8](t)}void 0!==e[0]&&(X.enable=e[0]),y=new Da({props:X}),se.push((()=>ze(y,"enable",H)));let G={f:4e3,label:"4k"};function J(t){e[9](t)}void 0!==e[0]&&(G.enable=e[0]),x=new Da({props:G}),se.push((()=>ze(x,"enable",Y)));let Q={f:8e3,label:"8k"};function K(t){e[10](t)}void 0!==e[0]&&(Q.enable=e[0]),C=new Da({props:Q}),se.push((()=>ze(C,"enable",J)));let Z={f:16e3,label:"16k"};return void 0!==e[0]&&(Z.enable=e[0]),S=new Da({props:Z}),se.push((()=>ze(S,"enable",K))),{c(){Te(t.$$.fragment),s=T(),Te(i.$$.fragment),a=T(),Te(l.$$.fragment),c=T(),Te(u.$$.fragment),p=T(),Te(f.$$.fragment),m=T(),Te(g.$$.fragment),v=T(),Te(y.$$.fragment),b=T(),Te(x.$$.fragment),_=T(),Te(C.$$.fragment),A=T(),Te(S.$$.fragment)},m(e,n){Me(t,e,n),E(e,s,n),Me(i,e,n),E(e,a,n),Me(l,e,n),E(e,c,n),Me(u,e,n),E(e,p,n),Me(f,e,n),E(e,m,n),Me(g,e,n),E(e,v,n),Me(y,e,n),E(e,b,n),Me(x,e,n),E(e,_,n),Me(C,e,n),E(e,A,n),Me(S,e,n),M=!0},p(e,[s]){const a={};!n&&1&s&&(n=!0,a.enable=e[0],de((()=>n=!1))),t.$set(a);const c={};!o&&1&s&&(o=!0,c.enable=e[0],de((()=>o=!1))),i.$set(c);const p={};!r&&1&s&&(r=!0,p.enable=e[0],de((()=>r=!1))),l.$set(p);const m={};!d&&1&s&&(d=!0,m.enable=e[0],de((()=>d=!1))),u.$set(m);const v={};!h&&1&s&&(h=!0,v.enable=e[0],de((()=>h=!1))),f.$set(v);const b={};!$&&1&s&&($=!0,b.enable=e[0],de((()=>$=!1))),g.$set(b);const _={};!w&&1&s&&(w=!0,_.enable=e[0],de((()=>w=!1))),y.$set(_);const E={};!k&&1&s&&(k=!0,E.enable=e[0],de((()=>k=!1))),x.$set(E);const P={};!L&&1&s&&(L=!0,P.enable=e[0],de((()=>L=!1))),C.$set(P);const A={};!z&&1&s&&(z=!0,A.enable=e[0],de((()=>z=!1))),S.$set(A)},i(e){M||(ke(t.$$.fragment,e),ke(i.$$.fragment,e),ke(l.$$.fragment,e),ke(u.$$.fragment,e),ke(f.$$.fragment,e),ke(g.$$.fragment,e),ke(y.$$.fragment,e),ke(x.$$.fragment,e),ke(C.$$.fragment,e),ke(S.$$.fragment,e),M=!0)},o(e){_e(t.$$.fragment,e),_e(i.$$.fragment,e),_e(l.$$.fragment,e),_e(u.$$.fragment,e),_e(f.$$.fragment,e),_e(g.$$.fragment,e),_e(y.$$.fragment,e),_e(x.$$.fragment,e),_e(C.$$.fragment,e),_e(S.$$.fragment,e),M=!1},d(e){Re(t,e),e&&P(s),Re(i,e),e&&P(a),Re(l,e),e&&P(c),Re(u,e),e&&P(p),Re(f,e),e&&P(m),Re(g,e),e&&P(v),Re(y,e),e&&P(b),Re(x,e),e&&P(_),Re(C,e),e&&P(A),Re(S,e)}}}function Ua(e,t,n){let{enable:s=!0}=t;return e.$$set=e=>{"enable"in e&&n(0,s=e.enable)},[s,function(e){s=e,n(0,s)},function(e){s=e,n(0,s)},function(e){s=e,n(0,s)},function(e){s=e,n(0,s)},function(e){s=e,n(0,s)},function(e){s=e,n(0,s)},function(e){s=e,n(0,s)},function(e){s=e,n(0,s)},function(e){s=e,n(0,s)},function(e){s=e,n(0,s)}]}class qa extends Ne{constructor(e){super(),De(this,e,Ua,Na,l,{enable:0})}}function Va(t){let n,s=t[5]("none")+"";return{c(){n=z(s)},m(e,t){E(e,n,t)},p:e,d(e){e&&P(n)}}}function Ba(e){let t,n,s,i,o,a,l,r,c,u,d,p,f,h,m,g,$,v,y,w,b,x=e[5]("codec")+"",k=e[0].codec+"",C=e[5]("num_of_tracks")+"",L=e[0].numberOfChannels+"",A=e[5]("sample_rate")+"",M=e[0].sampleRate/1e3+"",R=e[5]("decoder")+"",D=e[0].bitrate>0&&Oa(e),U=e[0].bitsPerSample&&Fa(e);return{c(){t=S("div"),n=z(x),s=S("em"),i=z(k),o=T(),a=S("div"),l=z(C),r=S("em"),c=z(L),u=T(),D&&D.c(),d=T(),U&&U.c(),p=T(),f=S("div"),h=z(A),m=S("em"),g=z(M),$=z(" kHz"),v=T(),y=S("div"),w=z(R),b=S("em"),b.textContent=`${e[5]("builtin")} FFmpeg ${e[5]("decoder")}`,N(s,"class","svelte-s5zlk4"),N(r,"class","svelte-s5zlk4"),N(m,"class","svelte-s5zlk4"),B(f,"margin-bottom","8px"),N(b,"class","svelte-s5zlk4")},m(e,x){E(e,t,x),_(t,n),_(t,s),_(s,i),E(e,o,x),E(e,a,x),_(a,l),_(a,r),_(r,c),E(e,u,x),D&&D.m(e,x),E(e,d,x),U&&U.m(e,x),E(e,p,x),E(e,f,x),_(f,h),_(f,m),_(m,g),_(m,$),E(e,v,x),E(e,y,x),_(y,w),_(y,b)},p(e,t){1&t&&k!==(k=e[0].codec+"")&&q(i,k),1&t&&L!==(L=e[0].numberOfChannels+"")&&q(c,L),e[0].bitrate>0?D?D.p(e,t):(D=Oa(e),D.c(),D.m(d.parentNode,d)):D&&(D.d(1),D=null),e[0].bitsPerSample?U?U.p(e,t):(U=Fa(e),U.c(),U.m(p.parentNode,p)):U&&(U.d(1),U=null),1&t&&M!==(M=e[0].sampleRate/1e3+"")&&q(g,M)},d(e){e&&P(t),e&&P(o),e&&P(a),e&&P(u),D&&D.d(e),e&&P(d),U&&U.d(e),e&&P(p),e&&P(f),e&&P(v),e&&P(y)}}}function Oa(e){let t,n,s,i,o,a=e[5]("bitrate")+"",l=~~(e[0].bitrate/10)/100+"";return{c(){t=S("div"),n=z(a),s=S("em"),i=z(l),o=z(" kBps"),N(s,"class","svelte-s5zlk4")},m(e,a){E(e,t,a),_(t,n),_(t,s),_(s,i),_(s,o)},p(e,t){1&t&&l!==(l=~~(e[0].bitrate/10)/100+"")&&q(i,l)},d(e){e&&P(t)}}}function Fa(e){let t,n,s,i,o,a=e[5]("bit_length")+"",l=e[0].bitsPerSample+"";return{c(){t=S("div"),n=z(a),s=S("em"),i=z(l),o=z(" bit"),N(s,"class","svelte-s5zlk4")},m(e,a){E(e,t,a),_(t,n),_(t,s),_(s,i),_(s,o)},p(e,t){1&t&&l!==(l=e[0].bitsPerSample+"")&&q(i,l)},d(e){e&&P(t)}}}function Ia(e){let t;function n(e,t){return e[0]?Ba:Va}let s=n(e),i=s(e);return{c(){i.c(),t=M()},m(e,n){i.m(e,n),E(e,t,n)},p(e,o){s===(s=n(e))&&i?i.p(e,o):(i.d(1),i=s(e),i&&(i.c(),i.m(t.parentNode,t)))},d(e){i.d(e),e&&P(t)}}}function Wa(e){let t,n,s,i,o,a,l,r,c,u,d,p,f,h,m,g,$,v,y,w,b,x,k,C,L,A,M,R,D,U,V,O,F,I,W,j,H,X,Y,G,J,Q,K,Z,ee,te,ne,se,ie,oe,ae,le,re=e[5]("bit_length")+"",ce=e[5]("frequency")+"",ue=e[1].gain.gain>1?"+":e[1].gain.gain<1?"-":"",de=e[1].gain.gain.toFixed(2)+"",pe=e[1].stereoPanner.pan.toFixed(2)+"",fe=((1-e[1].stereoPanner.pan)/2).toFixed(2)+"",he=((e[1].stereoPanner.pan+1)/2).toFixed(2)+"",me=e[1].delay.delayTime.toFixed(2)+"",ge=e[1].fader.fadeIn.toFixed(2)+"",$e=e[1].fader.fadeOut.toFixed(2)+"",ve=e[5]("equalizer")+"",ye=e[1].eq.enable?"":`  (${e[5]("disabled")})`;return{c(){t=S("div"),n=z(re),s=S("em"),s.textContent="Float 32bit",i=T(),o=S("div"),a=z(ce),l=S("em"),l.textContent=vo.audioCtx.sampleRate/1e3+" kHz",r=T(),c=S("div"),u=S("div"),u.textContent=`${e[5]("gain")}`,d=T(),p=S("em"),f=S("div"),h=z(ue),m=z(de),g=T(),$=S("div"),v=S("div"),v.textContent=`${e[5]("stereo_pan")}`,y=T(),w=S("em"),b=S("div"),x=z(pe),k=z(" ("),C=z(fe),L=z("/"),A=z(he),M=z(")"),R=T(),D=S("div"),U=S("div"),U.textContent=`${e[5]("delay")}`,V=T(),O=S("em"),F=S("div"),I=z(me),W=z("s"),j=T(),H=S("div"),X=S("div"),X.textContent=`${e[5]("fade_in_and_out")}`,Y=T(),G=S("em"),J=S("div"),Q=z(ge),K=z("s / "),Z=z($e),ee=z("s"),te=T(),ne=S("div"),se=S("div"),ie=z(ve),oe=z(ye),ae=T(),le=S("canvas"),N(s,"class","svelte-s5zlk4"),N(l,"class","svelte-s5zlk4"),N(u,"class","label svelte-s5zlk4"),N(f,"class","link svelte-s5zlk4"),N(p,"class","svelte-s5zlk4"),N(c,"class","Row pair svelte-s5zlk4"),N(v,"class","label svelte-s5zlk4"),N(b,"class","link svelte-s5zlk4"),N(w,"class","svelte-s5zlk4"),N($,"class","Row pair svelte-s5zlk4"),N(U,"class","label svelte-s5zlk4"),N(F,"class","link svelte-s5zlk4"),N(O,"class","svelte-s5zlk4"),N(D,"class","Row pair svelte-s5zlk4"),N(X,"class","label svelte-s5zlk4"),N(J,"class","link svelte-s5zlk4"),N(G,"class","svelte-s5zlk4"),N(H,"class","Row pair svelte-s5zlk4"),N(se,"class","label svelte-s5zlk4"),B(se,"margin-top","8px"),B(le,"align-self","flex-start"),N(le,"id","eqCanvas"),N(le,"width","180"),N(le,"height","82"),N(le,"class","svelte-s5zlk4"),N(ne,"class","Column pair svelte-s5zlk4")},m(P,S){E(P,t,S),_(t,n),_(t,s),E(P,i,S),E(P,o,S),_(o,a),_(o,l),E(P,r,S),E(P,c,S),_(c,u),_(c,d),_(c,p),_(p,f),_(f,h),_(f,m),E(P,g,S),E(P,$,S),_($,v),_($,y),_($,w),_(w,b),_(b,x),_(b,k),_(b,C),_(b,L),_(b,A),_(b,M),E(P,R,S),E(P,D,S),_(D,U),_(D,V),_(D,O),_(O,F),_(F,I),_(F,W),E(P,j,S),E(P,H,S),_(H,X),_(H,Y),_(H,G),_(G,J),_(J,Q),_(J,K),_(J,Z),_(J,ee),E(P,te,S),E(P,ne,S),_(ne,se),_(se,ie),_(se,oe),_(ne,ae),_(ne,le),e[9](le)},p(e,t){2&t&&ue!==(ue=e[1].gain.gain>1?"+":e[1].gain.gain<1?"-":"")&&q(h,ue),2&t&&de!==(de=e[1].gain.gain.toFixed(2)+"")&&q(m,de),2&t&&pe!==(pe=e[1].stereoPanner.pan.toFixed(2)+"")&&q(x,pe),2&t&&fe!==(fe=((1-e[1].stereoPanner.pan)/2).toFixed(2)+"")&&q(C,fe),2&t&&he!==(he=((e[1].stereoPanner.pan+1)/2).toFixed(2)+"")&&q(A,he),2&t&&me!==(me=e[1].delay.delayTime.toFixed(2)+"")&&q(I,me),2&t&&ge!==(ge=e[1].fader.fadeIn.toFixed(2)+"")&&q(Q,ge),2&t&&$e!==($e=e[1].fader.fadeOut.toFixed(2)+"")&&q(Z,$e),2&t&&ye!==(ye=e[1].eq.enable?"":`  (${e[5]("disabled")})`)&&q(oe,ye)},d(n){n&&P(t),n&&P(i),n&&P(o),n&&P(r),n&&P(c),n&&P(g),n&&P($),n&&P(R),n&&P(D),n&&P(j),n&&P(H),n&&P(te),n&&P(ne),e[9](null)}}}function ja(t){return{c:e,m:e,p:e,d:e}}function Ha(t){let n,s,i,o,a,l,r,c,u=t[24].label+"";return{c(){n=S("div"),s=S("div"),s.textContent=`${t[5]("device")}`,i=T(),o=S("em"),a=S("div"),l=z(u),N(s,"class","label svelte-s5zlk4"),N(a,"class","link svelte-s5zlk4"),N(o,"class","svelte-s5zlk4"),N(n,"class","Row pair svelte-s5zlk4")},m(e,u){E(e,n,u),_(n,s),_(n,i),_(n,o),_(o,a),_(a,l),r||(c=R(a,"click",t[10]),r=!0)},p:e,d(e){e&&P(n),r=!1,c()}}}function Xa(t){return{c:e,m:e,p:e,d:e}}function Ya(e){let t,n={ctx:e,current:null,token:null,hasCatch:!1,pending:Xa,then:Ha,catch:ja,value:24};return Ee(e[6](),n),{c(){t=M(),n.block.c()},m(e,s){E(e,t,s),n.block.m(e,n.anchor=s),n.mount=()=>t.parentNode,n.anchor=t},p(t,s){Pe(n,e=t,s)},d(e){e&&P(t),n.block.d(e),n.token=null,n=null}}}function Ga(e){let t,n,s,i,o,a,l;return n=new Ui({props:{title:e[5]("input"),icon:"",$$slots:{default:[Ia]},$$scope:{ctx:e}}}),i=new Ui({props:{title:e[5]("processing"),$$slots:{default:[Wa]},$$scope:{ctx:e}}}),a=new Ui({props:{hideLine:!0,title:e[5]("output"),icon:"",$$slots:{default:[Ya]},$$scope:{ctx:e}}}),{c(){t=S("div"),Te(n.$$.fragment),s=T(),Te(i.$$.fragment),o=T(),Te(a.$$.fragment),N(t,"class","Column"),B(t,"padding","12px 0")},m(e,r){E(e,t,r),Me(n,t,null),_(t,s),Me(i,t,null),_(t,o),Me(a,t,null),l=!0},p(e,t){const s={};33554433&t&&(s.$$scope={dirty:t,ctx:e}),n.$set(s);const o={};33554450&t&&(o.$$scope={dirty:t,ctx:e}),i.$set(o);const l={};33554432&t&&(l.$$scope={dirty:t,ctx:e}),a.$set(l)},i(e){l||(ke(n.$$.fragment,e),ke(i.$$.fragment,e),ke(a.$$.fragment,e),l=!0)},o(e){_e(n.$$.fragment,e),_e(i.$$.fragment,e),_e(a.$$.fragment,e),l=!1},d(e){e&&P(t),Re(n),Re(i),Re(a)}}}function Ja(e){let t,n,s,i,o,a,l,r,c,u,d,p,f,h,m,g,$,v;function y(t){e[12](t)}n=new ka({}),i=new Aa({}),a=new La({}),c=new Ta({});let w={clickable:!1,data:e[5]("enable_eq"),useAvatar:!1};function b(t){e[13](t)}void 0!==e[1].eq.enable&&(w.checked=e[1].eq.enable),p=new Ao({props:w}),se.push((()=>ze(p,"checked",y))),p.$on("toggle",e[8]);let x={};return void 0!==e[1].eq.enable&&(x.enable=e[1].eq.enable),g=new qa({props:x}),se.push((()=>ze(g,"enable",b))),{c(){t=S("div"),Te(n.$$.fragment),s=T(),Te(i.$$.fragment),o=T(),Te(a.$$.fragment),l=T(),r=S("div"),Te(c.$$.fragment),u=T(),d=S("div"),Te(p.$$.fragment),h=T(),m=S("div"),Te(g.$$.fragment),N(t,"class","tunnerCard svelte-s5zlk4"),N(r,"class","tunnerCard svelte-s5zlk4"),N(m,"class","Row"),N(d,"class","tunnerCard marginBottom svelte-s5zlk4")},m(e,f){E(e,t,f),Me(n,t,null),_(t,s),Me(i,t,null),_(t,o),Me(a,t,null),E(e,l,f),E(e,r,f),Me(c,r,null),E(e,u,f),E(e,d,f),Me(p,d,null),_(d,h),_(d,m),Me(g,m,null),v=!0},p(e,t){const n={};!f&&2&t&&(f=!0,n.checked=e[1].eq.enable,de((()=>f=!1))),p.$set(n);const s={};!$&&2&t&&($=!0,s.enable=e[1].eq.enable,de((()=>$=!1))),g.$set(s)},i(e){v||(ke(n.$$.fragment,e),ke(i.$$.fragment,e),ke(a.$$.fragment,e),ke(c.$$.fragment,e),ke(p.$$.fragment,e),ke(g.$$.fragment,e),v=!0)},o(e){_e(n.$$.fragment,e),_e(i.$$.fragment,e),_e(a.$$.fragment,e),_e(c.$$.fragment,e),_e(p.$$.fragment,e),_e(g.$$.fragment,e),v=!1},d(e){e&&P(t),Re(n),Re(i),Re(a),e&&P(l),e&&P(r),Re(c),e&&P(u),e&&P(d),Re(p),Re(g)}}}function Qa(e){let t,n,s,i,o,a,l,r,c,u,d,p,f,h;return i=new Jt({props:{hoverToShow:!0,$$slots:{default:[Ga]},$$scope:{ctx:e}}}),e[11](i),r=new Jt({props:{hoverToShow:!0,$$slots:{default:[Ja]},$$scope:{ctx:e}}}),e[14](r),{c(){t=S("div"),n=S("div"),s=S("div"),Te(i.$$.fragment),o=T(),a=S("div"),l=S("div"),Te(r.$$.fragment),c=T(),u=S("div"),d=S("div"),d.textContent=`${e[5]("done")}`,N(s,"class","Row"),B(s,"height","72vh"),B(s,"margin-left","12px"),N(n,"class","Column outerWindow tunnerPanel svelte-s5zlk4"),B(n,"width","300px"),N(l,"class","Column"),B(l,"height","calc(72vh - 48px)"),B(l,"width","100%"),B(l,"position","relative"),N(d,"class","btn big radius px4 accent"),N(u,"class","Row bottomGroup svelte-s5zlk4"),B(u,"padding","0 12px"),N(a,"class","Column outerWindow svelte-s5zlk4"),B(a,"height","100%"),B(a,"width","calc(72vw - 300px)"),N(t,"class","Row"),B(t,"height","72vh"),B(t,"width","72vw")},m(m,g){E(m,t,g),_(t,n),_(n,s),Me(i,s,null),_(t,o),_(t,a),_(a,l),Me(r,l,null),_(a,c),_(a,u),_(u,d),p=!0,f||(h=R(d,"click",e[7]),f=!0)},p(e,[t]){const n={};33554451&t&&(n.$$scope={dirty:t,ctx:e}),i.$set(n);const s={};33554434&t&&(s.$$scope={dirty:t,ctx:e}),r.$set(s)},i(e){p||(ke(i.$$.fragment,e),ke(r.$$.fragment,e),p=!0)},o(e){_e(i.$$.fragment,e),_e(r.$$.fragment,e),p=!1},d(n){n&&P(t),e[11](null),Re(i),e[14](null),Re(r),f=!1,h()}}}function Ka(e,t,n){let s,i,o,a,l,r,c,u=globalPlayer.getMetadata()?.format,d=st.getSync("process");function p(e){n(0,u=e.format)}function f(e){n(1,d=e)}function h(){if(!d||!a)return;const e=d.eq;let t=0,n=0;a.clearRect(-1,-1,l+1,r+1),a.strokeStyle=c.getPropertyValue("--controlGray"),a.lineWidth=1,a.lineCap="miter",a.lineJoin="round",a.beginPath(),a.moveTo(0,41),a.lineTo(180,41),a.stroke(),a.closePath(),a.beginPath(),a.strokeStyle=c.getPropertyValue("--controlDark"),a.lineWidth=2,a.lineCap="round",a.lineJoin="round",d.eq.enable||(a.strokeStyle=c.getPropertyValue("--controlBlack")),t=41-2*e[31],a.moveTo(0,t),n=41-2*e[62],a.bezierCurveTo(10,t,10,n,20,n),t=n,n=41-2*e[125],a.bezierCurveTo(30,t,30,n,40,n),t=n,n=41-2*e[250],a.bezierCurveTo(50,t,50,n,60,n),t=n,n=41-2*e[500],a.bezierCurveTo(70,t,70,n,80,n),t=n,n=41-2*e[1e3],a.bezierCurveTo(90,t,90,n,100,n),t=n,n=41-2*e[2e3],a.bezierCurveTo(110,t,110,n,120,n),t=n,n=41-2*e[4e3],a.bezierCurveTo(130,t,130,n,140,n),t=n,n=41-2*e[8e3],a.bezierCurveTo(150,t,150,n,160,n),t=n,n=41-2*e[16e3],a.bezierCurveTo(170,t,170,n,180,n),a.stroke(),a.closePath()}G((()=>{s.update(),i.update(),Ie.on("metadata",p),Ie.on("processUpdate",f)})),Q((()=>{Ie.off("metadata",p),Ie.off("processUpdate",f)})),G((()=>{a=o.getContext("2d"),r=o.height,l=o.width,c=getComputedStyle(document.body),a.translate(.5,.5),h(),Ie.on("eqChange",(()=>h()))}));return[u,d,s,i,o,e=>langMapping.s(e),async function(){const e=await ro();return e[await lo(e)]},function(){Ie.emit("tunnerClose")},function({detail:e}){uo(e)},function(e){se[e?"unshift":"push"]((()=>{o=e,n(4,o)}))},()=>{Ie.emit("tunnerClose"),window.Pager.openNew("$settings",ga)},function(e){se[e?"unshift":"push"]((()=>{s=e,n(2,s)}))},function(t){e.$$.not_equal(d.eq.enable,t)&&(d.eq.enable=t,n(1,d))},function(t){e.$$.not_equal(d.eq.enable,t)&&(d.eq.enable=t,n(1,d))},function(e){se[e?"unshift":"push"]((()=>{i=e,n(3,i)}))}]}class Za extends Ne{constructor(e){super(),De(this,e,Ka,Qa,l,{})}}function el(e){let t,n;return t=new Za({}),{c(){Te(t.$$.fragment)},m(e,s){Me(t,e,s),n=!0},i(e){n||(ke(t.$$.fragment,e),n=!0)},o(e){_e(t.$$.fragment,e),n=!1},d(e){Re(t,e)}}}function tl(e){let t,n,s,i,o,a,l,r,c,d,m,g,$,v,y,w,b,x,k;function C(t){e[14](t)}function L(t){e[15](t)}function A(t){e[16](t)}function z(t){e[17](t)}let M={};function D(t){e[18](t)}function U(t){e[19](t)}function q(t){e[20](t)}void 0!==e[1]&&(M.display=e[1]),void 0!==e[2]&&(M.x=e[2]),void 0!==e[3]&&(M.y=e[3]),void 0!==e[4]&&(M.data=e[4]),n=new Ws({props:M}),se.push((()=>ze(n,"display",C))),se.push((()=>ze(n,"x",L))),se.push((()=>ze(n,"y",A))),se.push((()=>ze(n,"data",z)));let V={};function B(t){e[21](t)}void 0!==e[7]&&(V.enable=e[7]),void 0!==e[8]&&(V.active=e[8]),void 0!==e[6]&&(V.htmlElement=e[6]),r=new Xs({props:V}),se.push((()=>ze(r,"enable",D))),se.push((()=>ze(r,"active",U))),se.push((()=>ze(r,"htmlElement",q)));let O={shadowBlurRadius:24,noLayer:!1,$$slots:{default:[el]},$$scope:{ctx:e}};void 0!==e[9]&&(O.showPopupWindow=e[9]),$=new _s({props:O}),se.push((()=>ze($,"showPopupWindow",B)));const F=e[13].default,I=u(F,e,e[24],null);return{c(){t=S("div"),Te(n.$$.fragment),l=T(),Te(r.$$.fragment),g=T(),Te($.$$.fragment),y=T(),I&&I.c(),N(t,"class",w="container "+(e[0]?"layer":"")+" svelte-eujq9c")},m(s,i){E(s,t,i),Me(n,t,null),_(t,l),Me(r,t,null),_(t,g),Me($,t,null),_(t,y),I&&I.m(t,null),e[23](t),b=!0,x||(k=R(t,"click",e[22]),x=!0)},p(e,[l]){const u={};!s&&2&l&&(s=!0,u.display=e[1],de((()=>s=!1))),!i&&4&l&&(i=!0,u.x=e[2],de((()=>i=!1))),!o&&8&l&&(o=!0,u.y=e[3],de((()=>o=!1))),!a&&16&l&&(a=!0,u.data=e[4],de((()=>a=!1))),n.$set(u);const g={};!c&&128&l&&(c=!0,g.enable=e[7],de((()=>c=!1))),!d&&256&l&&(d=!0,g.active=e[8],de((()=>d=!1))),!m&&64&l&&(m=!0,g.htmlElement=e[6],de((()=>m=!1))),r.$set(g);const y={};16777216&l&&(y.$$scope={dirty:l,ctx:e}),!v&&512&l&&(v=!0,y.showPopupWindow=e[9],de((()=>v=!1))),$.$set(y),I&&I.p&&(!b||16777216&l)&&f(I,F,e,e[24],b?p(F,e[24],l,null):h(e[24]),null),(!b||1&l&&w!==(w="container "+(e[0]?"layer":"")+" svelte-eujq9c"))&&N(t,"class",w)},i(e){b||(ke(n.$$.fragment,e),ke(r.$$.fragment,e),ke($.$$.fragment,e),ke(I,e),b=!0)},o(e){_e(n.$$.fragment,e),_e(r.$$.fragment,e),_e($.$$.fragment,e),_e(I,e),b=!1},d(s){s&&P(t),Re(n),Re(r),Re($),I&&I.d(s),e[23](null),x=!1,k()}}}function nl(e,t,n){let{$$slots:s={},$$scope:i}=t,o=!1;const a=new Fe;function l(){n(0,o=!0)}function r(){n(0,o=!1),n(1,c=!1)}let c,u,d,p,f;function h(e,t,s){n(2,u=visualViewport.width-e>200?e:e-200),n(3,d=t);let i=[];for(const e of contextMap.keys())s.includes(e)&&i.push(contextMap.get(e));i.length&&(l(),n(4,p=i),n(1,c=!0))}a.on("active",l),a.on("disable",r),window.addEventListener("mousedown",(e=>{if(2===e.button){const{pageX:t,pageY:n,path:s}=e;if(c)return a.emit("disable"),requestIdleCallback((()=>h(t,n,s)));e.preventDefault(),h(t,n,s)}})),Z("layerEvents",a);let m,g,$,v=new Proxy({click:!1,scroll:0,x:visualViewport.width/2,y:visualViewport.height/2,enable:g},{get:(e,t)=>e[t],set(e,t,s){switch(t){case"click":n(8,$=s),e[t]=s;break;case"enable":n(7,g=s),e[t]=s;break;case"x":n(6,m.style.left=s+"px",m),e[t]=s;break;case"y":n(6,m.style.top=s+"px",m),e[t]=s}return!0}});G((async()=>{wi.init(v),bi.injectLayer(f);const e=await st.get("profile");e?Ti(f,e):Ie.on("logined",(e=>Ti(f,e)))})),G((()=>{Ri.inject(f),mi.inject(f)}));let y=!1;Ie.on("tunnerOpen",(()=>n(9,y=!0))),Ie.on("tunnerClose",(()=>n(9,y=!1)));return e.$$set=e=>{"$$scope"in e&&n(24,i=e.$$scope)},[o,c,u,d,p,f,m,g,$,y,a,l,r,s,function(e){c=e,n(1,c)},function(e){u=e,n(2,u)},function(e){d=e,n(3,d)},function(e){p=e,n(4,p)},function(e){g=e,n(7,g)},function(e){$=e,n(8,$)},function(e){m=e,n(6,m)},function(e){y=e,n(9,y)},()=>a.emit("disable"),function(e){se[e?"unshift":"push"]((()=>{f=e,n(5,f)}))},i]}class sl extends Ne{constructor(e){super(),De(this,e,nl,tl,l,{activeLayer:11,disableLayer:12})}get activeLayer(){return this.$$.ctx[11]}get disableLayer(){return this.$$.ctx[12]}}function il(e){let t,n;return t=new ys({}),{c(){Te(t.$$.fragment)},m(e,s){Me(t,e,s),n=!0},i(e){n||(ke(t.$$.fragment,e),n=!0)},o(e){_e(t.$$.fragment,e),n=!1},d(e){Re(t,e)}}}function ol(t){let n,s,i,o;return{c(){n=S("div"),s=S("div"),s.textContent=""+("  "+t[3]("edit_profile")),N(s,"class","btn outlined"),B(n,"padding-left","56px"),B(n,"margin","8px 0px")},m(e,a){E(e,n,a),_(n,s),i||(o=R(s,"click",t[7]),i=!0)},p:e,d(e){e&&P(n),i=!1,o()}}}function al(t){let n,s;return n=new Ns({props:{isUrl:!1,style:"font-size: small",size:"small",avatar:"",data:t[3]("login")}}),n.$on("click",t[5]),{c(){Te(n.$$.fragment)},m(e,t){Me(n,e,t),s=!0},p:e,i(e){s||(ke(n.$$.fragment,e),s=!0)},o(e){_e(n.$$.fragment,e),s=!1},d(e){Re(n,e)}}}function ll(t){let n,s;return n=new Ns({props:{style:"font-size: small",isUrl:!1,size:"small",avatar:"",data:t[3]("logout")}}),n.$on("click",t[6]),{c(){Te(n.$$.fragment)},m(e,t){Me(n,e,t),s=!0},p:e,i(e){s||(ke(n.$$.fragment,e),s=!0)},o(e){_e(n.$$.fragment,e),s=!1},d(e){Re(n,e)}}}function rl(e){let t,n,s,i,o,a,l,r,c,u,d,p,f,h,m,g,$,v;function y(t){e[9](t)}let w={$$slots:{default:[il]},$$scope:{ctx:e}};void 0!==e[2]&&(w.showPopupWindow=e[2]),s=new _s({props:w}),se.push((()=>ze(s,"showPopupWindow",y))),s.$on("layerClick",e[4]),a=new Ns({props:{isUrl:e[0].avatarUrl,avatar:e[0].avatarUrl||"",data:e[3](e[0].name),width:28,height:28,clickable:!1}});let b=e[1]&&ol(e);const x=[ll,al],k=[];function C(e,t){return e[1]?0:1}return c=C(e),u=k[c]=x[c](e),f=new Ns({props:{isUrl:!1,style:"font-size: small",size:"small",avatar:"",data:e[3]("settings")}}),f.$on("click",e[8]),m=new Ns({props:{isUrl:!1,style:"font-size: small",size:"small",avatar:"",data:e[3]("download_manager")}}),{c(){t=S("div"),n=S("header"),Te(s.$$.fragment),o=T(),Te(a.$$.fragment),l=T(),b&&b.c(),r=T(),u.c(),d=T(),p=S("div"),Te(f.$$.fragment),h=T(),Te(m.$$.fragment),g=T(),$=S("footer"),$.textContent="REM",N(n,"class","row svelte-hqlcci"),N(p,"class","article row svelte-hqlcci"),N($,"class","column svelte-hqlcci"),N(t,"class","row c svelte-hqlcci")},m(e,i){E(e,t,i),_(t,n),Me(s,n,null),_(n,o),Me(a,n,null),_(n,l),b&&b.m(n,null),_(n,r),k[c].m(n,null),_(t,d),_(t,p),Me(f,p,null),_(p,h),Me(m,p,null),_(t,g),_(t,$),v=!0},p(e,[t]){const o={};2048&t&&(o.$$scope={dirty:t,ctx:e}),!i&&4&t&&(i=!0,o.showPopupWindow=e[2],de((()=>i=!1))),s.$set(o);const l={};1&t&&(l.isUrl=e[0].avatarUrl),1&t&&(l.avatar=e[0].avatarUrl||""),1&t&&(l.data=e[3](e[0].name)),a.$set(l),e[1]?b?b.p(e,t):(b=ol(e),b.c(),b.m(n,r)):b&&(b.d(1),b=null);let d=c;c=C(e),c===d?k[c].p(e,t):(be(),_e(k[d],1,1,(()=>{k[d]=null})),xe(),u=k[c],u?u.p(e,t):(u=k[c]=x[c](e),u.c()),ke(u,1),u.m(n,null))},i(e){v||(ke(s.$$.fragment,e),ke(a.$$.fragment,e),ke(u),ke(f.$$.fragment,e),ke(m.$$.fragment,e),v=!0)},o(e){_e(s.$$.fragment,e),_e(a.$$.fragment,e),_e(u),_e(f.$$.fragment,e),_e(m.$$.fragment,e),v=!1},d(e){e&&P(t),Re(s),Re(a),b&&b.d(),k[c].d(),Re(f),Re(m)}}}function cl(e,t,n){let s=ee("close");let{user:i}=t,o=!!i.avatarUrl,a=!1;return e.$$set=e=>{"user"in e&&n(0,i=e.user)},[i,o,a,(e,...t)=>langMapping.s(e,...t)||e,async()=>{n(2,a=!1);const e=await st.get("profile");e&&(n(0,i={avatarUrl:e.avatarUrl,name:e.nickname}),n(1,o=!!i.avatarUrl))},()=>{n(2,a=!0)},function(){NeteaseApi.logout(),st.rm("profile"),st.rm("token"),n(0,i={avatarUrl:"",name:"not_login"}),n(1,o=!!i.avatarUrl)},()=>{s(),Ai.display(!0)},function(){s(),Pager.openNew("$settings",ga,{})},function(e){a=e,n(2,a)}]}class ul extends Ne{constructor(e){super(),De(this,e,cl,rl,l,{user:0})}}function dl(e,t,n){const s=e.slice();return s[25]=t[n],s[35]=n,s}function pl(e,t,n){const s=e.slice();return s[25]=t[n],s}function fl(e,t,n){const s=e.slice();return s[25]=t[n],s}function hl(e,t,n){const s=e.slice();return s[25]=t[n],s}function ml(e,t,n){const s=e.slice();return s[25]=t[n],s}function gl(e){let t,n,s;function i(t){e[15](t)}let o={};return void 0!==e[3]&&(o.user=e[3]),t=new ul({props:o}),se.push((()=>ze(t,"user",i))),{c(){Te(t.$$.fragment)},m(e,n){Me(t,e,n),s=!0},p(e,s){const i={};!n&&8&s[0]&&(n=!0,i.user=e[3],de((()=>n=!1))),t.$set(i)},i(e){s||(ke(t.$$.fragment,e),s=!0)},o(e){_e(t.$$.fragment,e),s=!1},d(e){Re(t,e)}}}function $l(e){let t,n,s=e[6],i=[];for(let t=0;t<s.length;t+=1)i[t]=yl(dl(e,s,t));const o=e=>_e(i[e],1,1,(()=>{i[e]=null}));return{c(){for(let e=0;e<i.length;e+=1)i[e].c();t=M()},m(e,s){for(let t=0;t<i.length;t+=1)i[t].m(e,s);E(e,t,s),n=!0},p(e,n){if(1104&n[0]){let a;for(s=e[6],a=0;a<s.length;a+=1){const o=dl(e,s,a);i[a]?(i[a].p(o,n),ke(i[a],1)):(i[a]=yl(o),i[a].c(),ke(i[a],1),i[a].m(t.parentNode,t))}for(be(),a=s.length;a<i.length;a+=1)o(a);xe()}},i(e){if(!n){for(let e=0;e<s.length;e+=1)ke(i[e]);n=!0}},o(e){i=i.filter(Boolean);for(let e=0;e<i.length;e+=1)_e(i[e]);n=!1},d(e){A(i,e),e&&P(t)}}}function vl(e){let t,n,s,i,o,a=e[7].songs&&wl(e),l=e[7].artists&&xl(e),r=e[7].albums&&_l(e),c=e[7].playlists&&Ll(e);return{c(){a&&a.c(),t=T(),l&&l.c(),n=T(),r&&r.c(),s=T(),c&&c.c(),i=M()},m(e,u){a&&a.m(e,u),E(e,t,u),l&&l.m(e,u),E(e,n,u),r&&r.m(e,u),E(e,s,u),c&&c.m(e,u),E(e,i,u),o=!0},p(e,o){e[7].songs?a?(a.p(e,o),128&o[0]&&ke(a,1)):(a=wl(e),a.c(),ke(a,1),a.m(t.parentNode,t)):a&&(be(),_e(a,1,1,(()=>{a=null})),xe()),e[7].artists?l?(l.p(e,o),128&o[0]&&ke(l,1)):(l=xl(e),l.c(),ke(l,1),l.m(n.parentNode,n)):l&&(be(),_e(l,1,1,(()=>{l=null})),xe()),e[7].albums?r?(r.p(e,o),128&o[0]&&ke(r,1)):(r=_l(e),r.c(),ke(r,1),r.m(s.parentNode,s)):r&&(be(),_e(r,1,1,(()=>{r=null})),xe()),e[7].playlists?c?(c.p(e,o),128&o[0]&&ke(c,1)):(c=Ll(e),c.c(),ke(c,1),c.m(i.parentNode,i)):c&&(be(),_e(c,1,1,(()=>{c=null})),xe())},i(e){o||(ke(a),ke(l),ke(r),ke(c),o=!0)},o(e){_e(a),_e(l),_e(r),_e(c),o=!1},d(e){a&&a.d(e),e&&P(t),l&&l.d(e),e&&P(n),r&&r.d(e),e&&P(s),c&&c.d(e),e&&P(i)}}}function yl(e){let t,n;return t=new Ns({props:{size:"small",data:e[25],isUrl:!1,avatar:e[35]+1}}),t.$on("mousedown",(function(){return e[20](e[25])})),{c(){Te(t.$$.fragment)},m(e,s){Me(t,e,s),n=!0},p(n,s){e=n;const i={};64&s[0]&&(i.data=e[25]),t.$set(i)},i(e){n||(ke(t.$$.fragment,e),n=!0)},o(e){_e(t.$$.fragment,e),n=!1},d(e){Re(t,e)}}}function wl(e){let t,n,s,i,o,a=e[2].songs+"",l=e[7].songs,r=[];for(let t=0;t<l.length;t+=1)r[t]=bl(ml(e,l,t));const c=e=>_e(r[e],1,1,(()=>{r[e]=null}));return{c(){t=S("div"),n=z(a),s=T();for(let e=0;e<r.length;e+=1)r[e].c();i=M(),N(t,"class","title svelte-1ewfxbv")},m(e,a){E(e,t,a),_(t,n),E(e,s,a);for(let t=0;t<r.length;t+=1)r[t].m(e,a);E(e,i,a),o=!0},p(e,t){if((!o||4&t[0])&&a!==(a=e[2].songs+"")&&q(n,a),1168&t[0]){let n;for(l=e[7].songs,n=0;n<l.length;n+=1){const s=ml(e,l,n);r[n]?(r[n].p(s,t),ke(r[n],1)):(r[n]=bl(s),r[n].c(),ke(r[n],1),r[n].m(i.parentNode,i))}for(be(),n=l.length;n<r.length;n+=1)c(n);xe()}},i(e){if(!o){for(let e=0;e<l.length;e+=1)ke(r[e]);o=!0}},o(e){r=r.filter(Boolean);for(let e=0;e<r.length;e+=1)_e(r[e]);o=!1},d(e){e&&P(t),e&&P(s),A(r,e),e&&P(i)}}}function bl(e){let t,n;return t=new Ns({props:{size:"small",data:e[25].name,isUrl:!1,avatar:""}}),t.$on("mousedown",(function(){return e[16](e[25])})),{c(){Te(t.$$.fragment)},m(e,s){Me(t,e,s),n=!0},p(n,s){e=n;const i={};128&s[0]&&(i.data=e[25].name),t.$set(i)},i(e){n||(ke(t.$$.fragment,e),n=!0)},o(e){_e(t.$$.fragment,e),n=!1},d(e){Re(t,e)}}}function xl(e){let t,n,s,i,o,a,l,r=e[2].artists+"",c=e[7].artists,u=[];for(let t=0;t<c.length;t+=1)u[t]=kl(hl(e,c,t));const d=e=>_e(u[e],1,1,(()=>{u[e]=null}));return{c(){t=S("div"),n=T(),s=S("div"),i=z(r),o=T();for(let e=0;e<u.length;e+=1)u[e].c();a=M(),N(t,"class","divider"),N(s,"class","title svelte-1ewfxbv")},m(e,r){E(e,t,r),E(e,n,r),E(e,s,r),_(s,i),E(e,o,r);for(let t=0;t<u.length;t+=1)u[t].m(e,r);E(e,a,r),l=!0},p(e,t){if((!l||4&t[0])&&r!==(r=e[2].artists+"")&&q(i,r),1168&t[0]){let n;for(c=e[7].artists,n=0;n<c.length;n+=1){const s=hl(e,c,n);u[n]?(u[n].p(s,t),ke(u[n],1)):(u[n]=kl(s),u[n].c(),ke(u[n],1),u[n].m(a.parentNode,a))}for(be(),n=c.length;n<u.length;n+=1)d(n);xe()}},i(e){if(!l){for(let e=0;e<c.length;e+=1)ke(u[e]);l=!0}},o(e){u=u.filter(Boolean);for(let e=0;e<u.length;e+=1)_e(u[e]);l=!1},d(e){e&&P(t),e&&P(n),e&&P(s),e&&P(o),A(u,e),e&&P(a)}}}function kl(e){let t,n;return t=new Ns({props:{size:"small",data:e[25].name,isUrl:!0,avatar:e[25].img1v1Url,width:24,height:24}}),t.$on("mousedown",(function(){return e[17](e[25])})),{c(){Te(t.$$.fragment)},m(e,s){Me(t,e,s),n=!0},p(n,s){e=n;const i={};128&s[0]&&(i.data=e[25].name),128&s[0]&&(i.avatar=e[25].img1v1Url),t.$set(i)},i(e){n||(ke(t.$$.fragment,e),n=!0)},o(e){_e(t.$$.fragment,e),n=!1},d(e){Re(t,e)}}}function _l(e){let t,n,s,i,o,a,l,r=e[2].albums+"",c=e[7].albums,u=[];for(let t=0;t<c.length;t+=1)u[t]=Cl(fl(e,c,t));const d=e=>_e(u[e],1,1,(()=>{u[e]=null}));return{c(){t=S("div"),n=T(),s=S("div"),i=z(r),o=T();for(let e=0;e<u.length;e+=1)u[e].c();a=M(),N(t,"class","divider"),N(s,"class","title svelte-1ewfxbv")},m(e,r){E(e,t,r),E(e,n,r),E(e,s,r),_(s,i),E(e,o,r);for(let t=0;t<u.length;t+=1)u[t].m(e,r);E(e,a,r),l=!0},p(e,t){if((!l||4&t[0])&&r!==(r=e[2].albums+"")&&q(i,r),1168&t[0]){let n;for(c=e[7].albums,n=0;n<c.length;n+=1){const s=fl(e,c,n);u[n]?(u[n].p(s,t),ke(u[n],1)):(u[n]=Cl(s),u[n].c(),ke(u[n],1),u[n].m(a.parentNode,a))}for(be(),n=c.length;n<u.length;n+=1)d(n);xe()}},i(e){if(!l){for(let e=0;e<c.length;e+=1)ke(u[e]);l=!0}},o(e){u=u.filter(Boolean);for(let e=0;e<u.length;e+=1)_e(u[e]);l=!1},d(e){e&&P(t),e&&P(n),e&&P(s),e&&P(o),A(u,e),e&&P(a)}}}function Cl(e){let t,n;return t=new Ns({props:{size:"small",data:e[25].name,isUrl:!1,avatar:" "}}),t.$on("mousedown",(function(){return e[18](e[25])})),{c(){Te(t.$$.fragment)},m(e,s){Me(t,e,s),n=!0},p(n,s){e=n;const i={};128&s[0]&&(i.data=e[25].name),t.$set(i)},i(e){n||(ke(t.$$.fragment,e),n=!0)},o(e){_e(t.$$.fragment,e),n=!1},d(e){Re(t,e)}}}function Ll(e){let t,n,s,i,o,a,l,r=e[2].playlists+"",c=e[7].playlists,u=[];for(let t=0;t<c.length;t+=1)u[t]=El(pl(e,c,t));const d=e=>_e(u[e],1,1,(()=>{u[e]=null}));return{c(){t=S("div"),n=T(),s=S("div"),i=z(r),o=T();for(let e=0;e<u.length;e+=1)u[e].c();a=M(),N(t,"class","divider"),N(s,"class","title svelte-1ewfxbv")},m(e,r){E(e,t,r),E(e,n,r),E(e,s,r),_(s,i),E(e,o,r);for(let t=0;t<u.length;t+=1)u[t].m(e,r);E(e,a,r),l=!0},p(e,t){if((!l||4&t[0])&&r!==(r=e[2].playlists+"")&&q(i,r),1168&t[0]){let n;for(c=e[7].playlists,n=0;n<c.length;n+=1){const s=pl(e,c,n);u[n]?(u[n].p(s,t),ke(u[n],1)):(u[n]=El(s),u[n].c(),ke(u[n],1),u[n].m(a.parentNode,a))}for(be(),n=c.length;n<u.length;n+=1)d(n);xe()}},i(e){if(!l){for(let e=0;e<c.length;e+=1)ke(u[e]);l=!0}},o(e){u=u.filter(Boolean);for(let e=0;e<u.length;e+=1)_e(u[e]);l=!1},d(e){e&&P(t),e&&P(n),e&&P(s),e&&P(o),A(u,e),e&&P(a)}}}function El(e){let t,n;return t=new Ns({props:{size:"small",data:e[25].name,isUrl:!0,avatar:e[25].coverImgUrl,width:24,height:24}}),t.$on("mousedown",(function(){return e[19](e[25])})),{c(){Te(t.$$.fragment)},m(e,s){Me(t,e,s),n=!0},p(n,s){e=n;const i={};128&s[0]&&(i.data=e[25].name),128&s[0]&&(i.avatar=e[25].coverImgUrl),t.$set(i)},i(e){n||(ke(t.$$.fragment,e),n=!0)},o(e){_e(t.$$.fragment,e),n=!1},d(e){Re(t,e)}}}function Pl(e){let t,n,s,i;const o=[vl,$l],a=[];function l(e,t){return e[7]?0:1}return t=l(e),n=a[t]=o[t](e),{c(){n.c(),s=M()},m(e,n){a[t].m(e,n),E(e,s,n),i=!0},p(e,i){let r=t;t=l(e),t===r?a[t].p(e,i):(be(),_e(a[r],1,1,(()=>{a[r]=null})),xe(),n=a[t],n?n.p(e,i):(n=a[t]=o[t](e),n.c()),ke(n,1),n.m(s.parentNode,s))},i(e){i||(ke(n),i=!0)},o(e){_e(n),i=!1},d(e){a[t].d(e),e&&P(s)}}}function Al(e){let t,n,s,i,a,l,r,c,u,d,p,f,h,m,g,$;return u=new mt({props:{size:"big",isUrl:e[0],avatar:e[0]||"",width:32,height:32}}),u.$on("click",e[8]),p=new _s({props:{showPopupWindow:e[1],cssText:"position: absolute; top: 64px; overflow: hidden;",$$slots:{default:[gl]},$$scope:{ctx:e}}}),p.$on("layerClick",e[9]),p.$on("animIn",Sl),h=new _s({props:{noLayer:!0,showPopupWindow:e[5],cssText:"position: fixed; top: 56px; width: 360px; overflow: hidden; max-height: calc(100vh - 148px); min-height: 0; background-color: var(--controlWhite);",$$slots:{default:[Pl]},$$scope:{ctx:e}}}),h.$on("layerClick",e[21]),{c(){t=S("div"),n=S("div"),s=S("span"),i=T(),a=S("input"),r=T(),c=S("div"),Te(u.$$.fragment),d=T(),Te(p.$$.fragment),f=T(),Te(h.$$.fragment),N(s,"class","iconfont icon-search avatar menu svelte-1ewfxbv"),N(a,"type","text"),N(a,"class","input svelte-1ewfxbv"),N(a,"placeholder",l=e[2].search),N(a,"spellcheck","false"),N(c,"class","avatar-container svelte-1ewfxbv"),N(n,"class","column search svelte-1ewfxbv"),N(t,"class","column svelte-1ewfxbv"),B(t,"margin-left","48px"),B(t,"-webkit-app-region","no-drag")},m(o,l){E(o,t,l),_(t,n),_(n,s),_(n,i),_(n,a),V(a,e[4]),_(n,r),_(n,c),Me(u,c,null),_(t,d),Me(p,t,null),_(t,f),Me(h,t,null),m=!0,g||($=[R(s,"click",e[10]),R(a,"input",e[13]),R(a,"change",e[10]),R(a,"focus",e[11]),R(a,"blur",e[14]),R(a,"input",e[12])],g=!0)},p(e,t){(!m||4&t[0]&&l!==(l=e[2].search))&&N(a,"placeholder",l),16&t[0]&&a.value!==e[4]&&V(a,e[4]);const n={};1&t[0]&&(n.isUrl=e[0]),1&t[0]&&(n.avatar=e[0]||""),u.$set(n);const s={};2&t[0]&&(s.showPopupWindow=e[1]),8&t[0]|32&t[1]&&(s.$$scope={dirty:t,ctx:e}),p.$set(s);const i={};32&t[0]&&(i.showPopupWindow=e[5]),212&t[0]|32&t[1]&&(i.$$scope={dirty:t,ctx:e}),h.$set(i)},i(e){m||(ke(u.$$.fragment,e),ke(p.$$.fragment,e),ke(h.$$.fragment,e),m=!0)},o(e){_e(u.$$.fragment,e),_e(p.$$.fragment,e),_e(h.$$.fragment,e),m=!1},d(e){e&&P(t),Re(u),Re(p),Re(h),g=!1,o($)}}}function Sl(e){e.detail.animate({transform:["translate(-20px, -32px) scale(0.9)","translate(0px, 0px) scale(1)"],opacity:[0,1]},100)}function zl(e,t,n){let s=!1,i=langMapping.getMapping();Ie.on("langChange",(e=>{n(2,i=e.getMapping())}));let o=st.getSync("profile"),a={avatarUrl:"",name:"not_login"},{avatarUrl:l=(o?o.avatarUrl:"")}=t;async function r(){o&&n(3,a={avatarUrl:o.avatarUrl,name:o.nickname}),n(0,l=o?o.avatarUrl:"")}r(),Ie.on("__updateLoginAvatar",(async()=>{o=await st.get("profile"),r()}));let c,u,d=!1,p=[];async function f(){await NeteaseApi.search(c)}return e.$$set=e=>{"avatarUrl"in e&&n(0,l=e.avatarUrl)},[l,s,i,a,c,d,p,u,()=>n(1,s=!0),async()=>{n(1,s=!1);const e=await st.get("profile");e&&n(3,a={avatarUrl:e.avatarUrl,name:e.nickname}),n(0,l=e?e.avatarUrl:"")},f,async function(){n(6,p=(await NeteaseApi.search()).body.result.hots.reduce(((e,t)=>[...e,t.first]),[])),n(5,d=!0)},async function(){if(!c)return n(7,u=null);const e=(await NeteaseApi.suggest(c)).body.result;console.log(e),Object.keys(e).length&&n(7,u=e)},function(){c=this.value,n(4,c)},()=>setTimeout((()=>n(5,d=!1))),function(e){a=e,n(3,a)},e=>{n(4,c=`${e.name}`),f()},e=>{n(4,c=`${e.name}`),f()},e=>{n(4,c=`${e.name}`),f()},e=>{n(4,c=`${e.name}`),f()},e=>{n(4,c=e),f()},()=>n(5,d=!1)]}class Tl extends Ne{constructor(e){super(),De(this,e,zl,Al,l,{avatarUrl:0},null,[-1,-1])}}function Ml(e){let t,n,s,i,o,a,l,r,u,d,p,f,h,m,g,$,v,y,w,b,x,k;function C(t){e[9](t)}function L(t){e[10](t)}r=new Tl({});let A={};void 0!==e[0]&&(A.selected=e[0]),void 0!==e[1]&&(A.tabs=e[1]),d=new tt({props:A}),se.push((()=>ze(d,"selected",C))),se.push((()=>ze(d,"tabs",L)));return g=new Wt({props:{}}),e[11](g),v=new qt({}),w=new sl({}),x=new os({}),{c(){t=S("div"),n=S("img"),i=T(),o=S("div"),a=S("div"),l=S("div"),Te(r.$$.fragment),u=T(),Te(d.$$.fragment),m=T(),Te(g.$$.fragment),$=T(),Te(v.$$.fragment),y=T(),Te(w.$$.fragment),b=T(),Te(x.$$.fragment),N(n,"class","wallpaper svelte-33kitm"),c(n.src,s=e[3])||N(n,"src",s),N(n,"alt",""),N(n,"width",e[5]),B(l,"width","100vw"),B(l,"height","54px"),B(l,"justify-content","center"),B(l,"-webkit-app-region","drag"),N(l,"class","Row"),N(a,"class",h="row head"+(e[7]?" color":"")+(e[4]?"":" noneAcrylic")+" svelte-33kitm"),N(o,"class","row window svelte-33kitm"),B(t,"transition","background-color 0.2s"),B(t,"background-color","var("+(e[4]?"--acrylicBackgroundColor":"--noneAcrylicBackgroundColor")+")")},m(s,c){E(s,t,c),_(t,n),e[8](n),_(t,i),_(t,o),_(o,a),_(a,l),Me(r,l,null),_(a,u),Me(d,a,null),_(o,m),Me(g,o,null),_(o,$),Me(v,o,null),_(t,y),Me(w,t,null),E(s,b,c),Me(x,s,c),k=!0},p(e,[i]){(!k||8&i&&!c(n.src,s=e[3]))&&N(n,"src",s),(!k||32&i)&&N(n,"width",e[5]);const o={};!p&&1&i&&(p=!0,o.selected=e[0],de((()=>p=!1))),!f&&2&i&&(f=!0,o.tabs=e[1],de((()=>f=!1))),d.$set(o),(!k||144&i&&h!==(h="row head"+(e[7]?" color":"")+(e[4]?"":" noneAcrylic")+" svelte-33kitm"))&&N(a,"class",h);g.$set({}),(!k||16&i)&&B(t,"background-color","var("+(e[4]?"--acrylicBackgroundColor":"--noneAcrylicBackgroundColor")+")")},i(e){k||(ke(r.$$.fragment,e),ke(d.$$.fragment,e),ke(g.$$.fragment,e),ke(v.$$.fragment,e),ke(w.$$.fragment,e),ke(x.$$.fragment,e),k=!0)},o(e){_e(r.$$.fragment,e),_e(d.$$.fragment,e),_e(g.$$.fragment,e),_e(v.$$.fragment,e),_e(w.$$.fragment,e),_e(x.$$.fragment,e),k=!1},d(n){n&&P(t),e[8](null),Re(r),Re(d),e[11](null),Re(g),Re(v),Re(w),n&&P(b),Re(x,n)}}}function Rl(){return new Promise((e=>{hooks.once("win:bounds",((t,n)=>{e(n)})),hooks.send("winquery:bounds")}))}function Dl(e,t,n){let s=Kn;st.getSync("profile")?st.get("cookie").then((e=>NeteaseApi.checkIn(e))):s=ys;let i,o=-1,a=[s,es],l=["$mine","$explorer"];window.Pager=(()=>{let e=[{},{}],t=[0],s=(new Map).set(l[0],{}).set(l[1],{}),r=[];function c(t,i,o={},r=!1){if(f(t)){if(r){const n=l.indexOf(t);return a[n]=i,e[n]=o,!1}return!0}return a.push(i),l.push(t),n(1,l),e.push(o),s.set(t,{}),!0}function u(s,c=!1){(s<0||s>=l.length)&&(s=0);let u=e[s];"function"==typeof u&&(u=u.call(null)),(o!==s||c)&&(r.forEach((e=>e.call(null))),r=[],t[s]=l[o],i.display(a[s],u),n(0,o=s))}function d(e,t=!1){"number"!=typeof e&&(e=l.indexOf(e)),u(e,t)}function p(i){(i<0||i>=l.length)&&(i=0);let c=i===o;s.delete(l[i]),r=[],a=a.slice(0,i).concat(a.slice(i+1)),n(1,l=l.slice(0,i).concat(l.slice(i+1)));let d="function"==typeof e[i]?e[i]().onTabDestroy:e[i].onTabDestroy;e=e.slice(0,i).concat(e.slice(i+1)),"function"==typeof d&&d(i),c&&function(){let e=l.indexOf(t[o]);!~e&&(e=0),u(e,!0)}()}function f(e){return"string"==typeof e?~l.indexOf(e):~a.indexOf(e)}return{add:c,select:d,remove:function(e){"number"!=typeof e&&(e=l.indexOf(e)),p(e)},has:f,openNew:async function(e,t,n,s=!1){if(c(e,t,n,s))return d(e);d(e,!0)},getContext:function(){const t=a[o],n=l[o];return{name:n,class:t,props:e[o],save:s.get(n)}},beforeSwitch:function(e){r.push(e)},size:function(){return l.length},index:function(){return o},removeByIndex:e=>{e>1&&p(e)}}})();let r,c=st.getSync("sys-settings"),u=!1;!async function(){n(3,r=await async function(){let e=await wallpaper.getWallpaper(),t="";return t="string"==typeof e?e:URL.createObjectURL(new Blob([e])),t}())}(),Ie.on("__openMinePage",(()=>{window.Pager.openNew("$mine",Kn,{},!0)})),window.__changeBgPos=f,hooks.on("win:screen-move",((e,t,n)=>{d&&(d.style.setProperty("--top",n),d.style.setProperty("--left",t))})),hooks.on("win:max",(()=>f(0,0))),hooks.on("win:unmax",((e,t)=>{f(t[0],t[1])})),hooks.send("winbind:move");let d,p=1080;function f(e,t){u&&d&&(d.style.setProperty("--top",t),d.style.setProperty("--left",e))}(async()=>{let e=await Rl(),t=await new Promise((e=>{hooks.once("win:screenSize",((t,n)=>{e(n)})),hooks.send("winquery:screenSize")}));window.Pager.select(0),n(5,p=t.width),f(e.x,e.y)})(),Ie.on("useAcrylic",(e=>{document.body.style.setProperty("--dynamicControlLight",e?"var(--acrylicBackgroundColor)":"var(--controlBrighter)")})),Ie.on("playerReady",(()=>{document.body.style.setProperty("--color",zt(d,1)),requestIdleCallback((()=>{hooks.send("win:show-main")}))})),Ie.on("changeControlColor",(e=>{document.body.style.setProperty("--controlHue",e)})),Ie.on("useAcrylic",(async e=>{if(c.theme.useAcrylic=n(4,u=e),e){let e=await Rl();f(e.x,e.y)}st.set("sys-settings",c)})),c||(c={theme:{controlColor:[2,39,148,210,270,292,322],useAcrylic:!1},beta:{showDevTools:!1},quality:{dataList:["低","中","高","最佳"],selected:3}},st.set("sys-settings",c));let h=c.theme.controlColor.slice(1),m=c.theme.controlColor[0];Ie.emit("changeControlColor",h[m]),Ie.emit("useAcrylic",c.theme.useAcrylic);let g=!1;return Ie.on("__pageFold",(()=>{n(7,g=!0)})),Ie.on("__pageUnfold",(()=>{n(7,g=!1)})),[o,l,i,r,u,p,d,g,function(e){se[e?"unshift":"push"]((()=>{d=e,n(6,d)}))},function(e){o=e,n(0,o)},function(e){l=e,n(1,l)},function(e){se[e?"unshift":"push"]((()=>{i=e,n(2,i)}))}]}window.langMapping=new la(st.getSync("AppSettings/lang")?.selected||"zh_cn"),window.contextMap=new Map,Ie.isBeta=!0,async function(){await We.when("runtimeReady");const e=e=>langMapping.s(e);hooks.on("online",(()=>Ri.setMessage(e("reconnected")).display())),hooks.on("offline",(()=>Ri.setMessage(e("disconnected")).display()))}(),co(),async function(){await We.when("runtimeReady"),Ie.on("audioDeviceChange",(async e=>{for(const t of e)if(t.deviceId===oo)return;ao("default")}))}();var Nl=new class extends Ne{constructor(e){super(),De(this,e,Dl,Ml,l,{})}}({target:document.body});return async function(){We.start(),hooks.on("win:focus",(()=>Ie.emit("win:focus")))}(),Nl}();
