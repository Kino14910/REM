var app=function(){"use strict";function t(){}const e=t=>t;function n(t,e){for(const n in e)t[n]=e[n];return t}function s(t){return t()}function i(){return Object.create(null)}function o(t){t.forEach(s)}function r(t){return"function"==typeof t}function a(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}let l;function c(t,e){return l||(l=document.createElement("a")),l.href=e,t===l.href}function u(t,e,n,s){if(t){const i=d(t,e,n,s);return t[0](i)}}function d(t,e,s,i){return t[1]&&i?n(s.ctx.slice(),t[1](i(e))):s.ctx}function f(t,e,n,s){if(t[2]&&s){const i=t[2](s(n));if(void 0===e.dirty)return i;if("object"==typeof i){const t=[],n=Math.max(e.dirty.length,i.length);for(let s=0;s<n;s+=1)t[s]=e.dirty[s]|i[s];return t}return e.dirty|i}return e.dirty}function p(t,e,n,s,i,o){if(i){const r=d(e,n,s,o);t.p(r,i)}}function h(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let t=0;t<n;t++)e[t]=-1;return e}return-1}function m(t){const e={};for(const n in t)"$"!==n[0]&&(e[n]=t[n]);return e}function g(t){return null==t?"":t}function v(e){return e&&r(e.destroy)?e.destroy:t}const $="undefined"!=typeof window;let y=$?()=>window.performance.now():()=>Date.now(),w=$?t=>requestAnimationFrame(t):t;const x=new Set;function b(t){x.forEach((e=>{e.c(t)||(x.delete(e),e.f())})),0!==x.size&&w(b)}function k(t){let e;return 0===x.size&&w(b),{promise:new Promise((n=>{x.add(e={c:t,f:n})})),abort(){x.delete(e)}}}function C(t,e){t.appendChild(e)}function _(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function L(t){const e=S("style");return function(t,e){C(t.head||t,e)}(_(t),e),e.sheet}function E(t,e,n){t.insertBefore(e,n||null)}function A(t){t.parentNode.removeChild(t)}function P(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function S(t){return document.createElement(t)}function D(t){return document.createTextNode(t)}function M(){return D(" ")}function T(){return D("")}function R(t,e,n,s){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n,s)}function z(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function U(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function N(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function j(t,e){t.value=null==e?"":e}function B(t,e,n,s){null===n?t.style.removeProperty(e):t.style.setProperty(e,n,s?"important":"")}function O(t,e,{bubbles:n=!1,cancelable:s=!1}={}){const i=document.createEvent("CustomEvent");return i.initCustomEvent(t,n,s,e),i}const V=new Map;let I,F=0;function H(t,e,n,s,i,o,r,a=0){const l=16.666/s;let c="{\n";for(let t=0;t<=1;t+=l){const s=e+(n-e)*o(t);c+=100*t+`%{${r(s,1-s)}}\n`}const u=c+`100% {${r(n,1-n)}}\n}`,d=`__svelte_${function(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}(u)}_${a}`,f=_(t),{stylesheet:p,rules:h}=V.get(f)||function(t,e){const n={stylesheet:L(e),rules:{}};return V.set(t,n),n}(f,t);h[d]||(h[d]=!0,p.insertRule(`@keyframes ${d} ${u}`,p.cssRules.length));const m=t.style.animation||"";return t.style.animation=`${m?`${m}, `:""}${d} ${s}ms linear ${i}ms 1 both`,F+=1,d}function W(t,e){const n=(t.style.animation||"").split(", "),s=n.filter(e?t=>t.indexOf(e)<0:t=>-1===t.indexOf("__svelte")),i=n.length-s.length;i&&(t.style.animation=s.join(", "),F-=i,F||w((()=>{F||(V.forEach((t=>{const{stylesheet:e}=t;let n=e.cssRules.length;for(;n--;)e.deleteRule(n);t.rules={}})),V.clear())})))}function q(t){I=t}function X(){if(!I)throw new Error("Function called outside component initialization");return I}function Y(t){X().$$.on_mount.push(t)}function G(t){X().$$.on_destroy.push(t)}function J(){const t=X();return(e,n,{cancelable:s=!1}={})=>{const i=t.$$.callbacks[e];if(i){const o=O(e,n,{cancelable:s});return i.slice().forEach((e=>{e.call(t,o)})),!o.defaultPrevented}return!0}}function K(t,e){return X().$$.context.set(t,e),e}function Q(t){return X().$$.context.get(t)}function Z(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach((t=>t.call(this,e)))}const tt=[],et=[],nt=[],st=[],it=Promise.resolve();let ot=!1;function rt(){ot||(ot=!0,it.then(pt))}function at(){return rt(),it}function lt(t){nt.push(t)}function ct(t){st.push(t)}const ut=new Set;let dt,ft=0;function pt(){const t=I;do{for(;ft<tt.length;){const t=tt[ft];ft++,q(t),ht(t.$$)}for(q(null),tt.length=0,ft=0;et.length;)et.pop()();for(let t=0;t<nt.length;t+=1){const e=nt[t];ut.has(e)||(ut.add(e),e())}nt.length=0}while(tt.length);for(;st.length;)st.pop()();ot=!1,ut.clear(),q(t)}function ht(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(lt)}}function mt(){return dt||(dt=Promise.resolve(),dt.then((()=>{dt=null}))),dt}function gt(t,e,n){t.dispatchEvent(O(`${e?"intro":"outro"}${n}`))}const vt=new Set;let $t;function yt(){$t={r:0,c:[],p:$t}}function wt(){$t.r||o($t.c),$t=$t.p}function xt(t,e){t&&t.i&&(vt.delete(t),t.i(e))}function bt(t,e,n,s){if(t&&t.o){if(vt.has(t))return;vt.add(t),$t.c.push((()=>{vt.delete(t),s&&(n&&t.d(1),s())})),t.o(e)}}const kt={duration:0};function Ct(n,s,i){let a,l=s(n,i),c=!0;const u=$t;function d(){const{delay:s=0,duration:i=300,easing:r=e,tick:d=t,css:f}=l||kt;f&&(a=H(n,1,0,i,s,r,f));const p=y()+s,h=p+i;lt((()=>gt(n,!1,"start"))),k((t=>{if(c){if(t>=h)return d(0,1),gt(n,!1,"end"),--u.r||o(u.c),!1;if(t>=p){const e=r((t-p)/i);d(1-e,e)}}return c}))}return u.r+=1,r(l)?mt().then((()=>{l=l(),d()})):d(),{end(t){t&&l.tick&&l.tick(1,0),c&&(a&&W(n,a),c=!1)}}}function _t(t,e){const n={},s={},i={$$scope:1};let o=t.length;for(;o--;){const r=t[o],a=e[o];if(a){for(const t in r)t in a||(s[t]=1);for(const t in a)i[t]||(n[t]=a[t],i[t]=1);t[o]=a}else for(const t in r)i[t]=1}for(const t in s)t in n||(n[t]=void 0);return n}function Lt(t){return"object"==typeof t&&null!==t?t:{}}function Et(t,e,n){const s=t.$$.props[e];void 0!==s&&(t.$$.bound[s]=n,n(t.$$.ctx[s]))}function At(t){t&&t.c()}function Pt(t,e,n,i){const{fragment:a,on_mount:l,on_destroy:c,after_update:u}=t.$$;a&&a.m(e,n),i||lt((()=>{const e=l.map(s).filter(r);c?c.push(...e):o(e),t.$$.on_mount=[]})),u.forEach(lt)}function St(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Dt(e,n,s,r,a,l,c,u=[-1]){const d=I;q(e);const f=e.$$={fragment:null,ctx:null,props:l,update:t,not_equal:a,bound:i(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(d?d.$$.context:[])),callbacks:i(),dirty:u,skip_bound:!1,root:n.target||d.$$.root};c&&c(f.root);let p=!1;if(f.ctx=s?s(e,n.props||{},((t,n,...s)=>{const i=s.length?s[0]:n;return f.ctx&&a(f.ctx[t],f.ctx[t]=i)&&(!f.skip_bound&&f.bound[t]&&f.bound[t](i),p&&function(t,e){-1===t.$$.dirty[0]&&(tt.push(t),rt(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}(e,t)),n})):[],f.update(),p=!0,o(f.before_update),f.fragment=!!r&&r(f.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);f.fragment&&f.fragment.l(t),t.forEach(A)}else f.fragment&&f.fragment.c();n.intro&&xt(e.$$.fragment),Pt(e,n.target,n.anchor,n.customElement),pt()}q(d)}class Mt{$destroy(){St(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function Tt(t,e,n){const s=t.slice();return s[6]=e[n],s[8]=n,s}function Rt(t){let e,n,s,i,o=t[6]+"";function r(){return t[5](t[8])}return{c(){e=S("div"),n=D(o),U(e,"class","tab tab-text svelte-1fjb39z")},m(t,o){E(t,e,o),C(e,n),s||(i=R(e,"click",r),s=!0)},p(e,s){t=e,1&s&&o!==(o=t[6]+"")&&N(n,o)},d(t){t&&A(e),s=!1,i()}}}function zt(t){let e;function n(t,e){return"我的"===t[6]||"发现"===t[6]?Nt:Ut}let s=n(t),i=s(t);return{c(){i.c(),e=T()},m(t,n){i.m(t,n),E(t,e,n)},p(t,o){s===(s=n(t))&&i?i.p(t,o):(i.d(1),i=s(t),i&&(i.c(),i.m(e.parentNode,e)))},d(t){i.d(t),t&&A(e)}}}function Ut(t){let e,n,s,i,r,a,l,c,u=t[6]+"";function d(){return t[4](t[8])}return{c(){e=S("div"),n=S("span"),s=D(u),i=M(),r=S("div"),r.textContent="⨯",a=M(),U(n,"class","tab-text svelte-1fjb39z"),U(r,"class","column cross svelte-1fjb39z"),U(e,"class","tab selected column svelte-1fjb39z"),B(e,"padding-right","2px")},m(o,u){E(o,e,u),C(e,n),C(n,s),C(e,i),C(e,r),C(e,a),l||(c=[R(r,"click",t[2]),R(e,"click",d)],l=!0)},p(e,n){t=e,1&n&&u!==(u=t[6]+"")&&N(s,u)},d(t){t&&A(e),l=!1,o(c)}}}function Nt(t){let e,n,s,i,o=t[6]+"";function r(){return t[3](t[8])}return{c(){e=S("div"),n=D(o),U(e,"class","tab selected tab-text svelte-1fjb39z")},m(t,o){E(t,e,o),C(e,n),s||(i=R(e,"click",r),s=!0)},p(e,s){t=e,1&s&&o!==(o=t[6]+"")&&N(n,o)},d(t){t&&A(e),s=!1,i()}}}function jt(t){let e;function n(t,e){return t[8]===t[1]?zt:Rt}let s=n(t),i=s(t);return{c(){i.c(),e=T()},m(t,n){i.m(t,n),E(t,e,n)},p(t,o){s===(s=n(t))&&i?i.p(t,o):(i.d(1),i=s(t),i&&(i.c(),i.m(e.parentNode,e)))},d(t){i.d(t),t&&A(e)}}}function Bt(e){let n,s=e[0],i=[];for(let t=0;t<s.length;t+=1)i[t]=jt(Tt(e,s,t));return{c(){n=S("div");for(let t=0;t<i.length;t+=1)i[t].c();U(n,"class","column c svelte-1fjb39z")},m(t,e){E(t,n,e);for(let t=0;t<i.length;t+=1)i[t].m(n,null)},p(t,[e]){if(7&e){let o;for(s=t[0],o=0;o<s.length;o+=1){const r=Tt(t,s,o);i[o]?i[o].p(r,e):(i[o]=jt(r),i[o].c(),i[o].m(n,null))}for(;o<i.length;o+=1)i[o].d(1);i.length=s.length}},i:t,o:t,d(t){t&&A(n),P(i,t)}}}function Ot(t){Pager.select(t)}function Vt(t,e,n){let{tabs:s=["我的","发现"]}=e,{selected:i=0}=e;return t.$$set=t=>{"tabs"in t&&n(0,s=t.tabs),"selected"in t&&n(1,i=t.selected)},[s,i,function(){Pager.remove(i)},t=>Ot(t),t=>Ot(t),t=>Ot(t)]}class It extends Mt{constructor(t){super(),Dt(this,t,Vt,Bt,a,{tabs:0,selected:1})}}function Ft(t){let e,n,s;return{c(){e=S("span"),n=D(t[2]),U(e,"class",s="avatar iconfont size-"+(t[3]?t[3]:"normal")+" svelte-m9oihy")},m(t,s){E(t,e,s),C(e,n)},p(t,i){4&i&&N(n,t[2]),8&i&&s!==(s="avatar iconfont size-"+(t[3]?t[3]:"normal")+" svelte-m9oihy")&&U(e,"class",s)},d(t){t&&A(e)}}}function Ht(t){let e,n,s,i,o;return{c(){e=S("img"),c(e.src,n=t[2])||U(e,"src",n),U(e,"class","avatar svelte-m9oihy"),U(e,"alt",s="avatar size-"+(t[3]?t[3]:"normal")),U(e,"draggable","false"),U(e,"width",t[4]),U(e,"height",t[5])},m(n,s){E(n,e,s),t[11](e),i||(o=R(e,"load",t[10]),i=!0)},p(t,i){4&i&&!c(e.src,n=t[2])&&U(e,"src",n),8&i&&s!==(s="avatar size-"+(t[3]?t[3]:"normal"))&&U(e,"alt",s),16&i&&U(e,"width",t[4]),32&i&&U(e,"height",t[5])},d(n){n&&A(e),t[11](null),i=!1,o()}}}function Wt(e){let n,s,i,o,r;function a(t,e){return t[1]?Ht:Ft}let l=a(e),c=l(e);return{c(){n=S("div"),c.c(),U(n,"class",s="column"+(e[7]?" clkable":"")+" svelte-m9oihy"),U(n,"style",i="width: fit-content; heigth: fit-content; overflow: hidden; border-radius: "+e[6]+";"+e[8])},m(t,s){E(t,n,s),c.m(n,null),o||(r=R(n,"click",e[9]),o=!0)},p(t,[e]){l===(l=a(t))&&c?c.p(t,e):(c.d(1),c=l(t),c&&(c.c(),c.m(n,null))),128&e&&s!==(s="column"+(t[7]?" clkable":"")+" svelte-m9oihy")&&U(n,"class",s),320&e&&i!==(i="width: fit-content; heigth: fit-content; overflow: hidden; border-radius: "+t[6]+";"+t[8])&&U(n,"style",i)},i:t,o:t,d(t){t&&A(n),c.d(),o=!1,r()}}}function qt(t,e,n){const s=J();let{isUrl:i=!0}=e,{avatar:o=""}=e,{size:r=""}=e,{width:a}=e,{height:l}=e,{radius:c="50%"}=e,{clickable:u=!0}=e,{ctx:d=this}=e,{cssText:f=""}=e;return t.$$set=t=>{"isUrl"in t&&n(1,i=t.isUrl),"avatar"in t&&n(2,o=t.avatar),"size"in t&&n(3,r=t.size),"width"in t&&n(4,a=t.width),"height"in t&&n(5,l=t.height),"radius"in t&&n(6,c=t.radius),"clickable"in t&&n(7,u=t.clickable),"ctx"in t&&n(0,d=t.ctx),"cssText"in t&&n(8,f=t.cssText)},[d,i,o,r,a,l,c,u,f,function(t){s("click",t)},function(){s("loaded")},function(t){et[t?"unshift":"push"]((()=>{d=t,n(0,d)}))}]}class Xt extends Mt{constructor(t){super(),Dt(this,t,qt,Wt,a,{isUrl:1,avatar:2,size:3,width:4,height:5,radius:6,clickable:7,ctx:0,cssText:8})}}class Yt{constructor(t){this.data=t}urls={};getPlayUrlAsync=async(t="high")=>{let e;try{e="low"===t?this.data.l.br:"medium"===t?this.data.m.br:this.data.h.br}catch(n){switch(t){case"low":if(e=!!this.data.h&&this.data.h.br,e)break;case"high":if(e=!!this.data.m&&this.data.m.br,e)break;case"medium":if(e=!!this.data.l&&this.data.l.br,e)break}}const n=this.urls[t]=await NeteaseApi.getSongUrlX(this.data.id,await store.get("cookie"));let s=n.body.data[0].url;const i=this.type=n.body.data[0].type,o=await server.getMedia(`ne${this.data.id}.${i}`,this.onLoadMetadata);return o?URL.createObjectURL(new Blob([o])):(server.saveToCache(s,`ne${this.data.id}.${i}`,this.onLoadMetadata),s)};onLoadMetadata(){}async url(t="high"){return this.urls[t]?this.urls[t]:await this.getPlayUrlAsync(t)}title(){return this.data.name}album(){return this.data.al}artist(){return this.data.ar}uri(){return this.data.id}}function Gt(e){let n,s,i,r;return{c(){n=S("input"),U(n,"type","range"),U(n,"style",s=e[1]+"; --progress: "+e[0]+"%; --rail-width: "+e[2]+"px; --thumb-width: "+e[3]+"px; --display-progress: "+e[5]+"px"),U(n,"step","0.001"),U(n,"class","svelte-1ipceau")},m(t,s){E(t,n,s),j(n,e[0]),e[9](n),i||(r=[R(n,"change",e[8]),R(n,"input",e[8]),R(n,"mousedown",e[6]),R(n,"mousemove",e[7])],i=!0)},p(t,[e]){47&e&&s!==(s=t[1]+"; --progress: "+t[0]+"%; --rail-width: "+t[2]+"px; --thumb-width: "+t[3]+"px; --display-progress: "+t[5]+"px")&&U(n,"style",s),1&e&&j(n,t[0])},i:t,o:t,d(t){t&&A(n),e[9](null),i=!1,o(r)}}}function Jt(t,e,n){let s,i,{value:o}=e,{cssStyle:r=""}=e,{width:a=100}=e,{thumbWidth:l=12}=e,c=J(),u=!1;return document.addEventListener("mouseup",(()=>{u&&(u=!1,c("mouseup",i.value))})),t.$$set=t=>{"value"in t&&n(0,o=t.value),"cssStyle"in t&&n(1,r=t.cssStyle),"width"in t&&n(2,a=t.width),"thumbWidth"in t&&n(3,l=t.thumbWidth)},t.$$.update=()=>{13&t.$$.dirty&&n(5,s=(a-l)*o/(100*a)*a+l/2)},[o,r,a,l,i,s,function(t){u=!0;let e=t.offsetX/i.offsetWidth*100;n(4,i.value=e,i),n(0,o=e),c("mousedown",e)},function(){u&&c("mousemove",i.value)},function(){o=function(t){return""===t?null:+t}(this.value),n(0,o)},function(t){et[t?"unshift":"push"]((()=>{i=t,n(4,i)}))}]}class Kt extends Mt{constructor(t){super(),Dt(this,t,Jt,Gt,a,{value:0,cssStyle:1,width:2,thumbWidth:3})}}const Qt=Symbol("[[Observers]]");class Zt{[Qt]=new Set;addObserver(t){("function"==typeof t||"object"==typeof t&&t&&"function"==typeof t.update)&&this[Qt].add(t)}removeObserver(t){if(!t)return this.removeAllObservers();this[Qt].delete(t)}removeAllObservers(){this[Qt]=new Set}notifyObservers(...t){for(const e of this[Qt])"function"==typeof e?e.call(this,...t):e.update(this,...t)}}const te=new class extends Zt{_metadata={};constructor(t={}){super(),this.setMetadata(t)}setMetadata(t={}){this._metadata.title=t.title||this._metadata.title,this._metadata.album=t.album||this._metadata.album,this._metadata.artist=t.artist||this._metadata.artist,this._metadata.artwork=t.artwork||this._metadata.artwork}getMetadataConfig(){return this._metadata}title(t){return void 0!==t?(this._metadata.title=t,this):this._metadata.title}album(t){return void 0===t?this._metadata.album:(this._metadata.album=t,this)}artist(t){return void 0===t?this._metadata.artist:(this._metadata.artist=t,this)}artwork(t,e){return void 0===t?this._metadata.artwork||[]:(this._metadata.artwork||(this._metadata.artwork=[]),void 0===e?this._metadata.artwork[t]:(this._metadata.artwork[t]=e,this))}setArtwork(t){return this._metadata.artwork=t,this}apply(){navigator.mediaSession.metadata=new MediaMetadata(this._metadata),hooks.send("win:title",`${this._metadata.title} - ${this._metadata.artist}`)}};class ee{static map=new Map;HEAD={prev:null,next:null};END=this.HEAD;count=0;append(t,e){const n=this.END,s={prev:n,listener:t,rawListener:e,next:null};return s.prev=n,s.listener=t,s.rawListener=e,s.next=null,n.next=s,this.END=s,ee.map.set(e||t,s),this.count++,this}prepend(t,e){const n=this.HEAD,s=n.next,i={prev:n,listener:t,rawListener:e,next:s};return n.next=i,s&&(s.prev=i),ee.map.set(e||t,i),this.count++,this}delete(t){let e=ee.map,n=e.get(t);if(!n)return;let s=n.prev;return s.next=n.next,n.next&&(n.next.prev=s),e.delete(t),this.count--,requestIdleCallback((()=>{n.prev=null,n.next=null})),this}deleteAll(){let t=this.HEAD;for(;t=t.next;)t.prev=null,t.next=null,ee.map.delete(t.rawListener||t.listener);return this.HEAD.next=null,this.count=0,this}[Symbol.iterator](){let t=this.HEAD;return{next:()=>t.next?(t=t.next,{value:t,done:!1}):{value:t,done:!0}}}}class ne{_events={};maxListeners=-1;thisArg=void 0;captureRejections=!1;setMaxListeners(t){return this.maxListeners=t,this}getMaxListeners(){return this.maxListeners}_addListener(t,e,n=!1){let s;if(!~this.maxListeners&&this.listenerCount(t)===this.maxListeners){const t=RangeError(`Exceeded maximum capacity(${this.maxListeners}).`);if(!this.listenerCount("error"))throw t;this._emitError(t)}this._events[t]||(this._events[t]=new ee),s=this._events[t],n?s.prepend(e):s.append(e)}addListener(t,e){return this._addListener(t,e),this}on(t,e){return this._addListener(t,e),this}prependListener(t,e){return this._addListener(t,e,!0),this}_removeListener(t,e){let n;(n=this._events[t])&&(n.delete(e),n.count||delete this._events[t])}removeListener(t,e){return this._removeListener(t,e),this}off(t,e){return this._removeListener(t,e),this}removeAllListeners(t){let e;(e=this._events[t])&&(e.deleteAll(),delete this._events[t])}_emit(t,e,n){let s;if(s=this._events[t],s)try{let t=this.captureRejections,i=s.HEAD;for(;i=i.next;){const s=i.listener.apply(e,n);t&&s instanceof Promise&&s.catch((t=>{if(!this.listenerCount("error"))throw t;this._emitError(t)}))}}catch(t){if(!this.listenerCount("error"))throw t;this._emitError(t)}}_emitError(t){this._emit("error",void 0,[t])}emit(t,...e){this._emit(t,this.thisArg,e)}emitNone(t,...e){this._emit(t,void 0,e)}bind(t){return this.thisArg=t,this}_onceWrapper(t,e){return(...n)=>{this._removeListener(t,e);return e.apply(this.thisArg,n)}}_once(t,e,n=!1){if(!~this.maxListeners&&this.listenerCount(t)===this.maxListeners){const t=RangeError(`Exceeded maximum capacity(${this.maxListeners}).`);if(!this.listenerCount("error"))throw t;this._emitError(t)}const s=this._onceWrapper(t,e);let i;this._events[t]||(this._events[t]=new ee),i=this._events[t],n?i.prepend(s,e):i.append(s,e)}once(t,e){return this._once(t,e),this}prependOnceListener(t,e){return this._once(t,e,!0),this}listenerCount(t){let e;return e=this._events[t],e?e.count:0}listeners(t){let e,n=[];if(e=this._events[t],!e)return n;let s=e.HEAD;for(;s=s.next;)n.push(s.listener);return n}rawListeners(t){let e,n=[];if(e=this._events[t],!e)return n;let s=e.HEAD;for(;s=s.next;)s.rawListener&&n.push(s.rawListener);return n}eventNames(){return Object.getOwnPropertyNames(this._events)}constructor(t){if(t){const{thisArg:e,captureRejections:n}=t;void 0!==e&&(this.thisArg=e),n&&(this.captureRejections=!0)}}}const se=new Audio;let ie,oe,re,ae,le,ce,ue="default";async function de(t){if(t&&t!==ue){try{await se.setSinkId(t),ue=t}catch(t){return!1}return!0}}async function fe(t){let e=0;for(const n of t){if(n.deviceId===ue)return e;e++}return-1}async function pe(){return(await navigator.mediaDevices.enumerateDevices()).filter((t=>"audiooutput"===t.kind))}async function he(){navigator.mediaDevices.addEventListener("devicechange",(async t=>{rem.emit("audioDeviceChange",(await t.target.enumerateDevices()).filter((t=>"audiooutput"===t.kind)))}))}function me(){const t=ie.delay.delayTime,e=ie.fader.fadeIn;return le.gain.setValueAtTime(.001,oe.currentTime+t),le.gain.exponentialRampToValueAtTime(1,oe.currentTime+e+t),new Promise((n=>{setTimeout((()=>{n()}),1e3*(t+e))}))}function ge(){store.set("process",ie),rem&&rem.emit("processUpdate",ie)}function ve(t){re.delayTime.value=t,ie.delay.delayTime=t,ge()}function $e(t){ae.gain.linearRampToValueAtTime(t,oe.currentTime),ie.gain.gain=t,ge()}function ye(t){ce.pan.value=t,ie.stereoPanner.pan=t,ge()}he();class we{static audioCtx=new AudioContext;static audioElement=new Audio;static em=new ne;static on(t,e){this.em.on(t,e)}on(t,e){we.on(t,e)}static async play(){return this.em.emit("play"),hooks.send("thumbar:pause"),await Promise.all([this.audioElement.play(),me()])}play(){return we.play()}static pause(){(function(){const t=ie.delay.delayTime,e=ie.fader.fadeOut;return le.gain.setValueAtTime(1,oe.currentTime+t),le.gain.exponentialRampToValueAtTime(.001,oe.currentTime+e+t),new Promise((n=>{setTimeout((()=>{n()}),1e3*(t+e))}))})().then((()=>{this.audioElement.pause()})),hooks.send("thumbar:play"),this.em.emit("pause")}pause(){we.pause()}static seek(t){if("number"!=typeof t)return this.audioElement.currentTime;this.audioElement.currentTime=t,this.em.emit("seek")}seek(t){return we.seek(t)}static load(t){return t&&(this.audioElement.src=t),this.audioElement.src}load(t){return we.load(t)}async loadData(t){t.onLoadMetadata=t=>{we.metadata=t,rem.emit("metadata",t)},we.audioData=t,this.load(await t.url()),this.onDataLoaded()}onDataLoaded(){}static volume(t){if(void 0===t)return this.audioElement.volume;"number"!=typeof t||(t>0?(this.audioElement.muted=!1,this.audioElement.volume=t):this.audioElement.muted=!0)}volume(t){return we.volume(t)}static duration(){return this.audioElement.duration||this.audioData?.data.dt/1e3||0}duration(){return we.duration()}static isPlaying(){return!this.audioElement.paused}isPlaying(){return we.isPlaying()}static metadata={};getMetadata(){return Object.assign({},we.metadata)}}we.audioElement.addEventListener("ended",(()=>{we.em.emit("ended")})),we.audioElement.onloadedmetadata=()=>{rem.emit("setControlsContent",we.audioData)};const xe=we.audioCtx.createMediaElementSource(we.audioElement),be=we.audioCtx.createMediaStreamDestination();var ke;!function(t,e,n){oe=t,re=t.createDelay(),ae=t.createGain(),le=t.createGain(),ce=t.createStereoPanner(),e.connect(ae),ae.connect(ce),ce.connect(re),re.connect(le),le.connect(n)}(we.audioCtx,xe,be),ke=be.stream,se.srcObject=ke,se.play();const Ce=new we;window.Player=Ce,navigator.mediaSession.setActionHandler("play",(()=>Ce.play())),navigator.mediaSession.setActionHandler("pause",(()=>Ce.pause())),hooks.on("player:play",(()=>Ce.play())),hooks.on("player:pause",(()=>Ce.pause()));class _e{static listData=[];static getAudioData(t=this.current){return store.set("listElementPlaying",t),new Yt(this.listData[t])}static current=0;static mode=0;static MODE=0;static MODE_SINGLE_LOOP=1;static MODE_RANDOM=2;static loadList(t=[]){this.listData=t.slice(),store.set("listPlaying",this.listData),this.current=0}static getCurrentData(){return this.listData[this.current]}static query(t){let e=[];return this.listData.forEach(((n,s)=>{t.name&&n.name.includes(t.name)&&e.push(s)})),e}static next(){let t=this.current,e=this.listData.length;switch(this.mode){case 0:t=t===e-1?0:t+1;break;case 2:t=~~(Math.random()*e-1)}return this.current=t,this.getAudioData(t)}static prev(){let t=this.current,e=this.listData.length;switch(this.mode){case 0:t=t?t-1:e;break;case 2:t=~~(Math.random()*e-1)}return this.current=t,this.getAudioData(t)}static playNext(){const t=_e.next();t&&this.playByAudioData(t)}static playPrev(){const t=_e.prev();t&&this.playByAudioData(t)}static play(t=this.current){this.current=t;const e=this.getAudioData(t);this.playByAudioData(e)}static async load(t){this.current=t;const e=this.getAudioData(t);await Ce.loadData(e),rem.emit("loadedContent"),rem.emit("setControlsContent",e)}static playByAudioData(t){Ce.loadData(t).then((async()=>{await Ce.play(),rem.emit("loadedContent")})),rem.emit("setControlsContent",t)}}function Le(t){let e,n,s,i,r,a,l,c,u,d,f,p,h,m,g,v,$,y,w,x,b,k,_,L,P,T,z,j,O,V,I,F,H,W,q,X,Y,G,J,K,Q,Z,tt,nt,st,it,ot,rt,at=(t[1].title||"暂未播放歌曲")+"",lt=(t[1].artist||"")+"",ut=t[2]?"":"";function dt(e){t[21](e)}let ft={isUrl:!!t[1].album,avatar:t[1].artwork?t[1].artwork[0].src:"R",width:56,height:56,radius:"4px"};function pt(e){t[25](e)}void 0!==t[3]&&(ft.ctx=t[3]),i=new Xt({props:ft}),et.push((()=>Et(i,"ctx",dt))),i.$on("loaded",t[11]);let ht={width:200};function mt(e){t[27](e)}void 0!==t[5]&&(ht.value=t[5]),X=new Kt({props:ht}),et.push((()=>Et(X,"value",pt))),X.$on("mousedown",t[18]),X.$on("mousemove",t[20]),X.$on("mouseup",t[19]);let gt={cssStyle:"margin-right: 8px;"};return void 0!==t[8]&&(gt.value=t[8]),Z=new Kt({props:gt}),et.push((()=>Et(Z,"value",mt))),Z.$on("mousedown",t[16]),Z.$on("mousemove",t[16]),Z.$on("mouseup",t[17]),{c(){e=S("div"),n=S("div"),s=S("div"),At(i.$$.fragment),a=M(),l=S("div"),c=S("div"),u=D(at),d=M(),f=S("div"),p=D(lt),h=M(),m=S("div"),g=S("div"),v=S("div"),$=D(""),w=M(),x=S("div"),b=D(""),_=M(),L=S("div"),P=D(ut),T=M(),z=S("div"),z.textContent="",j=M(),O=S("div"),V=D(""),F=M(),H=S("div"),W=S("span"),W.textContent="0:00",q=M(),At(X.$$.fragment),G=M(),J=S("span"),J.textContent="0:00",K=M(),Q=S("div"),At(Z.$$.fragment),nt=M(),st=S("div"),st.textContent="",U(s,"class","avatar-container svelte-1nalff2"),U(c,"class","title svelte-1nalff2"),U(f,"class","subtitle svelte-1nalff2"),U(l,"class","row txt svelte-1nalff2"),U(n,"class","column header edge svelte-1nalff2"),U(v,"class",y="btn big btn-nb"+(t[7]?" active":"")+" svelte-1nalff2"),U(x,"class",k="btn big btn-nb"+(t[0].mode?" disable":"")+" svelte-1nalff2"),U(L,"class","btn big btn-big svelte-1nalff2"),U(z,"class","btn big btn-nb svelte-1nalff2"),U(O,"class",I="btn big btn-nb"+(t[6]?" active":"")+" svelte-1nalff2"),U(g,"class","column"),B(g,"margin","4px 0px"),U(W,"class","time svelte-1nalff2"),U(J,"class","time svelte-1nalff2"),U(H,"class","column"),B(H,"width","100%"),U(m,"class","row center svelte-1nalff2"),U(st,"class","btn big btn-nb svelte-1nalff2"),U(Q,"class","column edge svelte-1nalff2"),B(Q,"flex-direction","row-reverse"),U(e,"class","column c svelte-1nalff2")},m(o,r){E(o,e,r),C(e,n),C(n,s),Pt(i,s,null),C(n,a),C(n,l),C(l,c),C(c,u),C(l,d),C(l,f),C(f,p),C(e,h),C(e,m),C(m,g),C(g,v),C(v,$),C(g,w),C(g,x),C(x,b),C(g,_),C(g,L),C(L,P),C(g,T),C(g,z),C(g,j),C(g,O),C(O,V),C(m,F),C(m,H),C(H,W),t[24](W),C(H,q),Pt(X,H,null),C(H,G),C(H,J),t[26](J),C(e,K),C(e,Q),Pt(Z,Q,null),C(Q,nt),C(Q,st),t[29](e),it=!0,ot||(rt=[R(v,"click",t[22]),R(x,"click",t[13]),R(L,"click",t[12]),R(z,"click",t[14]),R(O,"click",t[23]),R(st,"click",t[28])],ot=!0)},p(t,e){const n={};2&e[0]&&(n.isUrl=!!t[1].album),2&e[0]&&(n.avatar=t[1].artwork?t[1].artwork[0].src:"R"),!r&&8&e[0]&&(r=!0,n.ctx=t[3],ct((()=>r=!1))),i.$set(n),(!it||2&e[0])&&at!==(at=(t[1].title||"暂未播放歌曲")+"")&&N(u,at),(!it||2&e[0])&&lt!==(lt=(t[1].artist||"")+"")&&N(p,lt),(!it||128&e[0]&&y!==(y="btn big btn-nb"+(t[7]?" active":"")+" svelte-1nalff2"))&&U(v,"class",y),(!it||1&e[0]&&k!==(k="btn big btn-nb"+(t[0].mode?" disable":"")+" svelte-1nalff2"))&&U(x,"class",k),(!it||4&e[0])&&ut!==(ut=t[2]?"":"")&&N(P,ut),(!it||64&e[0]&&I!==(I="btn big btn-nb"+(t[6]?" active":"")+" svelte-1nalff2"))&&U(O,"class",I);const s={};!Y&&32&e[0]&&(Y=!0,s.value=t[5],ct((()=>Y=!1))),X.$set(s);const o={};!tt&&256&e[0]&&(tt=!0,o.value=t[8],ct((()=>tt=!1))),Z.$set(o)},i(t){it||(xt(i.$$.fragment,t),xt(X.$$.fragment,t),xt(Z.$$.fragment,t),it=!0)},o(t){bt(i.$$.fragment,t),bt(X.$$.fragment,t),bt(Z.$$.fragment,t),it=!1},d(n){n&&A(e),St(i),t[24](null),St(X),t[26](null),St(Z),t[29](null),ot=!1,o(rt)}}}function Ee(t){let e=~~(t%60);return e<10&&(e="0"+e),`${~~(t/60)}:${e}`}function Ae(t,e,n){let s,i,o,r={},a=!1,l=1;te.addObserver((function(t){this.apply(),n(1,r=t)})),window.__getColorInfo=function(t,e,n,s){let i=4*(e*(s-1)+n);return(t=t.data).slice(i,i+4)},window.__setColor=function(t,e,n=1){if(!e)return;let s=CanvasCtx;const i=e.width,o=e.height;Canvas.width=i,Canvas.height=o,s.drawImage(e,0,0);const r=s.getImageData(0,0,i,o),a=i/2,l=o/2,c=i/4,u=a+c,d=o/4,f=l+d;let p=__getColorInfo(r,i,c,d),h=__getColorInfo(r,i,u,d),m=__getColorInfo(r,i,a,l),g=__getColorInfo(r,i,c,f),v=__getColorInfo(r,i,u,f),$=[];for(let t=0;t<4;t++){let e=(p[t]+h[t]+m[t]+g[t]+v[t])/5;$[t]=~~e}$=function(t,e,n){t/=255,e/=255,n/=255;var s,i,o=Math.min(t,e,n),r=Math.max(t,e,n),a=(o+r)/2,l=r-o;if(r==o)s=0,i=0;else{switch(i=a>.5?l/(2-r-o):l/(r+o),r){case t:s=(e-n)/l+(e<n?6:0);break;case e:s=2+(n-t)/l;break;case n:s=4+(t-e)/l}s=Math.round(60*s)}return[s,i=Math.round(100*i),a=Math.round(100*a)]}(...$);const y=`hsla(${$[0]},${$[1]>40?40:$[1]}%,${$[2]>50?50:$[2]}%, ${n})`;return t.style.setProperty("--color",y),y};let c=0;function u(){if(Ce.load())return a?Ce.pause():Ce.play()}rem.on("setControlsContent",(async function(t){te.title(t.title()),te.album(t.album().name),te.artist(t.artist().reduce(((t,e)=>[...t,e.name]),[]).join("; ")),te.artwork(0,{src:t.album().picUrl}),te.notifyObservers(te.getMetadataConfig())})),rem.on("loadedContent",(()=>{l=Ce.duration(),n(10,v.innerText=Ee(l),v),s&&(n(5,c=0),clearInterval(s)),s=setInterval((()=>{if(m)return;let t=Ce.seek();n(5,c=t/l*100),n(9,g.innerText=Ee(t),g)}),500)})),rem.on("playerReady",(async t=>{t.on("play",(()=>n(2,a=!0))),t.on("pause",(()=>n(2,a=!1))),t.on("ended",(()=>_e.playNext()));let e=await store.get("listPlaying"),s=await store.get("listElementPlaying");e&&"number"==typeof s&&(_e.loadList(e),_e.load(s))})),window.addEventListener("keypress",(t=>{" "===t.key&&u()}));let d,f=!1,p=!1;function h(){return f?n(0,_e.mode=1,_e):p?n(0,_e.mode=2,_e):void n(0,_e.mode=0,_e)}(async()=>{n(8,d=await store.get("volume")||50)&&rem.once("playerReady",(()=>{Ce.volume(d/100)}))})();var m=!1;let g,v;new Array(5);return[_e,r,a,i,o,c,f,p,d,g,v,function(){__setColor(o,i)},u,function(){_e.playPrev()},function(){_e.playNext()},h,function(t){const e=+t.detail;Ce.volume(e/100)},function(){store.set("volume",d)},function(){m=!0},function(t){m=!1;try{Ce.seek(t.detail/100*l)}catch(t){}},function(t){m&&n(9,g.innerText=Ee(t.detail/100*l),g)},function(t){i=t,n(3,i)},()=>{n(7,p=!p),h()},()=>{n(6,f=!f),h()},function(t){et[t?"unshift":"push"]((()=>{g=t,n(9,g)}))},function(t){c=t,n(5,c)},function(t){et[t?"unshift":"push"]((()=>{v=t,n(10,v)}))},function(t){d=t,n(8,d)},()=>{window.rem.emit("tunnerOpen")},function(t){et[t?"unshift":"push"]((()=>{o=t,n(4,o)}))}]}navigator.mediaSession.setActionHandler("nexttrack",(()=>_e.playNext())),navigator.mediaSession.setActionHandler("previoustrack",(()=>_e.playPrev())),hooks.on("player:previous",(()=>_e.playPrev())),hooks.on("player:next",(()=>_e.playNext()));class Pe extends Mt{constructor(t){super(),Dt(this,t,Ae,Le,a,{},null,[-1,-1])}}function Se(e){let n;return{c(){n=S("div")},m(t,e){E(t,n,e)},p:t,i:t,o:t,d(t){t&&A(n)}}}class De extends Mt{constructor(t){super(),Dt(this,t,null,Se,a,{})}}function Me(t,e,n){return new Promise(((s,i)=>{let o=t.animate(e,n);o.onfinish=()=>s(o),o.onremove=()=>i(o)}))}function Te(t){let e,s,i,o;const r=[t[1]];var a=t[0];function l(t){let e={};for(let t=0;t<r.length;t+=1)e=n(e,r[t]);return{props:e}}return a&&(i=new a(l())),{c(){e=S("div"),s=S("div"),i&&At(i.$$.fragment),U(s,"class","innerWindow row svelte-uddjc1"),U(e,"class","container row svelte-uddjc1")},m(n,r){E(n,e,r),C(e,s),i&&Pt(i,s,null),t[4](s),o=!0},p(t,[e]){const n=2&e?_t(r,[Lt(t[1])]):{};if(a!==(a=t[0])){if(i){yt();const t=i;bt(t.$$.fragment,1,0,(()=>{St(t,1)})),wt()}a?(i=new a(l()),At(i.$$.fragment),xt(i.$$.fragment,1),Pt(i,s,null)):i=null}else a&&i.$set(n)},i(t){o||(i&&xt(i.$$.fragment,t),o=!0)},o(t){i&&bt(i.$$.fragment,t),o=!1},d(n){n&&A(e),i&&St(i),t[4](null)}}}function Re(t,e,n){let s,i=De,o={};return Y((()=>{new MutationObserver((()=>{rem.emit("pageContentChange")})).observe(s,{childList:!0,subtree:!0,attributes:!1})})),[i,o,s,async function(t,e){await Me(s,[{opacity:1,transform:"scale(1)"},{opacity:0,transform:"scale(1.06)"}],{duration:60,ease:"cubic-bezier(0.95, 0.05, 0.795, 0.035)",fill:"forwards"}),function(t,e){if(i===t)return n(0,i=De),n(1,o=e),void setTimeout((()=>{n(0,i=t)}));n(1,o=e),n(0,i=t)}(t,e),requestIdleCallback((async()=>{await Me(s,[{opacity:0,transform:"scale(0.96)"},{opacity:1,transform:"scale(1)"}],{duration:80,ease:"cubic-bezier(0.19, 1, 0.22, 1)",fill:"forwards"}),rem.emit("pageSwipeAnimFinish")}))},function(t){et[t?"unshift":"push"]((()=>{s=t,n(2,s)}))}]}class ze extends Mt{constructor(t){super(),Dt(this,t,Re,Te,a,{display:3})}get display(){return this.$$.ctx[3]}}function Ue(t){let e,n;const s=t[6].default,i=u(s,t,t[5],null);return{c(){e=S("div"),i&&i.c(),U(e,"class","container svelte-1mqptgy"),U(e,"style",t[1])},m(s,o){E(s,e,o),i&&i.m(e,null),t[7](e),n=!0},p(t,[o]){i&&i.p&&(!n||32&o)&&p(i,s,t,t[5],n?f(s,t[5],o,null):h(t[5]),null),(!n||2&o)&&U(e,"style",t[1])},i(t){n||(xt(i,t),n=!0)},o(t){bt(i,t),n=!1},d(n){n&&A(e),i&&i.d(n),t[7](null)}}}function Ne(t,e,n){let{$$slots:s={},$$scope:i}=e,{measureMeter:o}=e,{cssStyle:r}=e;return t.$$set=t=>{"measureMeter"in t&&n(0,o=t.measureMeter),"cssStyle"in t&&n(1,r=t.cssStyle),"$$scope"in t&&n(5,i=t.$$scope)},[o,r,function(t){o.offsetHeight&&o.offsetWidth&&t({width:o.offsetWidth,height:o.offsetHeight}),new MutationObserver(((e,n)=>{n.disconnect();try{t({width:o.offsetWidth,height:o.offsetHeight})}catch(t){}})).observe(o,{childList:!0,subtree:!0,attributes:!0})},function(){o.setAttribute("__force-update__",""),o.removeAttribute("__force-update__")},function(){return{width:o.offsetWidth,height:o.offsetHeight}},i,s,function(t){et[t?"unshift":"push"]((()=>{o=t,n(0,o)}))}]}class je extends Mt{constructor(t){super(),Dt(this,t,Ne,Ue,a,{measureMeter:0,cssStyle:1,measure:2,forceUpdate:3,currentSize:4})}get measure(){return this.$$.ctx[2]}get forceUpdate(){return this.$$.ctx[3]}get currentSize(){return this.$$.ctx[4]}}function Be(t){let e,n,s,i,o,r,a,l;const c=t[16].default,d=u(c,t,t[15],null);return{c(){e=S("div"),n=S("div"),s=S("div"),d&&d.c(),i=M(),o=S("div"),r=S("div"),U(s,"class","meter svelte-1cafsvz"),B(s,"width","100%"),U(n,"class","restrict-container svelte-1cafsvz"),U(r,"class","thumb svelte-1cafsvz"),B(r,"--height",t[6]+"px"),B(r,"--top",t[9]+"px"),B(r,"min-height",t[0]+"px"),U(o,"class",a="track "+(t[8]?"hover":"")+" "+(t[7]?"hide":"")+" svelte-1cafsvz"),U(e,"class","out-container svelte-1cafsvz")},m(a,c){E(a,e,c),C(e,n),C(n,s),d&&d.m(s,null),t[17](s),t[18](n),C(e,i),C(e,o),C(o,r),t[19](r),t[20](o),t[21](e),l=!0},p(t,e){d&&d.p&&(!l||32768&e[0])&&p(d,c,t,t[15],l?f(c,t[15],e,null):h(t[15]),null),(!l||64&e[0])&&B(r,"--height",t[6]+"px"),(!l||512&e[0])&&B(r,"--top",t[9]+"px"),(!l||1&e[0])&&B(r,"min-height",t[0]+"px"),(!l||384&e[0]&&a!==(a="track "+(t[8]?"hover":"")+" "+(t[7]?"hide":"")+" svelte-1cafsvz"))&&U(o,"class",a)},i(t){l||(xt(d,t),l=!0)},o(t){bt(d,t),l=!1},d(n){n&&A(e),d&&d.d(n),t[17](null),t[18](null),t[19](null),t[20](null),t[21](null)}}}function Oe(t,e,n){let s,i,o,r,a,l,c,u,d,f,{$$slots:p={},$$scope:h}=e,{minThumbHeight:m=12}=e,g=0,v=!1;function $(){n(9,b=g!==m?r.scrollTop/c*d:(d-g)/(c-l)*r.scrollTop)}function y(){l=s.offsetHeight,d=o.offsetHeight,c=i.offsetHeight,u=c?Math.min(l/c,1):1,n(6,g=u*d),g<m&&(n(6,g=m),u=d?Math.min(g/d,1):1),n(7,v=u>=1),f=o&&o.getBoundingClientRect().top,$(),M("afterUpdated")}let w=!1;function x(t){t=Math.min(Math.max(g/2,t),d-g/2),$(),C((t-g/2)/(d-g))}Y((async()=>{o.addEventListener("mouseenter",(()=>{n(8,w=!0)})),o.addEventListener("mouseleave",(()=>{L||n(8,w=!1)})),rem.on("pageContentChange",y),rem.on("scroll",x),rem.on("scroll-up",k)})),G((()=>{rem.off("pageContentChange",y),rem.off("scroll-up",k),rem.off("scroll",x)}));let b=0;async function k(t){if(!s)return;const e=await store.get("stickScrollSpeedRatio");let n=e?e[e[0]+1].value:.6;C((r.scrollTop+t*n)/c),$()}function C(t){t=Math.min(Math.max(0,t),1),r.scrollTo({top:t*(c||0)}),$()}let _=0,L=!1;function E(t){L=!0;let e=t.offsetY;e=t.pageY-f,C((e-g/2)/d),_=t.offsetY-b}function A(t){t.stopPropagation(),n(8,w=!0),_=t.offsetY,L=!0}function P(t){_=0,L=!1,t.path.includes(o)||n(8,w=!1)}function S(t){if(!L)return;C((t.pageY-f-_)/d)}function D(t){t.stopPropagation();C(Math.max(Math.min(r.scrollTop+t.deltaY,c),0)/c)}const M=J();return Y((()=>{window.addEventListener("resize",y),o.addEventListener("mousedown",E),a.addEventListener("mousedown",A),document.addEventListener("mouseup",P),document.addEventListener("mousemove",S),s.addEventListener("wheel",D,{passive:!0})})),G((()=>{window.removeEventListener("resize",y),o.removeEventListener("mousedown",E),a.removeEventListener("mousedown",A),document.removeEventListener("mouseup",P),document.removeEventListener("mousemove",S),s.removeEventListener("wheel",D)})),t.$$set=t=>{"minThumbHeight"in t&&n(0,m=t.minThumbHeight),"$$scope"in t&&n(15,h=t.$$scope)},[m,s,i,o,r,a,g,v,w,b,y,function(){return!!r},function(){return(r?.scrollTop||0)/(c||1)},function(t){C(t)},function(t){r&&n(4,r.scrollTop=t,r)},h,p,function(t){et[t?"unshift":"push"]((()=>{i=t,n(2,i)}))},function(t){et[t?"unshift":"push"]((()=>{r=t,n(4,r)}))},function(t){et[t?"unshift":"push"]((()=>{a=t,n(5,a)}))},function(t){et[t?"unshift":"push"]((()=>{o=t,n(3,o)}))},function(t){et[t?"unshift":"push"]((()=>{s=t,n(1,s)}))}]}class Ve extends Mt{constructor(t){super(),Dt(this,t,Oe,Be,a,{minThumbHeight:0,update:10,prepared:11,getOffsetRatio:12,setOffsetRatio:13,scrollTo:14},null,[-1,-1])}get update(){return this.$$.ctx[10]}get prepared(){return this.$$.ctx[11]}get getOffsetRatio(){return this.$$.ctx[12]}get setOffsetRatio(){return this.$$.ctx[13]}get scrollTo(){return this.$$.ctx[14]}}function Ie(t,{delay:n=0,duration:s=400,easing:i=e}={}){const o=+getComputedStyle(t).opacity;return{delay:n,duration:s,easing:i,css:t=>"opacity: "+t*o}}function Fe(t,e,n){const s=t.slice();return s[8]=e[n],s[10]=n,s}function He(t){let e,n,s=t[0][t[10]]+"";return{c(){e=S("div"),n=D(s),U(e,"class","t txt svelte-17bu6no"),B(e,"width",t[8]+"%")},m(t,s){E(t,e,s),C(e,n)},p(t,e){1&e&&s!==(s=t[0][t[10]]+"")&&N(n,s)},d(t){t&&A(e)}}}function We(e){let n,s,i,r,a=e[5],l=[];for(let t=0;t<a.length;t+=1)l[t]=He(Fe(e,a,t));return{c(){n=S("div");for(let t=0;t<l.length;t+=1)l[t].c();U(n,"class",s="column tile"+(e[1]?" selected":"")+(e[2]?" focus":"")+" svelte-17bu6no")},m(t,s){E(t,n,s);for(let t=0;t<l.length;t+=1)l[t].m(n,null);i||(r=[R(n,"click",e[3]),R(n,"dblclick",e[4])],i=!0)},p(t,[e]){if(33&e){let s;for(a=t[5],s=0;s<a.length;s+=1){const i=Fe(t,a,s);l[s]?l[s].p(i,e):(l[s]=He(i),l[s].c(),l[s].m(n,null))}for(;s<l.length;s+=1)l[s].d(1);l.length=a.length}6&e&&s!==(s="column tile"+(t[1]?" selected":"")+(t[2]?" focus":"")+" svelte-17bu6no")&&U(n,"class",s)},i:t,o:t,d(t){t&&A(n),P(l,t),i=!1,o(r)}}}function qe(t,e,n){let s=J();let{location:i=[]}=e,{data:o=[]}=e,{selected:r=!1}=e,{focus:a=!1}=e,l=function(t){let e=new Array(t.length).fill(0);return(t=[...t]).push(100),e.forEach(((e,n,s)=>{s[n]=t[n+1]-t[n]})),e}(i);return t.$$set=t=>{"location"in t&&n(6,i=t.location),"data"in t&&n(0,o=t.data),"selected"in t&&n(1,r=t.selected),"focus"in t&&n(2,a=t.focus)},[o,r,a,function(t){s("click",t)},function(t){s("dbclick",t)},l,i]}class Xe extends Mt{constructor(t){super(),Dt(this,t,qe,We,a,{location:6,data:0,selected:1,focus:2})}}function Ye(t,e,n){const s=t.slice();return s[10]=e[n],s[12]=n,s}function Ge(t){let e,n,s;function i(e){t[6](e)}let o={data:[t[12]+1,t[10].name,t[10].ar.reduce(Ke,[]).join(" / "),t[10].al.name],selected:t[2].has(t[12]),focus:~t[3]&&t[3]};return void 0!==t[0]&&(o.location=t[0]),e=new Xe({props:o}),et.push((()=>Et(e,"location",i))),e.$on("click",(function(){return t[7](t[12])})),e.$on("dbclick",(function(){return t[8](t[12])})),{c(){At(e.$$.fragment)},m(t,n){Pt(e,t,n),s=!0},p(s,i){t=s;const o={};2&i&&(o.data=[t[12]+1,t[10].name,t[10].ar.reduce(Ke,[]).join(" / "),t[10].al.name]),4&i&&(o.selected=t[2].has(t[12])),8&i&&(o.focus=~t[3]&&t[3]),!n&&1&i&&(n=!0,o.location=t[0],ct((()=>n=!1))),e.$set(o)},i(t){s||(xt(e.$$.fragment,t),s=!0)},o(t){bt(e.$$.fragment,t),s=!1},d(t){St(e,t)}}}function Je(t){let e,n,s=t[1],i=[];for(let e=0;e<s.length;e+=1)i[e]=Ge(Ye(t,s,e));const o=t=>bt(i[t],1,1,(()=>{i[t]=null}));return{c(){for(let t=0;t<i.length;t+=1)i[t].c();e=T()},m(t,s){for(let e=0;e<i.length;e+=1)i[e].m(t,s);E(t,e,s),n=!0},p(t,[n]){if(63&n){let r;for(s=t[1],r=0;r<s.length;r+=1){const o=Ye(t,s,r);i[r]?(i[r].p(o,n),xt(i[r],1)):(i[r]=Ge(o),i[r].c(),xt(i[r],1),i[r].m(e.parentNode,e))}for(yt(),r=s.length;r<i.length;r+=1)o(r);wt()}},i(t){if(!n){for(let t=0;t<s.length;t+=1)xt(i[t]);n=!0}},o(t){i=i.filter(Boolean);for(let t=0;t<i.length;t+=1)bt(i[t]);n=!1},d(t){P(i,t),t&&A(e)}}}const Ke=(t,e)=>[...t,e.name];function Qe(t,e,n){let s=J(),{listData:i=[]}=e,{location:o=[]}=e,{selections:r=new Set}=e,{focus:a=-1}=e;function l(t){s("click",{listData:i,i:t})}function c(t){s("dbclick",{listData:i,i:t})}var u;Y((()=>{s("mount")})),u=()=>{i.length>0&&s("update")},X().$$.after_update.push(u);return t.$$set=t=>{"listData"in t&&n(1,i=t.listData),"location"in t&&n(0,o=t.location),"selections"in t&&n(2,r=t.selections),"focus"in t&&n(3,a=t.focus)},[o,i,r,a,l,c,function(t){o=t,n(0,o)},t=>l(t),t=>c(t)]}class Ze extends Mt{constructor(t){super(),Dt(this,t,Qe,Je,a,{listData:1,location:0,selections:2,focus:3})}}function tn(t){let e,n,s;return{c(){e=S("textarea"),U(e,"type",t[0]),U(e,"id",t[1]),e.value=t[2],U(e,"maxlength",t[4]),U(e,"style",t[5]),U(e,"placeholder",t[7]),U(e,"spellcheck",t[8]),U(e,"class","svelte-188f7of")},m(i,o){E(i,e,o),t[17](e),n||(s=[R(e,"focus",t[12]),R(e,"change",t[14]),R(e,"input",t[15]),R(e,"blur",t[13])],n=!0)},p(t,n){1&n&&U(e,"type",t[0]),2&n&&U(e,"id",t[1]),4&n&&(e.value=t[2]),16&n&&U(e,"maxlength",t[4]),32&n&&U(e,"style",t[5]),128&n&&U(e,"placeholder",t[7]),256&n&&U(e,"spellcheck",t[8])},d(i){i&&A(e),t[17](null),n=!1,o(s)}}}function en(t){let e,n,s;return{c(){e=S("input"),U(e,"type",t[0]),U(e,"id",t[1]),e.value=t[2],U(e,"style",t[5]),U(e,"placeholder",t[7]),U(e,"class","svelte-188f7of")},m(i,o){E(i,e,o),t[16](e),n||(s=[R(e,"focus",t[12]),R(e,"change",t[14]),R(e,"input",t[15]),R(e,"blur",t[13])],n=!0)},p(t,n){1&n&&U(e,"type",t[0]),2&n&&U(e,"id",t[1]),4&n&&e.value!==t[2]&&(e.value=t[2]),32&n&&U(e,"style",t[5]),128&n&&U(e,"placeholder",t[7])},d(i){i&&A(e),t[16](null),n=!1,o(s)}}}function nn(e){let n,s;function i(t,e){return t[3]?en:tn}let o=i(e),r=o(e);return{c(){n=S("div"),r.c(),U(n,"class",s=(e[6]?"full-border":"input")+(e[11]?" focus":"")+" svelte-188f7of"),U(n,"style",e[9])},m(t,e){E(t,n,e),r.m(n,null)},p(t,[e]){o===(o=i(t))&&r?r.p(t,e):(r.d(1),r=o(t),r&&(r.c(),r.m(n,null))),2112&e&&s!==(s=(t[6]?"full-border":"input")+(t[11]?" focus":"")+" svelte-188f7of")&&U(n,"class",s),512&e&&U(n,"style",t[9])},i:t,o:t,d(t){t&&A(n),r.d()}}}function sn(t,e,n){let s,{type:i="text"}=e,{id:o="default-id"}=e,{value:r=""}=e,{singleLine:a=!0}=e,{maxLength:l=999999}=e,{cssText:c=""}=e,{fullBorder:u=!1}=e,{placeholder:d=""}=e,{spellcheck:f=!1}=e,{containerStyle:p=""}=e,h=J(),m=!1;return t.$$set=t=>{"type"in t&&n(0,i=t.type),"id"in t&&n(1,o=t.id),"value"in t&&n(2,r=t.value),"singleLine"in t&&n(3,a=t.singleLine),"maxLength"in t&&n(4,l=t.maxLength),"cssText"in t&&n(5,c=t.cssText),"fullBorder"in t&&n(6,u=t.fullBorder),"placeholder"in t&&n(7,d=t.placeholder),"spellcheck"in t&&n(8,f=t.spellcheck),"containerStyle"in t&&n(9,p=t.containerStyle)},[i,o,r,a,l,c,u,d,f,p,s,m,function(){n(11,m=!0),h("focus")},function(){n(11,m=!1),h("blur")},function(){h("change",s.value)},function(){h("input",s.value)},function(t){et[t?"unshift":"push"]((()=>{s=t,n(10,s)}))},function(t){et[t?"unshift":"push"]((()=>{s=t,n(10,s)}))}]}class on extends Mt{constructor(t){super(),Dt(this,t,sn,nn,a,{type:0,id:1,value:2,singleLine:3,maxLength:4,cssText:5,fullBorder:6,placeholder:7,spellcheck:8,containerStyle:9})}}function rn(t,e,n){const s=t.slice();return s[48]=e[n],s[50]=n,s}function an(t,e,n){const s=t.slice();return s[51]=e[n],s[50]=n,s}function ln(t){let e,n,s,i,o=t[51]+"";return{c(){e=S("div"),n=D(o),U(e,"index",s=t[50]),U(e,"class",i=g(t[4]===t[50]?"selected":"")+" svelte-lznlow")},m(t,s){E(t,e,s),C(e,n)},p(t,n){16&n[0]&&i!==(i=g(t[4]===t[50]?"selected":"")+" svelte-lznlow")&&U(e,"class",i)},d(t){t&&A(e)}}}function cn(t){let e,n,s,i,o,r,a,l,c,u,d,f=t[0].names,p=[];for(let e=0;e<f.length;e+=1)p[e]=un(rn(t,f,e));function h(e){t[26](e)}function m(e){t[27](e)}function g(e){t[28](e)}let v={};return void 0!==t[5]&&(v.listData=t[5]),void 0!==t[8]&&(v.location=t[8]),void 0!==t[9]&&(v.selections=t[9]),o=new Ze({props:v}),et.push((()=>Et(o,"listData",h))),et.push((()=>Et(o,"location",m))),et.push((()=>Et(o,"selections",g))),o.$on("update",t[20]),o.$on("click",t[15]),o.$on("dbclick",t[16]),{c(){e=S("div"),n=S("div");for(let t=0;t<p.length;t+=1)p[t].c();s=M(),i=S("div"),At(o.$$.fragment),U(n,"class","Row splitter svelte-lznlow"),B(n,"width","calc(100% - 44px)"),B(n,"margin","0px 24px"),U(i,"class","Column list svelte-lznlow"),U(e,"class","Column c svelte-lznlow")},m(r,a){E(r,e,a),C(e,n);for(let t=0;t<p.length;t+=1)p[t].m(n,null);t[25](n),C(e,s),C(e,i),Pt(o,i,null),t[29](e),c=!0,u||(d=R(n,"mousedown",t[14]),u=!0)},p(t,e){if(8327&e[0]){let s;for(f=t[0].names,s=0;s<f.length;s+=1){const i=rn(t,f,s);p[s]?p[s].p(i,e):(p[s]=un(i),p[s].c(),p[s].m(n,null))}for(;s<p.length;s+=1)p[s].d(1);p.length=f.length}const s={};!r&&32&e[0]&&(r=!0,s.listData=t[5],ct((()=>r=!1))),!a&&256&e[0]&&(a=!0,s.location=t[8],ct((()=>a=!1))),!l&&512&e[0]&&(l=!0,s.selections=t[9],ct((()=>l=!1))),o.$set(s)},i(t){c||(xt(o.$$.fragment,t),c=!0)},o(t){bt(o.$$.fragment,t),c=!1},d(n){n&&A(e),P(p,n),t[25](null),St(o),t[29](null),u=!1,d()}}}function un(t){let e,n,s,i,o,r=t[48]+"";function a(){return t[24](t[50])}return{c(){e=S("div"),n=D(r),U(e,"class",s="splitterTab"+(t[1]===t[50]?t[2]?" backwards":" forwards":"")+" svelte-lznlow"),B(e,"width",t[7][t[50]]+"%")},m(t,s){E(t,e,s),C(e,n),i||(o=R(e,"click",a),i=!0)},p(i,o){t=i,1&o[0]&&r!==(r=t[48]+"")&&N(n,r),6&o[0]&&s!==(s="splitterTab"+(t[1]===t[50]?t[2]?" backwards":" forwards":"")+" svelte-lznlow")&&U(e,"class",s),128&o[0]&&B(e,"width",t[7][t[50]]+"%")},d(t){t&&A(e),i=!1,o()}}}function dn(t){let e,n,s=0===t[4]&&cn(t);return{c(){s&&s.c(),e=T()},m(t,i){s&&s.m(t,i),E(t,e,i),n=!0},p(t,n){0===t[4]?s?(s.p(t,n),16&n[0]&&xt(s,1)):(s=cn(t),s.c(),xt(s,1),s.m(e.parentNode,e)):s&&(yt(),bt(s,1,1,(()=>{s=null})),wt())},i(t){n||(xt(s),n=!0)},o(t){bt(s),n=!1},d(t){s&&s.d(t),t&&A(e)}}}function fn(t){let e,n,s,i,r,a,l,c,u,d,f,p,h,m,g,v,$,y,w,x,b,k,_,L,T,z,j,O,V,I,F,H,W,q=t[3].trackCount+"",X=t[3].title+"",Y=t[3].subtitle+"";i=new Xt({props:{width:292,height:292,radius:"0",avatar:t[3].imgUrl}}),T=new on({props:{type:"text",placeholder:"  搜索列表",fullBorder:!0}}),T.$on("input",t[22]);let G=t[12],J=[];for(let e=0;e<G.length;e+=1)J[e]=ln(an(t,G,e));return I=new Ve({props:{$$slots:{default:[dn]},$$scope:{ctx:t}}}),t[30](I),{c(){e=S("div"),n=S("div"),s=S("div"),At(i.$$.fragment),r=M(),a=S("div"),l=D(q),c=D(" 首"),u=M(),d=S("div"),f=S("div"),p=S("h3"),h=D(X),m=M(),g=S("div"),v=D(Y),$=M(),y=S("div"),w=S("div"),w.textContent=" 播放",x=M(),b=S("div"),b.textContent="",k=M(),_=S("div"),L=S("div"),At(T.$$.fragment),z=M(),j=S("div");for(let t=0;t<J.length;t+=1)J[t].c();O=M(),V=S("div"),At(I.$$.fragment),B(s,"z-index","-1"),B(s,"height","250px"),U(a,"class","bread-crumb svelte-lznlow"),U(p,"class","title svelte-lznlow"),U(g,"class","subtitle svelte-lznlow"),U(w,"class","btn big accent svelte-lznlow"),U(b,"class","btn big bright svelte-lznlow"),U(y,"class","Row"),U(d,"class","Column rowl svelte-lznlow"),U(n,"class","header Column svelte-lznlow"),B(n,"overflow","hidden"),B(n,"position","relative"),U(j,"class","Row view-display svelte-lznlow"),U(L,"class","nav Row svelte-lznlow"),B(V,"height","calc(100% - 60px)"),U(_,"class","playlistContent svelte-lznlow"),U(_,"style",""),U(e,"class","Row"),B(e,"width","100%"),B(e,"height","100%")},m(o,A){E(o,e,A),C(e,n),C(n,s),Pt(i,s,null),C(n,r),C(n,a),C(a,l),C(a,c),C(n,u),C(n,d),C(d,f),C(f,p),C(p,h),C(f,m),C(f,g),C(g,v),C(d,$),C(d,y),C(y,w),C(y,x),C(y,b),C(e,k),C(e,_),C(_,L),Pt(T,L,null),C(L,z),C(L,j);for(let t=0;t<J.length;t+=1)J[t].m(j,null);C(_,O),C(_,V),Pt(I,V,null),F=!0,H||(W=[R(w,"click",t[17]),R(b,"click",t[18]),R(j,"click",t[23])],H=!0)},p(t,e){const n={};if(8&e[0]&&(n.avatar=t[3].imgUrl),i.$set(n),(!F||8&e[0])&&q!==(q=t[3].trackCount+"")&&N(l,q),(!F||8&e[0])&&X!==(X=t[3].title+"")&&N(h,X),(!F||8&e[0])&&Y!==(Y=t[3].subtitle+"")&&N(v,Y),4112&e[0]){let n;for(G=t[12],n=0;n<G.length;n+=1){const s=an(t,G,n);J[n]?J[n].p(s,e):(J[n]=ln(s),J[n].c(),J[n].m(j,null))}for(;n<J.length;n+=1)J[n].d(1);J.length=G.length}const s={};2039&e[0]|4194304&e[1]&&(s.$$scope={dirty:e,ctx:t}),I.$set(s)},i(t){F||(xt(i.$$.fragment,t),xt(T.$$.fragment,t),xt(I.$$.fragment,t),F=!0)},o(t){bt(i.$$.fragment,t),bt(T.$$.fragment,t),bt(I.$$.fragment,t),F=!1},d(n){n&&A(e),St(i),St(T),P(J,n),t[30](null),St(I),H=!1,o(W)}}}function pn(t){let e=[...t],n=new Array(t.length).fill(0);return e.push(100),n.forEach(((t,n,s)=>{s[n]=e[n+1]-e[n]})),n}function hn(t,e){return t.toLowerCase().includes(e.toLowerCase())}function mn(t,e,n){let{header:s=null}=e;const i=()=>1;let{listSplitter:o=store.getSync("playlist/splitter")||{location:[0,16,44,72],names:["功能","歌曲名","艺术家","专辑"]}}=e,r=store.getSync("playlist/displayType")||0;G((()=>{store.set("playlist/displayType",r)})),o.sortFunc=[i,(t,e)=>e.name>t.name||-1,(t,e)=>e.ar[0].name>t.ar[0].name||-1,(t,e)=>e.al.name>t.al.name||-1];let a,l,{listData:c=[]}=e,{sortBy:u=0}=e,{forwards:d=!0}=e,f=[];function p(t){l=[...t],t.sort(o.sortFunc[u]),!d&&t.reverse(),n(5,f=t)}Y((()=>{c instanceof Promise?rem.once("pageSwipeAnimFinish",(()=>c.then((t=>p(t))))):p(c)}));let h=!1;function m(t){if(!h)return!1;let e;"number"!=typeof t&&(t=o.names.indexOf(t)),t===u&&n(2,d=!d),e=o.sortFunc[t]||i,n(1,u=t),store.set("playlist/sortBy",u),store.set("playlist/forwards",d);let s=[...l];s.sort(e),d||(s=s.reverse()),setTimeout((()=>{n(5,f=s)}))}m(u);let g,v,$=pn(o.location),y=o.location,w=!1,x=0,b=0,k=0;document.addEventListener("mousemove",(function(t){w&&(h=!1,k=t.screenX-b,v.style.transform=`translateX(${k}px)`)})),document.addEventListener("mouseup",(function(){if(w){w=!1,v.style.transform="";let t=k/x*100;n(8,y[g]+=t,y),n(7,$=pn(y));const e=f;n(5,f=[]),setTimeout((()=>{n(5,f=e)})),b=k=g=0,v=null,store.set("playlist/splitter",{location:y,names:o.names})}}));let C=!1;document.addEventListener("keydown",(t=>{t.ctrlKey&&(C=!0)})),document.addEventListener("keyup",(t=>{t.ctrlKey&&(C=!1)}));let _,L=new Set;Y((()=>{contextMap.set(_,{"刷新":()=>{const{name:t,props:e}=Pager.getContext(),n=Pager.getContext().class;Pager.openNew(t,n,e,!0)}})})),G((()=>{contextMap.delete(_)}));const E=((t,e=600)=>{let n;return(...s)=>{n||(n=setTimeout((()=>{t(...s),n=null}),e))}})((async t=>{const e=await async function(t){if(!t)return[];const e=(await c).slice();let n=[];for(const s of e){const{name:e,al:i,ar:o}=s;if(hn(e,t))n.push(s);else if(hn(i.name||"",t))n.push(s);else for(const e of o)if(hn(e.name||"",t)){n.push(s);break}}return n}(t);e.length?p(e):p(await c)}));let A,P=!1;Pager.beforeSwitch((()=>{if(A?.prepared()){const{save:t}=Pager.getContext();t.offsetRatio=A.getOffsetRatio()}rem.emit("__pageUnfold")}));return t.$$set=t=>{"header"in t&&n(3,s=t.header),"listSplitter"in t&&n(0,o=t.listSplitter),"listData"in t&&n(21,c=t.listData),"sortBy"in t&&n(1,u=t.sortBy),"forwards"in t&&n(2,d=t.forwards)},[o,u,d,s,r,f,a,$,y,L,_,A,["",""],m,function(t){h=!0,v=t.target,v!==a&&(g=[...v.parentNode.children].indexOf(v),0!==g&&(x=t.path[1].offsetWidth,w=!0,t.target.offsetLeft,b=t.screenX))},function(t){const e=t.detail.i;C?(L.add(e),n(9,L)):n(9,L=(new Set).add(e))},async function(t){const{listData:e,i:n}=t.detail,s=_e.query({name:e[n].name});if(!s.length)return _e.loadList(e),void _e.play(n);_e.play(s[0])},async function(){let t=(await c).slice(0);_e.loadList(t),_e.play(0)},async function(){let t=(await c).slice(0);_e.loadList(t.sort((()=>Math.random()-.5))),_e.play(0)},E,async function(){P||(await at(),async function(){if(A?.prepared()){const{save:t}=Pager.getContext();A.setOffsetRatio(t.offsetRatio)}}(),P=!0)},c,t=>{E(t.detail)},t=>{n(4,r=+t.target.getAttribute("index")??r)},t=>m(t),function(t){et[t?"unshift":"push"]((()=>{a=t,n(6,a)}))},function(t){f=t,n(5,f)},function(t){y=t,n(8,y)},function(t){L=t,n(9,L)},function(t){et[t?"unshift":"push"]((()=>{_=t,n(10,_)}))},function(t){et[t?"unshift":"push"]((()=>{A=t,n(11,A)}))}]}class gn extends Mt{constructor(t){super(),Dt(this,t,mn,fn,a,{header:3,listSplitter:0,listData:21,sortBy:1,forwards:2},null,[-1,-1])}}function vn(t,e,n){const s=t.slice();return s[30]=e[n],s[32]=n,s}function $n(t,e,n){const s=t.slice();return s[33]=e[n],s[32]=n,s}function yn(t,e,n){const s=t.slice();return s[35]=e[n],s[32]=n,s}function wn(t){let e,n,s,i,r,a,l,c,u,d,f,p,h=t[35].name+"";function m(){return t[17](t[35])}function g(){return t[18](t[35])}return{c(){e=S("div"),n=S("div"),s=M(),i=S("div"),i.textContent="",r=M(),a=S("div"),l=S("div"),c=D(h),u=M(),U(n,"class","avatar svelte-17bejt8"),B(n,"background-image","url("+t[35].coverImgUrl+")"),U(i,"class","btn light FAB svelte-17bejt8"),U(a,"class","row title svelte-17bejt8"),U(e,"class","card row active svelte-17bejt8"),U(e,"title",d=t[35].name)},m(t,o){E(t,e,o),C(e,n),C(e,s),C(e,i),C(e,r),C(e,a),C(a,l),C(l,c),C(e,u),f||(p=[R(i,"click",z(m)),R(i,"mouseenter",z(Pn)),R(i,"mouseleave",z(Sn)),R(e,"click",g)],f=!0)},p(s,i){t=s,1&i[0]&&B(n,"background-image","url("+t[35].coverImgUrl+")"),1&i[0]&&h!==(h=t[35].name+"")&&N(c,h),1&i[0]&&d!==(d=t[35].name)&&U(e,"title",d)},d(t){t&&A(e),f=!1,o(p)}}}function xn(t){let e,n=t[0],s=[];for(let e=0;e<n.length;e+=1)s[e]=wn(yn(t,n,e));return{c(){e=S("div");for(let t=0;t<s.length;t+=1)s[t].c();U(e,"class","column card-container svelte-17bejt8")},m(t,n){E(t,e,n);for(let t=0;t<s.length;t+=1)s[t].m(e,null)},p(t,i){if(34819&i[0]){let o;for(n=t[0],o=0;o<n.length;o+=1){const r=yn(t,n,o);s[o]?s[o].p(r,i):(s[o]=wn(r),s[o].c(),s[o].m(e,null))}for(;o<s.length;o+=1)s[o].d(1);s.length=n.length}},d(t){t&&A(e),P(s,t)}}}function bn(t){let e,n,s,i,o,r,a,l,c,u=t[5].showAllArtists?"收起":"查看",d=t[8].count+"",f=t[8],p=[];for(let e=0;e<f.length;e+=1)p[e]=kn($n(t,f,e));return{c(){e=S("div"),n=S("div"),s=D(u),i=D("全部 "),o=D(d),r=D(" 位艺术家"),a=M();for(let t=0;t<p.length;t+=1)p[t].c();U(n,"class","btn light"),B(n,"position","absolute"),B(n,"left","200px"),B(n,"top","0px"),B(n,"border-radius","6px"),U(e,"class","Row"),U(e,"row-title","收藏的艺术家"),B(e,"--item-height","200px"),B(e,"--item-width","200px"),B(e,"align-self","flex-start")},m(u,d){E(u,e,d),C(e,n),C(n,s),C(n,i),C(n,o),C(n,r),C(e,a);for(let t=0;t<p.length;t+=1)p[t].m(e,null);l||(c=R(n,"click",t[21]),l=!0)},p(t,n){if(32&n[0]&&u!==(u=t[5].showAllArtists?"收起":"查看")&&N(s,u),256&n[0]&&d!==(d=t[8].count+"")&&N(o,d),256&n[0]){let s;for(f=t[8],s=0;s<f.length;s+=1){const i=$n(t,f,s);p[s]?p[s].p(i,n):(p[s]=kn(i),p[s].c(),p[s].m(e,null))}for(;s<p.length;s+=1)p[s].d(1);p.length=f.length}},d(t){t&&A(e),P(p,t),l=!1,c()}}}function kn(t){let e,n,s,i,r,a,l,u,d,f,p,h,m,g,v,$=t[33].name+"",y=(t[33].alias.length?t[33].alias[0]:"")+"";return{c(){e=S("div"),n=S("div"),n.textContent="",s=M(),i=S("img"),l=M(),u=S("div"),d=D($),f=M(),p=S("div"),h=D(y),m=M(),U(n,"class","btn light FAB svelte-17bejt8"),U(i,"class","artist svelte-17bejt8"),U(i,"draggable","false"),c(i.src,r=t[33].picUrl)||U(i,"src",r),U(i,"alt",a=t[33].name),U(i,"decoding","async"),U(u,"class","name title svelte-17bejt8"),U(p,"class","name svelte-17bejt8"),U(e,"class","Column artist-c active svelte-17bejt8")},m(t,o){E(t,e,o),C(e,n),C(e,s),C(e,i),C(e,l),C(e,u),C(u,d),C(e,f),C(e,p),C(p,h),C(e,m),g||(v=[R(n,"click",z(Tn)),R(n,"mouseenter",z(Pn)),R(n,"mouseleave",z(Sn)),R(i,"load",Mn)],g=!0)},p(t,e){256&e[0]&&!c(i.src,r=t[33].picUrl)&&U(i,"src",r),256&e[0]&&a!==(a=t[33].name)&&U(i,"alt",a),256&e[0]&&$!==($=t[33].name+"")&&N(d,$),256&e[0]&&y!==(y=(t[33].alias.length?t[33].alias[0]:"")+"")&&N(h,y)},d(t){t&&A(e),g=!1,o(v)}}}function Cn(t){let e,n,s,i,o,r,a,l,c,u=t[5].showAllAlbums?"收起":"查看",d=t[9].count+"",f=t[9],p=[];for(let e=0;e<f.length;e+=1)p[e]=_n(vn(t,f,e));return{c(){e=S("div"),n=S("div"),s=D(u),i=D("全部 "),o=D(d),r=D(" 张专辑"),a=M();for(let t=0;t<p.length;t+=1)p[t].c();U(n,"class","btn light"),B(n,"position","absolute"),B(n,"left","180px"),B(n,"top","0px"),B(n,"border-radius","6px"),U(e,"class","Row"),U(e,"row-title","收藏的专辑"),B(e,"--item-height","200px"),B(e,"--item-width","200px"),B(e,"align-self","flex-start")},m(u,d){E(u,e,d),C(e,n),C(n,s),C(n,i),C(n,o),C(n,r),C(e,a);for(let t=0;t<p.length;t+=1)p[t].m(e,null);l||(c=R(n,"click",t[22]),l=!0)},p(t,n){if(32&n[0]&&u!==(u=t[5].showAllAlbums?"收起":"查看")&&N(s,u),512&n[0]&&d!==(d=t[9].count+"")&&N(o,d),35328&n[0]){let s;for(f=t[9],s=0;s<f.length;s+=1){const i=vn(t,f,s);p[s]?p[s].p(i,n):(p[s]=_n(i),p[s].c(),p[s].m(e,null))}for(;s<p.length;s+=1)p[s].d(1);p.length=f.length}},d(t){t&&A(e),P(p,t),l=!1,c()}}}function _n(t){let e,n,s,i,r,a,l,u,d,f,p,h,m=t[30].name+"";function g(){return t[23](t[30])}function v(){return t[24](t[30])}return{c(){e=S("div"),n=S("div"),n.textContent="",s=M(),i=S("img"),l=M(),u=S("div"),d=D(m),f=M(),U(n,"class","btn light FAB svelte-17bejt8"),U(i,"class","album svelte-17bejt8"),B(i,"opacity","0"),B(i,"transition","opacity 1s"),U(i,"draggable","false"),c(i.src,r=t[30].picUrl)||U(i,"src",r),U(i,"alt",a=t[30].name),U(i,"decoding","async"),U(u,"class","name title svelte-17bejt8"),B(u,"width","calc(100% - 16px)"),U(e,"class","Column artist-c al active svelte-17bejt8")},m(t,o){E(t,e,o),C(e,n),C(e,s),C(e,i),C(e,l),C(e,u),C(u,d),C(e,f),p||(h=[R(n,"click",z(g)),R(n,"mouseenter",z(Pn)),R(n,"mouseleave",z(Sn)),R(i,"load",Mn),R(e,"click",v)],p=!0)},p(e,n){t=e,512&n[0]&&!c(i.src,r=t[30].picUrl)&&U(i,"src",r),512&n[0]&&a!==(a=t[30].name)&&U(i,"alt",a),512&n[0]&&m!==(m=t[30].name+"")&&N(d,m)},d(t){t&&A(e),p=!1,o(h)}}}function Ln(t){let e,n,s,i,o,r,a,l,u,d,f,p,h,m,g,v;d=new je({props:{cssStyle:"width: 100%",$$slots:{default:[xn]},$$scope:{ctx:t}}}),t[19](d);let $=t[8].length&&bn(t),y=t[9].length&&Cn(t);return{c(){e=S("div"),n=S("div"),s=S("img"),o=M(),r=S("div"),a=D("▼"),u=M(),At(d.$$.fragment),p=M(),$&&$.c(),h=M(),y&&y.c(),U(s,"class","collection-bgc svelte-17bejt8"),c(s.src,i=t[4])||U(s,"src",i),U(s,"alt",""),U(r,"title","展开"),U(r,"class",l="toggle"+(t[7]?"":" unfold")+" svelte-17bejt8"),U(n,"class",f="collection"+(t[7]?"":" unfold")+" svelte-17bejt8"),U(n,"data-title","我的歌单"),U(e,"class","row")},m(i,l){E(i,e,l),C(e,n),C(n,s),t[16](s),C(n,o),C(n,r),C(r,a),C(n,u),Pt(d,n,null),t[20](n),C(e,p),$&&$.m(e,null),C(e,h),y&&y.m(e,null),m=!0,g||(v=R(r,"click",t[12]),g=!0)},p(t,o){(!m||16&o[0]&&!c(s.src,i=t[4]))&&U(s,"src",i),(!m||128&o[0]&&l!==(l="toggle"+(t[7]?"":" unfold")+" svelte-17bejt8"))&&U(r,"class",l);const a={};1&o[0]|64&o[1]&&(a.$$scope={dirty:o,ctx:t}),d.$set(a),(!m||128&o[0]&&f!==(f="collection"+(t[7]?"":" unfold")+" svelte-17bejt8"))&&U(n,"class",f),t[8].length?$?$.p(t,o):($=bn(t),$.c(),$.m(e,h)):$&&($.d(1),$=null),t[9].length?y?y.p(t,o):(y=Cn(t),y.c(),y.m(e,null)):y&&(y.d(1),y=null)},i(t){m||(xt(d.$$.fragment,t),m=!0)},o(t){bt(d.$$.fragment,t),m=!1},d(n){n&&A(e),t[16](null),t[19](null),St(d),t[20](null),$&&$.d(),y&&y.d(),g=!1,v()}}}function En(t){let e,n;return e=new Ve({props:{$$slots:{default:[Ln]},$$scope:{ctx:t}}}),t[25](e),{c(){At(e.$$.fragment)},m(t,s){Pt(e,t,s),n=!0},p(t,n){const s={};1021&n[0]|64&n[1]&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){n||(xt(e.$$.fragment,t),n=!0)},o(t){bt(e.$$.fragment,t),n=!1},d(n){t[25](null),St(e,n)}}}function An(t){let e=store.getSync("playlist"+t);return e||async function(t){let e=await store.get("cookie"),n=await store.get("playlist"+t);let s=(await NeteaseApi.getPlaylistDetail(t,e)).body.playlist.trackIds.reduce(((t,e)=>[...t,e.id]),[]);return n=(await NeteaseApi.getSongDetail(s,e)).body.songs,store.setCache("playlist"+t,n),n}(t)}function Pn(){this.parentNode.classList.remove("active")}function Sn(){this.parentNode.classList.add("active")}function Dn(t){let e=store.getSync("al"+t);return e||new Promise((async n=>{e=(await NeteaseApi.getAlbumDetail(t,await store.get("cookie"))).body.songs,store.set("al"+t,e),n(e)}))}function Mn(t){t.target.style.opacity=1}const Tn=()=>{};function Rn(t,e,n){let s,i,o,{playlists:r=[]}=e;Y((async function(){let t=await store.get("dailyDesktop");if(n(3,i.onload=()=>{__setColor(s,i,1),s.style.setProperty("--start","220px")},i),t&&(new Date).getTime()-t.timeStamp<576e5)return n(4,o=t.url);t=await server.fetchJson("https://cn.bing.com/HPImageArchive.aspx?format=js&idx=0&n=1");const e="https://www.bing.com"+t.images[0].url;n(4,o=e),store.set("dailyDesktop",{timeStamp:(new Date).getTime(),url:e})}));let a=Pager.getContext().save;async function l(t,e){e=await e(),Pager.openNew(t,gn,e)}!async function(){if(a.__playlists)return n(0,r=a.__playlists);const t=await store.get("cookie"),e=(await store.get("profile")).userId,s=await NeteaseApi.getUserPlaylist(e,t);200==s.status&&n(5,a.__playlists=n(0,r=s.body.playlist),a)}();let c,u=!0;function d(){n(7,u=!u),c.measure((({height:t})=>{s.style.setProperty("--height",t+160+"px"),requestAnimationFrame((()=>{h.update()}))}))}Pager.beforeSwitch((()=>{const{save:t}=Pager.getContext();t&&(t.collectionFolded=u)})),Y((()=>{contextMap.set(s,{"复制图片链接":"","图片另存为":""});const{save:t}=Pager.getContext();t&&void 0!==t.collectionFolded&&(t.collectionFolded||d())})),G((()=>{contextMap.delete(s)}));let f=[];async function p(){let t=await async function(){let t=a.__artistSublist;if(!t){let t=await NeteaseApi.getArtistSublist(await store.get("cookie"),1);return t=await NeteaseApi.getArtistSublist(await store.get("cookie"),t.body.count),t.body.data.count=t.body.count,n(5,a.__artistSublist=t.body.data,a)}return t}();n(8,f=a.showAllArtists?t:t.slice(0,12)),n(8,f.count=t.count,f)}p();let h,m=[];async function g(t){const e=await async function(){let t=a.__alSublist;if(!t){let t=await NeteaseApi.getAlbumSublist(await store.get("cookie"),1);return t=await NeteaseApi.getAlbumSublist(await store.get("cookie"),t.body.count),t.body.data.count=t.body.count,n(5,a.__alSublist=t.body.data,a)}return t}();n(9,m=e.slice(0,t||e.count)),n(9,m.count=e.count,m)}async function v(t,e=0){let n=0===e?await An(t):await Dn(t);const s=_e.getCurrentData();if(_e.loadList(n),s){let t=_e.query({name:s.name});if(t.length)return _e.play(t[0])}_e.play(0)}a.showAllAlbums?g():g(12),Pager.beforeSwitch((()=>{if(h?.prepared()){const{save:t}=Pager.getContext();t.offsetRatio=h.getOffsetRatio()}})),Y((()=>{const{save:t}=Pager.getContext();requestIdleCallback((()=>h.setOffsetRatio(t.offsetRatio)))}));return t.$$set=t=>{"playlists"in t&&n(0,r=t.playlists)},[r,An,s,i,o,a,c,u,f,m,h,l,d,p,g,v,function(t){et[t?"unshift":"push"]((()=>{i=t,n(3,i)}))},t=>{v(t.id)},t=>{let e=t.id;l(t.name,(async()=>({header:{imgUrl:t.coverImgUrl,title:t.name,subtitle:`由${t.creator.nickname}创建`,playCount:t.playCount,trackCount:t.trackCount},listData:An(e),sortBy:await window.store.get("playlist/sortBy"),forwards:await window.store.get("playlist/forwards"),onTabDestroy(){!function(t){store.rm("playlist"+t)}(e)}})))},function(t){et[t?"unshift":"push"]((()=>{c=t,n(6,c)}))},function(t){et[t?"unshift":"push"]((()=>{s=t,n(2,s)}))},()=>{a.showAllArtists?(n(5,a.showAllArtists=!1,a),p()):(n(5,a.showAllArtists=!0,a),p())},()=>{a.showAllAlbums?(g(12),n(5,a.showAllAlbums=!1,a)):(g(),n(5,a.showAllAlbums=!0,a))},t=>{v(t.id,1)},t=>{let e=t.id;l(t.name,(async()=>({header:{imgUrl:t.picUrl,title:t.name,subtitle:`${t.artists.reduce(((t,e)=>[...t,e.name]),[]).join(" ")}`,playCount:t.playCount,trackCount:t.size},listData:Dn(e),sortBy:await window.store.get("playlist/sortBy"),forwards:await window.store.get("playlist/forwards"),onTabDestroy(){!function(t){store.rm("al"+t)}(e)}})))},function(t){et[t?"unshift":"push"]((()=>{h=t,n(10,h)}))}]}class zn extends Mt{constructor(t){super(),Dt(this,t,Rn,En,a,{playlists:0,getDetailX:1},null,[-1,-1])}get getDetailX(){return An}}function Un(e){let n;return{c(){n=S("div"),n.innerHTML="<h1>发现</h1>",U(n,"class","row")},m(t,e){E(t,n,e)},p:t,i:t,o:t,d(t){t&&A(n)}}}class Nn extends Mt{constructor(t){super(),Dt(this,t,null,Un,a,{})}}function jn(e){let n,s,i,r,a,l,c,u,d,f,p,h,m,g,v,$,y,w=e[0]?"":"";return{c(){n=S("div"),s=S("div"),i=S("div"),i.textContent="",r=M(),a=S("div"),l=D(w),c=M(),u=S("div"),u.textContent="⨉",p=M(),h=S("div"),m=S("div"),g=D("REM"),U(i,"class","column clk svelte-17abfmp"),U(a,"class","column clk small svelte-17abfmp"),B(a,"margin","0 4px"),U(u,"class","column clk red svelte-17abfmp"),U(s,"class",d="column btn-group appbtns"+(e[1]?" rev":"")+" svelte-17abfmp"),U(n,"class",f="column container "+(e[1]?"left":"right")+" svelte-17abfmp"),U(m,"class","title"+(window.rem.isBeta?" debug":"")+" svelte-17abfmp"),U(h,"class",v="column container "+(e[1]?"right":"left")+" svelte-17abfmp")},m(t,o){E(t,n,o),C(n,s),C(s,i),C(s,r),C(s,a),C(a,l),C(s,c),C(s,u),E(t,p,o),E(t,h,o),C(h,m),C(m,g),$||(y=[R(i,"click",Bn),R(a,"click",e[2]),R(u,"click",On)],$=!0)},p(t,[e]){1&e&&w!==(w=t[0]?"":"")&&N(l,w),2&e&&d!==(d="column btn-group appbtns"+(t[1]?" rev":"")+" svelte-17abfmp")&&U(s,"class",d),2&e&&f!==(f="column container "+(t[1]?"left":"right")+" svelte-17abfmp")&&U(n,"class",f),2&e&&v!==(v="column container "+(t[1]?"right":"left")+" svelte-17abfmp")&&U(h,"class",v)},i:t,o:t,d(t){t&&A(n),t&&A(p),t&&A(h),$=!1,o(y)}}}function Bn(){hooks.send("win:min")}function On(){hooks.send("win:close")}function Vn(t,e,n){let s=!1;hooks.on("win:max",(()=>{n(0,s=!0)})),hooks.on("win:unmax",(()=>{n(0,s=!1)}));let i=!1;return hooks.invoke("isMac").then((t=>{t&&n(1,i=!0)})),[s,i,function(){s?hooks.send("win:unmax"):hooks.send("win:max")}]}class In extends Mt{constructor(t){super(),Dt(this,t,Vn,jn,a,{})}}const Fn=t=>({}),Hn=t=>({...t[4]});function Wn(t){let e;const n=t[7].default,s=u(n,t,t[6],Hn);return{c(){s&&s.c()},m(t,n){s&&s.m(t,n),e=!0},p(t,i){s&&s.p&&(!e||80&i)&&p(s,n,t,t[6],(t=>16&t)(i)||!e?h(t[6]):f(n,t[6],i,Fn),Hn)},i(t){e||(xt(s,t),e=!0)},o(t){bt(s,t),e=!1},d(t){s&&s.d(t)}}}function qn(t){let e,s,i;const o=[t[4]];var r=t[0];function a(t){let e={};for(let t=0;t<o.length;t+=1)e=n(e,o[t]);return{props:e}}return r&&(e=new r(a())),{c(){e&&At(e.$$.fragment),s=T()},m(t,n){e&&Pt(e,t,n),E(t,s,n),i=!0},p(t,n){const i=16&n?_t(o,[Lt(t[4])]):{};if(r!==(r=t[0])){if(e){yt();const t=e;bt(t.$$.fragment,1,0,(()=>{St(t,1)})),wt()}r?(e=new r(a()),At(e.$$.fragment),xt(e.$$.fragment,1),Pt(e,s.parentNode,s)):e=null}else r&&e.$set(i)},i(t){i||(e&&xt(e.$$.fragment,t),i=!0)},o(t){e&&bt(e.$$.fragment,t),i=!1},d(t){t&&A(s),e&&St(e,t)}}}function Xn(t){let e,n,s,i,o,r;const a=[qn,Wn],l=[];function c(t,e){return t[0]?0:1}return n=c(t),s=l[n]=a[n](t),{c(){e=S("div"),s.c(),U(e,"class","container svelte-1mv98ub"),U(e,"style",t[1])},m(s,a){E(s,e,a),l[n].m(e,null),t[8](e),i=!0,o||(r=R(e,"mousedown",t[3]),o=!0)},p(t,[o]){let r=n;n=c(t),n===r?l[n].p(t,o):(yt(),bt(l[r],1,1,(()=>{l[r]=null})),wt(),s=l[n],s?s.p(t,o):(s=l[n]=a[n](t),s.c()),xt(s,1),s.m(e,null)),(!i||2&o)&&U(e,"style",t[1])},i(t){i||(xt(s),i=!0)},o(t){bt(s),i=!1},d(s){s&&A(e),l[n].d(),t[8](null),o=!1,r()}}}function Yn(t){t.animate({opacity:["0.4","0"]},200).onfinish=()=>{t.remove()}}function Gn(t,e,s){let{$$slots:i={},$$scope:o}=e,{rippleColor:r=""}=e,{component:a=null}=e,{cssStyle:l=""}=e,c=null;return t.$$set=t=>{s(4,e=n(n({},e),m(t))),"rippleColor"in t&&s(5,r=t.rippleColor),"component"in t&&s(0,a=t.component),"cssStyle"in t&&s(1,l=t.cssStyle),"$$scope"in t&&s(6,o=t.$$scope)},e=m(e),[a,l,c,function(t){!function(t,e,n,s){const{left:i,top:o}=t.getBoundingClientRect(),{pageX:r,pageY:a}=e,{offsetWidth:l,offsetHeight:c}=t,u=Math.sqrt(c**2+l**2)/2,d=document.createElement("div");d.style.position="absolute",d.style.borderRadius="50%",d.style.opacity="0.4",d.style.pointerEvents="none",t.appendChild(d),d.animate([{top:a-o+"px",left:r-i+"px",width:"0px",height:"0px",backgroundColor:`${s||"var(--controlColor)"}`},{top:c/2-u+"px",left:l/2-u+"px",width:2*u+"px",height:2*u+"px",backgroundColor:`${s||"var(--controlColor)"}`}],{duration:320,fill:"forwards",easing:"cubic-bezier(0.05, 0.7, 0.2, 1)"}).onfinish=()=>{"function"==typeof n&&n.call(d,d)}}(c,t,Yn,r)},e,r,o,i,function(t){et[t?"unshift":"push"]((()=>{c=t,s(2,c)}))}]}class Jn extends Mt{constructor(t){super(),Dt(this,t,Gn,Xn,a,{rippleColor:5,component:0,cssStyle:1})}}function Kn(e){let n,s,i,o,r;return{c(){n=S("img"),i=M(),o=S("h5"),r=D(e[6]),c(n.src,s=e[5])||U(n,"src",s),U(n,"width",228),U(n,"height",228),U(n,"draggable","false"),U(n,"alt"," "),B(n,"border-radius","24px")},m(t,s){E(t,n,s),e[13](n),E(t,i,s),E(t,o,s),C(o,r)},p(t,e){32&e&&!c(n.src,s=t[5])&&U(n,"src",s),64&e&&N(r,t[6])},i:t,o:t,d(t){t&&A(n),e[13](null),t&&A(i),t&&A(o)}}}function Qn(t){let e,n,s,i,r,a,l,c,u,d,f;return c=new Jn({props:{rippleColor:"#000",cssStyle:"border-radius: 8px;",$$slots:{default:[Zn]},$$scope:{ctx:t}}}),{c(){e=S("input"),s=M(),i=S("input"),a=M(),l=S("div"),At(c.$$.fragment),U(e,"type","text"),U(e,"class",n=g(t[2]&&"error")+" svelte-12m1k1q"),U(e,"placeholder","电话"),U(i,"type","password"),U(i,"class",r=g(t[2]&&"error")+" svelte-12m1k1q"),U(i,"placeholder","密码"),B(l,"padding","24px 0px 12px 0px")},m(n,o){E(n,e,o),j(e,t[0]),E(n,s,o),E(n,i,o),j(i,t[1]),E(n,a,o),E(n,l,o),Pt(c,l,null),u=!0,d||(f=[R(e,"input",t[11]),R(i,"input",t[12])],d=!0)},p(t,s){(!u||4&s&&n!==(n=g(t[2]&&"error")+" svelte-12m1k1q"))&&U(e,"class",n),1&s&&e.value!==t[0]&&j(e,t[0]),(!u||4&s&&r!==(r=g(t[2]&&"error")+" svelte-12m1k1q"))&&U(i,"class",r),2&s&&i.value!==t[1]&&j(i,t[1]);const o={};65536&s&&(o.$$scope={dirty:s,ctx:t}),c.$set(o)},i(t){u||(xt(c.$$.fragment,t),u=!0)},o(t){bt(c.$$.fragment,t),u=!1},d(t){t&&A(e),t&&A(s),t&&A(i),t&&A(a),t&&A(l),St(c),d=!1,o(f)}}}function Zn(e){let n,s,i;return{c(){n=S("div"),n.textContent="登陆",U(n,"class","column submit svelte-12m1k1q")},m(t,o){E(t,n,o),s||(i=R(n,"click",e[7]),s=!0)},p:t,d(t){t&&A(n),s=!1,i()}}}function ts(t){let e,n,s,i,o,r,a,l,c,u,d,f,p,h=t[8][t[3]]+"",m=t[8][t[3]?0:1]+"";const g=[Qn,Kn],v=[];function $(t,e){return t[3]?t[5]?1:-1:0}return~(c=$(t))&&(u=v[c]=g[c](t)),{c(){e=S("div"),n=S("h3"),s=D(h),i=D("登录 "),o=S("span"),r=D("使用"),a=D(m),l=M(),u&&u.c(),U(o,"class","span svelte-12m1k1q"),U(e,"class","row c svelte-12m1k1q")},m(u,h){E(u,e,h),C(e,n),C(n,s),C(n,i),C(n,o),C(o,r),C(o,a),C(e,l),~c&&v[c].m(e,null),d=!0,f||(p=R(o,"click",t[10]),f=!0)},p(t,[n]){(!d||8&n)&&h!==(h=t[8][t[3]]+"")&&N(s,h),(!d||8&n)&&m!==(m=t[8][t[3]?0:1]+"")&&N(a,m);let i=c;c=$(t),c===i?~c&&v[c].p(t,n):(u&&(yt(),bt(v[i],1,1,(()=>{v[i]=null})),wt()),~c?(u=v[c],u?u.p(t,n):(u=v[c]=g[c](t),u.c()),xt(u,1),u.m(e,null)):u=null)},i(t){d||(xt(u),d=!0)},o(t){bt(u),d=!1},d(t){t&&A(e),~c&&v[c].d(),f=!1,p()}}}function es(t,e,n){const s=Q("close")||(()=>{rem.emit("__openMinePage"),rem.emit("__updateLoginAvatar")});let i,o,r=!1;let a,l=0,c="",u="等待扫描";async function d(){const t=await NeteaseApi.loginViaQRCode(),e=t[0];n(5,c=t[1].body.data.qrimg);let s=async()=>{const t=await NeteaseApi.validQRLogin(e);if(1!==l)return;let i=()=>setTimeout((async()=>{await s()}),500);switch(n(6,u=t.body.message),t.body.code){case 801:i();break;case 800:d();break;case 802:n(4,a.style.opacity=.32,a),i();break;case 803:store.set("cookie",t.body.cookie),f()}};s()}async function f(){const t=await NeteaseApi.getUserAccount(await store.get("cookie"));store.set("profile",t.body.data.profile),s()}return[i,o,r,l,a,c,u,async function(){const t=await NeteaseApi.login(i,o);if(200!==t.body.code)return n(1,o=""),void n(2,r=!0);await Promise.all([store.set("profile",JSON.stringify(t.body.profile)),store.set("token",JSON.stringify(t.body.token)),store.set("cookie",t.cookie.join(""))]),f()},["手机","二维码"],d,()=>{n(3,l=l?0:1),l&&d()},function(){i=this.value,n(0,i)},function(){o=this.value,n(1,o)},function(t){et[t?"unshift":"push"]((()=>{a=t,n(4,a)}))}]}class ns extends Mt{constructor(t){super(),Dt(this,t,es,ts,a,{})}}function ss(t){let e,n,s,i,r,a,l,c;const d=t[11].default,m=u(d,t,t[10],null);return{c(){e=S("div"),n=S("div"),m&&m.c(),U(n,"class","container svelte-1p01wi3"),U(n,"style",s=t[1]+"; --blur-radius: "+t[3]+"px; --offset: "+t[4]+"px;"),U(e,"class","layer row svelte-1p01wi3")},m(s,o){E(s,e,o),C(e,n),m&&m.m(n,null),a=!0,l||(c=[v(i=t[6].call(null,n)),R(n,"click",z(t[12])),R(e,"click",z(t[5]))],l=!0)},p(t,e){m&&m.p&&(!a||1024&e)&&p(m,d,t,t[10],a?f(d,t[10],e,null):h(t[10]),null),(!a||26&e&&s!==(s=t[1]+"; --blur-radius: "+t[3]+"px; --offset: "+t[4]+"px;"))&&U(n,"style",s)},i(t){a||(xt(m,t),r&&r.end(1),a=!0)},o(t){bt(m,t),r=Ct(e,Ie,{duration:100}),a=!1},d(t){t&&A(e),m&&m.d(t),t&&r&&r.end(),l=!1,o(c)}}}function is(n){let s,i,a,l,c,d,m,g;const $=n[11].default,w=u($,n,n[10],null);return{c(){s=S("div"),w&&w.c(),U(s,"class","container svelte-1p01wi3"),U(s,"style",i="z-index:99999;"+n[1])},m(t,e){E(t,s,e),w&&w.m(s,null),d=!0,m||(g=[v(a=n[6].call(null,s)),R(s,"click",n[5])],m=!0)},p(t,e){w&&w.p&&(!d||1024&e)&&p(w,$,t,t[10],d?f($,t[10],e,null):h(t[10]),null),(!d||2&e&&i!==(i="z-index:99999;"+t[1]))&&U(s,"style",i)},i(n){d||(xt(w,n),lt((()=>{c&&c.end(1),l=function(n,s,i){let o,a,l=s(n,i),c=!1,u=0;function d(){o&&W(n,o)}function f(){const{delay:s=0,duration:i=300,easing:r=e,tick:f=t,css:p}=l||kt;p&&(o=H(n,0,1,i,s,r,p,u++)),f(0,1);const h=y()+s,m=h+i;a&&a.abort(),c=!0,lt((()=>gt(n,!0,"start"))),a=k((t=>{if(c){if(t>=m)return f(1,0),gt(n,!0,"end"),d(),c=!1;if(t>=h){const e=r((t-h)/i);f(e,1-e)}}return c}))}let p=!1;return{start(){p||(p=!0,W(n),r(l)?(l=l(),mt().then(f)):f())},invalidate(){p=!1},end(){c&&(d(),c=!1)}}}(s,Ie,{duration:120}),l.start()})),d=!0)},o(t){bt(w,t),l&&l.invalidate(),c=Ct(s,Ie,{duration:80}),d=!1},d(t){t&&A(s),w&&w.d(t),t&&c&&c.end(),m=!1,o(g)}}}function os(t){let e,n,s,i=t[0]&&!t[2]&&ss(t),o=t[0]&&t[2]&&is(t);return{c(){i&&i.c(),e=M(),o&&o.c(),n=T()},m(t,r){i&&i.m(t,r),E(t,e,r),o&&o.m(t,r),E(t,n,r),s=!0},p(t,[s]){t[0]&&!t[2]?i?(i.p(t,s),5&s&&xt(i,1)):(i=ss(t),i.c(),xt(i,1),i.m(e.parentNode,e)):i&&(yt(),bt(i,1,1,(()=>{i=null})),wt()),t[0]&&t[2]?o?(o.p(t,s),5&s&&xt(o,1)):(o=is(t),o.c(),xt(o,1),o.m(n.parentNode,n)):o&&(yt(),bt(o,1,1,(()=>{o=null})),wt())},i(t){s||(xt(i),xt(o),s=!0)},o(t){bt(i),bt(o),s=!1},d(t){i&&i.d(t),t&&A(e),o&&o.d(t),t&&A(n)}}}function rs(t,e,n){let{$$slots:s={},$$scope:i}=e;const o=J();function r(){o("layerClick")}K("close",r);let{showPopupWindow:a=!1}=e,{cssText:l=""}=e,{noLayer:c=!1}=e,{shadowBlurRadius:u=8}=e,{shadowOffset:d=2}=e;return t.$$set=t=>{"showPopupWindow"in t&&n(0,a=t.showPopupWindow),"cssText"in t&&n(1,l=t.cssText),"noLayer"in t&&n(2,c=t.noLayer),"shadowBlurRadius"in t&&n(3,u=t.shadowBlurRadius),"shadowOffset"in t&&n(4,d=t.shadowOffset),"$$scope"in t&&n(10,i=t.$$scope)},[a,l,c,u,d,r,function(t){return o("animIn",t),{destroy(){o("animOut",t)}}},function(t,e={}){return undefined.animate(t,e)},function(){n(0,a=!0)},function(){n(0,a=!1)},i,s,function(e){Z.call(this,t,e)}]}class as extends Mt{constructor(t){super(),Dt(this,t,rs,os,a,{showPopupWindow:0,cssText:1,noLayer:2,shadowBlurRadius:3,shadowOffset:4,animate:7,destroy:8,pop:9})}get animate(){return this.$$.ctx[7]}get destroy(){return this.$$.ctx[8]}get pop(){return this.$$.ctx[9]}}function ls(e){let n;return{c(){n=S("div"),B(n,"width","14px")},m(t,e){E(t,n,e)},p:t,i:t,o:t,d(t){t&&A(n)}}}function cs(t){let e,n,s;return n=new Xt({props:{size:t[1],isUrl:t[0],avatar:t[2],width:t[6],height:t[7]}}),{c(){e=S("div"),At(n.$$.fragment),U(e,"class","column leading svelte-emkyx5")},m(t,i){E(t,e,i),Pt(n,e,null),s=!0},p(t,e){const s={};2&e&&(s.size=t[1]),1&e&&(s.isUrl=t[0]),4&e&&(s.avatar=t[2]),64&e&&(s.width=t[6]),128&e&&(s.height=t[7]),n.$set(s)},i(t){s||(xt(n.$$.fragment,t),s=!0)},o(t){bt(n.$$.fragment,t),s=!1},d(t){t&&A(e),St(n)}}}function us(t){let e,n,s,i;function o(t,e){return t[4]?ps:fs}let r=o(t),a=r(t);const l=t[13].default,c=u(l,t,t[14],null);return{c(){e=S("div"),n=S("div"),a.c(),s=M(),c&&c.c(),U(n,"class","row align svelte-emkyx5"),U(n,"style",t[5]),U(e,"class","column"),B(e,"justify-content","space-between"),B(e,"width",t[9]?"calc(100% - 84px)":"calc(100% - 28px)")},m(t,o){E(t,e,o),C(e,n),a.m(n,null),C(e,s),c&&c.m(e,null),i=!0},p(t,s){r===(r=o(t))&&a?a.p(t,s):(a.d(1),a=r(t),a&&(a.c(),a.m(n,null))),(!i||32&s)&&U(n,"style",t[5]),c&&c.p&&(!i||16384&s)&&p(c,l,t,t[14],i?f(l,t[14],s,null):h(t[14]),null),(!i||512&s)&&B(e,"width",t[9]?"calc(100% - 84px)":"calc(100% - 28px)")},i(t){i||(xt(c,t),i=!0)},o(t){bt(c,t),i=!1},d(t){t&&A(e),a.d(),c&&c.d(t)}}}function ds(t){let e,n,s,i;function o(t,e){return t[4]?ms:hs}let r=o(t),a=r(t);const l=t[13].default,c=u(l,t,t[14],null);return{c(){e=S("div"),a.c(),n=M(),c&&c.c(),U(e,"class","row align svelte-emkyx5"),U(e,"style",s="width: "+(t[9]?"calc(100% - 84px)":"calc(100% - 28px)")+";"+t[5])},m(t,s){E(t,e,s),a.m(e,null),C(e,n),c&&c.m(e,null),i=!0},p(t,u){r===(r=o(t))&&a?a.p(t,u):(a.d(1),a=r(t),a&&(a.c(),a.m(e,n))),c&&c.p&&(!i||16384&u)&&p(c,l,t,t[14],i?f(l,t[14],u,null):h(t[14]),null),(!i||544&u&&s!==(s="width: "+(t[9]?"calc(100% - 84px)":"calc(100% - 28px)")+";"+t[5]))&&U(e,"style",s)},i(t){i||(xt(c,t),i=!0)},o(t){bt(c,t),i=!1},d(t){t&&A(e),a.d(),c&&c.d(t)}}}function fs(t){let e,n;return{c(){e=S("span"),n=D(t[3])},m(t,s){E(t,e,s),C(e,n)},p(t,e){8&e&&N(n,t[3])},d(t){t&&A(e)}}}function ps(t){let e,n,s,i,o;return{c(){e=S("span"),n=D(t[3]),s=M(),i=S("span"),o=D(t[4]),B(i,"font-size","small"),B(i,"color","#888")},m(t,r){E(t,e,r),C(e,n),E(t,s,r),E(t,i,r),C(i,o)},p(t,e){8&e&&N(n,t[3]),16&e&&N(o,t[4])},d(t){t&&A(e),t&&A(s),t&&A(i)}}}function hs(t){let e,n;return{c(){e=S("span"),n=D(t[3])},m(t,s){E(t,e,s),C(e,n)},p(t,e){8&e&&N(n,t[3])},d(t){t&&A(e)}}}function ms(t){let e,n,s,i,o;return{c(){e=S("span"),n=D(t[3]),s=M(),i=S("span"),o=D(t[4]),B(i,"font-size","small"),B(i,"color","#888")},m(t,r){E(t,e,r),C(e,n),E(t,s,r),E(t,i,r),C(i,o)},p(t,e){8&e&&N(n,t[3]),16&e&&N(o,t[4])},d(t){t&&A(e),t&&A(s),t&&A(i)}}}function gs(t){let e,n,s,i,r,a,l,c,u,d;const f=[cs,ls],p=[];function h(t,e){return t[9]?0:1}n=h(t),s=p[n]=f[n](t);const m=[ds,us],g=[];function v(t,e){return t[10]?0:1}return r=v(t),a=g[r]=m[r](t),{c(){e=S("div"),s.c(),i=M(),a.c(),U(e,"class",l="column c"+(t[8]?" cl":"")+" svelte-emkyx5")},m(s,o){E(s,e,o),p[n].m(e,null),C(e,i),g[r].m(e,null),c=!0,u||(d=[R(e,"click",t[11]),R(e,"mousedown",t[12])],u=!0)},p(t,o){let u=n;n=h(t),n===u?p[n].p(t,o):(yt(),bt(p[u],1,1,(()=>{p[u]=null})),wt(),s=p[n],s?s.p(t,o):(s=p[n]=f[n](t),s.c()),xt(s,1),s.m(e,i));let d=r;r=v(t),r===d?g[r].p(t,o):(yt(),bt(g[d],1,1,(()=>{g[d]=null})),wt(),a=g[r],a?a.p(t,o):(a=g[r]=m[r](t),a.c()),xt(a,1),a.m(e,null)),(!c||256&o&&l!==(l="column c"+(t[8]?" cl":"")+" svelte-emkyx5"))&&U(e,"class",l)},i(t){c||(xt(s),xt(a),c=!0)},o(t){bt(s),bt(a),c=!1},d(t){t&&A(e),p[n].d(),g[r].d(),u=!1,o(d)}}}function vs(t){let e,n;return e=new Jn({props:{cssStyle:"width: 100%",rippleColor:t[8]?"gray":"transparent",$$slots:{default:[gs]},$$scope:{ctx:t}}}),{c(){At(e.$$.fragment)},m(t,s){Pt(e,t,s),n=!0},p(t,[n]){const s={};256&n&&(s.rippleColor=t[8]?"gray":"transparent"),18431&n&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){n||(xt(e.$$.fragment,t),n=!0)},o(t){bt(e.$$.fragment,t),n=!1},d(t){St(e,t)}}}function $s(t,e,n){let{$$slots:s={},$$scope:i}=e;const o=J();let{isUrl:r=!0}=e,{size:a="normal"}=e,{avatar:l=""}=e,{data:c=""}=e,{extra:u=""}=e,{style:d=""}=e,{width:f}=e,{height:p}=e,{clickable:h=!0}=e,{useAvatar:m=!0}=e,{breakLine:g=!1}=e;return t.$$set=t=>{"isUrl"in t&&n(0,r=t.isUrl),"size"in t&&n(1,a=t.size),"avatar"in t&&n(2,l=t.avatar),"data"in t&&n(3,c=t.data),"extra"in t&&n(4,u=t.extra),"style"in t&&n(5,d=t.style),"width"in t&&n(6,f=t.width),"height"in t&&n(7,p=t.height),"clickable"in t&&n(8,h=t.clickable),"useAvatar"in t&&n(9,m=t.useAvatar),"breakLine"in t&&n(10,g=t.breakLine),"$$scope"in t&&n(14,i=t.$$scope)},[r,a,l,c,u,d,f,p,h,m,g,function(t){o("click",t)},function(t){o("mousedown",t)},s,i]}class ys extends Mt{constructor(t){super(),Dt(this,t,$s,vs,a,{isUrl:0,size:1,avatar:2,data:3,extra:4,style:5,width:6,height:7,clickable:8,useAvatar:9,breakLine:10})}}function ws(t,e,n){const s=t.slice();return s[6]=e[n],s}function xs(t,e,n){const s=t.slice();return s[9]=e[n],s}function bs(t){let e,n;return e=new ys({props:{useAvatar:!1,size:"small",isUrl:!1,data:t[9]}}),e.$on("click",(function(){r(t[4](t[6][t[9]]))&&t[4](t[6][t[9]]).apply(this,arguments)})),{c(){At(e.$$.fragment)},m(t,s){Pt(e,t,s),n=!0},p(n,s){t=n;const i={};8&s&&(i.data=t[9]),e.$set(i)},i(t){n||(xt(e.$$.fragment,t),n=!0)},o(t){bt(e.$$.fragment,t),n=!1},d(t){St(e,t)}}}function ks(t){let e,n,s,i,o=Object.keys(t[6]),r=[];for(let e=0;e<o.length;e+=1)r[e]=bs(xs(t,o,e));const a=t=>bt(r[t],1,1,(()=>{r[t]=null}));return{c(){e=S("div"),n=M();for(let t=0;t<r.length;t+=1)r[t].c();s=T(),U(e,"class","divider svelte-14ron6b")},m(t,o){E(t,e,o),E(t,n,o);for(let e=0;e<r.length;e+=1)r[e].m(t,o);E(t,s,o),i=!0},p(t,e){if(24&e){let n;for(o=Object.keys(t[6]),n=0;n<o.length;n+=1){const i=xs(t,o,n);r[n]?(r[n].p(i,e),xt(r[n],1)):(r[n]=bs(i),r[n].c(),xt(r[n],1),r[n].m(s.parentNode,s))}for(yt(),n=o.length;n<r.length;n+=1)a(n);wt()}},i(t){if(!i){for(let t=0;t<o.length;t+=1)xt(r[t]);i=!0}},o(t){r=r.filter(Boolean);for(let t=0;t<r.length;t+=1)bt(r[t]);i=!1},d(t){t&&A(e),t&&A(n),P(r,t),t&&A(s)}}}function Cs(t){let e,n,s,i,o,r=t[3],a=[];for(let e=0;e<r.length;e+=1)a[e]=ks(ws(t,r,e));const l=t=>bt(a[t],1,1,(()=>{a[t]=null}));return{c(){e=S("div");for(let t=0;t<a.length;t+=1)a[t].c();U(e,"class",n="container "+(t[0]?"display":"")+" svelte-14ron6b"),B(e,"--x",t[1]+"px"),B(e,"--y",t[2]+"px")},m(t,n){E(t,e,n);for(let t=0;t<a.length;t+=1)a[t].m(e,null);s=!0,i||(o=R(e,"click",_s),i=!0)},p(t,[i]){if(24&i){let n;for(r=t[3],n=0;n<r.length;n+=1){const s=ws(t,r,n);a[n]?(a[n].p(s,i),xt(a[n],1)):(a[n]=ks(s),a[n].c(),xt(a[n],1),a[n].m(e,null))}for(yt(),n=r.length;n<a.length;n+=1)l(n);wt()}(!s||1&i&&n!==(n="container "+(t[0]?"display":"")+" svelte-14ron6b"))&&U(e,"class",n),(!s||2&i)&&B(e,"--x",t[1]+"px"),(!s||4&i)&&B(e,"--y",t[2]+"px")},i(t){if(!s){for(let t=0;t<r.length;t+=1)xt(a[t]);s=!0}},o(t){a=a.filter(Boolean);for(let t=0;t<a.length;t+=1)bt(a[t]);s=!1},d(t){t&&A(e),P(a,t),i=!1,o()}}}const _s=t=>t.stopPropagation();function Ls(t,e,n){let{display:s=!1}=e,{x:i=0}=e,{y:o=0}=e,{data:r=[{}]}=e;return Q("layerEvents").on("disable",(()=>{n(0,s=!1)})),t.$$set=t=>{"display"in t&&n(0,s=t.display),"x"in t&&n(1,i=t.x),"y"in t&&n(2,o=t.y),"data"in t&&n(3,r=t.data)},[s,i,o,r,function(t){return"function"==typeof t?()=>{t.call(null),n(0,s=!1)}:()=>n(0,s=!1)}]}class Es extends Mt{constructor(t){super(),Dt(this,t,Ls,Cs,a,{display:0,x:1,y:2,data:3})}}function As(e){let n,s;return{c(){n=S("div"),U(n,"class",s="virt-cursor"+(e[1]?" active":"")+(e[2]?" enable":"")+" svelte-1biibe")},m(t,s){E(t,n,s),e[3](n)},p(t,[e]){6&e&&s!==(s="virt-cursor"+(t[1]?" active":"")+(t[2]?" enable":"")+" svelte-1biibe")&&U(n,"class",s)},i:t,o:t,d(t){t&&A(n),e[3](null)}}}function Ps(t,e,n){let{active:s=!1}=e,{enable:i=!1}=e,{htmlElement:o}=e;return t.$$set=t=>{"active"in t&&n(1,s=t.active),"enable"in t&&n(2,i=t.enable),"htmlElement"in t&&n(0,o=t.htmlElement)},[o,s,i,function(t){et[t?"unshift":"push"]((()=>{o=t,n(0,o)}))}]}class Ss extends Mt{constructor(t){super(),Dt(this,t,Ps,As,a,{active:1,enable:2,htmlElement:0})}}const Ds=0,Ms=1,Ts=4,Rs=5,zs=0,Us=1,Ns=3;class js{static map=new Map;HEAD={prev:null,next:null};END=this.HEAD;count=0;append(t,e){const n=this.END,s={prev:n,listener:t,rawListener:e,next:null};return s.prev=n,s.listener=t,s.rawListener=e,s.next=null,n.next=s,this.END=s,js.map.set(e||t,s),this.count++,this}prepend(t,e){const n=this.HEAD,s=n.next,i={prev:n,listener:t,rawListener:e,next:s};return n.next=i,s&&(s.prev=i),js.map.set(e||t,i),this.count++,this}delete(t){let e=js.map,n=e.get(t);if(!n)return;let s=n.prev;return s.next=n.next,n.next&&(n.next.prev=s),e.delete(t),this.count--,requestIdleCallback((()=>{n.prev=null,n.next=null})),this}deleteAll(){let t=this.HEAD;for(;t=t.next;)t.prev=null,t.next=null,js.map.delete(t.rawListener||t.listener);return this.HEAD.next=null,this.count=0,this}[Symbol.iterator](){let t=this.HEAD;return{next:()=>t.next?(t=t.next,{value:t,done:!1}):{value:t,done:!0}}}}class Bs{_events={};maxListeners=-1;thisArg=void 0;captureRejections=!1;setMaxListeners(t){return this.maxListeners=t,this}getMaxListeners(){return this.maxListeners}_addListener(t,e,n=!1){let s;if(!~this.maxListeners&&this.listenerCount(t)===this.maxListeners){const t=RangeError(`Exceeded maximum capacity(${this.maxListeners}).`);if(!this.listenerCount("error"))throw t;this._emitError(t)}this._events[t]||(this._events[t]=new js),s=this._events[t],n?s.prepend(e):s.append(e)}addListener(t,e){return this._addListener(t,e),this}on(t,e){return this._addListener(t,e),this}prependListener(t,e){return this._addListener(t,e,!0),this}_removeListener(t,e){let n;(n=this._events[t])&&(n.delete(e),n.count||delete this._events[t])}removeListener(t,e){return this._removeListener(t,e),this}off(t,e){return this._removeListener(t,e),this}removeAllListeners(t){let e;(e=this._events[t])&&(e.deleteAll(),delete this._events[t])}_emit(t,e,n){let s;if(s=this._events[t],s)try{let t=this.captureRejections,i=s.HEAD;for(;i=i.next;){const s=i.listener.apply(e,n);t&&s instanceof Promise&&s.catch((t=>{if(!this.listenerCount("error"))throw t;this._emitError(t)}))}}catch(t){if(!this.listenerCount("error"))throw t;this._emitError(t)}}_emitError(t){this._emit("error",void 0,[t])}emit(t,...e){this._emit(t,this.thisArg,e)}emitNone(t,...e){this._emit(t,void 0,e)}bind(t){return this.thisArg=t,this}_onceWrapper(t,e){return(...n)=>{this._removeListener(t,e);return e.apply(this.thisArg,n)}}_once(t,e,n=!1){if(!~this.maxListeners&&this.listenerCount(t)===this.maxListeners){const t=RangeError(`Exceeded maximum capacity(${this.maxListeners}).`);if(!this.listenerCount("error"))throw t;this._emitError(t)}const s=this._onceWrapper(t,e);let i;this._events[t]||(this._events[t]=new js),i=this._events[t],n?i.prepend(s,e):i.append(s,e)}once(t,e){return this._once(t,e),this}prependOnceListener(t,e){return this._once(t,e,!0),this}listenerCount(t){let e;return e=this._events[t],e?e.count:0}listeners(t){let e,n=[];if(e=this._events[t],!e)return n;let s=e.HEAD;for(;s=s.next;)n.push(s.listener);return n}rawListeners(t){let e,n=[];if(e=this._events[t],!e)return n;let s=e.HEAD;for(;s=s.next;)s.rawListener&&n.push(s.rawListener);return n}eventNames(){return Object.getOwnPropertyNames(this._events)}constructor(t){if(t){const{thisArg:e,captureRejections:n}=t;void 0!==e&&(this.thisArg=e),n&&(this.captureRejections=!0)}}}let Os=0;function Vs(){return Os++}const Is=Symbol();class Fs extends HTMLElement{static[Is]={};inject(t){t instanceof Node&&t.appendChild(this)}}const Hs=new class{_store=new Map;add(t){if(t[Is]){const e=Vs();this._store.set(t,e),customElements.define(`uid-${e}`,t)}}getInstance(t,...e){return this._store.has(t)||this.add(t),Reflect.construct(t,e)}inject(t,e,...n){if(e instanceof Node){const s=this.getInstance(t,...n);return e.appendChild(s),s}return null}};const Ws=new class{vertical="center";horizontal="center";verticalFrom="bottom";horizontalFrom="none"};class qs extends Fs{isPoped=!1;constructor(){super(),this.style.position="absolute",this.style.display="none"}popup(t){const{vertical:e,verticalFrom:n,horizontal:s,horizontalFrom:i}=Object.assign(Ws,t),o="top"===n?-16:"bottom"===n?16:0,r="left"===i?-16:"right"===i?16:0,a=this.getBoundingClientRect();switch(s){case"left":this.style.left="8px";break;case"right":this.style.right="24px";break;default:this.style.left=(visualViewport.width-a.width)/2+"px"}switch(e){case"top":this.style.top="58px";break;case"bottom":this.style.bottom="78px";break;default:this.style.left=(visualViewport.height-a.height)/2+"px"}this.style.display="block",this.animate([{opacity:0,transform:`translate(${r}px, ${o}px)`},{opacity:1,transform:"translate(0, 0)"}],100).onfinish=()=>{this.isPoped=!0}}fade(){this.animate([{opacity:1,transform:"scale(1)"},{opacity:0,transform:"scale(0.94)"}],100).onfinish=()=>{this.style.display="none",this.isPoped=!1,this.onFaded.call(this)}}setContent(t){return this.appendChild(t),this}onPopup(){}onFaded(){}}Hs.add(qs);const Xs=new Map,Ys=new Map;async function Gs(t){let e;return Xs.has(t)?e=Xs.get(t):(e=await async function(t){let e;return Ys.has(t)?e=Ys.get(t):Ys.set(t,e=fetch(t)),await(await e).clone().text()}(t),Xs.set(t,e),Ys.delete(t)),e}class Js extends HTMLElement{constructor(t){super(),this.style.display="none",this.init(t)}async init(t){const e=await Gs(t),n=this.attachShadow({mode:"open"});n.innerHTML=e,this.onViewImpl(n),this.removeAttribute("style")}onViewImpl(t){throw'Did not override method "onViewImpl"'}}customElements.define("r-view",Js);class Ks extends Js{icon=null;msg=null;constructor(t){super("./utils/widget/notification/view.html"),this.outerContainer=t}onViewImpl(t){const e=t.getElementById("icon"),n=t.getElementById("msg"),s=t.getElementById("close");this.icon=e,this.msg=n,s.addEventListener("click",(()=>{this.outerContainer.fade()}))}setIcon(t){this.icon&&(this.icon.innerText=t)}setMessage(t){this.msg&&(this.msg.innerText=t)}}customElements.define("pop-widgetcontent",Ks);class Qs extends qs{constructor(){super(),this.style.pointerEvents="all",this.setContent(this.notifContent=new Ks(this))}setIcon(t){return this.notifContent.setIcon(t),this}setMessage(t){return this.notifContent.setMessage(t),this}}Hs.add(Qs);const Zs=new Bs({captureRejections:!0}),ti=new Qs;const ei={onConnect:function(t){Zs.on("--connect",t)},onDisconnect:function(t){Zs.on("--disconnect",t)}};class ni extends Bs{static controllers=[];gamepad=null;get id(){return this.gamepad.id}get mapping(){return this.gamepad.mapping}constructor(t){super({captureRejections:!0}),this.gamepad=t,ni.controllers[t.index]=this,this.on("press",(t=>this.emit(`press-${t}`))),this.on("release",(t=>this.emit(`release-${t}`))),this.on("value",((t,e)=>this.emit(`value-${t}`,e))),this.on("axel",((t,e)=>this.emit(`axel-${t}`,e)))}vibrate(t,e=0,n=0){let s=null;(s=this.gamepad.vibrationActuator)&&s.playEffect(s.type,{duration:t,strongMagnitude:e,weakMagnitude:n})}addPressListener(t,e){this.on(`press-${t}`,e)}removePressListener(t,e){this.off(`press-${t}`,e)}addReleaseListener(t,e){this.on(`release-${t}`,e)}removeReleaseListener(t,e){this.off(`release-${t}`,e)}addValueChangeListener(t,e){this.on(`value-${t}`,e)}removeValueChangeListener(t,e){this.off(`value-${t}`,e)}addAxelChangeListener(t,e){this.on(`axel-${t}`,e)}removeAxelChangeListener(t,e){this.off(`axel-${t}`,e)}}function si(t,e,n,s){if(t.length!==e.length)return;const i=t.length;for(let o=0;o<i;o++){let i=t[o],r=e[o];n(i,r)||s.call(null,i,r,o)}}if("function"!=typeof navigator.getGamepads)throw"Your browser does not support the Gamepad API, please consider updating your browser";!function(){window.addEventListener("gamepadconnected",(t=>{Zs.emit("--connect",new ni(t.gamepad)),ti.setMessage(`控制器 ${t.gamepad.id} 已连接`),ti.popup({horizontal:"right",vertical:"bottom",verticalFrom:"bottom",horizontalFrom:"right"})})),window.addEventListener("gamepaddisconnected",(t=>{Zs.emit("--disconnect",new ni(t.gamepad)),ti.setMessage(`控制器 ${t.gamepad.id} 断开连接`),ti.popup({horizontal:"right",vertical:"bottom",verticalFrom:"bottom",horizontalFrom:"right"})}));let t=[],e=[];!function t(e){requestAnimationFrame((()=>{e.apply(null),t(e)}))}((()=>{let n=0;for(const s of navigator.getGamepads())s?(t[n]&&si(t[n],s.buttons,((t,e)=>{if(t.pressed===e.pressed&&t.touched===e.touched&&t.value===e.value)return!0}),((t,e,s)=>{Zs.emit("button-change",t,e,s,n)})),t[n]=s.buttons,e[n]&&si(e[n],s.axes,((t,e)=>t===e),((t,e,s)=>{Zs.emit("axes-change",t,e,s,n)})),e[n]=s.axes,n++):n++})),Zs.on("button-change",((t,e,n,s)=>{const i=ni.controllers[s];i.emit("button-change",n,e,t),e.pressed!==t.pressed?e.pressed?i.emit("press",n):(i.emit("release",n),i.emit("value",n,0)):i.emit("value",n,e.value,t.value)})),Zs.on("axes-change",((t,e,n,s)=>{ni.controllers[s].emit("axel",n,e,t)}))}();const ii=new class{target=null;click(t,e,n=0){let s=new PointerEvent("click",{clientX:t,clientY:e,button:n,bubbles:!0,composed:!0});const i=document.elementFromPoint(t,e);i.dispatchEvent(s),i.focus()}move(t,e){let n=document.elementFromPoint(t,e);this.target||(this.target=n),n!==this.target&&(this._enter(n,t,e),this._leave(this.target,t,e),this.target=n);let s=new MouseEvent("mousemove",{clientX:t,clientY:e,bubbles:!0,composed:!0});n.dispatchEvent(s)}_enter=(t,e,n)=>{let s=new MouseEvent("mouseenter",{clientX:e,clientY:n,composed:!0}),i=new MouseEvent("mouseover",{clientX:e,clientY:n,bubbles:!0,composed:!0});t.dispatchEvent(s),t.dispatchEvent(i)};_leave=(t,e,n)=>{let s=new MouseEvent("mouseleave",{clientX:e,clientY:n,composed:!0}),i=new MouseEvent("mouseout",{clientX:e,clientY:n,bubbles:!0,composed:!0});t.dispatchEvent(s),t.dispatchEvent(i)};down(t,e,n=0){let s=new PointerEvent("mousedown",{clientX:t,clientY:e,button:n,bubbles:!0,composed:!0});document.elementFromPoint(t,e).dispatchEvent(s)}up(t,e,n=0){let s=new PointerEvent("mouseup",{clientX:t,clientY:e,button:n,bubbles:!0,composed:!0});document.elementFromPoint(t,e).dispatchEvent(s)}setCursorVisible(t=!0){const e=document.body.style,n="boolean"==typeof t?t?"auto":"none":document.body.style;e.cursor=n}};const oi=new class{scrollSpeed=30;cursorSpeed=8;stickDeadzone=.1;virtCursor=null;transformSpeed={x:0,y:0,scroll:0};instance=!1;_isLooping=!1;_receiveMouseEvent=t=>{t.isTrusted&&this._setVirtCursorEnable(!1)};_receiveControllerEvent=(t,e)=>{Math.abs(e)>.1&&(this._setVirtCursorEnable(!0),this._isLooping||this._eachRenderTick())};_setVirtCursorEnable(t=!0){t?(this.virtCursor.enable=!0,ii.setCursorVisible(!1)):(this.virtCursor.enable=!1,ii.setCursorVisible(!0))}init(t){t&&(this.virtCursor=t,ei.onConnect((t=>{this.instance||(t.id.startsWith("Xbox")?(this._setVirtCursorEnable(!0),this.instance=t,this._configController(t),window.addEventListener("mousemove",this._receiveMouseEvent),t.on("axel",this._receiveControllerEvent)):this._setVirtCursorEnable(!1))})),ei.onDisconnect((t=>{this._setVirtCursorEnable(!1),this.instance=null,this._distroyInstance(t),window.removeEventListener("mousemove",this._receiveMouseEvent),t.off("axel",this._receiveControllerEvent)})))}_configController=t=>{t.vibrate(200,1,1),t.on("release",this._onKeyUp),t.addReleaseListener(Ds,this.onEnsure),t.addReleaseListener(Ms,this.onBack),t.addPressListener(Ts,this.onLeftButton),t.addPressListener(Rs,this.onRightButton),t.addAxelChangeListener(Ns,this.onScroll),t.addAxelChangeListener(zs,this.onCursorMoveHorizontal),t.addAxelChangeListener(Us,this.onCursorMoveVertical),this._eachRenderTick()};_distroyInstance(t){t.off("release",this._onKeyUp),t.removeReleaseListener(Ds,this.onEnsure),t.removeReleaseListener(Ms,this.onBack),t.removePressListener(Ts,this.onLeftButton),t.removePressListener(Rs,this.onRightButton),t.removeAxelChangeListener(Ns,this.onScroll),t.removeAxelChangeListener(Ns,this.onCursorMoveHorizontal),t.removeAxelChangeListener(Ns,this.onCursorMoveVertical)}_onKeyDown=(t,e)=>{this.virtCursor.click=!0,ii.down(t,e)};_onKeyUp=()=>{this.virtCursor.click=!1;const{x:t,y:e}=this.virtCursor;ii.up(t,e)};onEnsure=()=>{const{x:t,y:e}=this.virtCursor;this.virtCursor.click=!0,ii.click(t,e)};onBack=()=>{Pager.removeByIndex(Pager.index())};onLeftButton=()=>{let t=Pager.index();t?Pager.select(t-1):Pager.select(Pager.size()-1)};onRightButton=()=>{let t=Pager.index();t===Pager.size()-1?Pager.select(0):Pager.select(t+1)};onScroll=t=>{Math.abs(t)>this.stickDeadzone?this.transformSpeed.scroll=this.scrollSpeed*t:this.transformSpeed.scroll=0};onCursorMoveHorizontal=t=>{Math.abs(t)>this.stickDeadzone?this.transformSpeed.x=this.cursorSpeed*t:this.transformSpeed.x=0};onCursorMoveVertical=t=>{Math.abs(t)>this.stickDeadzone?this.transformSpeed.y=this.cursorSpeed*t:this.transformSpeed.y=0};_eachRenderTick=()=>{const{x:t,y:e}=this.virtCursor,n=this.virtCursor,{x:s,y:i,scroll:o}=this.transformSpeed,{width:r,height:a}=visualViewport;let l=!1;const c=t+s,u=e+i;s&&c>16&&c<r-6&&(n.x=c,l=!0),i&&u>16&&u<a-6&&(n.y=u,l=!0),l&&ii.move(c,u),o&&rem.emit("scroll-up",o),this.instance&&this.virtCursor.enable?(this._isLooping=!0,requestAnimationFrame((()=>{this._eachRenderTick()}))):this._isLooping=!1}};class ri extends Fs{static layer=function(){const t=document.createElement("div");return t.style.cssText="display: none; width: 100vw; height: 100vh;position: fixed; top: 0px; left: 0px; pointer-events: all;",t}();static injectLayer(t){t.appendChild(this.layer)}showLayer(t=!0){const e=t?"var(--fade)":"transparent";ri.layer.style.display="block",ri.layer.animate([{opacity:0,backgroundColor:e},{opacity:1,backgroundColor:e}],{duration:100,fill:"forwards"})}disableLayer(){ri.layer.animate([{opacity:1},{opacity:0}],100).onfinish=()=>ri.layer.style.display="none"}getLayer(){return ri.layer}}function ai(t){return"function"==typeof t}class li extends ri{isPoped=!1;constructor(){super(),this.style.display="none",this.addEventListener("click",(t=>t.stopPropagation()))}hide(){this.isPoped&&(this.disableLayer(),this.animate([{opacity:1,transform:"translate(-50%, -50%) scale(1)"},{opacity:0,transform:"translate(-50%, -50%) scale(0.94)"}],100).onfinish=()=>{this.style.display="none",this.isPoped=!1,ai(this.onhide)&&this.onhide.call(this)})}display(t){this.isPoped||(t&&this.showLayer(),this.style.display="block",this.style.pointerEvents="none",this.animate([{opacity:0,transform:"translate(-50%, calc(-50% + 12px))"},{opacity:1,transform:"translate(-50%, -50%)"}],100).onfinish=()=>{this.style.pointerEvents="all",this.isPoped=!0,ai(this.ondisplay)&&this.ondisplay.call(this)})}}class ci extends Fs{constructor(t="vertical"){super(),this.classList.add("scrollable",t),this.orientation=t}}function ui(t){const e=document.createElement("div");return e.innerText=t,e.classList.add("btn","radius","px4","margin"),e.style.display="none",e}Hs.add(ci);class di extends li{_pageIndex=0;_pages=[];get pageIndex(){return this._pageIndex}set pageIndex(t){if(t<0||t>=this._pages.length)return!1;t?t===this._pages.length-1?(this.setButtonsDisplay(7),this.next.innerText="完成"):(this.setButtonsDisplay(7),this.next.innerText="下一步"):(this.setButtonsDisplay(5),this.next.innerText="下一步"),this._changePage(this._pageIndex,t),this._pageIndex=t,this.progress.value=t+1}_changePage(t,e){const n=e-t>0?-1:1;this.content.children[0].animate([{transform:"translateX(0)",opacity:1},{transform:`translateX(${25*n}%)`,opacity:0}],100).onfinish=()=>{this.content.children[0].remove(),this.content.appendChild(this._pages[e]),this._pages[e].animate([{transform:`translateX(${-25*n}%)`,opacity:0},{transform:"translateX(0)",opacity:1}],100)}}constructor(){super(),this.style.cssText="width: 420px;pointer-events: all;display: none;height: 560px;max-height: 88%;border-radius: 8px;box-shadow: 0px 8px 12px rgba(0,0,0,0.32);overflow: hidden;background-color: var(--controlBackground);position: absolute;top: 50%; left: 50%; transform: translate(-50%, -50%);";const t=document.createElement("progress"),e=document.createElement("div"),n=document.createElement("div"),s=document.createElement("div"),i=ui("下一步"),o=ui("上一步"),r=ui("取消");this.progress=t,this.content=e,this.next=i,this.prev=o,this.cancel=r,t.value=0,t.classList.add("horizontal"),e.style.cssText="width: 100%; height: fit-content; min-height: 488px;",o.classList.add("bright"),i.classList.add("accent"),r.classList.add("light"),o.addEventListener("click",(()=>{1===this.pageIndex&&this.setButtonsDisplay(5),this.pageIndex--})),i.addEventListener("click",(()=>{if(this.pageIndex===this._pages.length-1)return this.onFinishWizard();this.pageIndex++,this.setButtonsDisplay(7)})),s.appendChild(o),s.appendChild(i),n.appendChild(r),n.appendChild(s),n.classList.add("Row"),s.classList.add("Row"),n.style.justifyContent="space-between",n.style.backgroundColor="var(--controlBrighter)",n.style.padding="12px",this.appendChild(t),this.appendChild(e),this.appendChild(n),r.addEventListener("click",(()=>this.hide())),this.setButtonsDisplay(5)}onFinishWizard(){}addPage(...t){for(const e of t)this._pages.push(e);this.progress.value||(this.progress.value=1,this.content.appendChild(this._pages[0])),this.progress.max=this._pages.length}setButtonsDisplay(t){const e=!!(1&t),n=!!(2&t),s=!!(4&t);this.next.style.display=e?"":"none",this.prev.style.display=n?"":"none",this.cancel.style.display=s?"":"none"}setProgress(t){this.progress.value=t}}Hs.add(di);class fi extends Fs{constructor(t={}){super();const e=document.createElement("img"),n=t.size||200;this.style.cssText=`border-radius: ${t.radius||"50%"};\n            display: flex;\n            overflow: hidden;\n            width: ${n}px;\n            height: ${n}px;\n            background-color: var(--controlGray);`,e.style.cssText="display: none;",e.draggable=!1,e.src=t.url,e.onload=()=>{e.width=n,e.style.cssText="display: block;",e.animate([{opacity:0},{opacity:1}],200)},this.appendChild(e)}}Hs.add(fi);class pi extends Fs{constructor(t=!1){super();const e=this.attachShadow({mode:"open"}),n=t?"textarea":"input";e.innerHTML=`\n        <style>\n        :host {\n            width: fit-content;\n            height: fit-content;\n            display: block;\n        }\n        ${n} {\n            display: block;\n            font-family: Roboto, sans-serif;\n            outline: none;\n            border: none;\n            width: 200px;\n            background-color: transparent;\n            padding: 8px;\n            resize: none;\n            height: 16px;\n        }\n        .input {\n            outline: none;\n            position: relative;\n            overflow: hidden;\n            border-radius: 6px;\n            background-color: rgba(255,255,255,0.5);\n        }\n        .input::after {\n            content: '';\n            position: absolute;\n            bottom: 0px;\n            left: 50%;\n            transform: translateX(-50%);\n            width: 0%;\n            border-bottom: solid 2px var(--controlColor);\n            transition: all 0.16s;\n        }\n        .input.focus::after {\n            width: 100%;\n        }\n        .txtarea {\n            min-height: 160px;\n        }\n        </style>\n        <div class="input" id="c">${t?'<textarea id="input" class="txtarea"></textarea>':'<input id="input">'}</div>\n        `,this.input=e.querySelector("#input"),this.container=e.querySelector("#c"),this.input.addEventListener("blur",(()=>{this.container.classList.remove("focus")})),this.input.addEventListener("focus",(()=>{this.container.classList.add("focus")}))}}Hs.add(pi);const hi=new di,mi=()=>{let t=new ci;return t.classList.add("Column"),t.style.justifyContent="center",t},gi=(t,e=1)=>{let n=document.createElement("h"+e);return n.innerHTML=t,n};class vi extends Qs{display(){this.popup({horizontal:"right",vertical:"bottom"})}}Hs.add(vi);const $i=new vi;function yi(t){let e,n,s,i,o,r,a,l,c,d,m,g,v,$,y,w,x;const b=t[6].default,k=u(b,t,t[5],null);return{c(){e=S("div"),n=S("div"),s=S("div"),i=D(t[0]),o=M(),r=S("h4"),a=D(t[1]),l=M(),c=S("div"),d=S("div"),m=S("div"),g=M(),v=S("div"),v.textContent="▼",y=M(),w=S("div"),k&&k.c(),U(s,"class","avatar svelte-1ebysre"),U(r,"class","svelte-1ebysre"),U(n,"class","Row start svelte-1ebysre"),B(m,"background-color","var(--controlNight)"),B(m,"width","2px"),B(m,"height","calc(100% - 16px)"),B(v,"text-align","center"),B(v,"height","16px"),B(v,"transform","translateY(-8px) scaleX(0.6)"),U(d,"class",$=(t[2]?"hide ":"")+"Column svelte-1ebysre"),B(d,"width","32px"),B(d,"color","var(--controlNight)"),U(w,"class","content svelte-1ebysre"),U(c,"class","Row start svelte-1ebysre"),B(c,"height","fit-content"),U(e,"class","Column start svelte-1ebysre"),B(e,"height","fit-content")},m(u,f){E(u,e,f),C(e,n),C(n,s),C(s,i),C(n,o),C(n,r),C(r,a),C(e,l),C(e,c),C(c,d),C(d,m),C(d,g),C(d,v),t[7](d),C(c,y),C(c,w),k&&k.m(w,null),t[8](w),x=!0},p(t,[e]){(!x||1&e)&&N(i,t[0]),(!x||2&e)&&N(a,t[1]),(!x||4&e&&$!==($=(t[2]?"hide ":"")+"Column svelte-1ebysre"))&&U(d,"class",$),k&&k.p&&(!x||32&e)&&p(k,b,t,t[5],x?f(b,t[5],e,null):h(t[5]),null)},i(t){x||(xt(k,t),x=!0)},o(t){bt(k,t),x=!1},d(n){n&&A(e),t[7](null),k&&k.d(n),t[8](null)}}}function wi(t,e,n){let s,i,{$$slots:o={},$$scope:r}=e,{icon:a=""}=e,{title:l=""}=e,{hideLine:c=!1}=e;return Y((()=>{n(3,s.style.height=i.getBoundingClientRect().height+16+"px",s)})),t.$$set=t=>{"icon"in t&&n(0,a=t.icon),"title"in t&&n(1,l=t.title),"hideLine"in t&&n(2,c=t.hideLine),"$$scope"in t&&n(5,r=t.$$scope)},[a,l,c,s,i,r,o,function(t){et[t?"unshift":"push"]((()=>{s=t,n(3,s)}))},function(t){et[t?"unshift":"push"]((()=>{i=t,n(4,i)}))}]}class xi extends Mt{constructor(t){super(),Dt(this,t,wi,yi,a,{icon:0,title:1,hideLine:2})}}function bi(t){let e,n;return{c(){e=S("div"),n=D(t[4]),B(e,"color","var(--controlDark)"),B(e,"font-weight","bold"),B(e,"margin-bottom","12px"),B(e,"margin-left","calc(14px + "+t[0]+")")},m(t,s){E(t,e,s),C(e,n)},p(t,s){16&s&&N(n,t[4]),1&s&&B(e,"margin-left","calc(14px + "+t[0]+")")},d(t){t&&A(e)}}}function ki(t){let e,n,s,i,o=t[4]&&bi(t);const r=t[6].default,a=u(r,t,t[5],null);return{c(){e=S("div"),o&&o.c(),n=M(),s=S("div"),a&&a.c(),U(s,"class","tile svelte-1f36s4l"),B(s,"border-radius",t[2]),B(s,"background-color",t[3]),B(s,"margin",t[1]+" "+t[0]),U(e,"class","container svelte-1f36s4l")},m(t,r){E(t,e,r),o&&o.m(e,null),C(e,n),C(e,s),a&&a.m(s,null),i=!0},p(t,[l]){t[4]?o?o.p(t,l):(o=bi(t),o.c(),o.m(e,n)):o&&(o.d(1),o=null),a&&a.p&&(!i||32&l)&&p(a,r,t,t[5],i?f(r,t[5],l,null):h(t[5]),null),(!i||4&l)&&B(s,"border-radius",t[2]),(!i||8&l)&&B(s,"background-color",t[3]),(!i||3&l)&&B(s,"margin",t[1]+" "+t[0])},i(t){i||(xt(a,t),i=!0)},o(t){bt(a,t),i=!1},d(t){t&&A(e),o&&o.d(),a&&a.d(t)}}}function Ci(t,e,n){let{$$slots:s={},$$scope:i}=e,{marginHorizon:o="10px"}=e,{marginVertical:r="6px"}=e,{radius:a="8px"}=e,{color:l="var(--dynamicControlLight)"}=e,{title:c=""}=e;return t.$$set=t=>{"marginHorizon"in t&&n(0,o=t.marginHorizon),"marginVertical"in t&&n(1,r=t.marginVertical),"radius"in t&&n(2,a=t.radius),"color"in t&&n(3,l=t.color),"title"in t&&n(4,c=t.title),"$$scope"in t&&n(5,i=t.$$scope)},[o,r,a,l,c,i,s]}class _i extends Mt{constructor(t){super(),Dt(this,t,Ci,ki,a,{marginHorizon:0,marginVertical:1,radius:2,color:3,title:4})}}function Li(t,e,n){const s=t.slice();return s[6]=e[n],s[8]=n,s}function Ei(t){let e,n,s,i,r,a,l=(t[6].label||t[6])+"";function c(...e){return t[4](t[8],...e)}return{c(){e=S("div"),n=D(l),s=M(),U(e,"class",i="btn outlined"+(0===t[8]?" first-child":"")+(t[0]===t[8]?" selected":"")+" svelte-1d1p4yz")},m(t,i){E(t,e,i),C(e,n),C(e,s),r||(a=[R(e,"click",c),R(e,"mousedown",Si)],r=!0)},p(s,o){t=s,2&o&&l!==(l=(t[6].label||t[6])+"")&&N(n,l),1&o&&i!==(i="btn outlined"+(0===t[8]?" first-child":"")+(t[0]===t[8]?" selected":"")+" svelte-1d1p4yz")&&U(e,"class",i)},d(t){t&&A(e),r=!1,o(a)}}}function Ai(t){let e,n=t[1],s=[];for(let e=0;e<n.length;e+=1)s[e]=Ei(Li(t,n,e));return{c(){e=S("div");for(let t=0;t<s.length;t+=1)s[t].c();U(e,"class","Row container svelte-1d1p4yz")},m(t,n){E(t,e,n);for(let t=0;t<s.length;t+=1)s[t].m(e,null)},p(t,i){if(7&i){let o;for(n=t[1],o=0;o<n.length;o+=1){const r=Li(t,n,o);s[o]?s[o].p(r,i):(s[o]=Ei(r),s[o].c(),s[o].m(e,null))}for(;o<s.length;o+=1)s[o].d(1);s.length=n.length}},d(t){t&&A(e),P(s,t)}}}function Pi(t){let e,s;const i=[t[3],{breakLine:!0}];let o={$$slots:{default:[Ai]},$$scope:{ctx:t}};for(let t=0;t<i.length;t+=1)o=n(o,i[t]);return e=new ys({props:o}),{c(){At(e.$$.fragment)},m(t,n){Pt(e,t,n),s=!0},p(t,[n]){const s=8&n?_t(i,[Lt(t[3]),i[1]]):{};515&n&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){s||(xt(e.$$.fragment,t),s=!0)},o(t){bt(e.$$.fragment,t),s=!1},d(t){St(e,t)}}}const Si=t=>t.stopPropagation();function Di(t,e,s){let{dataList:i=[]}=e,{selected:o=0}=e;const r=J();function a(t,e){r("selected",e),s(0,o=e)}return t.$$set=t=>{s(3,e=n(n({},e),m(t))),"dataList"in t&&s(1,i=t.dataList),"selected"in t&&s(0,o=t.selected)},e=m(e),[o,i,a,e,(t,e)=>a(0,t)]}class Mi extends Mt{constructor(t){super(),Dt(this,t,Di,Pi,a,{dataList:1,selected:0})}}function Ti(e){let n,s,i,r,a,l;return{c(){n=S("div"),s=S("div"),U(s,"class",i="switchThumb"+(e[0]?" thumb-active":"")+" svelte-9mloa7"),U(n,"class",r="switch"+(e[0]?" active":"")+" svelte-9mloa7")},m(t,i){E(t,n,i),C(n,s),a||(l=[R(n,"mousedown",z(Ri)),R(n,"click",z(e[1]))],a=!0)},p(t,[e]){1&e&&i!==(i="switchThumb"+(t[0]?" thumb-active":"")+" svelte-9mloa7")&&U(s,"class",i),1&e&&r!==(r="switch"+(t[0]?" active":"")+" svelte-9mloa7")&&U(n,"class",r)},i:t,o:t,d(t){t&&A(n),a=!1,o(l)}}}const Ri=()=>{};function zi(t,e,n){let{checked:s=!1}=e;const i=J();function o(){n(0,s=!s),i("toggle",s)}return t.$$set=t=>{"checked"in t&&n(0,s=t.checked)},[s,o,function(){o()}]}class Ui extends Mt{constructor(t){super(),Dt(this,t,zi,Ti,a,{checked:0,toggle:2})}get toggle(){return this.$$.ctx[2]}}function Ni(t){let e,n,s;function i(e){t[4](e)}let o={};return void 0!==t[0]&&(o.checked=t[0]),e=new Ui({props:o}),et.push((()=>Et(e,"checked",i))),t[5](e),e.$on("toggle",t[2]),{c(){At(e.$$.fragment)},m(t,n){Pt(e,t,n),s=!0},p(t,s){const i={};!n&&1&s&&(n=!0,i.checked=t[0],ct((()=>n=!1))),e.$set(i)},i(t){s||(xt(e.$$.fragment,t),s=!0)},o(t){bt(e.$$.fragment,t),s=!1},d(n){t[5](null),St(e,n)}}}function ji(t){let e,s;const i=[t[3]];let o={$$slots:{default:[Ni]},$$scope:{ctx:t}};for(let t=0;t<i.length;t+=1)o=n(o,i[t]);return e=new ys({props:o}),e.$on("click",t[6]),{c(){At(e.$$.fragment)},m(t,n){Pt(e,t,n),s=!0},p(t,[n]){const s=8&n?_t(i,[Lt(t[3])]):{};259&n&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){s||(xt(e.$$.fragment,t),s=!0)},o(t){bt(e.$$.fragment,t),s=!1},d(t){St(e,t)}}}function Bi(t,e,s){let i,o=J(),{checked:r=!1}=e;return t.$$set=t=>{s(3,e=n(n({},e),m(t))),"checked"in t&&s(0,r=t.checked)},e=m(e),[r,i,function(t){let e=t.detail;o("toggle",e)},e,function(t){r=t,s(0,r)},function(t){et[t?"unshift":"push"]((()=>{i=t,s(1,i)}))},()=>i.toggle()]}class Oi extends Mt{constructor(t){super(),Dt(this,t,Bi,ji,a,{checked:0})}}function Vi(t){let e,n,s;function i(e){t[15](e)}let o={data:"开发者工具",extra:"开启或关闭 DevTools",useAvatar:!1,isUrl:!1};return void 0!==t[3]&&(o.checked=t[3]),e=new Oi({props:o}),et.push((()=>Et(e,"checked",i))),e.$on("toggle",Yi),{c(){At(e.$$.fragment)},m(t,n){Pt(e,t,n),s=!0},p(t,s){const i={};!n&&8&s[0]&&(n=!0,i.checked=t[3],ct((()=>n=!1))),e.$set(i)},i(t){s||(xt(e.$$.fragment,t),s=!0)},o(t){bt(e.$$.fragment,t),s=!1},d(t){St(e,t)}}}function Ii(t){let e,n,s,i,o,r,a;function l(e){t[16](e)}function c(e){t[17](e)}let u={data:"主题色 (色相)",useAvatar:!1,isUrl:!1};function d(e){t[18](e)}void 0!==t[0]&&(u.dataList=t[0]),void 0!==t[1]&&(u.selected=t[1]),e=new Mi({props:u}),et.push((()=>Et(e,"dataList",l))),et.push((()=>Et(e,"selected",c))),e.$on("selected",t[11]);let f={data:'使用 "Acrylic" ',extra:"性能较低的设备关闭此选项以获得更好的体验",useAvatar:!1,isUrl:!1};return void 0!==t[2]&&(f.checked=t[2]),o=new Oi({props:f}),et.push((()=>Et(o,"checked",d))),o.$on("toggle",t[12]),{c(){At(e.$$.fragment),i=M(),At(o.$$.fragment)},m(t,n){Pt(e,t,n),E(t,i,n),Pt(o,t,n),a=!0},p(t,i){const a={};!n&&1&i[0]&&(n=!0,a.dataList=t[0],ct((()=>n=!1))),!s&&2&i[0]&&(s=!0,a.selected=t[1],ct((()=>s=!1))),e.$set(a);const l={};!r&&4&i[0]&&(r=!0,l.checked=t[2],ct((()=>r=!1))),o.$set(l)},i(t){a||(xt(e.$$.fragment,t),xt(o.$$.fragment,t),a=!0)},o(t){bt(e.$$.fragment,t),bt(o.$$.fragment,t),a=!1},d(t){St(e,t),t&&A(i),St(o,t)}}}function Fi(t){let e,n,s,i,o,r,a,l;function c(e){t[19](e)}function u(e){t[20](e)}let d={data:"缓存音乐质量",useAvatar:!1,isUrl:!1};return void 0!==t[0]&&(d.dataList=t[0]),void 0!==t[1]&&(d.selected=t[1]),e=new Mi({props:d}),et.push((()=>Et(e,"dataList",c))),et.push((()=>Et(e,"selected",u))),e.$on("selected",t[11]),o=new ys({props:{useAvatar:!1,data:"清除用户信息",extra:"需手动重启应用"}}),o.$on("click",Gi),a=new ys({props:{useAvatar:!1,data:"清除歌曲缓存"}}),a.$on("click",Ji),{c(){At(e.$$.fragment),i=M(),At(o.$$.fragment),r=M(),At(a.$$.fragment)},m(t,n){Pt(e,t,n),E(t,i,n),Pt(o,t,n),E(t,r,n),Pt(a,t,n),l=!0},p(t,i){const o={};!n&&1&i[0]&&(n=!0,o.dataList=t[0],ct((()=>n=!1))),!s&&2&i[0]&&(s=!0,o.selected=t[1],ct((()=>s=!1))),e.$set(o)},i(t){l||(xt(e.$$.fragment,t),xt(o.$$.fragment,t),xt(a.$$.fragment,t),l=!0)},o(t){bt(e.$$.fragment,t),bt(o.$$.fragment,t),bt(a.$$.fragment,t),l=!1},d(t){St(e,t),t&&A(i),St(o,t),t&&A(r),St(a,t)}}}function Hi(t){let e,n,s,i,o,r,a,l;function c(e){t[21](e)}function u(e){t[22](e)}let d={data:"页面滚动速度",useAvatar:!1,isUrl:!1};function f(e){t[23](e)}function p(e){t[24](e)}void 0!==t[5]&&(d.dataList=t[5]),void 0!==t[4]&&(d.selected=t[4]),e=new Mi({props:d}),et.push((()=>Et(e,"dataList",c))),et.push((()=>Et(e,"selected",u))),e.$on("selected",t[13]);let h={data:"指针移动速度",useAvatar:!1,isUrl:!1};return void 0!==t[7]&&(h.dataList=t[7]),void 0!==t[6]&&(h.selected=t[6]),o=new Mi({props:h}),et.push((()=>Et(o,"dataList",f))),et.push((()=>Et(o,"selected",p))),o.$on("selected",t[14]),{c(){At(e.$$.fragment),i=M(),At(o.$$.fragment)},m(t,n){Pt(e,t,n),E(t,i,n),Pt(o,t,n),l=!0},p(t,i){const l={};!n&&32&i[0]&&(n=!0,l.dataList=t[5],ct((()=>n=!1))),!s&&16&i[0]&&(s=!0,l.selected=t[4],ct((()=>s=!1))),e.$set(l);const c={};!r&&128&i[0]&&(r=!0,c.dataList=t[7],ct((()=>r=!1))),!a&&64&i[0]&&(a=!0,c.selected=t[6],ct((()=>a=!1))),o.$set(c)},i(t){l||(xt(e.$$.fragment,t),xt(o.$$.fragment,t),l=!0)},o(t){bt(e.$$.fragment,t),bt(o.$$.fragment,t),l=!1},d(t){St(e,t),t&&A(i),St(o,t)}}}function Wi(t){let e,n,s,i;function o(e){t[25](e)}function r(e){t[26](e)}let a={data:"设备",extra:"输出设备变化时将会切换到默认设备",useAvatar:!1,isUrl:!1};return void 0!==t[10]&&(a.dataList=t[10]),void 0!==t[9]&&(a.selected=t[9]),e=new Mi({props:a}),et.push((()=>Et(e,"dataList",o))),et.push((()=>Et(e,"selected",r))),e.$on("selected",t[27]),{c(){At(e.$$.fragment)},m(t,n){Pt(e,t,n),i=!0},p(t,i){const o={};!n&&1024&i[0]&&(n=!0,o.dataList=t[10],ct((()=>n=!1))),!s&&512&i[0]&&(s=!0,o.selected=t[9],ct((()=>s=!1))),e.$set(o)},i(t){i||(xt(e.$$.fragment,t),i=!0)},o(t){bt(e.$$.fragment,t),i=!1},d(t){St(e,t)}}}function qi(t){let e,n,s,i,o,r,a,l,c,u,d,f,p,h,m;o=new on({props:{placeholder:"  搜索设置",fullBorder:!0}});let g=window.rem.isBeta&&function(t){let e,n;return e=new _i({props:{title:"测试功能",$$slots:{default:[Vi]},$$scope:{ctx:t}}}),{c(){At(e.$$.fragment)},m(t,s){Pt(e,t,s),n=!0},p(t,n){const s={};8&n[0]|2&n[1]&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){n||(xt(e.$$.fragment,t),n=!0)},o(t){bt(e.$$.fragment,t),n=!1},d(t){St(e,t)}}}(t);return l=new _i({props:{title:"主题",$$slots:{default:[Ii]},$$scope:{ctx:t}}}),u=new _i({props:{title:"缓存",$$slots:{default:[Fi]},$$scope:{ctx:t}}}),f=new _i({props:{title:"控制器",$$slots:{default:[Hi]},$$scope:{ctx:t}}}),h=new _i({props:{title:"输出",$$slots:{default:[Wi]},$$scope:{ctx:t}}}),{c(){e=S("div"),n=S("div"),s=S("h1"),s.textContent="设置",i=M(),At(o.$$.fragment),r=M(),g&&g.c(),a=M(),At(l.$$.fragment),c=M(),At(u.$$.fragment),d=M(),At(f.$$.fragment),p=M(),At(h.$$.fragment),U(s,"class","svelte-cndn71"),U(n,"class","column grid-margin svelte-cndn71"),B(n,"justify-content","space-between"),B(n,"width","calc(100% - 48px)"),U(e,"class","row c svelte-cndn71")},m(t,v){E(t,e,v),C(e,n),C(n,s),C(n,i),Pt(o,n,null),C(e,r),g&&g.m(e,null),C(e,a),Pt(l,e,null),C(e,c),Pt(u,e,null),C(e,d),Pt(f,e,null),C(e,p),Pt(h,e,null),m=!0},p(t,e){window.rem.isBeta&&g.p(t,e);const n={};7&e[0]|2&e[1]&&(n.$$scope={dirty:e,ctx:t}),l.$set(n);const s={};3&e[0]|2&e[1]&&(s.$$scope={dirty:e,ctx:t}),u.$set(s);const i={};240&e[0]|2&e[1]&&(i.$$scope={dirty:e,ctx:t}),f.$set(i);const o={};1536&e[0]|2&e[1]&&(o.$$scope={dirty:e,ctx:t}),h.$set(o)},i(t){m||(xt(o.$$.fragment,t),xt(g),xt(l.$$.fragment,t),xt(u.$$.fragment,t),xt(f.$$.fragment,t),xt(h.$$.fragment,t),m=!0)},o(t){bt(o.$$.fragment,t),bt(g),bt(l.$$.fragment,t),bt(u.$$.fragment,t),bt(f.$$.fragment,t),bt(h.$$.fragment,t),m=!1},d(t){t&&A(e),St(o),g&&g.d(),St(l),St(u),St(f),St(h)}}}function Xi(t){let e,n;return e=new Ve({props:{$$slots:{default:[qi]},$$scope:{ctx:t}}}),t[28](e),{c(){At(e.$$.fragment)},m(t,s){Pt(e,t,s),n=!0},p(t,n){const s={};1791&n[0]|2&n[1]&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){n||(xt(e.$$.fragment,t),n=!0)},o(t){bt(e.$$.fragment,t),n=!1},d(n){t[28](null),St(e,n)}}}function Yi(t){const e=t.detail?"open":"close";hooks.send(`devtools:${e}`)}function Gi(){store.clear()}function Ji(){}function Ki(t,e,n){let s=store.getSync("sys-settings"),i=s.theme.controlColor.slice(1),o=s.theme.controlColor[0],r=s.theme.useAcrylic,a=s.beta.showDevTools;let l,[c,...u]=store.getSync("stickScrollSpeedRatio")||[1,{label:"慢",value:.3},{label:"中",value:.65},{label:"快",value:1}],[d,...f]=store.getSync("cursorMoveSpeedRatio")||[1,{label:"慢",value:.3},{label:"中",value:.65},{label:"快",value:1}];Pager.beforeSwitch((()=>{if(l?.prepared()){const{save:t}=Pager.getContext();t.offsetRatio=l.getOffsetRatio()}})),Y((async()=>{const{save:t}=Pager.getContext();await at(),t.offsetRatio&&l.setOffsetRatio(t.offsetRatio)}));let p=0,h=[];async function m(){n(10,h=[...await pe()]),n(9,p=await fe(h))}rem.on("audioDeviceChange",m),G((()=>{rem.off("audioDeviceChange",m)})),Y((async()=>{n(10,h=await async function(){const t=await pe();return n(9,p=await fe(t)),t}())}));return[i,o,r,a,c,u,d,f,l,p,h,function(t){const e=t.detail;n(1,o=s.theme.controlColor[0]=e),rem.emit("changeControlColor",i[o]),store.set("sys-settings",s)},function(t){const e=t.detail;s.theme.useAcrylic=e,rem.emit("useAcrylic",e)},function(t){const e=t.detail;n(4,c=e),store.set("stickScrollSpeedRatio",[e,...u])},function(t){const e=t.detail;n(6,d=e),store.set("cursorMoveSpeedRatio",[e,...f])},function(t){a=t,n(3,a)},function(t){i=t,n(0,i)},function(t){o=t,n(1,o)},function(t){r=t,n(2,r)},function(t){i=t,n(0,i)},function(t){o=t,n(1,o)},function(t){u=t,n(5,u)},function(t){c=t,n(4,c)},function(t){f=t,n(7,f)},function(t){d=t,n(6,d)},function(t){h=t,n(10,h)},function(t){p=t,n(9,p)},async t=>{n(9,p=t.detail),de(h[t.detail].deviceId)},function(t){et[t?"unshift":"push"]((()=>{l=t,n(8,l)}))}]}class Qi extends Mt{constructor(t){super(),Dt(this,t,Ki,Xi,a,{},null,[-1,-1])}}function Zi(t){let e,n,s,i,o,r,a,l,c,u,d,f,p;function h(e){t[6](e)}let m={containerStyle:to+"; margin-right: 8px;",cssText:to};function g(e){t[7](e)}void 0!==t[0]&&(m.value=t[0]),l=new on({props:m}),et.push((()=>Et(l,"value",h))),l.$on("change",t[5]);let v={};return void 0!==t[1]&&(v.value=t[1]),d=new Kt({props:v}),et.push((()=>Et(d,"value",g))),d.$on("mousemove",t[4]),d.$on("mouseup",t[4]),{c(){e=S("div"),n=S("div"),s=D(t[2]),i=S("pre"),o=D(t[3]),r=M(),a=S("div"),At(l.$$.fragment),u=M(),At(d.$$.fragment),U(i,"class","comm svelte-1wmbvzg"),U(n,"class","Row"),U(a,"class","Row"),U(e,"class","Row c svelte-1wmbvzg")},m(t,c){E(t,e,c),C(e,n),C(n,s),C(n,i),C(i,o),C(e,r),C(e,a),Pt(l,a,null),C(a,u),Pt(d,a,null),p=!0},p(t,[e]){(!p||4&e)&&N(s,t[2]),(!p||8&e)&&N(o,t[3]);const n={};!c&&1&e&&(c=!0,n.value=t[0],ct((()=>c=!1))),l.$set(n);const i={};!f&&2&e&&(f=!0,i.value=t[1],ct((()=>f=!1))),d.$set(i)},i(t){p||(xt(l.$$.fragment,t),xt(d.$$.fragment,t),p=!0)},o(t){bt(l.$$.fragment,t),bt(d.$$.fragment,t),p=!1},d(t){t&&A(e),St(l),St(d)}}}const to="height: 20px; width: 56px; padding: 0 4px; background-color: transparent;";function eo(t,e,n){let{label:s=""}=e,{comment:i=""}=e,{inputValue:o}=e,{progressValue:r}=e;const a=J();return t.$$set=t=>{"label"in t&&n(2,s=t.label),"comment"in t&&n(3,i=t.comment),"inputValue"in t&&n(0,o=t.inputValue),"progressValue"in t&&n(1,r=t.progressValue)},[o,r,s,i,function(t){a("progressChange",t.detail)},function(t){a("inputChange",t.detail)},function(t){o=t,n(0,o)},function(t){r=t,n(1,r)}]}class no extends Mt{constructor(t){super(),Dt(this,t,eo,Zi,a,{label:2,comment:3,inputValue:0,progressValue:1})}}function so(t){let e,n,s,i,o;function r(e){t[5](e)}function a(e){t[6](e)}function l(e){t[7](e)}let c={comment:"调整音量增幅\n请谨慎使用以保护听力"};return void 0!==t[0]&&(c.label=t[0]),void 0!==t[1]&&(c.inputValue=t[1]),void 0!==t[2]&&(c.progressValue=t[2]),e=new no({props:c}),et.push((()=>Et(e,"label",r))),et.push((()=>Et(e,"inputValue",a))),et.push((()=>Et(e,"progressValue",l))),e.$on("inputChange",t[3]),e.$on("progressChange",t[4]),{c(){At(e.$$.fragment)},m(t,n){Pt(e,t,n),o=!0},p(t,[o]){const r={};!n&&1&o&&(n=!0,r.label=t[0],ct((()=>n=!1))),!s&&2&o&&(s=!0,r.inputValue=t[1],ct((()=>s=!1))),!i&&4&o&&(i=!0,r.progressValue=t[2],ct((()=>i=!1))),e.$set(r)},i(t){o||(xt(e.$$.fragment,t),o=!0)},o(t){bt(e.$$.fragment,t),o=!1},d(t){St(e,t)}}}function io(t,e,n){let s="增益",i=ie.gain.gain.toFixed(2),o=i/2*100;return[s,i,o,function({detail:t}){t=+t;let e=Math.max(Math.min(2,t),0);$e(e),n(1,i=t.toFixed(2)),n(2,o=e/2*100)},function({detail:t}){let e=2*(t/=100);$e(e),n(1,i=e.toFixed(2))},function(t){s=t,n(0,s)},function(t){i=t,n(1,i)},function(t){o=t,n(2,o)}]}class oo extends Mt{constructor(t){super(),Dt(this,t,io,so,a,{})}}function ro(t){let e,n,s,i,o;function r(e){t[5](e)}function a(e){t[6](e)}function l(e){t[7](e)}let c={};return void 0!==t[0]&&(c.label=t[0]),void 0!==t[1]&&(c.inputValue=t[1]),void 0!==t[2]&&(c.progressValue=t[2]),e=new no({props:c}),et.push((()=>Et(e,"label",r))),et.push((()=>Et(e,"inputValue",a))),et.push((()=>Et(e,"progressValue",l))),e.$on("inputChange",t[3]),e.$on("progressChange",t[4]),{c(){At(e.$$.fragment)},m(t,n){Pt(e,t,n),o=!0},p(t,[o]){const r={};!n&&1&o&&(n=!0,r.label=t[0],ct((()=>n=!1))),!s&&2&o&&(s=!0,r.inputValue=t[1],ct((()=>s=!1))),!i&&4&o&&(i=!0,r.progressValue=t[2],ct((()=>i=!1))),e.$set(r)},i(t){o||(xt(e.$$.fragment,t),o=!0)},o(t){bt(e.$$.fragment,t),o=!1},d(t){St(e,t)}}}function ao(t,e,n){let s="延迟",i=ie.delay.delayTime.toFixed(3),o=200*i;return[s,i,o,function({detail:t}){t=+t;let e=Math.max(Math.min(.5,t),0);ve(e),n(1,i=t.toFixed(3)),n(2,o=200*e)},function({detail:t}){let e=(t/=100)/2;ve(e),n(1,i=e.toFixed(3))},function(t){s=t,n(0,s)},function(t){i=t,n(1,i)},function(t){o=t,n(2,o)}]}class lo extends Mt{constructor(t){super(),Dt(this,t,ao,ro,a,{})}}function co(t){let e,n,s,i,o;function r(e){t[5](e)}function a(e){t[6](e)}function l(e){t[7](e)}let c={comment:"左右声道平衡"};return void 0!==t[0]&&(c.label=t[0]),void 0!==t[1]&&(c.inputValue=t[1]),void 0!==t[2]&&(c.progressValue=t[2]),e=new no({props:c}),et.push((()=>Et(e,"label",r))),et.push((()=>Et(e,"inputValue",a))),et.push((()=>Et(e,"progressValue",l))),e.$on("inputChange",t[3]),e.$on("progressChange",t[4]),{c(){At(e.$$.fragment)},m(t,n){Pt(e,t,n),o=!0},p(t,[o]){const r={};!n&&1&o&&(n=!0,r.label=t[0],ct((()=>n=!1))),!s&&2&o&&(s=!0,r.inputValue=t[1],ct((()=>s=!1))),!i&&4&o&&(i=!0,r.progressValue=t[2],ct((()=>i=!1))),e.$set(r)},i(t){o||(xt(e.$$.fragment,t),o=!0)},o(t){bt(e.$$.fragment,t),o=!1},d(t){St(e,t)}}}function uo(t,e,n){let s="平衡",i=ie.stereoPanner.pan.toFixed(2),o=50*(+i+1);return[s,i,o,function({detail:t}){t=+t,ye(Math.max(Math.min(1,t),-1)),n(1,i=t.toFixed(2)),n(2,o=50*(+i+1))},function({detail:t}){let e=2*(t/=100)-1;ye(e),n(1,i=e.toFixed(2))},function(t){s=t,n(0,s)},function(t){i=t,n(1,i)},function(t){o=t,n(2,o)}]}class fo extends Mt{constructor(t){super(),Dt(this,t,uo,co,a,{})}}function po(t){let e,n,s,i,o,r,a,l;function c(e){t[8](e)}function u(e){t[9](e)}let d={label:"淡入"};function f(e){t[10](e)}function p(e){t[11](e)}void 0!==t[0]&&(d.inputValue=t[0]),void 0!==t[1]&&(d.progressValue=t[1]),e=new no({props:d}),et.push((()=>Et(e,"inputValue",c))),et.push((()=>Et(e,"progressValue",u))),e.$on("inputChange",t[4]),e.$on("progressChange",t[5]);let h={label:"淡出"};return void 0!==t[2]&&(h.inputValue=t[2]),void 0!==t[3]&&(h.progressValue=t[3]),o=new no({props:h}),et.push((()=>Et(o,"inputValue",f))),et.push((()=>Et(o,"progressValue",p))),o.$on("inputChange",t[6]),o.$on("progressChange",t[7]),{c(){At(e.$$.fragment),i=M(),At(o.$$.fragment)},m(t,n){Pt(e,t,n),E(t,i,n),Pt(o,t,n),l=!0},p(t,[i]){const l={};!n&&1&i&&(n=!0,l.inputValue=t[0],ct((()=>n=!1))),!s&&2&i&&(s=!0,l.progressValue=t[1],ct((()=>s=!1))),e.$set(l);const c={};!r&&4&i&&(r=!0,c.inputValue=t[2],ct((()=>r=!1))),!a&&8&i&&(a=!0,c.progressValue=t[3],ct((()=>a=!1))),o.$set(c)},i(t){l||(xt(e.$$.fragment,t),xt(o.$$.fragment,t),l=!0)},o(t){bt(e.$$.fragment,t),bt(o.$$.fragment,t),l=!1},d(t){St(e,t),t&&A(i),St(o,t)}}}function ho(t,e,n){let s=Object.assign({},ie.fader);function i(t){!function(t=.2,e=.2){ie.fader.fadeIn=t,ie.fader.fadeOut=e,ge()}(t.fadeIn,t.fadeOut)}let o=s.fadeIn.toFixed(3),r=200*o,a=s.fadeOut.toFixed(3),l=200*a;return[o,r,a,l,function({detail:t}){t=+t;let e=s.fadeIn=Math.max(Math.min(.5,t),0);i(s),n(0,o=t.toFixed(3)),n(1,r=200*e)},function({detail:t}){t/=100;let e=s.fadeIn=t/2;i(s),n(0,o=e.toFixed(3))},function({detail:t}){t=+t;let e=s.fadeOut=Math.max(Math.min(.5,t),0);i(s),n(2,a=t.toFixed(3)),n(3,l=200*e)},function({detail:t}){t/=100;let e=s.fadeOut=t/2;i(s),n(2,a=e.toFixed(3))},function(t){o=t,n(0,o)},function(t){r=t,n(1,r)},function(t){a=t,n(2,a)},function(t){l=t,n(3,l)}]}class mo extends Mt{constructor(t){super(),Dt(this,t,ho,po,a,{})}}function go(e){let n;return{c(){n=D("无")},m(t,e){E(t,n,e)},p:t,d(t){t&&A(n)}}}function vo(t){let e,n,s,i,o,r,a,l,c,u,d,f,p,h,m,g,v,$,y,w,x,b,k,_,L=t[0].codec+"",P=t[0].numberOfChannels+"",T=~~(t[0].bitrate/10)/100+"",R=t[0].sampleRate/1e3+"",z=t[0].bitsPerSample&&$o(t);return{c(){e=S("div"),n=D("编码"),s=S("em"),i=D(L),o=M(),r=S("div"),a=D("音轨数"),l=S("em"),c=D(P),u=M(),d=S("div"),f=D("码率"),p=S("em"),h=D(T),m=D(" kBps"),g=M(),z&&z.c(),v=M(),$=S("div"),y=D("采样率"),w=S("em"),x=D(R),b=D(" kHz"),k=M(),_=S("div"),_.innerHTML='解码器<em class="svelte-10i169f">内置 FFmpeg 解码器</em>',U(s,"class","svelte-10i169f"),U(l,"class","svelte-10i169f"),U(p,"class","svelte-10i169f"),U(w,"class","svelte-10i169f"),B($,"margin-bottom","8px")},m(t,L){E(t,e,L),C(e,n),C(e,s),C(s,i),E(t,o,L),E(t,r,L),C(r,a),C(r,l),C(l,c),E(t,u,L),E(t,d,L),C(d,f),C(d,p),C(p,h),C(p,m),E(t,g,L),z&&z.m(t,L),E(t,v,L),E(t,$,L),C($,y),C($,w),C(w,x),C(w,b),E(t,k,L),E(t,_,L)},p(t,e){1&e&&L!==(L=t[0].codec+"")&&N(i,L),1&e&&P!==(P=t[0].numberOfChannels+"")&&N(c,P),1&e&&T!==(T=~~(t[0].bitrate/10)/100+"")&&N(h,T),t[0].bitsPerSample?z?z.p(t,e):(z=$o(t),z.c(),z.m(v.parentNode,v)):z&&(z.d(1),z=null),1&e&&R!==(R=t[0].sampleRate/1e3+"")&&N(x,R)},d(t){t&&A(e),t&&A(o),t&&A(r),t&&A(u),t&&A(d),t&&A(g),z&&z.d(t),t&&A(v),t&&A($),t&&A(k),t&&A(_)}}}function $o(t){let e,n,s,i,o,r=t[0].bitsPerSample+"";return{c(){e=S("div"),n=D("位深"),s=S("em"),i=D(r),o=D(" bit"),U(s,"class","svelte-10i169f")},m(t,r){E(t,e,r),C(e,n),C(e,s),C(s,i),C(s,o)},p(t,e){1&e&&r!==(r=t[0].bitsPerSample+"")&&N(i,r)},d(t){t&&A(e)}}}function yo(t){let e;function n(t,e){return t[0]?vo:go}let s=n(t),i=s(t);return{c(){i.c(),e=T()},m(t,n){i.m(t,n),E(t,e,n)},p(t,o){s===(s=n(t))&&i?i.p(t,o):(i.d(1),i=s(t),i&&(i.c(),i.m(e.parentNode,e)))},d(t){i.d(t),t&&A(e)}}}function wo(t){let e,n,s,i,o,r,a,l,c,u,d,f,p,h,m,g,v,$,y,w,x,b,k,_,L,P,T,R,z,j,B,O,V,I,F,H,W,q,X,Y,G,J,K,Q=t[1].gain.gain>1?"+":t[1].gain.gain<1?"-":"",Z=t[1].gain.gain.toFixed(2)+"",tt=t[1].stereoPanner.pan.toFixed(2)+"",et=((1-t[1].stereoPanner.pan)/2).toFixed(2)+"",nt=((t[1].stereoPanner.pan+1)/2).toFixed(2)+"",st=t[1].delay.delayTime+"",it=t[1].fader.fadeIn+"",ot=t[1].fader.fadeOut+"";return{c(){e=S("div"),e.innerHTML='位深<em class="svelte-10i169f">Float 32bit</em>',n=M(),s=S("div"),i=D("频率"),o=S("em"),o.textContent=we.audioCtx.sampleRate/1e3+" kHz",r=M(),a=S("div"),l=S("div"),l.textContent="增益",c=M(),u=S("em"),d=S("div"),f=D(Q),p=D(Z),h=M(),m=S("div"),g=S("div"),g.textContent="平衡",v=M(),$=S("em"),y=S("div"),w=D(tt),x=D(" ("),b=D(et),k=D("/"),_=D(nt),L=D(")"),P=M(),T=S("div"),R=S("div"),R.textContent="延迟",z=M(),j=S("em"),B=S("div"),O=D(st),V=D("s"),I=M(),F=S("div"),H=S("div"),H.textContent="淡入淡出",W=M(),q=S("em"),X=S("div"),Y=D(it),G=D("s / "),J=D(ot),K=D("s"),U(o,"class","svelte-10i169f"),U(l,"class","label svelte-10i169f"),U(d,"class","link svelte-10i169f"),U(u,"class","svelte-10i169f"),U(a,"class","Row pair svelte-10i169f"),U(g,"class","label svelte-10i169f"),U(y,"class","link svelte-10i169f"),U($,"class","svelte-10i169f"),U(m,"class","Row pair svelte-10i169f"),U(R,"class","label svelte-10i169f"),U(B,"class","link svelte-10i169f"),U(j,"class","svelte-10i169f"),U(T,"class","Row pair svelte-10i169f"),U(H,"class","label svelte-10i169f"),U(X,"class","link svelte-10i169f"),U(q,"class","svelte-10i169f"),U(F,"class","Row pair svelte-10i169f")},m(t,A){E(t,e,A),E(t,n,A),E(t,s,A),C(s,i),C(s,o),E(t,r,A),E(t,a,A),C(a,l),C(a,c),C(a,u),C(u,d),C(d,f),C(d,p),E(t,h,A),E(t,m,A),C(m,g),C(m,v),C(m,$),C($,y),C(y,w),C(y,x),C(y,b),C(y,k),C(y,_),C(y,L),E(t,P,A),E(t,T,A),C(T,R),C(T,z),C(T,j),C(j,B),C(B,O),C(B,V),E(t,I,A),E(t,F,A),C(F,H),C(F,W),C(F,q),C(q,X),C(X,Y),C(X,G),C(X,J),C(X,K)},p(t,e){2&e&&Q!==(Q=t[1].gain.gain>1?"+":t[1].gain.gain<1?"-":"")&&N(f,Q),2&e&&Z!==(Z=t[1].gain.gain.toFixed(2)+"")&&N(p,Z),2&e&&tt!==(tt=t[1].stereoPanner.pan.toFixed(2)+"")&&N(w,tt),2&e&&et!==(et=((1-t[1].stereoPanner.pan)/2).toFixed(2)+"")&&N(b,et),2&e&&nt!==(nt=((t[1].stereoPanner.pan+1)/2).toFixed(2)+"")&&N(_,nt),2&e&&st!==(st=t[1].delay.delayTime+"")&&N(O,st),2&e&&it!==(it=t[1].fader.fadeIn+"")&&N(Y,it),2&e&&ot!==(ot=t[1].fader.fadeOut+"")&&N(J,ot)},d(t){t&&A(e),t&&A(n),t&&A(s),t&&A(r),t&&A(a),t&&A(h),t&&A(m),t&&A(P),t&&A(T),t&&A(I),t&&A(F)}}}function xo(e){return{c:t,m:t,p:t,d:t}}function bo(e){let n,s,i,o,r,a,l,c,u=e[11].label+"";return{c(){n=S("div"),s=S("div"),s.textContent="设备",i=M(),o=S("em"),r=S("div"),a=D(u),U(s,"class","label svelte-10i169f"),U(r,"class","link svelte-10i169f"),U(o,"class","svelte-10i169f"),U(n,"class","Row pair svelte-10i169f")},m(t,u){E(t,n,u),C(n,s),C(n,i),C(n,o),C(o,r),C(r,a),l||(c=R(r,"click",e[5]),l=!0)},p:t,d(t){t&&A(n),l=!1,c()}}}function ko(e){return{c:t,m:t,p:t,d:t}}function Co(t){let e,n={ctx:t,current:null,token:null,hasCatch:!1,pending:ko,then:bo,catch:xo,value:11};return function(t,e){const n=e.token={};function s(t,s,i,o){if(e.token!==n)return;e.resolved=o;let r=e.ctx;void 0!==i&&(r=r.slice(),r[i]=o);const a=t&&(e.current=t)(r);let l=!1;e.block&&(e.blocks?e.blocks.forEach(((t,n)=>{n!==s&&t&&(yt(),bt(t,1,1,(()=>{e.blocks[n]===t&&(e.blocks[n]=null)})),wt())})):e.block.d(1),a.c(),xt(a,1),a.m(e.mount(),e.anchor),l=!0),e.block=a,e.blocks&&(e.blocks[s]=a),l&&pt()}if((i=t)&&"object"==typeof i&&"function"==typeof i.then){const n=X();if(t.then((t=>{q(n),s(e.then,1,e.value,t),q(null)}),(t=>{if(q(n),s(e.catch,2,e.error,t),q(null),!e.hasCatch)throw t})),e.current!==e.pending)return s(e.pending,0),!0}else{if(e.current!==e.then)return s(e.then,1,e.value,t),!0;e.resolved=t}var i}(t[4](),n),{c(){e=T(),n.block.c()},m(t,s){E(t,e,s),n.block.m(t,n.anchor=s),n.mount=()=>e.parentNode,n.anchor=e},p(e,s){!function(t,e,n){const s=e.slice(),{resolved:i}=t;t.current===t.then&&(s[t.value]=i),t.current===t.catch&&(s[t.error]=i),t.block.p(s,n)}(n,t=e,s)},d(t){t&&A(e),n.block.d(t),n.token=null,n=null}}}function _o(t){let e,n,s,i,o,r,a;return n=new xi({props:{title:"输入",icon:"",$$slots:{default:[yo]},$$scope:{ctx:t}}}),i=new xi({props:{title:"处理",$$slots:{default:[wo]},$$scope:{ctx:t}}}),r=new xi({props:{hideLine:!0,title:"输出",icon:"",$$slots:{default:[Co]},$$scope:{ctx:t}}}),{c(){e=S("div"),At(n.$$.fragment),s=M(),At(i.$$.fragment),o=M(),At(r.$$.fragment),U(e,"class","Column"),B(e,"padding","12px 0")},m(t,l){E(t,e,l),Pt(n,e,null),C(e,s),Pt(i,e,null),C(e,o),Pt(r,e,null),a=!0},p(t,e){const s={};4097&e&&(s.$$scope={dirty:e,ctx:t}),n.$set(s);const o={};4098&e&&(o.$$scope={dirty:e,ctx:t}),i.$set(o);const a={};4096&e&&(a.$$scope={dirty:e,ctx:t}),r.$set(a)},i(t){a||(xt(n.$$.fragment,t),xt(i.$$.fragment,t),xt(r.$$.fragment,t),a=!0)},o(t){bt(n.$$.fragment,t),bt(i.$$.fragment,t),bt(r.$$.fragment,t),a=!1},d(t){t&&A(e),St(n),St(i),St(r)}}}function Lo(e){let n,s,i,o,r,a,l,c,u,d;return s=new oo({}),o=new fo({}),a=new lo({}),u=new mo({}),{c(){n=S("div"),At(s.$$.fragment),i=M(),At(o.$$.fragment),r=M(),At(a.$$.fragment),l=M(),c=S("div"),At(u.$$.fragment),U(n,"class","tunnerCard svelte-10i169f"),U(c,"class","tunnerCard svelte-10i169f")},m(t,e){E(t,n,e),Pt(s,n,null),C(n,i),Pt(o,n,null),C(n,r),Pt(a,n,null),E(t,l,e),E(t,c,e),Pt(u,c,null),d=!0},p:t,i(t){d||(xt(s.$$.fragment,t),xt(o.$$.fragment,t),xt(a.$$.fragment,t),xt(u.$$.fragment,t),d=!0)},o(t){bt(s.$$.fragment,t),bt(o.$$.fragment,t),bt(a.$$.fragment,t),bt(u.$$.fragment,t),d=!1},d(t){t&&A(n),St(s),St(o),St(a),t&&A(l),t&&A(c),St(u)}}}function Eo(t){let e,n,s,i,o,r,a,l,c,u,d,f,p,h;return i=new Ve({props:{$$slots:{default:[_o]},$$scope:{ctx:t}}}),t[6](i),l=new Ve({props:{$$slots:{default:[Lo]},$$scope:{ctx:t}}}),t[7](l),{c(){e=S("div"),n=S("div"),s=S("div"),At(i.$$.fragment),o=M(),r=S("div"),a=S("div"),At(l.$$.fragment),c=M(),u=S("div"),d=S("div"),d.textContent="完成",U(s,"class","Row"),B(s,"height","72vh"),B(s,"margin-left","12px"),U(n,"class","Column outerWindow tunnerPanel svelte-10i169f"),B(n,"width","300px"),U(a,"class","Column"),B(a,"height","calc(72vh - 48px)"),B(a,"width","100%"),U(d,"class","btn big radius px4 accent"),U(u,"class","Row bottomGroup svelte-10i169f"),B(u,"padding","0 12px"),U(r,"class","Column outerWindow svelte-10i169f"),B(r,"height","100%"),B(r,"width","calc(72vw - 300px)"),U(e,"class","Row"),B(e,"height","72vh"),B(e,"width","72vw")},m(m,g){E(m,e,g),C(e,n),C(n,s),Pt(i,s,null),C(e,o),C(e,r),C(r,a),Pt(l,a,null),C(r,c),C(r,u),C(u,d),f=!0,p||(h=R(d,"click",t[8]),p=!0)},p(t,[e]){const n={};4099&e&&(n.$$scope={dirty:e,ctx:t}),i.$set(n);const s={};4096&e&&(s.$$scope={dirty:e,ctx:t}),l.$set(s)},i(t){f||(xt(i.$$.fragment,t),xt(l.$$.fragment,t),f=!0)},o(t){bt(i.$$.fragment,t),bt(l.$$.fragment,t),f=!1},d(n){n&&A(e),t[6](null),St(i),t[7](null),St(l),p=!1,h()}}}function Ao(t,e,n){let s,i,o=Player.getMetadata()?.format,r=store.getSync("process");function a(t){n(0,o=t.format)}function l(t){n(1,r=t)}Y((()=>{s.update(),i.update(),rem.on("metadata",a),rem.on("processUpdate",l)})),G((()=>{rem.off("metadata",a),rem.off("processUpdate",l)}));return[o,r,s,i,async function(){const t=await pe();return t[await fe(t)]},()=>{window.rem.emit("tunnerClose"),window.Pager.openNew("设置",Qi)},function(t){et[t?"unshift":"push"]((()=>{s=t,n(2,s)}))},function(t){et[t?"unshift":"push"]((()=>{i=t,n(3,i)}))},()=>{window.rem.emit("tunnerClose")}]}class Po extends Mt{constructor(t){super(),Dt(this,t,Ao,Eo,a,{})}}function So(t){let e,n;return e=new Po({}),{c(){At(e.$$.fragment)},m(t,s){Pt(e,t,s),n=!0},i(t){n||(xt(e.$$.fragment,t),n=!0)},o(t){bt(e.$$.fragment,t),n=!1},d(t){St(e,t)}}}function Do(t){let e,n,s,i,o,r,a,l,c,d,m,g,v,$,y,w,x,b,k;function _(e){t[14](e)}function L(e){t[15](e)}function P(e){t[16](e)}function D(e){t[17](e)}let T={};function z(e){t[18](e)}function N(e){t[19](e)}function j(e){t[20](e)}void 0!==t[1]&&(T.display=t[1]),void 0!==t[2]&&(T.x=t[2]),void 0!==t[3]&&(T.y=t[3]),void 0!==t[4]&&(T.data=t[4]),n=new Es({props:T}),et.push((()=>Et(n,"display",_))),et.push((()=>Et(n,"x",L))),et.push((()=>Et(n,"y",P))),et.push((()=>Et(n,"data",D)));let B={};function O(e){t[21](e)}void 0!==t[7]&&(B.enable=t[7]),void 0!==t[8]&&(B.active=t[8]),void 0!==t[6]&&(B.htmlElement=t[6]),l=new Ss({props:B}),et.push((()=>Et(l,"enable",z))),et.push((()=>Et(l,"active",N))),et.push((()=>Et(l,"htmlElement",j)));let V={shadowBlurRadius:24,noLayer:!1,$$slots:{default:[So]},$$scope:{ctx:t}};void 0!==t[9]&&(V.showPopupWindow=t[9]),v=new as({props:V}),et.push((()=>Et(v,"showPopupWindow",O)));const I=t[13].default,F=u(I,t,t[24],null);return{c(){e=S("div"),At(n.$$.fragment),a=M(),At(l.$$.fragment),g=M(),At(v.$$.fragment),y=M(),F&&F.c(),U(e,"class",w="container "+(t[0]?"layer":"")+" svelte-eujq9c")},m(s,i){E(s,e,i),Pt(n,e,null),C(e,a),Pt(l,e,null),C(e,g),Pt(v,e,null),C(e,y),F&&F.m(e,null),t[23](e),x=!0,b||(k=R(e,"click",t[22]),b=!0)},p(t,[a]){const u={};!s&&2&a&&(s=!0,u.display=t[1],ct((()=>s=!1))),!i&&4&a&&(i=!0,u.x=t[2],ct((()=>i=!1))),!o&&8&a&&(o=!0,u.y=t[3],ct((()=>o=!1))),!r&&16&a&&(r=!0,u.data=t[4],ct((()=>r=!1))),n.$set(u);const g={};!c&&128&a&&(c=!0,g.enable=t[7],ct((()=>c=!1))),!d&&256&a&&(d=!0,g.active=t[8],ct((()=>d=!1))),!m&&64&a&&(m=!0,g.htmlElement=t[6],ct((()=>m=!1))),l.$set(g);const y={};16777216&a&&(y.$$scope={dirty:a,ctx:t}),!$&&512&a&&($=!0,y.showPopupWindow=t[9],ct((()=>$=!1))),v.$set(y),F&&F.p&&(!x||16777216&a)&&p(F,I,t,t[24],x?f(I,t[24],a,null):h(t[24]),null),(!x||1&a&&w!==(w="container "+(t[0]?"layer":"")+" svelte-eujq9c"))&&U(e,"class",w)},i(t){x||(xt(n.$$.fragment,t),xt(l.$$.fragment,t),xt(v.$$.fragment,t),xt(F,t),x=!0)},o(t){bt(n.$$.fragment,t),bt(l.$$.fragment,t),bt(v.$$.fragment,t),bt(F,t),x=!1},d(s){s&&A(e),St(n),St(l),St(v),F&&F.d(s),t[23](null),b=!1,k()}}}function Mo(t,e,n){let{$$slots:s={},$$scope:i}=e,o=!1;const r=new ne;function a(){n(0,o=!0)}function l(){n(0,o=!1),n(1,c=!1)}let c,u,d,f,p;function h(t,e,s){n(2,u=visualViewport.width-t>200?t:t-200),n(3,d=e);let i=[];for(const t of contextMap.keys())s.includes(t)&&i.push(contextMap.get(t));i.length&&(a(),n(4,f=i),n(1,c=!0))}r.on("active",a),r.on("disable",l),window.addEventListener("mousedown",(t=>{if(2===t.button){const{pageX:e,pageY:n,path:s}=t;if(c)return r.emit("disable"),requestIdleCallback((()=>h(e,n,s)));t.preventDefault(),h(e,n,s)}})),K("layerEvents",r);let m,g,v,$=new Proxy({click:!1,scroll:0,x:visualViewport.width/2,y:visualViewport.height/2,enable:g},{get:(t,e)=>t[e],set(t,e,s){switch(e){case"click":n(8,v=s),t[e]=s;break;case"enable":n(7,g=s),t[e]=s;break;case"x":n(6,m.style.left=s+"px",m),t[e]=s;break;case"y":n(6,m.style.top=s+"px",m),t[e]=s}return!0}});Y((()=>{oi.init($),ri.injectLayer(p),function(t){const e=store.getSync("profile"),n=new fi({url:e.avatarUrl}),s=new pi,i=gi("修改你的头像与昵称",2);i.style.marginTop="40px",n.style.marginTop="20px",s.style.marginTop="60px",s.input.value=e.nickname;const o=mi(),r=mi();o.appendChild(i),o.appendChild(n),o.appendChild(s);const a=gi("修改你的介绍",2);a.style.marginTop="40px",r.appendChild(a),r.appendChild(new pi(!0)),hi.inject(t),hi.addPage(o,r)}(p)})),Y((()=>{$i.inject(p),ti.inject(p)}));let y=!1;rem.on("tunnerOpen",(()=>n(9,y=!0))),rem.on("tunnerClose",(()=>n(9,y=!1)));return t.$$set=t=>{"$$scope"in t&&n(24,i=t.$$scope)},[o,c,u,d,f,p,m,g,v,y,r,a,l,s,function(t){c=t,n(1,c)},function(t){u=t,n(2,u)},function(t){d=t,n(3,d)},function(t){f=t,n(4,f)},function(t){g=t,n(7,g)},function(t){v=t,n(8,v)},function(t){m=t,n(6,m)},function(t){y=t,n(9,y)},()=>r.emit("disable"),function(t){et[t?"unshift":"push"]((()=>{p=t,n(5,p)}))},i]}class To extends Mt{constructor(t){super(),Dt(this,t,Mo,Do,a,{activeLayer:11,disableLayer:12})}get activeLayer(){return this.$$.ctx[11]}get disableLayer(){return this.$$.ctx[12]}}function Ro(t){let e,n;return e=new ns({}),{c(){At(e.$$.fragment)},m(t,s){Pt(e,t,s),n=!0},i(t){n||(xt(e.$$.fragment,t),n=!0)},o(t){bt(e.$$.fragment,t),n=!1},d(t){St(e,t)}}}function zo(e){let n,s,i,o;return{c(){n=S("div"),s=S("div"),s.textContent="  修改个人信息",U(s,"class","btn outlined"),B(n,"padding-left","56px"),B(n,"margin","8px 0px")},m(t,r){E(t,n,r),C(n,s),i||(o=R(s,"click",e[6]),i=!0)},p:t,d(t){t&&A(n),i=!1,o()}}}function Uo(e){let n,s;return n=new ys({props:{isUrl:!1,style:"font-size: small",size:"small",avatar:"",data:"登陆"}}),n.$on("click",e[4]),{c(){At(n.$$.fragment)},m(t,e){Pt(n,t,e),s=!0},p:t,i(t){s||(xt(n.$$.fragment,t),s=!0)},o(t){bt(n.$$.fragment,t),s=!1},d(t){St(n,t)}}}function No(e){let n,s;return n=new ys({props:{style:"font-size: small",isUrl:!1,size:"small",avatar:"",data:"注销"}}),n.$on("click",e[5]),{c(){At(n.$$.fragment)},m(t,e){Pt(n,t,e),s=!0},p:t,i(t){s||(xt(n.$$.fragment,t),s=!0)},o(t){bt(n.$$.fragment,t),s=!1},d(t){St(n,t)}}}function jo(t){let e,n,s,i,o,r,a,l,c,u,d,f,p,h,m,g,v,$;function y(e){t[8](e)}let w={$$slots:{default:[Ro]},$$scope:{ctx:t}};void 0!==t[2]&&(w.showPopupWindow=t[2]),s=new as({props:w}),et.push((()=>Et(s,"showPopupWindow",y))),s.$on("layerClick",t[3]),r=new ys({props:{isUrl:t[0].avatarUrl,avatar:t[0].avatarUrl||"",data:t[0].name,width:28,height:28,clickable:!1}});let x=t[1]&&zo(t);const b=[No,Uo],k=[];function _(t,e){return t[1]?0:1}return c=_(t),u=k[c]=b[c](t),p=new ys({props:{isUrl:!1,style:"font-size: small",size:"small",avatar:"",data:"设置"}}),p.$on("click",t[7]),m=new ys({props:{isUrl:!1,style:"font-size: small",size:"small",avatar:"",data:"下载管理"}}),{c(){e=S("div"),n=S("header"),At(s.$$.fragment),o=M(),At(r.$$.fragment),a=M(),x&&x.c(),l=M(),u.c(),d=M(),f=S("div"),At(p.$$.fragment),h=M(),At(m.$$.fragment),g=M(),v=S("footer"),v.textContent="REM",U(n,"class","row svelte-hqlcci"),U(f,"class","article row svelte-hqlcci"),U(v,"class","column svelte-hqlcci"),U(e,"class","row c svelte-hqlcci")},m(t,i){E(t,e,i),C(e,n),Pt(s,n,null),C(n,o),Pt(r,n,null),C(n,a),x&&x.m(n,null),C(n,l),k[c].m(n,null),C(e,d),C(e,f),Pt(p,f,null),C(f,h),Pt(m,f,null),C(e,g),C(e,v),$=!0},p(t,[e]){const o={};1024&e&&(o.$$scope={dirty:e,ctx:t}),!i&&4&e&&(i=!0,o.showPopupWindow=t[2],ct((()=>i=!1))),s.$set(o);const a={};1&e&&(a.isUrl=t[0].avatarUrl),1&e&&(a.avatar=t[0].avatarUrl||""),1&e&&(a.data=t[0].name),r.$set(a),t[1]?x?x.p(t,e):(x=zo(t),x.c(),x.m(n,l)):x&&(x.d(1),x=null);let d=c;c=_(t),c===d?k[c].p(t,e):(yt(),bt(k[d],1,1,(()=>{k[d]=null})),wt(),u=k[c],u?u.p(t,e):(u=k[c]=b[c](t),u.c()),xt(u,1),u.m(n,null))},i(t){$||(xt(s.$$.fragment,t),xt(r.$$.fragment,t),xt(u),xt(p.$$.fragment,t),xt(m.$$.fragment,t),$=!0)},o(t){bt(s.$$.fragment,t),bt(r.$$.fragment,t),bt(u),bt(p.$$.fragment,t),bt(m.$$.fragment,t),$=!1},d(t){t&&A(e),St(s),St(r),x&&x.d(),k[c].d(),St(p),St(m)}}}function Bo(t,e,n){let s=Q("close"),{user:i}=e,o=!!i.avatarUrl,r=!1;return t.$$set=t=>{"user"in t&&n(0,i=t.user)},[i,o,r,async()=>{n(2,r=!1);const t=await store.get("profile");t&&(n(0,i={avatarUrl:t.avatarUrl,name:t.nickname}),n(1,o=!!i.avatarUrl))},()=>{n(2,r=!0)},function(){NeteaseApi.logout(),store.rm("profile"),store.rm("token"),n(0,i={avatarUrl:"",name:"未登录"}),n(1,o=!!i.avatarUrl)},()=>{s(),hi.display(!0)},function(){s(),Pager.openNew("设置",Qi,{})},function(t){r=t,n(2,r)}]}class Oo extends Mt{constructor(t){super(),Dt(this,t,Bo,jo,a,{user:0})}}function Vo(t,e,n){const s=t.slice();return s[23]=e[n],s[33]=n,s}function Io(t,e,n){const s=t.slice();return s[23]=e[n],s}function Fo(t,e,n){const s=t.slice();return s[23]=e[n],s}function Ho(t,e,n){const s=t.slice();return s[23]=e[n],s}function Wo(t,e,n){const s=t.slice();return s[23]=e[n],s}function qo(t){let e,n,s;function i(e){t[14](e)}let o={};return void 0!==t[2]&&(o.user=t[2]),e=new Oo({props:o}),et.push((()=>Et(e,"user",i))),{c(){At(e.$$.fragment)},m(t,n){Pt(e,t,n),s=!0},p(t,s){const i={};!n&&4&s[0]&&(n=!0,i.user=t[2],ct((()=>n=!1))),e.$set(i)},i(t){s||(xt(e.$$.fragment,t),s=!0)},o(t){bt(e.$$.fragment,t),s=!1},d(t){St(e,t)}}}function Xo(t){let e,n,s=t[5],i=[];for(let e=0;e<s.length;e+=1)i[e]=Go(Vo(t,s,e));const o=t=>bt(i[t],1,1,(()=>{i[t]=null}));return{c(){for(let t=0;t<i.length;t+=1)i[t].c();e=T()},m(t,s){for(let e=0;e<i.length;e+=1)i[e].m(t,s);E(t,e,s),n=!0},p(t,n){if(552&n[0]){let r;for(s=t[5],r=0;r<s.length;r+=1){const o=Vo(t,s,r);i[r]?(i[r].p(o,n),xt(i[r],1)):(i[r]=Go(o),i[r].c(),xt(i[r],1),i[r].m(e.parentNode,e))}for(yt(),r=s.length;r<i.length;r+=1)o(r);wt()}},i(t){if(!n){for(let t=0;t<s.length;t+=1)xt(i[t]);n=!0}},o(t){i=i.filter(Boolean);for(let t=0;t<i.length;t+=1)bt(i[t]);n=!1},d(t){P(i,t),t&&A(e)}}}function Yo(t){let e,n,s,i,o,r=t[6].songs&&Jo(t),a=t[6].artists&&Qo(t),l=t[6].albums&&tr(t),c=t[6].playlists&&nr(t);return{c(){r&&r.c(),e=M(),a&&a.c(),n=M(),l&&l.c(),s=M(),c&&c.c(),i=T()},m(t,u){r&&r.m(t,u),E(t,e,u),a&&a.m(t,u),E(t,n,u),l&&l.m(t,u),E(t,s,u),c&&c.m(t,u),E(t,i,u),o=!0},p(t,o){t[6].songs?r?(r.p(t,o),64&o[0]&&xt(r,1)):(r=Jo(t),r.c(),xt(r,1),r.m(e.parentNode,e)):r&&(yt(),bt(r,1,1,(()=>{r=null})),wt()),t[6].artists?a?(a.p(t,o),64&o[0]&&xt(a,1)):(a=Qo(t),a.c(),xt(a,1),a.m(n.parentNode,n)):a&&(yt(),bt(a,1,1,(()=>{a=null})),wt()),t[6].albums?l?(l.p(t,o),64&o[0]&&xt(l,1)):(l=tr(t),l.c(),xt(l,1),l.m(s.parentNode,s)):l&&(yt(),bt(l,1,1,(()=>{l=null})),wt()),t[6].playlists?c?(c.p(t,o),64&o[0]&&xt(c,1)):(c=nr(t),c.c(),xt(c,1),c.m(i.parentNode,i)):c&&(yt(),bt(c,1,1,(()=>{c=null})),wt())},i(t){o||(xt(r),xt(a),xt(l),xt(c),o=!0)},o(t){bt(r),bt(a),bt(l),bt(c),o=!1},d(t){r&&r.d(t),t&&A(e),a&&a.d(t),t&&A(n),l&&l.d(t),t&&A(s),c&&c.d(t),t&&A(i)}}}function Go(t){let e,n;return e=new ys({props:{size:"small",data:t[23],isUrl:!1,avatar:t[33]+1}}),e.$on("mousedown",(function(){return t[19](t[23])})),{c(){At(e.$$.fragment)},m(t,s){Pt(e,t,s),n=!0},p(n,s){t=n;const i={};32&s[0]&&(i.data=t[23]),e.$set(i)},i(t){n||(xt(e.$$.fragment,t),n=!0)},o(t){bt(e.$$.fragment,t),n=!1},d(t){St(e,t)}}}function Jo(t){let e,n,s,i,o=t[6].songs,r=[];for(let e=0;e<o.length;e+=1)r[e]=Ko(Wo(t,o,e));const a=t=>bt(r[t],1,1,(()=>{r[t]=null}));return{c(){e=S("div"),e.textContent="歌曲",n=M();for(let t=0;t<r.length;t+=1)r[t].c();s=T(),U(e,"class","title svelte-1ewfxbv")},m(t,o){E(t,e,o),E(t,n,o);for(let e=0;e<r.length;e+=1)r[e].m(t,o);E(t,s,o),i=!0},p(t,e){if(584&e[0]){let n;for(o=t[6].songs,n=0;n<o.length;n+=1){const i=Wo(t,o,n);r[n]?(r[n].p(i,e),xt(r[n],1)):(r[n]=Ko(i),r[n].c(),xt(r[n],1),r[n].m(s.parentNode,s))}for(yt(),n=o.length;n<r.length;n+=1)a(n);wt()}},i(t){if(!i){for(let t=0;t<o.length;t+=1)xt(r[t]);i=!0}},o(t){r=r.filter(Boolean);for(let t=0;t<r.length;t+=1)bt(r[t]);i=!1},d(t){t&&A(e),t&&A(n),P(r,t),t&&A(s)}}}function Ko(t){let e,n;return e=new ys({props:{size:"small",data:t[23].name,isUrl:!1,avatar:""}}),e.$on("mousedown",(function(){return t[15](t[23])})),{c(){At(e.$$.fragment)},m(t,s){Pt(e,t,s),n=!0},p(n,s){t=n;const i={};64&s[0]&&(i.data=t[23].name),e.$set(i)},i(t){n||(xt(e.$$.fragment,t),n=!0)},o(t){bt(e.$$.fragment,t),n=!1},d(t){St(e,t)}}}function Qo(t){let e,n,s,i,o,r,a=t[6].artists,l=[];for(let e=0;e<a.length;e+=1)l[e]=Zo(Ho(t,a,e));const c=t=>bt(l[t],1,1,(()=>{l[t]=null}));return{c(){e=S("div"),n=M(),s=S("div"),s.textContent="艺术家",i=M();for(let t=0;t<l.length;t+=1)l[t].c();o=T(),U(e,"class","divider"),U(s,"class","title svelte-1ewfxbv")},m(t,a){E(t,e,a),E(t,n,a),E(t,s,a),E(t,i,a);for(let e=0;e<l.length;e+=1)l[e].m(t,a);E(t,o,a),r=!0},p(t,e){if(584&e[0]){let n;for(a=t[6].artists,n=0;n<a.length;n+=1){const s=Ho(t,a,n);l[n]?(l[n].p(s,e),xt(l[n],1)):(l[n]=Zo(s),l[n].c(),xt(l[n],1),l[n].m(o.parentNode,o))}for(yt(),n=a.length;n<l.length;n+=1)c(n);wt()}},i(t){if(!r){for(let t=0;t<a.length;t+=1)xt(l[t]);r=!0}},o(t){l=l.filter(Boolean);for(let t=0;t<l.length;t+=1)bt(l[t]);r=!1},d(t){t&&A(e),t&&A(n),t&&A(s),t&&A(i),P(l,t),t&&A(o)}}}function Zo(t){let e,n;return e=new ys({props:{size:"small",data:t[23].name,isUrl:!0,avatar:t[23].img1v1Url,width:24,height:24}}),e.$on("mousedown",(function(){return t[16](t[23])})),{c(){At(e.$$.fragment)},m(t,s){Pt(e,t,s),n=!0},p(n,s){t=n;const i={};64&s[0]&&(i.data=t[23].name),64&s[0]&&(i.avatar=t[23].img1v1Url),e.$set(i)},i(t){n||(xt(e.$$.fragment,t),n=!0)},o(t){bt(e.$$.fragment,t),n=!1},d(t){St(e,t)}}}function tr(t){let e,n,s,i,o,r,a=t[6].albums,l=[];for(let e=0;e<a.length;e+=1)l[e]=er(Fo(t,a,e));const c=t=>bt(l[t],1,1,(()=>{l[t]=null}));return{c(){e=S("div"),n=M(),s=S("div"),s.textContent="专辑",i=M();for(let t=0;t<l.length;t+=1)l[t].c();o=T(),U(e,"class","divider"),U(s,"class","title svelte-1ewfxbv")},m(t,a){E(t,e,a),E(t,n,a),E(t,s,a),E(t,i,a);for(let e=0;e<l.length;e+=1)l[e].m(t,a);E(t,o,a),r=!0},p(t,e){if(584&e[0]){let n;for(a=t[6].albums,n=0;n<a.length;n+=1){const s=Fo(t,a,n);l[n]?(l[n].p(s,e),xt(l[n],1)):(l[n]=er(s),l[n].c(),xt(l[n],1),l[n].m(o.parentNode,o))}for(yt(),n=a.length;n<l.length;n+=1)c(n);wt()}},i(t){if(!r){for(let t=0;t<a.length;t+=1)xt(l[t]);r=!0}},o(t){l=l.filter(Boolean);for(let t=0;t<l.length;t+=1)bt(l[t]);r=!1},d(t){t&&A(e),t&&A(n),t&&A(s),t&&A(i),P(l,t),t&&A(o)}}}function er(t){let e,n;return e=new ys({props:{size:"small",data:t[23].name,isUrl:!1,avatar:" "}}),e.$on("mousedown",(function(){return t[17](t[23])})),{c(){At(e.$$.fragment)},m(t,s){Pt(e,t,s),n=!0},p(n,s){t=n;const i={};64&s[0]&&(i.data=t[23].name),e.$set(i)},i(t){n||(xt(e.$$.fragment,t),n=!0)},o(t){bt(e.$$.fragment,t),n=!1},d(t){St(e,t)}}}function nr(t){let e,n,s,i,o,r,a=t[6].playlists,l=[];for(let e=0;e<a.length;e+=1)l[e]=sr(Io(t,a,e));const c=t=>bt(l[t],1,1,(()=>{l[t]=null}));return{c(){e=S("div"),n=M(),s=S("div"),s.textContent="歌单",i=M();for(let t=0;t<l.length;t+=1)l[t].c();o=T(),U(e,"class","divider"),U(s,"class","title svelte-1ewfxbv")},m(t,a){E(t,e,a),E(t,n,a),E(t,s,a),E(t,i,a);for(let e=0;e<l.length;e+=1)l[e].m(t,a);E(t,o,a),r=!0},p(t,e){if(584&e[0]){let n;for(a=t[6].playlists,n=0;n<a.length;n+=1){const s=Io(t,a,n);l[n]?(l[n].p(s,e),xt(l[n],1)):(l[n]=sr(s),l[n].c(),xt(l[n],1),l[n].m(o.parentNode,o))}for(yt(),n=a.length;n<l.length;n+=1)c(n);wt()}},i(t){if(!r){for(let t=0;t<a.length;t+=1)xt(l[t]);r=!0}},o(t){l=l.filter(Boolean);for(let t=0;t<l.length;t+=1)bt(l[t]);r=!1},d(t){t&&A(e),t&&A(n),t&&A(s),t&&A(i),P(l,t),t&&A(o)}}}function sr(t){let e,n;return e=new ys({props:{size:"small",data:t[23].name,isUrl:!0,avatar:t[23].coverImgUrl,width:24,height:24}}),e.$on("mousedown",(function(){return t[18](t[23])})),{c(){At(e.$$.fragment)},m(t,s){Pt(e,t,s),n=!0},p(n,s){t=n;const i={};64&s[0]&&(i.data=t[23].name),64&s[0]&&(i.avatar=t[23].coverImgUrl),e.$set(i)},i(t){n||(xt(e.$$.fragment,t),n=!0)},o(t){bt(e.$$.fragment,t),n=!1},d(t){St(e,t)}}}function ir(t){let e,n,s,i;const o=[Yo,Xo],r=[];function a(t,e){return t[6]?0:1}return e=a(t),n=r[e]=o[e](t),{c(){n.c(),s=T()},m(t,n){r[e].m(t,n),E(t,s,n),i=!0},p(t,i){let l=e;e=a(t),e===l?r[e].p(t,i):(yt(),bt(r[l],1,1,(()=>{r[l]=null})),wt(),n=r[e],n?n.p(t,i):(n=r[e]=o[e](t),n.c()),xt(n,1),n.m(s.parentNode,s))},i(t){i||(xt(n),i=!0)},o(t){bt(n),i=!1},d(t){r[e].d(t),t&&A(s)}}}function or(t){let e,n,s,i,r,a,l,c,u,d,f,p,h,m,g;return c=new Xt({props:{size:"big",isUrl:t[0],avatar:t[0]||"",width:32,height:32}}),c.$on("click",t[7]),d=new as({props:{showPopupWindow:t[1],cssText:"position: absolute; top: 64px; overflow: hidden;",$$slots:{default:[qo]},$$scope:{ctx:t}}}),d.$on("layerClick",t[8]),d.$on("animIn",rr),p=new as({props:{noLayer:!0,showPopupWindow:t[4],cssText:"position: fixed; top: 56px; width: 360px; overflow: hidden; max-height: calc(100vh - 148px); min-height: 0; background-color: var(--controlWhite);",$$slots:{default:[ir]},$$scope:{ctx:t}}}),p.$on("layerClick",t[20]),{c(){e=S("div"),n=S("div"),s=S("span"),i=M(),r=S("input"),a=M(),l=S("div"),At(c.$$.fragment),u=M(),At(d.$$.fragment),f=M(),At(p.$$.fragment),U(s,"class","iconfont icon-search avatar menu svelte-1ewfxbv"),U(r,"type","text"),U(r,"class","input svelte-1ewfxbv"),U(r,"placeholder","搜索歌曲和歌手"),U(l,"class","avatar-container svelte-1ewfxbv"),U(n,"class","column search svelte-1ewfxbv"),U(e,"class","column svelte-1ewfxbv"),B(e,"margin-left","48px"),B(e,"-webkit-app-region","no-drag")},m(o,v){E(o,e,v),C(e,n),C(n,s),C(n,i),C(n,r),j(r,t[3]),C(n,a),C(n,l),Pt(c,l,null),C(e,u),Pt(d,e,null),C(e,f),Pt(p,e,null),h=!0,m||(g=[R(s,"click",t[9]),R(r,"input",t[12]),R(r,"change",t[9]),R(r,"focus",t[10]),R(r,"blur",t[13]),R(r,"input",t[11])],m=!0)},p(t,e){8&e[0]&&r.value!==t[3]&&j(r,t[3]);const n={};1&e[0]&&(n.isUrl=t[0]),1&e[0]&&(n.avatar=t[0]||""),c.$set(n);const s={};2&e[0]&&(s.showPopupWindow=t[1]),4&e[0]|8&e[1]&&(s.$$scope={dirty:e,ctx:t}),d.$set(s);const i={};16&e[0]&&(i.showPopupWindow=t[4]),104&e[0]|8&e[1]&&(i.$$scope={dirty:e,ctx:t}),p.$set(i)},i(t){h||(xt(c.$$.fragment,t),xt(d.$$.fragment,t),xt(p.$$.fragment,t),h=!0)},o(t){bt(c.$$.fragment,t),bt(d.$$.fragment,t),bt(p.$$.fragment,t),h=!1},d(t){t&&A(e),St(c),St(d),St(p),m=!1,o(g)}}}function rr(t){t.detail.animate({transform:["translate(-20px, -32px) scale(0.9)","translate(0px, 0px) scale(1)"],opacity:[0,1]},100)}function ar(t,e,n){let s=!1;let i=store.getSync("profile"),o={avatarUrl:"",name:"未登录"},{avatarUrl:r=(i?i.avatarUrl:"")}=e;async function a(){i&&n(2,o={avatarUrl:i.avatarUrl,name:i.nickname}),n(0,r=i?i.avatarUrl:"")}a(),rem.on("__updateLoginAvatar",(async()=>{i=await store.get("profile"),a()}));let l,c,u=!1,d=[];async function f(){await NeteaseApi.search(l)}return t.$$set=t=>{"avatarUrl"in t&&n(0,r=t.avatarUrl)},[r,s,o,l,u,d,c,()=>n(1,s=!0),async()=>{n(1,s=!1);const t=await store.get("profile");t&&n(2,o={avatarUrl:t.avatarUrl,name:t.nickname}),n(0,r=t?t.avatarUrl:"")},f,async function(){n(5,d=(await NeteaseApi.search()).body.result.hots.reduce(((t,e)=>[...t,e.first]),[])),n(4,u=!0)},async function(){if(!l)return n(6,c=null);const t=(await NeteaseApi.suggest(l)).body.result;console.log(t),Object.keys(t).length&&n(6,c=t)},function(){l=this.value,n(3,l)},()=>setTimeout((()=>n(4,u=!1))),function(t){o=t,n(2,o)},t=>{n(3,l=`${t.name}`),f()},t=>{n(3,l=`${t.name}`),f()},t=>{n(3,l=`${t.name}`),f()},t=>{n(3,l=`${t.name}`),f()},t=>{n(3,l=t),f()},()=>n(4,u=!1)]}class lr extends Mt{constructor(t){super(),Dt(this,t,ar,or,a,{avatarUrl:0},null,[-1,-1])}}function cr(t){let e,n,s,i,o,r,a,l,u,d,f,p,h,m,g,v,$,y,w,x,b,k;function _(e){t[9](e)}function L(e){t[10](e)}l=new lr({});let P={};void 0!==t[0]&&(P.selected=t[0]),void 0!==t[1]&&(P.tabs=t[1]),d=new It({props:P}),et.push((()=>Et(d,"selected",_))),et.push((()=>Et(d,"tabs",L)));return g=new ze({props:{}}),t[11](g),$=new Pe({}),w=new To({}),b=new In({}),{c(){e=S("div"),n=S("img"),i=M(),o=S("div"),r=S("div"),a=S("div"),At(l.$$.fragment),u=M(),At(d.$$.fragment),m=M(),At(g.$$.fragment),v=M(),At($.$$.fragment),y=M(),At(w.$$.fragment),x=M(),At(b.$$.fragment),U(n,"class","wallpaper svelte-b18196"),c(n.src,s=t[3])||U(n,"src",s),U(n,"alt",""),U(n,"width",t[5]),B(a,"width","100vw"),B(a,"height","54px"),B(a,"justify-content","center"),B(a,"-webkit-app-region","drag"),U(a,"class","Row"),U(r,"class",h="row head"+(t[7]?" color":"")+(t[4]?"":" noneAcrylic")+" svelte-b18196"),U(o,"class","row window svelte-b18196"),B(e,"transition","background-color 0.2s"),B(e,"background-color","var("+(t[4]?"--acrylicBackgroundColor":"--noneAcrylicBackgroundColor")+")")},m(s,c){E(s,e,c),C(e,n),t[8](n),C(e,i),C(e,o),C(o,r),C(r,a),Pt(l,a,null),C(r,u),Pt(d,r,null),C(o,m),Pt(g,o,null),C(o,v),Pt($,o,null),C(e,y),Pt(w,e,null),E(s,x,c),Pt(b,s,c),k=!0},p(t,[i]){(!k||8&i&&!c(n.src,s=t[3]))&&U(n,"src",s),(!k||32&i)&&U(n,"width",t[5]);const o={};!f&&1&i&&(f=!0,o.selected=t[0],ct((()=>f=!1))),!p&&2&i&&(p=!0,o.tabs=t[1],ct((()=>p=!1))),d.$set(o),(!k||144&i&&h!==(h="row head"+(t[7]?" color":"")+(t[4]?"":" noneAcrylic")+" svelte-b18196"))&&U(r,"class",h);g.$set({}),(!k||16&i)&&B(e,"background-color","var("+(t[4]?"--acrylicBackgroundColor":"--noneAcrylicBackgroundColor")+")")},i(t){k||(xt(l.$$.fragment,t),xt(d.$$.fragment,t),xt(g.$$.fragment,t),xt($.$$.fragment,t),xt(w.$$.fragment,t),xt(b.$$.fragment,t),k=!0)},o(t){bt(l.$$.fragment,t),bt(d.$$.fragment,t),bt(g.$$.fragment,t),bt($.$$.fragment,t),bt(w.$$.fragment,t),bt(b.$$.fragment,t),k=!1},d(n){n&&A(e),t[8](null),St(l),St(d),t[11](null),St(g),St($),St(w),n&&A(x),St(b,n)}}}function ur(){return new Promise((t=>{hooks.once("win:bounds",((e,n)=>{t(n)})),hooks.send("winquery:bounds")}))}function dr(t,e,n){let s=zn;store.getSync("profile")?store.get("cookie").then((t=>NeteaseApi.checkIn(t))):s=ns;let i,o=-1,r=[s,Nn],a=["我的","发现"];window.Pager=(()=>{let t=[{},{}],e=[0],s=(new Map).set("我的",{}).set("发现",{}),l=[];function c(e,i,o={},l=!1){if(p(e)){if(l){const n=a.indexOf(e);return r[n]=i,t[n]=o,!1}return!0}return r.push(i),a.push(e),n(1,a),t.push(o),s.set(e,{}),!0}function u(s,c=!1){(s<0||s>=a.length)&&(s=0);let u=t[s];"function"==typeof u&&(u=u.call(null)),(o!==s||c)&&(l.forEach((t=>t.call(null))),l=[],e[s]=a[o],i.display(r[s],u),n(0,o=s))}function d(t,e=!1){"number"!=typeof t&&(t=a.indexOf(t)),u(t,e)}function f(i){(i<0||i>=a.length)&&(i=0),s.delete(a[o]),l=[],r=r.slice(0,i).concat(r.slice(i+1)),n(1,a=a.slice(0,i).concat(a.slice(i+1)));let c="function"==typeof t[i]?t[i]().onTabDestroy:t[i].onTabDestroy;t=t.slice(0,i).concat(t.slice(i+1)),"function"==typeof c&&c(i),function(){let t=a.indexOf(e[o]);!~t&&(t=0),u(t,!0)}()}function p(t){return"string"==typeof t?~a.indexOf(t):~r.indexOf(t)}return{add:c,select:d,remove:function(t){"number"!=typeof t&&(t=a.indexOf(t)),f(t)},has:p,openNew:async function(t,e,n,s=!1){if(c(t,e,n,s))return d(t);d(t,!0)},getContext:function(){const e=r[o],n=a[o];return{name:n,class:e,props:t[o],save:s.get(n)}},beforeSwitch:function(t){l.push(t)},size:function(){return a.length},index:function(){return o},removeByIndex:t=>{t>1&&f(t)}}})();let l,c=store.getSync("sys-settings"),u=!1;!async function(){n(3,l=await async function(){let t=await wallpaper.getWallpaper(),e="";return e="string"==typeof t?t:URL.createObjectURL(new Blob([t])),e}())}(),rem.on("__openMinePage",(()=>{window.Pager.openNew("我的",zn,{},!0)})),window.__changeBgPos=p,hooks.on("win:screen-move",((t,e,n)=>{d&&(d.style.setProperty("--top",n),d.style.setProperty("--left",e))})),hooks.on("win:max",(()=>p(0,0))),hooks.on("win:unmax",((t,e)=>{p(e[0],e[1])})),hooks.send("winbind:move");let d,f=1080;function p(t,e){u&&d&&(d.style.setProperty("--top",e),d.style.setProperty("--left",t))}(async()=>{let t=await ur(),e=await new Promise((t=>{hooks.once("win:screenSize",((e,n)=>{t(n)})),hooks.send("winquery:screenSize")}));window.Pager.select(0),n(5,f=e.width),p(t.x,t.y)})(),rem.on("useAcrylic",(t=>{document.body.style.setProperty("--dynamicControlLight",t?"var(--acrylicBackgroundColor)":"var(--controlBrighter)")})),rem.on("playerReady",(()=>{__setColor(document.body,d,1),requestIdleCallback((()=>{hooks.send("win:show-main")}))})),rem.on("changeControlColor",(t=>{document.body.style.setProperty("--controlHue",t)})),rem.on("useAcrylic",(async t=>{if(c.theme.useAcrylic=n(4,u=t),t){let t=await ur();p(t.x,t.y)}store.set("sys-settings",c)})),c||(c={theme:{controlColor:[2,39,148,210,270,292,322],useAcrylic:!1},beta:{showDevTools:!1},quality:{dataList:["低","中","高","最佳"],selected:3}},store.set("sys-settings",c));let h=c.theme.controlColor.slice(1),m=c.theme.controlColor[0];rem.emit("changeControlColor",h[m]),rem.emit("useAcrylic",c.theme.useAcrylic);let g=!1;return rem.on("__pageFold",(()=>{n(7,g=!0)})),rem.on("__pageUnfold",(()=>{n(7,g=!1)})),[o,a,i,l,u,f,d,g,function(t){et[t?"unshift":"push"]((()=>{d=t,n(6,d)}))},function(t){o=t,n(0,o)},function(t){a=t,n(1,a)},function(t){et[t?"unshift":"push"]((()=>{i=t,n(2,i)}))}]}let fr=new Map;const pr={async get(t){if(fr.has(t))return fr.get(t);let e=null,n=await hooks.invoke("store:get",t);try{e=JSON.parse(n)}catch(t){e=n}return null!=e?(fr.set(t,e),e):void 0},getSync(t){if(fr.has(t))return fr.get(t);let e=null,n=hooks.sendSync("store:getSync",t);try{e=JSON.parse(n)}catch(t){e=n}return null!=e?(fr.set(t,e),e):void 0},set:async(t,e)=>(fr.set(t,e),await hooks.invoke("store:set",t,"string"==typeof e?e:JSON.stringify(e))),setCache(t,e){fr.set(t,e)},rm:async t=>(fr.has(t)&&fr.delete(t),await hooks.invoke("store:rm",t)),clear(){for(const t of fr.keys())this.rm(t)}};return window.store=pr,window.rem=new ne({captureRejections:!0}),window.contextMap=new Map,rem.isBeta=!0,hooks.on("online",(()=>$i.setMessage("网络已恢复").display())),hooks.on("offline",(()=>$i.setMessage("网络连接出现问题").display())),he(),rem.on("audioDeviceChange",(async t=>{for(const e of t)if(e.deviceId===ue)return;de("default")})),(ie=store.getSync("process"))||(ie={delay:{delayTime:.1},gain:{gain:1},stereoPanner:{pan:0},fader:{fadeIn:.2,fadeOut:.2}},ge()),re.delayTime.value=ie.delay.delayTime,ae.gain.linearRampToValueAtTime(ie.gain.gain,oe.currentTime),ce.pan.value=ie.stereoPanner.pan,new class extends Mt{constructor(t){super(),Dt(this,t,dr,cr,a,{})}}({target:document.body})}();
